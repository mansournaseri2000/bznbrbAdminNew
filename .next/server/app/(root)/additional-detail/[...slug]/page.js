(()=>{var e={};e.id=291,e.ids=[291],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},42664:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),i(46601),i(13586),i(35866),i(28928);var n=i(23191),a=i(88716),s=i(37922),r=i.n(s),l=i(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let c=["",{children:["(root)",{children:["additional-detail",{children:["[...slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,46601)),"/Users/alihasani/Workspace/mansoor/bznbrbAdminNew/app/(root)/additional-detail/[...slug]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,13586)),"/Users/alihasani/Workspace/mansoor/bznbrbAdminNew/app/(root)/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,28928)),"/Users/alihasani/Workspace/mansoor/bznbrbAdminNew/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/alihasani/Workspace/mansoor/bznbrbAdminNew/app/(root)/additional-detail/[...slug]/page.tsx"],p="/(root)/additional-detail/[...slug]/page",u={require:i,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(root)/additional-detail/[...slug]/page",pathname:"/additional-detail/[...slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},24083:(e,t,i)=>{Promise.resolve().then(i.bind(i,29876))},29876:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>e2});var n=i(10326),a=i(76667),s=i(88538),r=i(17577),l=i.n(r),o=i(76812),c=i(39454),d=i(80635),p=i(51075);let u=async()=>(await d.x.get("/category?sort=asc")).data.data,x=async e=>(await d.x.post("/category/array",{categories:e})).data,h=async e=>{let t=(0,p.v7)(e);return(await d.x.post("category/createSubcategories",t)).data},g=async(e,t)=>(await d.x.patch(`/category/editCategory/${e}`,{name:t})).data,j=async e=>(await d.x.delete(`/category/delete/${e}`)).data,y=async e=>(await d.x.get(`/category/id/${e}`)).data.data[0],m=async()=>(await d.x.get("/features")).data.data,b=async e=>(await d.x.get(`/features/getFeatureGroup/${e}`)).data.data,f=async e=>(await d.x.post("/features/array",{features:e})).data,v=async e=>(await d.x.post("/features/addFeature",e)).data,w=async(e,t)=>(await d.x.patch(`/features/editFeatureGroup/${e}`,{name:t})).data,C=async(e,t)=>(await d.x.patch(`/features/editFeature/${e}`,{name:t})).data,k=async e=>(await d.x.delete(`/features/deleteFeature/${e}`)).data,I=async e=>(await d.x.delete(`/features/deleteFeatureGroup/${e}`)).data,O=async e=>{let t=new FormData;return t.append("type","PROVINCE"),t.append("position",e.position.toString()),t.append("file",e.file),t.append("provinceId",e.provinceId.toString()),(await d.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},R=async()=>(await d.x.get("/provinces/sorted/")).data.data,P=async e=>(await d.x.get(`/provinces/sorted/${e}`)).data.data,F=async e=>(await d.x.get(`/cities/id/${e}`)).data.data,D=async e=>(await d.x.post("/cities/array",{cities:e})).data,z=async e=>(await d.x.post("/town/create",e)).data,K=async e=>(await d.x.get(`/provinces/map/${e}`)).data.data,L=async e=>(await d.x.delete("/provinces/map",{data:e})).data,S=async e=>(await d.x.get(`/provinces/about/${e}`)).data.data,U=async e=>(await d.x.post("/provinces/detail",e)).data,$=async e=>(await d.x.patch("/provinces/detail",e)).data,Q=async e=>(await d.x.post("/provinces/about",e)).data,W=async(e,t)=>(await d.x.patch(`/cities/update/${e}`,{name:t})).data,Z=async(e,t)=>(await d.x.patch(`/town/update/${e}`,{name:t})).data,q=async e=>(await d.x.delete(`/cities/id/${e}`)).data,N=async e=>(await d.x.delete(`/town/${e}`)).data,B=async e=>(await d.x.delete("/upload/",{data:e})).data,T=async e=>{let t=new FormData;return t.append("type",e.type),t.append("categoryId",e.categoryId.toString()),t.append("file",e.file),(await d.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},V=async e=>{let t=new FormData;return t.append("type",e.type),t.append("categoryId",e.categoryId.toString()),t.append("file",e.file),(await d.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},_=async e=>{let t=new FormData;return t.append("type",e.type),t.append("feature_groupId",e.feature_groupId.toString()),t.append("file",e.file),(await d.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},A=async e=>{let t=new FormData;return t.append("type",e.type),t.append("feature_groupId",e.feature_groupId.toString()),t.append("file",e.file),(await d.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},E=async e=>{let t=new FormData;return t.append("type",e.type),t.append("featureId",e.featureId.toString()),t.append("file",e.file),(await d.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},M=async e=>{let t=new FormData;return t.append("type",e.type),t.append("featureId",e.featureId.toString()),t.append("file",e.file),(await d.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},Y=async e=>{let t=new FormData;return t.append("type",e.type),t.append("aboutId",e.aboutId.toString()),t.append("file",e.file),(await d.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},G=async e=>{let t=new FormData;return t.append("type",e.type),t.append("cityId",e.cityId.toString()),t.append("file",e.file),t.append("position",e.position),(await d.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},H=async e=>{let t=new FormData;return t.append("type",e.type),t.append("townId",e.townId.toString()),t.append("file",e.file),t.append("position",e.position),(await d.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},X=async e=>{let t=new FormData;return t.append("type",e.type),t.append("townId",e.townId.toString()),t.append("file",e.file),t.append("position",e.position),(await d.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data};var J=i(95441),ee=i(45313),et=i(92766),ei=i(58072),en=i(91629),ea=i(74723),es=i(44976),er=i(10119),el=i(57457),eo=i(98555),ec=i(23920),ed=i(46226),ep=i(8806),eu=i(71284);let ex=({type:e})=>(0,n.jsxs)(J.kC,{width:"100%",maxWidth:"160px",minWidth:"160px",direction:"column",align:"center",gap:"2",p:"36.5px 12px",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8,cursor:"pointer"},children:[n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[11]},children:"pic"===e?"آپلود تصویر":"icon"===e&&"آپلود آیکون"}),"pic"===e&&(0,n.jsxs)(J.xv,{...en.p.description2,style:{color:ei.K.gray[11],textAlign:"center"},children:["فایل تصویر را با فرمت png یا ",n.jsx("br",{})," jpeg وارد کنید"]}),"icon"===e&&(0,n.jsxs)(J.xv,{...en.p.description2,style:{color:ei.K.gray[11],textAlign:"center"},children:["فایل آیکون را با فرمت svg ",n.jsx("br",{})," وارد کنید"]}),n.jsx(eo.gq,{width:16,height:16})]}),eh=({data:e,setIsOpen:t})=>{let i=(0,ea.cI)({defaultValues:{imageFile:null,iconFile:null,pic:e?.banner?e.banner:"",icon:e?.icon?e?.icon:"",localPic:e?.banner?e?.banner:"",localIcon:e?.icon?e?.icon:"",name:e?.name,isResetPic:!e?.banner,isResetIcon:!e?.icon}}),{control:a,watch:s,setValue:r}=i,l=(0,es.NL)();console.log(s(),"watch");let{mutate:o}=(0,er.D)({mutationFn:async e=>await T(e)}),{mutate:c}=(0,er.D)({mutationFn:async e=>await V(e)}),{mutate:d,isPending:p}=(0,er.D)({mutationFn:async()=>await g(e.id,s("name")),onSuccess:i=>{if(!0===i.status){let i=s("imageFile"),n=s("iconFile");l.invalidateQueries({queryKey:["single-category"]}),l.invalidateQueries({queryKey:["categories"]}),i&&o({categoryId:String(e.id),file:i,type:"CATEGORY"}),n&&c({categoryId:String(e.id),file:n,type:"CATEGORY"}),l.invalidateQueries({queryKey:["single-category"]}),l.invalidateQueries({queryKey:["categories"]}),(0,et.xO)("دسته بندی مورد نظر با موفقیت ویرایش شد"),t({key:"edit-subCategory",isOpen:!1})}else(0,et.bW)("لطفا دوباره تلاش نمایید")}}),u=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},x=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localPic",URL.createObjectURL(n)),r("imageFile",n)}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localIcon",URL.createObjectURL(n)),r("iconFile",n)}};return(0,n.jsxs)(ea.RV,{...i,children:[(0,n.jsxs)(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:[n.jsx(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:(0,n.jsxs)(J.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{src:!1===s("isResetPic")?`https://uploader.bezanimbiroon.ir/${s("pic")}`:s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"pic"})]})})}),s("icon")?(0,n.jsxs)(J.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{width:64,height:64,src:!1===s("isResetIcon")?`https://uploader.bezanimbiroon.ir/${s("icon")}`:s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"icon"})]})})})]})}),n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:a,render:({field:e})=>n.jsx(J.nv,{...e,label:"نام زیر دسته بندی",placeholder:"نام زیر دسته بندی",selectedValue:!!e.value})})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit-subCategory",isOpen:!1}),onSubmit:()=>d(),isLoading:p})]})};var eg=i(35047);let ej=({setIsOpen:e,data:t,cityID:i})=>{let a=(0,ea.cI)({defaultValues:{imageFile:null,iconFile:null,pic:t?.banner?t.banner:"",icon:t?.icon?t?.icon:"",localPic:t?.banner?t?.banner:"",localIcon:t?.icon?t?.icon:"",name:t?.name,isResetPic:!t?.banner,isResetIcon:!t?.icon}}),{control:s,watch:l,setValue:o}=a,c=(0,es.NL)(),d=(0,eg.useParams)();console.log(t,"datadatadata");let{mutate:p,isIdle:u}=(0,er.D)({mutationFn:async e=>await H(e)}),{mutate:x,isIdle:h}=(0,er.D)({mutationFn:async e=>await X(e)}),{mutate:g,isPending:j}=(0,er.D)({mutationFn:async()=>await Z(t.id,l("name")),onSuccess:n=>{if(!0===n.status){let n=l("imageFile"),a=l("iconFile");n&&(p({townId:String(t.id),file:n,position:"picture",type:"TOWN"}),c.invalidateQueries({queryKey:["cities",d.slug[2]]}),c.invalidateQueries({queryKey:["single-city",i]})),a&&(x({townId:String(t.id),file:a,position:"vector",type:"TOWN"}),c.invalidateQueries({queryKey:["cities",d.slug[2]]}),c.invalidateQueries({queryKey:["single-city"]})),(0,et.xO)("شهرستان مورد نظر با موفقیت ویرایش شد"),e({key:"edit-town",isOpen:!1})}else(0,et.bW)("خطایی رخ داده است . لطفا دوباره تلاش نمایید")}}),y=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},m=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await y(i);t(URL.createObjectURL(n)),o("localPic",URL.createObjectURL(n)),o("imageFile",n)}},b=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await y(i);t(URL.createObjectURL(n)),o("localIcon",URL.createObjectURL(n)),o("iconFile",n)}};return(0,r.useEffect)(()=>{(u||h)&&console.log(u,h)},[u,h]),(0,n.jsxs)(ea.RV,{...a,children:[(0,n.jsxs)(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(J.kC,{gap:"3",children:[l("pic")?(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{src:!1===l("isResetPic")?`https://uploader.bezanimbiroon.ir/${l("pic")}`:l("isResetPic")&&"NULL"!==l("localPic")&&l("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"pic",control:s,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>m(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{o("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"pic",control:s,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>m(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"pic"})]})})}),l("icon")?(0,n.jsxs)(J.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{width:64,height:64,src:!1===l("isResetIcon")?`https://uploader.bezanimbiroon.ir/${l("icon")}`:l("isResetIcon")&&"NULL"!==l("localIcon")&&l("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"icon",control:s,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>b(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{o("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"icon",control:s,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>b(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"icon"})]})})})]}),n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:s,render:({field:e})=>n.jsx(J.nv,{...e,label:"نام شهرستان",placeholder:"نام شهر",selectedValue:!!e.value})})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({key:"edit-town",isOpen:!1}),onSubmit:()=>g(),isLoading:j})]})},ey=({setIsOpen:e,data:t})=>{let i=(0,ea.cI)({defaultValues:{imageFile:null,iconFile:null,pic:t?.banner?t.banner:"",icon:t?.icon?t?.icon:"",localPic:t?.banner?t?.banner:"",localIcon:t?.icon?t?.icon:"",name:t?.name,isResetPic:!t?.banner,isResetIcon:!t?.icon}}),{control:a,watch:s,setValue:r}=i,l=(0,es.NL)(),{mutate:o}=(0,er.D)({mutationFn:async e=>await E(e)}),{mutate:c}=(0,er.D)({mutationFn:async e=>await M(e)}),{mutate:d,isPending:p}=(0,er.D)({mutationFn:async()=>await C(t.id,s("name")),onSuccess:i=>{if(!0===i.status){let i=s("imageFile"),n=s("iconFile");l.invalidateQueries({queryKey:["feature-group"]}),l.invalidateQueries({queryKey:["features"]}),i&&o({featureId:String(t.id),file:i,type:"FEATURE"}),n&&c({featureId:String(t.id),file:n,type:"FEATURE"}),l.invalidateQueries({queryKey:["feature-group"]}),l.invalidateQueries({queryKey:["features"]}),(0,et.xO)(" ویژگی مورد نظر با موفقیت ویرایش شد"),e({key:"edit-feature",isOpen:!1})}else(0,et.bW)("لطفا دوباره تلاش نمایید")}}),u=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},x=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localPic",URL.createObjectURL(n)),r("imageFile",n)}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localIcon",URL.createObjectURL(n)),r("iconFile",n)}};return(0,n.jsxs)(ea.RV,{...i,children:[(0,n.jsxs)(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(J.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{src:!1===s("isResetPic")?`https://uploader.bezanimbiroon.ir/${s("pic")}`:s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"pic"})]})})}),s("icon")?(0,n.jsxs)(J.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{width:64,height:64,src:!1===s("isResetIcon")?`https://uploader.bezanimbiroon.ir/${s("icon")}`:s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"icon"})]})})})]}),n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:a,render:({field:e})=>n.jsx(J.nv,{...e,label:"نام ویژگی",placeholder:"نام ویژگی",selectedValue:!!e.value})})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({key:"edit-feature",isOpen:!1}),onSubmit:()=>d(),isLoading:p})]})},em=({label:e,hasMedia:t,type:i,id:a,data:s,cityID:l})=>{let[o,d]=(0,r.useState)({key:"edit-subCategory",isOpen:!1}),p=(0,es.NL)(),{mutate:u,isPending:x}=(0,er.D)({mutationFn:async()=>j(a),onSuccess:async e=>{!0===e.status?(p.invalidateQueries({queryKey:["single-category"]}),(0,et.xO)("زیر دسته بندی مورد نظر با موفقیت حذف شد"),d({...o,isOpen:!1})):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:h,isPending:g}=(0,er.D)({mutationFn:async()=>await k(a),onSuccess:e=>{!0===e.status?(p.invalidateQueries({queryKey:["feature-group"]}),(0,et.xO)("آیتم مورد نظر با موفقیت حذف شد"),d({...o,isOpen:!1})):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:y,isPending:m}=(0,er.D)({mutationFn:async()=>await N(a),onSuccess:e=>{!0===e.status?(p.invalidateQueries({queryKey:["single-city"]}),(0,et.xO)("شهر مورد نظر با موفقیت حذف شد"),d({...o,isOpen:!1})):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),b=e=>{switch(e){case"edit":"category"===i?d({isOpen:!0,key:"edit-subCategory"}):"feature"===i?d({isOpen:!0,key:"edit-feature"}):"town"===i&&d({isOpen:!0,key:"edit-town"});break;case"delete":"category"===i?d({isOpen:!0,key:"delete-subCategory"}):"feature"===i?d({isOpen:!0,key:"delete-feature"}):"town"===i&&d({isOpen:!0,key:"delete-town"})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{align:"center",gap:"3",p:"9.5px 16px",style:{backgroundColor:ei.K.gray[3],borderRadius:16},children:[t&&n.jsx(eo.eA,{width:14.13,height:14.13}),n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[11]},children:e}),n.jsx(J.hU,{variant:"surface",size:"1",onClick:()=>b("edit"),children:n.jsx(eo.z,{width:16,height:16})}),n.jsx(J.hU,{variant:"surface",size:"1",onClick:()=>b("delete"),children:n.jsx(eb,{width:16,height:16})})]}),(0,n.jsxs)(J.u_,{isOpen:o.isOpen,onClose:()=>d({...o,isOpen:!1}),children:["edit-subCategory"===o.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش زیر دسته بندی",handleClose:()=>d({...o,isOpen:!1})}),n.jsx(eh,{setIsOpen:()=>d({key:"edit-subCategory",isOpen:!1}),data:s})]}),"delete-subCategory"===o.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(J.xv,{children:["آیا از حذف زیر دسته بندی ",(0,n.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",e]})," اطمینان دارید؟"]}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>u(),children:n.jsx(J.xv,{...en.p.body3,children:x?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>d({...o,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]}),"edit-feature"===o.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش ویژگی",handleClose:()=>d({...o,isOpen:!1})}),n.jsx(ey,{setIsOpen:()=>d({key:"edit-feature",isOpen:!1}),data:s})]}),"delete-feature"===o.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(J.xv,{children:["آیا از حذف ویژگی ",(0,n.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",e]})," اطمینان دارید؟"]}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>h(),children:n.jsx(J.xv,{...en.p.body3,children:g?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>d({...o,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]}),"edit-town"===o.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش شهر",handleClose:()=>d({...o,isOpen:!1})}),n.jsx(ej,{setIsOpen:()=>d({key:"edit-town",isOpen:!1}),data:s,cityID:l})]}),"delete-town"===o.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(J.xv,{children:["آیا از حذف ویژگی ",(0,n.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",e]})," اطمینان دارید؟"]}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>y(),children:n.jsx(J.xv,{...en.p.body3,children:m?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>d({...o,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})]})]})},eb=(0,el.ZP)(eo.x8).withConfig({componentId:"sc-3bb444be-0"})(["path{fill:",";}"],ei.K.pink[11]);var ef=i(55193),ev=i(47914);let ew=({data:e,setIsOpen:t})=>{let i=(0,ea.cI)({defaultValues:{imageFile:null,iconFile:null,pic:e?.banner?e.banner:"",icon:e?.icon?e?.icon:"",localPic:e?.banner?e?.banner:"",localIcon:e?.icon?e?.icon:"",name:e?.name,isResetPic:!e.banner,isResetIcon:!e.icon}}),{control:a,watch:s,setValue:r}=i,l=(0,es.NL)(),{mutate:o}=(0,er.D)({mutationFn:async e=>await T(e)}),{mutate:c}=(0,er.D)({mutationFn:async e=>await V(e)}),{mutate:d,isPending:p}=(0,er.D)({mutationFn:async()=>await g(e.id,s("name")),onSuccess:i=>{if(!0===i.status){let i=s("imageFile"),n=s("iconFile");i&&o({categoryId:String(e.id),file:i,type:"CATEGORY"}),n&&c({categoryId:String(e.id),file:n,type:"CATEGORY"}),l.invalidateQueries({queryKey:["categories"]}),(0,et.xO)("دسته بندی مورد نظر با موفقیت ویرایش شد"),t({key:"edit-category",isOpen:!1})}else(0,et.bW)("لطفا دوباره تلاش نمایید")}}),u=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},x=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localPic",URL.createObjectURL(n)),r("imageFile",n)}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localIcon",URL.createObjectURL(n)),r("iconFile",n)}};return(0,n.jsxs)(ea.RV,{...i,children:[(0,n.jsxs)(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(J.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{src:!1===s("isResetPic")?`https://uploader.bezanimbiroon.ir/${s("pic")}`:s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"pic"})]})})}),s("icon")?(0,n.jsxs)(J.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{width:64,height:64,src:!1===s("isResetIcon")?`https://uploader.bezanimbiroon.ir/${s("icon")}`:s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"icon"})]})})})]}),n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:a,render:({field:e})=>n.jsx(J.nv,{...e,label:"نام دسته بندی",placeholder:"نام دسته بندی",selectedValue:!!e.value})})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit-category",isOpen:!1}),onSubmit:()=>d(),isLoading:p})]})},eC=(0,r.forwardRef)((e,t)=>{let{name:i,id:s,isEditable:l,selected:o,onSelect:d}=e,[p,u]=(0,r.useState)({isOpen:!1,key:"edit-category"}),x=(0,es.NL)(),{control:g,watch:m,setValue:b,getValues:f}=(0,ea.cI)({defaultValues:{name:""}}),{data:v,isLoading:w,isFetching:C}=(0,a.a)({queryKey:["single-category",s],queryFn:async()=>y(s),initialData:e,enabled:o}),{mutate:k,isPending:I}=(0,er.D)({mutationFn:async()=>j(s),onSuccess:async e=>{!0===e.status?(x.invalidateQueries({queryKey:["categories"]}),(0,et.xO)("دسته بندی مورد نظر با موفقیت حذف شد"),u({...p,isOpen:!1})):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:O,isPending:R}=(0,er.D)({mutationFn:async()=>h({name:m("name"),parent_id:s}),onSuccess:async e=>{!0===e.status?(x.invalidateQueries({queryKey:["single-category"]}),b("name",""),(0,et.xO)("زیر دسته بندی مورد نظر با موفقیت ایجاد شد")):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),P=()=>{let e=f("name").trim();if(!e){(0,et.bW)("نام زیر دسته بندی نمی‌تواند خالی باشد");return}if(v&&v.children.some(t=>t.name===e)){(0,et.bW)("زیر دسته بندی تکراری است");return}O()};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(J.rj,{width:"100%",gapY:"5",ref:t,onClick:()=>{d()},children:n.jsx(ev.default,{isOpen:!0,hero:i,withEdit:!0,withDelete:!0,hasMedia:!0===v.hasMedia,isDisableDelete:!1===l,onEdit:e=>{e.stopPropagation(),u({key:"edit-category",isOpen:!0}),d()},onDelete:e=>{e.stopPropagation(),u({key:"delete-category",isOpen:!0})},children:(0,n.jsxs)(J.kC,{direction:"column",gap:"5",children:[n.jsx(J.kC,{width:"100%",align:"center",gap:"5",wrap:"wrap",children:w||C?n.jsx(c.$j,{style:{margin:"0 auto",scale:1.2}}):v?.children.length===0?(0,n.jsxs)(J.kC,{direction:"column",gap:"5",children:[n.jsx(J.xv,{...en.p.title1,style:{color:ei.K.gray[11]},children:"هنوز زیر دسته بندی اضافه نشده است."}),n.jsx(J.xv,{...en.p.paragraph2,style:{color:ei.K.gray[11]},children:"از فیلد زیر استفاده کنید و زیردسته بندی را به لیست اضافه کنید."})]}):n.jsx(n.Fragment,{children:v?.children.map(e=>n.jsx(em,{cityID:1,type:"category",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))})}),n.jsx(J.xu,{width:"40%",children:n.jsx(ea.Qr,{name:"name",control:g,render:({field:e})=>n.jsx(ef.Z,{...e,placeholder:"افزودن زیر دسته بندی",onClick:()=>P(),isLoading:R})})})]})})}),(0,n.jsxs)(J.u_,{isOpen:p.isOpen,onClose:()=>u({...p,isOpen:!1}),children:["edit-category"===p.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش دسته بندی",handleClose:()=>u({...p,isOpen:!1})}),n.jsx(ew,{setIsOpen:()=>u({key:"edit-category",isOpen:!1}),data:v??{name:"",id:null}})]}),"delete-category"===p.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(J.xv,{children:["آیا از حذف دسته بندی ",n.jsx("span",{style:{color:"red",fontWeight:"bold"},children:i})," اطمینان دارید؟"," "]}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>k(),children:n.jsx(J.xv,{...en.p.body3,children:I?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>u({...p,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})]})]})}),ek=({data:e,setIsOpen:t})=>{let{control:i,watch:a,setValue:s,getValues:r}=(0,ea.cI)({defaultValues:{name:"",parent_id:0,categoryList:e.map(e=>e.name)}}),l=(0,es.NL)(),{mutate:o,isPending:c}=(0,er.D)({mutationFn:async e=>await x(e),onSuccess:e=>{!0===e.status?((0,et.xO)("دسته بندی مورد نظر با موفقیت ایجاد شد"),l.invalidateQueries({queryKey:["categories"]}),t(!1)):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),d=()=>{let e=r("name").trim(),t=r("categoryList");e&&!t?.includes(e)?(s("categoryList",[...t,e]),s("name","")):e?e&&(0,et.bW)("دسته بندی تکراری است"):(0,et.bW)("نام دسته بندی نمی‌تواند خالی باشد")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{direction:"column",p:"12px 16px",gap:"4",children:[n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:i,render:({field:e})=>n.jsx(ef.Z,{...e,placeholder:"افزودن دسته بندی",onClick:()=>d()})})}),n.jsx(J.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:`1px solid ${ei.K.gray[7]}`,borderRadius:8},children:a("categoryList").map((e,t)=>n.jsx(J.xu,{p:"9.5px 16px",style:{backgroundColor:ei.K.gray[3],borderRadius:16},children:n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[11]},children:e})},t))})]}),n.jsx(eu.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onSubmit:()=>{let t=r("categoryList"),i=e.map(e=>e.name),n=t.filter(e=>!i.includes(e)).map(e=>({name:e,parent_id:0}));n.length>0?o(n):(0,et.bW)("هیچ دسته بندی جدیدی اضافه نشده است")},onCloseButton:()=>t(!1),isLoading:c})]})},eI=()=>{let[e,t]=(0,r.useState)(!1),[i,s]=(0,r.useState)(null),{data:l,isLoading:d,isFetching:p,isError:x}=(0,a.a)({queryKey:["categories"],queryFn:async()=>await u()});return d||p?n.jsx(J.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:n.jsx(c.$j,{style:{scale:3}})}):!l||x?(0,et.bW)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{width:"100%",direction:"column",gap:"5",children:[n.jsx(J.kC,{width:"100%",align:"center",justify:"between",children:n.jsx(J.zx,{size:"3",variant:"ghost",onClick:()=>t(!0),style:{paddingBlock:11.5},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:"افزودن دسته بندی"})]})})}),l?.map((e,t)=>n.jsx(eC,{selected:i===e.id,onSelect:()=>s(e.id),currentIndex:t,...e},e.id))]}),(0,n.jsxs)(J.u_,{isOpen:e,onClose:()=>t(!1),children:[n.jsx(ee.Z,{title:"افزودن دسته بندی",handleClose:()=>t(!1)}),n.jsx(ek,{data:l,setIsOpen:t})]})]})},eO=({setIsOpen:e,data:t})=>{let i=Number((0,eg.useParams)().slug[2]),{control:a,watch:s,getValues:r,setValue:l}=(0,ea.cI)({defaultValues:{name:"",provinceId:i,cityList:t?.map(e=>e.name)}}),o=(0,es.NL)(),{mutate:c,isPending:d}=(0,er.D)({mutationFn:async e=>await D(e),onSuccess:t=>{!0===t.status?((0,et.xO)("شهرستان مورد نظر با موفقیت ایجاد شد"),o.invalidateQueries({queryKey:["cities"]}),e(!1)):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),p=()=>{let e=r("name").trim(),t=r("cityList");e&&!t?.includes(e)?(l("cityList",[...t,e]),l("name","")):e?(0,et.bW)("شهرستان تکراری است"):e||(0,et.bW)("نام شهرستان نمی‌تواند خالی باشد")},u=()=>{let e=r("cityList"),n=t.map(e=>e.name),a=e.filter(e=>!n.includes(e)).map(e=>({name:e,provinceId:i}));a.length>0?c(a):(0,et.bW)("هیچ شهرستان جدیدی اضافه نشده است")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{direction:"column",p:"12px 16px",gap:"4",children:[n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:a,render:({field:e})=>n.jsx(ef.Z,{...e,placeholder:"افزودن شهرستان",onClick:()=>p()})})}),n.jsx(J.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:`1px solid ${ei.K.gray[7]}`,borderRadius:8},children:s("cityList").map((e,t)=>n.jsx(J.xu,{p:"9.5px 16px",style:{backgroundColor:ei.K.gray[3],borderRadius:16},children:n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[11]},children:e})},t))})]}),n.jsx(eu.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onSubmit:()=>u(),onCloseButton:()=>e(!1),isLoading:d})]})},eR=({setIsOpen:e,data:t})=>{let i=(0,ea.cI)({defaultValues:{imageFile:null,iconFile:null,pic:t?.banner?t.banner:"",icon:t?.icon?t?.icon:"",localPic:t?.banner?t?.banner:"",localIcon:t?.icon?t?.icon:"",name:t?.name,isResetPic:!t.banner,isResetIcon:!t.icon}}),{control:a,watch:s,setValue:l}=i,o=(0,es.NL)();console.log(t,"EditCityModalEditCityModalEditCityModal");let{mutate:c,isSuccess:d}=(0,er.D)({mutationFn:async e=>await G(e)}),{mutate:p,isPending:u}=(0,er.D)({mutationFn:async()=>await W(t.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("imageFile"),i=s("iconFile");e&&c({cityId:String(t.id),file:e,position:"picture",type:"CITY"}),i&&c({cityId:t.id,file:i,position:"vector",type:"CITY"}),(0,et.xO)("شهر مورد نظر با موفقیت ویرایش شد")}else(0,et.bW)("لطفا دوباره تلاش نمایید")}});(0,r.useEffect)(()=>{d&&(o.invalidateQueries({queryKey:["cities"]}),o.invalidateQueries({queryKey:["single-city"]}))},[d]);let x=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localPic",URL.createObjectURL(n)),l("imageFile",n)}},g=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localIcon",URL.createObjectURL(n)),l("iconFile",n)}};return(0,n.jsxs)(ea.RV,{...i,children:[(0,n.jsxs)(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(J.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{src:!1===s("isResetPic")?`https://uploader.bezanimbiroon.ir/${s("pic")}`:s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{l("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"pic"})]})})}),s("icon")?(0,n.jsxs)(J.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{width:64,height:64,src:!1===s("isResetIcon")?`https://uploader.bezanimbiroon.ir/${s("icon")}`:s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>g(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{l("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>g(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"icon"})]})})})]}),n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:a,render:({field:e})=>n.jsx(J.nv,{...e,label:"نام شهرستان",placeholder:"نام شهرستان",selectedValue:!!e.value})})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({key:"edit",isOpen:!1}),onSubmit:()=>p(),isLoading:u})]})},eP=(0,r.forwardRef)((e,t)=>{let{name:i,id:s,hasMedia:l,onSelect:o,isOpen:d,selectedId:p}=e,[u,x]=(0,r.useState)({isOpen:!1,key:"edit"}),{control:h,watch:g,getValues:j,setValue:y}=(0,ea.cI)({defaultValues:{name:""}}),m=(0,es.NL)(),{data:b,isLoading:f,isFetching:v}=(0,a.a)({queryKey:["single-city",p],queryFn:async()=>F(p)}),{mutate:w,isPending:C}=(0,er.D)({mutationFn:async()=>await z({name:g("name"),citiesId:s}),onSuccess:e=>{!0===e.status?(m.invalidateQueries({queryKey:["single-city"]}),(0,et.xO)("شهر مورد نظر با موفقیت اضافه شد"),y("name","")):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:k,isPending:I}=(0,er.D)({mutationFn:async()=>await q(s),onSuccess:e=>{!0===e.status?(m.invalidateQueries({queryKey:["cities"]}),(0,et.xO)("شهر مورد نظر با موفقیت حذف شد")):(0,et.bW)("مشکلی پیش آمده . لطفا مجددا تلاش کنید")}}),O=()=>{let e=j("name").trim();if(!e){(0,et.bW)("نام شهر نمی‌تواند خالی باشد");return}if(b?.children.some(t=>t.name===e)){(0,et.bW)("این شهر از قبل وجود دارد");return}w()};return console.log(b,"cityDatacityDatacityData"),(0,n.jsxs)(n.Fragment,{children:[n.jsx(J.rj,{width:"100%",gapY:"5",ref:t,onClick:o,children:n.jsx(ev.default,{isOpen:d,hero:i,withEdit:!0,withDelete:!0,hasMedia:!0===l,onEdit:e=>{e.stopPropagation(),x({key:"edit",isOpen:!0}),o()},onDelete:e=>{e.stopPropagation(),x({key:"delete",isOpen:!0})},children:(0,n.jsxs)(J.kC,{direction:"column",gap:"5",children:[f||v?n.jsx(c.$j,{style:{margin:"0 auto",scale:1.2}}):b?.children.length===0?(0,n.jsxs)(J.kC,{direction:"column",gap:"5",children:[n.jsx(J.xv,{...en.p.title1,style:{color:ei.K.gray[11]},children:"هنوز شهری اضافه نشده است."}),n.jsx(J.xv,{...en.p.paragraph2,style:{color:ei.K.gray[11]},children:"از فیلد زیر استفاده کنید و شهر را به لیست اضافه کنید."})]}):n.jsx(J.kC,{width:"100%",align:"center",gap:"5",wrap:"wrap",children:b?.children.map(e=>n.jsx(em,{type:"town",label:e.name,cityID:p,hasMedia:e.hasMedia,id:e.id,data:e},e.id))}),n.jsx(J.xu,{width:"40%",children:n.jsx(ea.Qr,{name:"name",control:h,render:({field:e})=>n.jsx(ef.Z,{...e,placeholder:"افزودن شهر",onClick:()=>O(),isLoading:C})})})]})})}),(0,n.jsxs)(J.u_,{isOpen:u.isOpen,onClose:()=>x({...u,isOpen:!1}),children:["edit"===u.key&&!!b&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش شهرستان",handleClose:()=>x({...u,isOpen:!1})}),n.jsx(eR,{setIsOpen:()=>x({key:"edit",isOpen:!1}),data:b})]}),"delete"===u.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(J.xv,{...en.p.title1,style:{color:ei.K.gray[11]},children:["آیا از حذف شهرستان ",n.jsx("span",{style:{fontWeight:"bold",color:"red"},children:i})," اطمینان دارید؟"]}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>k(),children:n.jsx(J.xv,{...en.p.body3,children:I?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>x({...u,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})]})]})}),eF=l().memo(eP),eD=()=>{let[e,t]=(0,r.useState)(!1),[i,s]=(0,r.useState)(null),l=Number((0,eg.useParams)().slug[2]),{data:d,isLoading:p,isFetching:u,isError:x}=(0,a.a)({queryKey:["cities",l],queryFn:async()=>await P(l)});return p||u?n.jsx(J.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:n.jsx(c.$j,{style:{scale:3}})}):!d||x?(0,et.bW)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{width:"100%",direction:"column",gap:"5",children:[n.jsx(J.kC,{width:"100%",align:"center",justify:"between",children:n.jsx(J.zx,{size:"3",variant:"ghost",onClick:()=>t(!0),style:{paddingBlock:"11.5px"},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:"افزودن شهرستان"})]})})}),d?.children.map((e,t)=>n.jsx(eF,{selectedId:Number(i),selected:i===e.id,isOpen:i===e.id,onSelect:()=>s(e.id),currentIndex:t,...e},e.id))]}),(0,n.jsxs)(J.u_,{isOpen:e,onClose:()=>t(!1),children:[n.jsx(ee.Z,{title:"افزودن شهرستان",handleClose:()=>t(!1)}),n.jsx(eO,{setIsOpen:t,data:d.children})]})]})},ez=({setIsOpen:e,data:t})=>{let i=(0,ea.cI)({defaultValues:{imageFile:null,iconFile:null,pic:t?.banner?t.banner:"",icon:t?.icon?t?.icon:"",localPic:t?.banner?t?.banner:"",localIcon:t?.icon?t?.icon:"",name:t?.name,isResetPic:!t.banner,isResetIcon:!t.icon}}),{control:a,watch:s,setValue:r}=i,l=(0,es.NL)(),{mutate:o}=(0,er.D)({mutationFn:async e=>await _(e)}),{mutate:c}=(0,er.D)({mutationFn:async e=>await A(e)}),{mutate:d,isPending:p}=(0,er.D)({mutationFn:async()=>await w(t.id,s("name")),onSuccess:i=>{if(!0===i.status){let i=s("imageFile"),n=s("iconFile");l.invalidateQueries({queryKey:["features"]}),i&&o({feature_groupId:String(t.id),file:i,type:"FEATURE_GROUP"}),n&&c({feature_groupId:String(t.id),file:n,type:"FEATURE_GROUP"}),l.invalidateQueries({queryKey:["features"]}),(0,et.xO)(" ویژگی مورد نظر با موفقیت ویرایش شد"),e({key:"edit",isOpen:!1})}else(0,et.bW)("لطفا دوباره تلاش نمایید")}}),u=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},x=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localPic",URL.createObjectURL(n)),r("imageFile",n)}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await u(i);t(URL.createObjectURL(n)),r("localIcon",URL.createObjectURL(n)),r("iconFile",n)}};return(0,n.jsxs)(ea.RV,{...i,children:[(0,n.jsxs)(J.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(J.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{src:!1===s("isResetPic")?`https://uploader.bezanimbiroon.ir/${s("pic")}`:s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"pic",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>x(t,e.onChange),accept:{"image/*":[".jpeg",".png"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"pic"})]})})}),s("icon")?(0,n.jsxs)(J.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(ed.default,{width:64,height:64,src:!1===s("isResetIcon")?`https://uploader.bezanimbiroon.ir/${s("icon")}`:s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.hU,{onClick:()=>{r("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:n.jsx(eo.BN,{})})]})})})]}):n.jsx(ea.Qr,{name:"icon",control:a,render:({field:e})=>n.jsx(ec.ZP,{onDrop:t=>h(t,e.onChange),accept:{"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(ex,{type:"icon"})]})})})]}),n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:a,render:({field:e})=>n.jsx(J.nv,{...e,label:"نام دسته ویژگی",placeholder:"نام دسته ویژگی",selectedValue:!!e.value})})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({key:"edit",isOpen:!1}),onSubmit:()=>d(),isLoading:p})]})},eK=(0,r.forwardRef)((e,t)=>{let{id:i,name:s,selected:l,onSelect:o}=e,[d,p]=(0,r.useState)({isOpen:!1,key:"edit"}),{control:u,watch:x,setValue:h,getValues:g}=(0,ea.cI)({defaultValues:{name:""}}),j=(0,es.NL)(),{data:y,isLoading:m,isFetching:f}=(0,a.a)({queryKey:["feature-group",l],queryFn:async()=>await b(i),initialData:e,enabled:l}),{mutate:w,isPending:C}=(0,er.D)({mutationFn:async()=>await v({name:x("name"),featureGroupid:i}),onSuccess:e=>{!0===e.status?(j.invalidateQueries({queryKey:["feature-group"]}),(0,et.xO)("ویژگی مورد نظر با موفقیت ایجاد شد"),h("name","")):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:k,isPending:O}=(0,er.D)({mutationFn:async()=>await I(i),onSuccess:e=>{!0===e.status?(j.invalidateQueries({queryKey:["features"]}),(0,et.xO)("ویژگی مورد نظر با موفقیت حذف شد")):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),R=()=>{let e=g("name").trim();if(!e){(0,et.bW)("نام ویژگی نمی‌تواند خالی باشد");return}if(y.features.some(t=>t.name===e)){(0,et.bW)("این ویژگی از قبل وجود دارد");return}w()};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(J.rj,{width:"100%",gapY:"5",ref:t,onClick:o,children:n.jsx(ev.default,{isOpen:!0,hero:s,withEdit:!0,withDelete:!0,hasMedia:!0===y.hasMedia,isDisableDelete:!0,onEdit:e=>{e.stopPropagation(),o(),p({key:"edit",isOpen:!0})},onDelete:e=>{e.stopPropagation(),p({key:"delete",isOpen:!0})},children:(0,n.jsxs)(J.kC,{direction:"column",gap:"5",children:[n.jsx(J.kC,{width:"100%",gap:"5",align:"center",wrap:"wrap",children:m||f?n.jsx(c.$j,{style:{margin:"0 auto",scale:1.2}}):y?.features?.length===0?(0,n.jsxs)(J.kC,{direction:"column",gap:"5",children:[n.jsx(J.xv,{...en.p.title1,style:{color:ei.K.gray[11]},children:"هنوز ویژگی اضافه نشده است."}),n.jsx(J.xv,{...en.p.paragraph2,style:{color:ei.K.gray[11]},children:"از فیلد زیر استفاده کنید و ویژگی را به لیست اضافه کنید."})]}):n.jsx(n.Fragment,{children:y?.features.map(e=>n.jsx(em,{cityID:1,type:"feature",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))})}),n.jsx(J.xu,{width:"40%",children:n.jsx(ea.Qr,{name:"name",control:u,render:({field:e})=>n.jsx(ef.Z,{...e,placeholder:"افزودن ویژگی",onClick:()=>R(),isLoading:C})})})]})})}),(0,n.jsxs)(J.u_,{isOpen:d.isOpen,onClose:()=>p({...d,isOpen:!1}),children:["delete"!==d.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش دسته ویژگی",handleClose:()=>p({...d,isOpen:!1})}),n.jsx(ez,{setIsOpen:()=>p({key:"edit",isOpen:!1}),data:e})]}),"delete"===d.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(J.xv,{...en.p.title1,style:{color:ei.K.gray[11]},children:["آیا از حذف دسته ویژگی ",n.jsx("span",{style:{fontWeight:"bold",color:"red"},children:s})," اطمینان دارید؟"]}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>k(),children:n.jsx(J.xv,{...en.p.body3,children:O?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>p({...d,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})]})]})}),eL=l().memo(eK),eS=({setIsOpen:e,data:t})=>{let{control:i,watch:a,getValues:s,setValue:r}=(0,ea.cI)({defaultValues:{name:"",featureGroupid:0,featureList:t.map(e=>e.name)}}),l=(0,es.NL)(),{mutate:o,isPending:c}=(0,er.D)({mutationFn:async e=>await f(e),onSuccess:t=>{!0===t.status?((0,et.xO)("ویژگی مورد نظر با موفقیت ایجاد شد"),l.invalidateQueries({queryKey:["features"]}),e(!1)):(0,et.bW)("لطفا دوباره تلاش نمایید")}}),d=()=>{let e=s("name").trim(),t=s("featureList");e&&!t?.includes(e)?(r("featureList",[...t,e]),r("name","")):e?(0,et.bW)("دسته ویژگی تکراری است"):e||(0,et.bW)("نام دسته ویژگی نمی‌تواند خالی باشد")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{direction:"column",p:"12px 16px",gap:"4",children:[n.jsx(J.xu,{width:"50%",children:n.jsx(ea.Qr,{name:"name",control:i,render:({field:e})=>n.jsx(ef.Z,{...e,placeholder:"افزودن دسته ویژگی",onClick:()=>d()})})}),n.jsx(J.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:`1px solid ${ei.K.gray[7]}`,borderRadius:8},children:a("featureList").map((e,t)=>n.jsx(J.xu,{p:"9.5px 16px",style:{backgroundColor:ei.K.gray[3],borderRadius:16},children:n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[11]},children:e})},t))})]}),n.jsx(eu.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onCloseButton:()=>e(!1),onSubmit:()=>{let e=s("featureList"),i=t.map(e=>e.name),n=e.filter(e=>!i.includes(e)).map(e=>({name:e,featureGroupid:0}));n.length>0?o(n):(0,et.bW)("هیچ ویژگی جدیدی اضافه نشده است")},isLoading:c})]})},eU=()=>{let[e,t]=(0,r.useState)(!1),[i,s]=(0,r.useState)(null),{data:l,isLoading:d,isFetching:p,isError:u}=(0,a.a)({queryKey:["features"],queryFn:async()=>await m()});return(console.log("feature",l),d||p)?n.jsx(J.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:n.jsx(c.$j,{style:{scale:3}})}):!l||u?(0,et.bW)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.kC,{width:"100%",direction:"column",gap:"5",children:[n.jsx(J.zx,{size:"4",variant:"ghost",style:{width:"fit-content",paddingBlock:11.5},onClick:()=>t(!0),children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:"افزودن دسته ویژگی"})]})}),l?.map((e,t)=>n.jsx(eL,{selected:i===e.id,onSelect:()=>s(e.id),currentIndex:t,...e},e.id))]}),(0,n.jsxs)(J.u_,{isOpen:e,onClose:()=>t(!1),children:[n.jsx(ee.Z,{title:"افزودن دسته ویژگی",handleClose:()=>t(!1)}),n.jsx(eS,{data:l,setIsOpen:t})]})]})};var e$=i(98266);let eQ=({submitButtonText:e,closeButtonText:t,buttonsPosition:i,isLoading:a,disabled:s,onCloseButton:r,onSubmit:l})=>(0,n.jsxs)(J.kC,{width:"100%",align:"center",justify:i,gap:"5",p:"4",style:{border:`1px solid ${ei.K.gray[6]}`,borderRadius:8,backgroundColor:ei.K.gray[2]},children:[n.jsx(J.zx,{size:"3",variant:"soft",disabled:s,style:{padding:"13.5px 48.5px"},onClick:l,children:a?n.jsx(c.$j,{}):n.jsx(J.xv,{...en.p.body1,children:e})}),n.jsx(J.zx,{size:"3",colorVariant:"PINK",style:{padding:"13.5px 48.5px"},onClick:r,children:n.jsx(J.xv,{...en.p.body1,children:t})})]});var eW=i(65128);let eZ=({setIsOpen:e})=>{let t=Number((0,eg.useParams)().slug[2]),{control:i,watch:a}=(0,ea.cI)({defaultValues:{type:"PROVINCE",titleItem:"",descriptionItem:"",id:t}}),s=(0,es.NL)(),{mutate:r,isPending:l}=(0,er.D)({mutationFn:async()=>await U(a()),onSuccess:t=>{!0===t.status?(s.invalidateQueries({queryKey:["province-area"]}),(0,et.xO)("جاذبه‌ی مورد نظر با موفقیت افزوده شد"),e({key:"add",isOpen:!0})):(0,et.bW)("خطایی رخ داده است")}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.rj,{width:"100%",p:"4",mt:"12px",gapY:"14px",children:[n.jsx(ea.Qr,{name:"titleItem",control:i,render:({field:e})=>n.jsx(J.nv,{...e,label:"عنوان جاذبه",placeholder:"عنوان جاذبه",selectedValue:!!e.value})}),n.jsx(ea.Qr,{name:"descriptionItem",control:i,render:({field:e})=>n.jsx(J.Kx,{...e,label:"توضیح جاذبه",placeholder:"توضیح جاذبه",selectedValue:!!e.value,rows:5})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({isOpen:!1,key:"add"}),onSubmit:()=>r(),isLoading:l,disabled:0===a("titleItem").length&&0===a("descriptionItem").length})]})};var eq=i(71460);let eN=({name:e,children:t,errorText:i,style:a,localPath:s,resetStore:r})=>{let{control:l,setValue:o}=(0,ea.Gc)(),c=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},d=async(t,i)=>{if(t&&t[0]){let n=t[0],a=await c(n);i(URL.createObjectURL(a)),o(e,a),o(s,URL.createObjectURL(a)),o(r,!1)}};return n.jsx(ea.Qr,{name:e,control:l,render:({field:e})=>(0,n.jsxs)(J.kC,{width:"max-content",position:"relative",direction:"column",style:a,children:[n.jsx(ec.ZP,{onDrop:t=>{d(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:i})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...i()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:t})]})}),i&&n.jsx(eq.Z,{text:i})]})})},eB=({filePath:e,type:t,localPath:i,isOrigin:a,resetStore:s})=>(0,n.jsxs)(J.xu,{width:"160px",height:"160px",position:"relative",style:{border:`1px dashed ${ei.K.blue[8]}`,borderRadius:8},children:[n.jsx(J.kC,{align:"center",justify:"center",height:"100%",children:n.jsx(ed.default,{src:a?`https://uploader.bezanimbiroon.ir/${e}`:i,alt:"item image or icon",width:80,height:80})}),n.jsx(eN,{resetStore:s,localPath:"image"===t?"localImagePath":"localIconPath",name:"image"===t?"imagePath":"iconPath",style:{position:"absolute",bottom:0},children:n.jsx(J.hU,{children:n.jsx(eo.BN,{})})})]}),eT=({setIsOpen:e,data:t})=>{let i=(0,ea.cI)({defaultValues:{iconPath:t?.pathItem,localIconPath:null,isIcon:!!t?.pathItem}}),{watch:a}=i,s=(0,es.NL)();console.log("DATA IN MODAL",t);let{mutate:r,isPending:l}=(0,er.D)({mutationFn:async()=>await Y({aboutId:t.id,type:"AREA_DETAIL",file:a("iconPath")}),onSuccess:t=>{!0===t.status?(s.invalidateQueries({queryKey:["province-area"]}),(0,et.xO)("آیکون مورد نظر با موفقیت آپلود شد"),e({key:"svg",isOpen:!1})):(0,et.bW)("مشکلی پیش آمده است . لطفا مجددا تلاش نمایید")}});return console.log(t,"data"),console.log(a(),"dfsdafdf"),(0,n.jsxs)(ea.RV,{...i,children:[n.jsx(J.kC,{width:"100%",py:"4",align:"center",justify:"center",children:a("iconPath")?n.jsx(eB,{resetStore:"isIcon",type:"svg",localPath:`${a("localIconPath")}`,filePath:t?.pathItem,isOrigin:a("isIcon")}):n.jsx(eN,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:n.jsx(ex,{type:"icon"})})}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({key:"svg",isOpen:!1}),onSubmit:()=>r(),isLoading:l})]})},eV=({setIsOpen:e,currentItem:t})=>{let{control:i,setValue:a}=(0,ea.Gc)(),s=(0,ea.qo)({name:"titleItem",defaultValue:""}),l=(0,ea.qo)({name:"descriptionItem",defaultValue:""}),o=(0,es.NL)(),{mutate:c,isPending:d}=(0,er.D)({mutationFn:async()=>await $({titleItem:s,descriptionItem:l,id:t?.id||0}),onSuccess:t=>{!0===t.status?(o.invalidateQueries({queryKey:["province-area"]}),(0,et.xO)("جاذبه‌ی مورد نظر با موفقیت ویرایش شد"),e({key:"edit",isOpen:!0})):(0,et.bW)("خطایی رخ داده است")}});return(0,r.useEffect)(()=>{t&&(a("titleItem",t.titleItem),a("descriptionItem",t.descriptionItem))},[t,a]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.rj,{width:"100%",p:"4",mt:"12px",gapY:"14px",children:[n.jsx(ea.Qr,{name:"titleItem",control:i,render:({field:e})=>n.jsx(J.nv,{...e,label:"عنوان جاذبه",placeholder:"عنوان جاذبه",selectedValue:!!e.value})}),n.jsx(ea.Qr,{name:"descriptionItem",control:i,render:({field:e})=>n.jsx(J.Kx,{...e,label:"توضیح جاذبه",placeholder:"توضیح جاذبه",selectedValue:!!e.value,rows:5})})]}),n.jsx(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>e({isOpen:!1,key:"edit"}),isLoading:d,onSubmit:()=>c(),disabled:0===s.trim().length||0===l.trim().length})]})},e_=()=>{let e=Number((0,eg.useParams)().slug[2]),{data:t,isLoading:i,isFetching:s}=(0,a.a)({queryKey:["province-area",e],queryFn:async()=>await S(e),staleTime:0}),[l,d]=(0,r.useState)({isOpen:!1,key:"add"}),[p,u]=(0,r.useState)(),{back:x}=(0,e$.tv)(),h=(0,ea.cI)({defaultValues:{id:e,type:"PROVINCE",titleOfDetail:t?.titleOfDetail?t?.titleOfDetail:"",famousPerson:t?.famousPerson?t?.famousPerson:"",infoDescription:t?.infoDescription?t?.infoDescription:"",areaDetails:t?.AreaDetails?t?.AreaDetails:[],titleItem:p?.titleItem?p?.titleItem:"",descriptionItem:p?.descriptionItem?p?.descriptionItem:""}}),{control:g,setValue:j,watch:y}=h;console.log("data",t);let{mutate:m,isPending:b}=(0,er.D)({mutationFn:async e=>await Q(e),onSuccess:e=>{!0===e.status?((0,et.xO)("اطلاعات استان با موفقیت بروزرسانی شد"),x()):(0,et.bW)("مشکلی پیش آمده است . لطفا مجددا تلاش نمایید")}});(0,r.useEffect)(()=>{t&&(j("titleOfDetail",t.titleOfDetail||""),j("famousPerson",t.famousPerson||""),j("infoDescription",t.infoDescription||""),j("areaDetails",t.AreaDetails||[]))},[t,j]),(0,r.useEffect)(()=>{p&&(j("titleItem",p.titleItem),j("descriptionItem",p.descriptionItem))},[p]);let f=()=>{m({id:e,type:"PROVINCE",titleOfDetail:y("titleOfDetail"),famousPerson:y("famousPerson"),infoDescription:y("infoDescription")})};return(0,n.jsxs)(ea.RV,{...h,children:[(0,n.jsxs)(J.rj,{width:"100%",gapY:"5",children:[n.jsx(eW.Z,{hero:"اطلاعات",type:"changeAble",children:(0,n.jsxs)(J.rj,{width:"100%",gapY:"14px",children:[n.jsx(ea.Qr,{name:"titleOfDetail",control:g,render:({field:e})=>n.jsx(J.nv,{...e,label:"عنوان",placeholder:"عنوان",selectedValue:!!e.value})}),n.jsx(ea.Qr,{name:"famousPerson",control:g,render:({field:e})=>n.jsx(J.nv,{...e,label:"شخصیت برجسته",placeholder:"شخصیت برجسته",selectedValue:!!e.value})}),n.jsx(ea.Qr,{name:"infoDescription",control:g,render:({field:e})=>n.jsx(J.nv,{...e,label:"متن صفحه استان",placeholder:"متن صفحه استان",selectedValue:!!e.value})}),n.jsx(J.zx,{size:"4",variant:"ghost",style:{width:"fit-content",marginBlockEnd:10},onClick:()=>d({isOpen:!0,key:"add"}),disabled:t?.AreaDetails.length===3,children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:" افزودن جاذبه"})]})}),i||s?n.jsx(c.$j,{style:{margin:"40px auto",scale:1.5}}):t?.AreaDetails.length!==0&&t?.AreaDetails.map((e,t)=>n.jsxs(J.rj,{gapX:"5",gapY:"14px",style:{gridTemplateColumns:"1fr 1fr auto auto"},children:[n.jsx(ea.Qr,{name:`areaDetails.${t}.titleItem`,control:g,render:({field:t})=>n.jsx(J.nv,{...t,label:"عنوان جاذبه",placeholder:"عنوان جاذبه",defaultValue:e.titleItem,selectedValue:!!t.value,readOnly:!0})}),n.jsx(ea.Qr,{name:`areaDetails.${t}.descriptionItem`,control:g,render:({field:t})=>n.jsx(J.nv,{...t,label:"توضیح جاذبه",placeholder:"توضیح جاذبه",selectedValue:!!t.value,defaultValue:e.descriptionItem,readOnly:!0})}),n.jsx(J.hU,{size:"3",type:"button",onClick:()=>{u(e),d({key:"edit",isOpen:!0})},children:n.jsx(eo.z,{width:16,height:16})}),n.jsx(J.hU,{size:"3",type:"button",onClick:()=>{u(e),d({key:"svg",isOpen:!0})},children:n.jsx(eo.XB,{width:16,height:16})})]},e.id))]})}),n.jsx(eQ,{buttonsPosition:"end",submitButtonText:"ثبت",closeButtonText:"لغو",onCloseButton:()=>x(),onSubmit:()=>f(),isLoading:b,disabled:y("titleOfDetail")?.length===0&&y("famousPerson")?.length===0&&y("infoDescription")?.length===0})]}),(0,n.jsxs)(J.u_,{isOpen:l.isOpen,onClose:()=>d({...l,isOpen:!1}),children:["add"===l.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"افزودن جاذبه",handleClose:()=>d({...l,isOpen:!1})}),n.jsx(eZ,{setIsOpen:()=>d({isOpen:!1,key:"add"})})]}),"edit"===l.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش جاذبه",handleClose:()=>d({...l,isOpen:!1})}),n.jsx(eV,{setIsOpen:()=>d({isOpen:!1,key:"edit"}),currentItem:p})]}),"svg"===l.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"ویرایش آیکون جاذبه",handleClose:()=>d({...l,isOpen:!1})}),n.jsx(eT,{setIsOpen:()=>d({isOpen:!1,key:"svg"}),data:p})]})]})]})};var eA=i(7056);let eE=({gallery:e,constantData:t,ProvinceId:i})=>{let[a,s]=(0,r.useState)([]),[l,d]=(0,r.useState)("create"),[p,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),{control:g,watch:j,setValue:y}=(0,ea.cI)({defaultValues:{pic:x?.path?x?.path:"",localPic:x?.path?x?.path:"",provinceId:x?.provinceId?x.provinceId:"",cityId:x?.cityId?x.cityId:"",townId:x?.townId?x.townId:"",alt:x?.alt?x?.alt:"",description:x?.description?x?.description:"",summery:x?.summery?x.summery:"null",isReset:!!x?.path,imageFile:null}}),m=t.filter(e=>e.id===Number(j("provinceId")))[0]?.Cities,b=(0,es.NL)(),{mutate:f,isPending:v}=(0,er.D)({mutationFn:async e=>(0,eA.b)(e),onSuccess:async e=>{200===e.statusCode?(b.invalidateQueries({queryKey:["province-images"]}),(0,et.xO)("مشخصات تصویر با موفقیت به روز شد"),u(!1)):(0,et.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:w,isPending:C}=(0,er.D)({mutationFn:async e=>O(e),onSuccess:async e=>{201===e.statusCode?(b.invalidateQueries({queryKey:["province-images"]}),(0,et.xO)("تصویر ارسالی با موفقیت اپلود شد"),u(!1)):(0,et.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:k,isPending:I}=(0,er.D)({mutationFn:async()=>await B({type:"PROVINCE",id:x.id}),onSuccess:e=>{!0===e.status?((0,et.xO)("تصویر مورد نظر با موفقیت حذف شد"),b.invalidateQueries({queryKey:["province-images"]}),u(!1)):(0,et.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),R=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},P=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await R(i);t(URL.createObjectURL(n)),y("localPic",URL.createObjectURL(n)),y("isReset",!1),y("imageFile",n)}};return(0,r.useEffect)(()=>{x&&(y("pic",x?.path),y("alt",x?.alt),y("description",x?.description),y("isReset",!!x?.path))},[x]),(0,r.useEffect)(()=>{let e=j("cityId"),i=j("provinceId");if(e&&i){let n=t.find(e=>e.id===Number(i));if(n){let t=n.Cities?.find(t=>t.id===Number(e));t&&s(t.Town??[])}}},[j("cityId"),j("provinceId")]),(0,r.useEffect)(()=>{y("summery",x?.summery),y("provinceId",x?.provincesId),y("cityId",x?.cityId),y("townId",x?.townId),y("description",x?.description),y("alt",x?.alt)},[x]),(0,n.jsxs)(n.Fragment,{children:[0===e.length?(0,n.jsxs)(J.kC,{direction:"column",align:"center",gap:"6",p:"87.5px 12px",children:[n.jsx(J.X6,{as:"h3",size:"3",style:{color:ei.K.gray[11]},children:"هنوز تصویری اضافه نشده است."}),(0,n.jsxs)(J.xv,{...en.p.paragraph1,style:{color:ei.K.gray[11],textAlign:"center"},children:["تصاویری که در این قسمت قرار می دهید در برنامه های اخیر کاربران به صورت رندوم ",n.jsx("br",{})," نمایش داده می شوند."]}),n.jsx(J.zx,{size:"4",onClick:()=>{d("create"),u(!0)},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:" افزودن تصویر به گالری"})]})})]}):(0,n.jsxs)(J.rj,{width:"100%",gapY:"5",children:[n.jsx(J.zx,{variant:"ghost",size:"3",style:{width:"fit-content",paddingBlock:"11.5px"},onClick:()=>{d("create"),h(null),u(!0)},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:"افزودن تصویر"})]})}),e.map((e,t)=>(0,n.jsxs)(J.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:`1px solid ${ei.K.gray[6]}`,borderRadius:8},children:[n.jsx(J.xu,{width:"328px",height:"200px",position:"relative",children:n.jsx(ed.default,{src:`https://uploader.bezanimbiroon.ir/${e.path}`,alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,n.jsxs)(J.kC,{direction:"column",gap:"2",children:[n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[11],marginTop:"10px"},children:e.path}),(0,n.jsxs)(J.kC,{direction:"column",mt:"12px",children:[n.jsx(J.nv,{readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}}),n.jsx(J.nv,{value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]})]}),(0,n.jsxs)(J.kC,{direction:"column",gap:"4",children:[n.jsx(J.hU,{size:"3",type:"button",onClick:()=>{d("edit"),h(e),u(!0)},children:n.jsx(eo.z,{})}),n.jsx(J.hU,{size:"3",variant:"surface",colorVariant:"PINK",onClick:()=>{d("delete"),h(e),u(!0)},children:n.jsx(eo.rF,{})})]})]},t))]}),(0,n.jsxs)(J.u_,{isOpen:p,onClose:()=>u(!1),children:["delete"!==l&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:"تصویر گالری استان",handleClose:()=>u(!1)}),(0,n.jsxs)(n.Fragment,{children:[n.jsx(J.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!x?.path&&!1==!!j("localPic")?n.jsx(ea.Qr,{name:"pic",control:g,render:({field:e})=>n.jsx(J.kC,{width:"max-content",position:"relative",direction:"column",children:n.jsx(ec.ZP,{onDrop:t=>{P(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n.jsx(J.zx,{size:"3",style:{width:"fit-content"},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(eo.V1,{}),n.jsx(J.xv,{...en.p.body1,children:"ارسال تصویر"})]})})})]})})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:`1px solid ${ei.K.gray[3]}`},children:["create"===l&&n.jsx(J.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:ei.K.gray[3],borderRadius:"4px",border:`1px solid ${ei.K.pink[9]}`,zIndex:"10"},left:"0",top:"0",children:n.jsx(ea.Qr,{name:"pic",control:g,render:({field:e})=>n.jsx(J.kC,{width:"max-content",position:"relative",direction:"column",children:n.jsx(ec.ZP,{onDrop:t=>{P(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n.jsx(eo.rF,{})})]})})})})}),n.jsx(ed.default,{src:j("isReset")?`https://uploader.bezanimbiroon.ir/${x?.path}`:j("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),"edit"===l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.rj,{width:"100%",gap:"5",columns:"3",children:[n.jsx(ea.Qr,{name:"provinceId",control:g,render:({field:e})=>n.jsx(J.fp,{...e,label:"استان",placeholder:"استان",selectedValue:!!e.value,value:String(j("provinceId")),onValueChange:t=>{e.onChange(t),y("cityId",""),y("townId","")},children:t.map(e=>n.jsx(J.Ql,{value:String(e.id),children:e.name},e.id))})}),n.jsx(ea.Qr,{name:"cityId",control:g,render:({field:e})=>n.jsx(J.fp,{...e,label:"شهرستان",placeholder:"شهرستان",selectedValue:!!e.value,disabled:!j("provinceId"),value:String(j("cityId")),onValueChange:t=>{e.onChange(t),y("townId","")},children:m?.map(e=>n.jsx(J.Ql,{value:String(e.id),children:e.name},e.id))})}),n.jsx(ea.Qr,{name:"townId",control:g,render:({field:e})=>n.jsx(J.fp,{...e,label:"شهر",placeholder:"شهر",selectedValue:!!e.value,disabled:!j("provinceId")||!j("cityId"),value:String(j("townId")),onValueChange:t=>{e.onChange(t)},children:a?.map(e=>n.jsx(J.Ql,{value:String(e.id),children:e.name},e.id))})})]}),n.jsx(ea.Qr,{name:"alt",control:g,render:({field:e})=>n.jsx(J.nv,{...e,label:"متن جایگزین",placeholder:"متن جایگزین",selectedValue:!!e.value})}),n.jsx(ea.Qr,{name:"description",control:g,render:({field:e})=>n.jsx(J.Kx,{...e,label:"توضیحات تصویر",placeholder:"توضیحات تصویر",selectedValue:!!e.value,rows:6})}),n.jsx(ea.Qr,{name:"summery",control:g,render:({field:e})=>n.jsx(J.Kx,{...e,label:"شرح مختصر",placeholder:"شرح مختصر",selectedValue:!!e.value,rows:6})})]})]})}),n.jsx(eu.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>u(!1),onSubmit:()=>{"create"===l?w({file:j("imageFile"),position:"gallery",provinceId:i}):f({alt:j("alt"),description:j("description"),id:x.id,summery:j("summery"),townId:Number(j("townId")),type:"PROVINCE"})},isLoading:C||v})]})]}),"delete"===l&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[n.jsx(J.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟"}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{variant:"soft",size:"4",onClick:()=>k(),children:n.jsx(J.xv,{...en.p.body3,children:I?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>u(!1),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})]})]})},eM=({image:e,id:t})=>{let[i,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),d=(0,es.NL)(),{control:p,watch:u,setValue:x}=(0,ea.cI)({defaultValues:{pic:e||"",imageFile:null,localPic:"",provinceId:"",cityID:"",town:"",alt:"",description:"",brief:"",isReset:!!e}}),{mutate:h,isPending:g}=(0,er.D)({mutationFn:async e=>O(e),onSuccess:async e=>{201===e.statusCode?(d.invalidateQueries({queryKey:["province-images"]}),(0,et.xO)("تصویر ارسالی با موفقیت اپلود شد"),l(!1)):(0,et.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:j,isPending:y}=(0,er.D)({mutationFn:async()=>await L({id:t,type:"PIC"}),onSuccess:e=>{!0===e.status?(d.invalidateQueries({queryKey:["province-images"]}),(0,et.xO)("نصویر مورد نظر با موفقیت حذف شد")):(0,et.bW)("مشکلی پیش آمده است . مجددا تلاش کنید")}}),m=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},b=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await m(i);t(URL.createObjectURL(n)),x("localPic",URL.createObjectURL(n)),x("isReset",!1),x("imageFile",n)}};return(0,n.jsxs)(n.Fragment,{children:[e?(0,n.jsxs)(J.rj,{p:"10px",gapY:"10px",children:[n.jsx(J.kC,{width:"100%",align:"center",justify:"center",children:n.jsx(J.xu,{width:"100%",height:"288px",position:"relative",children:n.jsx(ed.default,{src:e?`https://uploader.bezanimbiroon.ir/${e}`:"",alt:"",fill:!0,style:{borderRadius:"8px"}})})}),(0,n.jsxs)(J.kC,{align:"center",justify:"end",gap:"4",children:[n.jsx(J.hU,{size:"3",colorVariant:"PINK",variant:"surface",type:"button",onClick:()=>a(!0),children:n.jsx(eo.rF,{width:16,height:16})}),n.jsx(J.hU,{size:"3",type:"button",onClick:()=>l(!0),children:n.jsx(eo.z,{width:16,height:16})})]})]}):(0,n.jsxs)(J.kC,{direction:"column",align:"center",gap:"6",p:"87.5px 12px",children:[n.jsx(J.X6,{as:"h3",size:"3",style:{color:ei.K.gray[11]},children:"هنوز تصویری اضافه نشده است."}),(0,n.jsxs)(J.xv,{...en.p.paragraph1,style:{color:ei.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر استان در اسلایدر استان‌ها و هدر صفحه استان‌ها نمایش داده ",n.jsx("br",{})," می‌شود!"]}),n.jsx(J.zx,{size:"4",onClick:()=>l(!0),children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:" افزودن تصویر استان"})]})})]}),(0,n.jsxs)(J.u_,{isOpen:s,onClose:()=>l(!1),children:[n.jsx(ee.Z,{title:" تصویر استان",handleClose:()=>l(!1)}),(0,n.jsxs)(n.Fragment,{children:[n.jsx(J.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!e&&!1==!!u("localPic")?n.jsx(ea.Qr,{name:"pic",control:p,render:({field:e})=>n.jsx(J.kC,{width:"max-content",position:"relative",direction:"column",children:n.jsx(ec.ZP,{onDrop:t=>{b(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n.jsx(J.zx,{size:"3",style:{width:"fit-content"},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(eo.V1,{}),n.jsx(J.xv,{...en.p.body1,children:"ارسال تصویر"})]})})})]})})})}):n.jsx(n.Fragment,{children:(0,n.jsxs)(J.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:`1px solid ${ei.K.gray[3]}`},children:[n.jsx(J.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:ei.K.gray[3],borderRadius:"4px",border:`1px solid ${ei.K.pink[9]}`,zIndex:"10"},left:"0",top:"0",children:n.jsx(ea.Qr,{name:"pic",control:p,render:({field:e})=>n.jsx(J.kC,{width:"max-content",position:"relative",direction:"column",children:n.jsx(ec.ZP,{onDrop:t=>{b(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n.jsx(eo.rF,{})})]})})})})}),n.jsx(ed.default,{src:u("isReset")?`https://uploader.bezanimbiroon.ir/${e}`:u("localPic"),alt:"",fill:!0,style:{borderRadius:8}})]})})}),n.jsx(eu.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>l(!1),onSubmit:()=>{h({file:u("imageFile"),position:"picture",provinceId:t})},isLoading:g})]})]}),n.jsx(J.u_,{isOpen:i,onClose:()=>a(!1),children:(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[n.jsx(J.xv,{children:"آیا از حذف این تصویر اظمینان دارید؟ "}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{onClick:()=>j(),variant:"soft",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:y?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>a(!1),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})})]})},eY=({vector:e,id:t})=>{let[i,a]=(0,r.useState)({isOpen:!1,key:"edit"}),s=(0,es.NL)(),{control:l,watch:d,setValue:p}=(0,ea.cI)({defaultValues:{imageFile:null,pic:e||"",localPic:"",provinceId:"",cityID:"",town:"",alt:"",description:"",brief:"",isReset:!!e}}),{mutate:u,isPending:x}=(0,er.D)({mutationFn:async()=>await L({id:t,type:"ICON"}),onSuccess:e=>{!0===e.status?(s.invalidateQueries({queryKey:["province-images"]}),(0,et.xO)("وکتور مورد نظر با موفقیت حذف شد")):(0,et.bW)("مشکلی پیش آمده است . مجددا تلاش کنید")}}),{mutate:h,isPending:g}=(0,er.D)({mutationFn:async e=>O(e),onSuccess:async e=>{201===e.statusCode?(s.invalidateQueries({queryKey:["province-images"]}),(0,et.xO)("تصویر ارسالی با موفقیت اپلود شد"),a({...i,isOpen:!1})):(0,et.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),j=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ep.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},y=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await j(i);t(URL.createObjectURL(n)),p("localPic",URL.createObjectURL(n)),p("isReset",!1),p("imageFile",n)}};return(0,n.jsxs)(n.Fragment,{children:[e?(0,n.jsxs)(J.rj,{p:"10px",gapY:"10px",children:[n.jsx(J.kC,{width:"100%",align:"center",justify:"center",children:n.jsx(J.xu,{width:"179px",height:"288px",position:"relative",children:n.jsx(ed.default,{src:e?`https://uploader.bezanimbiroon.ir/${e}`:"",alt:"",fill:!0})})}),(0,n.jsxs)(J.kC,{align:"center",justify:"end",gap:"4",children:[n.jsx(J.hU,{size:"3",colorVariant:"PINK",variant:"surface",type:"button",onClick:()=>a({isOpen:!0,key:"delete"}),children:n.jsx(eo.rF,{width:16,height:16})}),n.jsx(J.hU,{size:"3",type:"button",onClick:()=>a({isOpen:!0,key:"edit"}),children:n.jsx(eo.z,{width:16,height:16})})]})]}):(0,n.jsxs)(J.kC,{direction:"column",height:"100%",align:"center",gap:"6",p:"87.5px 12px",children:[n.jsx(J.X6,{as:"h3",size:"3",style:{color:ei.K.gray[11]},children:"هنوز وکتوری اضافه نشده است."}),n.jsx(J.xv,{...en.p.paragraph1,style:{color:ei.K.gray[11],textAlign:"center"},children:"دقت داشته باشید که تصویر وکتور استان در کارت برنامه های اخیر نمایش داده می شود!"}),n.jsx(J.zx,{size:"4",onClick:()=>a({isOpen:!0,key:"edit"}),children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(o.pOD,{width:16,height:16,style:{color:ei.K.blue[10]}}),n.jsx(J.xv,{...en.p.body1,children:"افزودن وکتور استان"})]})})]}),(0,n.jsxs)(J.u_,{isOpen:i.isOpen,onClose:()=>a({...i,isOpen:!1}),children:["edit"===i.key&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(ee.Z,{title:" وکتور استان",handleClose:()=>a({...i,isOpen:!1})}),(0,n.jsxs)(n.Fragment,{children:[n.jsx(J.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!e&&!1==!!d("localPic")?n.jsx(ea.Qr,{name:"pic",control:l,render:({field:e})=>n.jsx(J.kC,{width:"max-content",position:"relative",direction:"column",children:n.jsx(ec.ZP,{onDrop:t=>{y(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n.jsx(J.zx,{size:"3",style:{width:"fit-content"},children:(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(eo.V1,{}),n.jsx(J.xv,{...en.p.body1,children:"ارسال تصویر"})]})})})]})})})}):n.jsx(n.Fragment,{children:(0,n.jsxs)(J.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:`1px solid ${ei.K.gray[3]}`},children:[n.jsx(J.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:ei.K.gray[3],borderRadius:"4px",border:`1px solid ${ei.K.pink[9]}`,zIndex:"10"},left:"0",top:"0",children:n.jsx(ea.Qr,{name:"pic",control:l,render:({field:e})=>n.jsx(J.kC,{width:"max-content",position:"relative",direction:"column",children:n.jsx(ec.ZP,{onDrop:t=>{y(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,n.jsxs)("div",{...e(),children:[n.jsx("input",{type:"file",...t()}),n.jsx(J.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n.jsx(eo.rF,{})})]})})})})}),n.jsx(ed.default,{src:d("isReset")?`https://uploader.bezanimbiroon.ir/${e}`:d("localPic"),alt:"",fill:!0,style:{borderRadius:8}})]})})}),n.jsx(eu.Z,{onSubmit:()=>{h({file:d("imageFile"),position:"vector",provinceId:t})},isLoading:g,submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>a({...i,isOpen:!1})})]})]}),"delete"===i.key&&(0,n.jsxs)(J.rj,{gapY:"24px",p:"5",children:[n.jsx(J.xv,{children:"آیا از حذف این وکتور اطمینان دارید؟ "}),(0,n.jsxs)(J.rj,{gap:"10px",columns:"2",children:[n.jsx(J.zx,{onClick:()=>u(),variant:"soft",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:x?n.jsx(c.$j,{}):"بله"})}),n.jsx(J.zx,{type:"button",onClick:()=>a({...i,isOpen:!1}),variant:"solid",size:"4",children:n.jsx(J.xv,{...en.p.body3,children:"خیر"})})]})]})]})]})},eG=()=>{let e=Number((0,eg.useParams)().slug[2]),{data:t,isLoading:i,isFetching:r,isError:l}=(0,a.a)({queryKey:["province-images",e],queryFn:async()=>await K(e)}),{data:o}=(0,a.a)({queryKey:["constant"],queryFn:async()=>(0,s.iV)()});return i||r?n.jsx(J.kC,{width:"100%",height:"85vh",align:"center",justify:"center",children:n.jsx(c.$j,{style:{scale:2}})}):!t||l?(0,et.bW)("مشکلی پیش آمده است"):(console.log("provinceImagesData",t),(0,n.jsxs)(J.rj,{width:"100%",gapY:"5",children:[(0,n.jsxs)(J.rj,{width:"100%",columns:"2",gapX:"5",children:[n.jsx(eW.Z,{hero:"وکتور استان",type:"changeAble",children:n.jsx(eY,{vector:t?.icon,id:t.id})}),n.jsx(eW.Z,{hero:"تصویر استان",type:"changeAble",children:n.jsx(eM,{image:t?.pic,id:t.id})})]}),n.jsx(eW.Z,{hero:"گالری تصاویر ",type:"changeAble",children:n.jsx(eE,{gallery:t?.gallery,ProvinceId:e,constantData:o?.provinces?o.provinces:[]})})]}))};var eH=i(85366);let eX=({name:e,citiesCount:t,hasMedia:i,lastUpdated:a,id:s})=>{let{push:r}=(0,e$.tv)();return(0,n.jsxs)(J.kC,{width:"100%",direction:"column",gap:"12px",p:"4",style:{backgroundColor:ei.K.gray[2],border:`1px solid ${ei.K.gray[6]}`,borderRadius:8},children:[(0,n.jsxs)(J.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[i&&n.jsx(eo.eA,{width:14.13,height:14.13}),n.jsx(J.xv,{...en.p.body1,style:{color:ei.K.gray[12]},children:e})]}),(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(J.hU,{size:"2",variant:"surface",onClick:()=>r(`/additional-detail/province/data-management/${s}`),children:n.jsx(eo.sv,{width:32,height:32})}),n.jsx(J.hU,{size:"2",variant:"surface",onClick:()=>r(`/additional-detail/province/image-management/${s}`),children:n.jsx(eo.XB,{width:16,height:16})})]})]}),n.jsx(eJ,{label:"تعداد شهرستان",value:t}),(0,n.jsxs)(J.kC,{width:"100%",align:"center",justify:"between",children:[n.jsx(eJ,{label:"آخرین ویرایش",value:a?(0,eH.l)(a):0}),n.jsx(J.zx,{size:"2",onClick:()=>r(`/additional-detail/province/cities/${s}`),children:n.jsx(J.xv,{...en.p.body3,children:"مدیریت شهرستان ها"})})]})]})},eJ=({label:e,value:t})=>(0,n.jsxs)(J.kC,{align:"center",gap:"2",children:[n.jsx(J.xv,{...en.p.description2,style:{color:ei.K.gray[10]},children:e}),n.jsx(J.xv,{...en.p.description2,style:{color:ei.K.gray[12]},children:t})]}),e0=()=>{let{data:e,isLoading:t,isFetching:i}=(0,a.a)({queryKey:["provinces"],queryFn:async()=>await R()});return t||i?n.jsx(J.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:n.jsx(c.$j,{style:{scale:3}})}):n.jsx(J.rj,{width:"100%",columns:"2",gap:"5",children:e?.map(e=>n.jsx(eX,{...e},e.id))})};var e1=i(42500),e6=i(71941);function e2({params:e}){let{data:t}=(0,a.a)({queryKey:["constant"],queryFn:async()=>await (0,s.iV)()}),i=(0,e6.L)(Number(e.slug[2]),t?.provinces??[]);return(0,n.jsxs)(J.kC,{direction:"column",children:[n.jsx(e1.Z,{title:"categories"===e.slug[0]?"لیست دسته بندی ها":"features"===e.slug[0]?"لیست ویژگی ها":"province"===e.slug[0]?"cities"===e.slug[1]?`لیست شهرستان ها - استان ${i}`:"data-management"===e.slug[1]?`اطلاعات استان ${i}`:"image-management"===e.slug[1]?`تصاویر استان ${i}`:"لیست استان ها":"",isNavigation:!0}),n.jsx(J.xu,{p:"24px 110px 40px 40px ",children:n.jsx(J.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(()=>{switch(e.slug[0]){case"categories":return n.jsx(eI,{});case"features":return n.jsx(eU,{});case"province":switch(e.slug[1]){case"cities":return n.jsx(eD,{});case"data-management":return n.jsx(e_,{});case"image-management":return n.jsx(eG,{});default:return n.jsx(e0,{})}default:return null}})()})})]})}},7056:(e,t,i)=>{"use strict";i.d(t,{CM:()=>m,OD:()=>h,RJ:()=>b,Vq:()=>y,Vr:()=>g,XZ:()=>c,X_:()=>l,b:()=>j,h4:()=>o,nJ:()=>r,o$:()=>d,rI:()=>p,tu:()=>x,v7:()=>s});var n=i(12099),a=i(80635);let s=(e,t)=>{let i={};if(!e||"object"!=typeof e)return i;let n=e=>null!=e&&"null"!==e&&0!==e&&"none"!==e&&!(Array.isArray(e)&&0===e.length);return Object.keys(e).forEach(a=>{let s=e[a];(!1===t?n(s):n(s)&&""!==s)&&(i[a]=s)}),i},r=async(e,t,i)=>(await a.x.get(`comment/placeComments/${e}?page=${t}&limit=4`,{})).data.data;function l(e){return Object.entries(e).map(([e,t])=>Array.isArray(t)?`${encodeURIComponent(e)}=${t.map(encodeURIComponent).join(",")}`:`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")}let o=async e=>{let t=l(s(e,!0));return(await a.x.get(`places/allPlacesWithFilter?${t}`)).data.data},c=async(e,t,i)=>(await a.x.get(`places/placeImproveContent/${e}?page=${t}&limit=4`,{})).data.data,d=async(e,t,i)=>(await a.x.get(`/places/getPlaceUserUploads/${e}?page=${t}&limit=6`,{headers:{limit:i}})).data.data,p=async e=>{let t=l(s(e,!0));return(await a.x.get(`article/filter?${t}`)).data.data};function u(e,t){return void 0!==e&&Array.isArray(t)&&0!==t.length?[{placeId:e,placeRelationType:"MAIN"},...t.map(e=>({placeId:e,placeRelationType:"RELATION"}))]:[]}let x=async e=>{console.log(e,"paramsparamsparamsparamsparams");let t=s({parentCategoryId:Number(e.parentCategoryId),categoryId:Number(e.categoryId),provincesId:Number(e.provincesId),citiesId:Number(e.citiesId),is_published:"true"===e.is_published||!0===e.is_published||"false"!==e.is_published&&!1!==e.is_published&&String(e.is_published),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),title:e.title,writer:e.writer,tableOfContent:e.articleDetail.length>0?e.articleDetail[0].descriptions:"",content:e.articleDetail.length>0?e.articleDetail[1].descriptions:"",on_titile:e.on_titile,source:e.source,summery:e.summery,brief:e.brief,slug:e.slug,inMain:e.inMain,inTop:e.inTop,tags:String(e.metakeywords).split(","),keywords:String(e.keywords).split(","),meta_title:e.meta_title,meta_description:e.meta_description,source_link:e.source_link,isSlider:e.isSlider,type:e.type,places:u(Number(e.mainPoint),e.placeRelationType)});return(await a.x.post("/article",t)).data},h=async(e,t)=>{let i=s({parentCategoryId:Number(t.parentCategoryId),categoryId:Number(t.categoryId),provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&String(t.is_published),status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&String(t.status),title:t.title,writer:t.writer,isSlider:t.isSlider,on_titile:t.on_titile,source:t.source,summery:t.summery,brief:t.brief,slug:t.slug,tableOfContent:t.articleDetail[0].descriptions,content:t.articleDetail[1].descriptions,inMain:t.inMain,inTop:t.inTop,tags:String(t.metakeywords).split(","),keywords:String(t.keywords).split(","),meta_title:t.meta_title,meta_description:t.meta_description,source_link:t.source_link,type:t.type,places:u(Number(t.mainPoint),t.placeRelationType)},!1);return(await a.x.patch(`/article/id/${e}`,i)).data},g=async e=>(await a.x.get(`/article/id/${e}`)).data,j=async e=>(await n.j9.patch("upload/edit",e)).data,y=async e=>{let t=new FormData;return t.append("type",e.type),t.append("articleImageType",e.articleImageType),t.append("articleId",e.articleId.toString()),t.append("file",e.file),t.append("summery",e.summery),t.append("slug",e.slug),t.append("alt",e.alt),t.append("description",e.description),t.append("townId",e.townId.toString()),await n.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})},m=async e=>(await n.j9.delete("upload",{data:{id:e,type:"ARTICLE"}})).data,b=async e=>(await a.x.delete(`article/id/${e}`)).data},51075:(e,t,i)=>{"use strict";i.d(t,{AW:()=>r,bG:()=>c,mP:()=>l,uz:()=>o,v7:()=>s});var n=i(80635),a=i(7056);let s=e=>{let t={};return Object.keys(e).forEach(i=>{let n=e[i];null===n||""===n||Array.isArray(n)&&0===n.length||0===n||"null"===n||(t[i]=n)}),t},r=async e=>{let t=s(e),i=(0,a.X_)(t);return(await n.x.get(`user?limit=10&${i}`)).data.data},l=async(e,t)=>{let i=s(e);delete i.sort;let r=(0,a.X_)(i);return(await n.x.get(`user/trips?userId=${t}&limit=10&${r}`)).data.data},o=async(e,t)=>{let i=s({...t,mobile:null,pic:null});return(await n.x.patch(`user/profile/partiallyEditUser/${e}`,i)).data},c=async e=>(await n.x.get(`user/userInfoForUserTrips/${e}`)).data.data},71941:(e,t,i)=>{"use strict";i.d(t,{L:()=>a});var n=i(17577);function a(e,t){return(0,n.useMemo)(()=>{if(!e||!t?.length)return"";let i=t.find(t=>t.id===e);return i?i.name:""},[e,t])}},71284:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(10326);i(17577);var a=i(39454),s=i(58072),r=i(91629),l=i(95441);let o=({isSubmit:e=!0,closeButtonText:t,submitButtonText:i,isLoading:o,onCloseButton:c,onSubmit:d,isDisableSubmitBtn:p=!1,disabled:u=!1})=>n.jsx(l.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:s.K.gray[2],marginBlockStart:"auto",borderTop:`1px solid ${s.K.gray[3]}`,boxShadow:s.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,n.jsxs)(l.rj,{gap:"16px",columns:"2",children:[n.jsx(l.zx,{disabled:p||u,onClick:d,type:e?"submit":"button",variant:"soft",size:"3",style:{width:"fit-content",padding:"9.5px 38px"},children:o?n.jsx(a.$j,{}):n.jsx(l.xv,{...r.p.body1,children:i})}),n.jsx(l.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:c,style:{width:"fit-content",padding:"9.5px 38px"},children:n.jsx(l.xv,{...r.p.body1,children:t})})]})})},45313:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=i(10326);i(17577);var a=i(57457),s=i(98555),r=i(58072),l=i(91629),o=i(95441);let c=({handleClose:e,title:t})=>(0,n.jsxs)(d,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:r.K.blue[10],zIndex:"100"},align:"center",children:[n.jsx(o.xv,{...l.p.title2,style:{color:r.K.gray[1],fontWeight:700},children:t}),n.jsx(o.hU,{type:"button",onClick:e,variant:"soft",size:"2",style:{backgroundColor:r.K.blue[9],borderRadius:"12px"},children:n.jsx(s.x8,{})})]}),d=(0,a.zo)(o.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},55193:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var n=i(10326),a=i(17577),s=i(76812),r=i(39454),l=i(57457),o=i(95441),c=i(58072);let d=(0,a.forwardRef)(({placeholder:e,defaultValue:t,fieldType:i,disabled:a,isLoading:l,onClick:d,onChange:p,...h},g)=>(0,n.jsxs)(u,{height:"fit-content",gap:"2",disabled:a,children:[n.jsx(x,{...h,ref:g,placeholder:e,disabled:a,type:i,onChange:p,variant:"surface",defaultValue:t}),l?n.jsx(r.$j,{style:{marginLeft:20}}):n.jsx(o.hU,{size:"1",type:"button",className:"icon-button",variant:"surface",disabled:a,onClick:d,children:n.jsx(s.pOD,{width:16,height:16,style:{color:c.K.pink[9]}})})]}));d.displayName="CustomAddItem";let p=d,u=(0,l.ZP)(o.kC).withConfig({componentId:"sc-ed1428e7-0"})(["width:100%;max-width:380px;height:48px;align-items:center;border:1px solid ",";background-color:",";border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{margin-inline-end:8px;background-color:",";@media (hover:hover){background-color:transparent !important;}}"],c.K.gray[7],({disabled:e})=>e?c.K.gray[5]:"transparent",c.K.blue[2],c.i.shadow1,c.K.gray[3],({disabled:e})=>e?c.K.gray[5]:"transparent"),x=(0,l.ZP)(o.nv).withConfig({componentId:"sc-ed1428e7-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},47914:(e,t,i)=>{"use strict";i.d(t,{default:()=>p});var n=i(10326);i(17577);var a=i(32005),s=i(57457),r=i(95441),l=i(98555),o=i(58072),c=i(91629);let d={open:{opacity:1,height:"auto"},closed:{opacity:0,height:0}},p=e=>{let{hero:t,children:i,withEdit:s=!1,withButton:p=!1,withDelete:g=!1,isDisableDelete:j=!1,onEdit:y,onButtonSubmit:m,onDelete:b,hasMedia:f,isOpen:v}=e;return(0,n.jsxs)(u,{isOpen:v,children:[(0,n.jsxs)(r.kC,{className:"style",width:"100%",justify:"between",align:"center",p:"8px 16px",children:[(0,n.jsxs)(r.kC,{gap:"2",align:"center",children:[f&&n.jsx(l.eA,{width:14.13,height:14.13}),n.jsx(r.xv,{style:{color:o.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"24px"},children:t}),p&&n.jsx(r.hU,{variant:"surface",size:"2",onClick:y,children:n.jsx(l.z,{width:16,height:16})})]}),(0,n.jsxs)(r.kC,{align:"center",gap:"4",children:[p&&n.jsx(r.zx,{size:"2",variant:"soft",onClick:m,children:n.jsx(r.xv,{...c.p.body1,children:"افزودن ویژگی"})}),s&&n.jsx(r.hU,{variant:"surface",size:"2",onClick:y,children:n.jsx(l.z,{width:16,height:16})}),g&&n.jsx(r.hU,{variant:"surface",size:"2",onClick:b,disabled:j,children:n.jsx(h,{width:16,height:16})}),n.jsx(a.E.div,{animate:{rotate:v?180:0},transition:{duration:.3},style:{width:32,height:32,display:"flex",justifyContent:"center",alignItems:"center"},children:n.jsx(x,{})})]})]}),n.jsx(a.E.div,{variants:d,initial:"closed",animate:v?"open":"closed",transition:{duration:.3},style:{overflow:"hidden"},layout:!0,children:n.jsx(r.rj,{gap:"16px",p:"24px 16px 16px 16px",children:i})})]})},u=(0,s.ZP)(r.rj).withConfig({componentId:"sc-bbbac1eb-0"})(["border-radius:8px;border:1px solid ",";.style{border-radius:",";height:fit-content;background-color:",";cursor:pointer;}"],o.K.gray[6],({isOpen:e})=>e?"8px 8px 0px 0px":"8px",o.K.blue[4]),x=(0,s.ZP)(l.CH).withConfig({componentId:"sc-bbbac1eb-1"})(["path{fill:",";}"],o.K.blue[10]),h=(0,s.ZP)(l.rF).withConfig({componentId:"sc-bbbac1eb-2"})(["path{fill:",";}"],o.K.pink[9])},65128:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(10326);i(17577);var a=i(95441),s=i(58072);let r=({hero:e,type:t,children:i})=>(0,n.jsxs)(a.rj,{width:"100%",style:{borderRadius:8,border:`1px solid ${s.K.gray[6]}`},children:[n.jsx(a.kC,{width:"100%",justify:"between",align:"center",p:"8px 16px",style:{height:"fit-content",backgroundColor:"changeAble"===t?s.K.blue[4]:s.K.gray[3],borderRadius:"8px 8px 0px 0px"},children:n.jsx(a.X6,{as:"h6",style:{color:s.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"27px"},children:e})}),n.jsx(a.rj,{gap:"16px",p:"24px 16px 16px 16px",style:{backgroundColor:s.K.gray[2]},children:i})]})},85366:(e,t,i)=>{"use strict";i.d(t,{l:()=>s});var n=i(4465),a=i.n(n);function s(e){return a()(e).locale("fa").format("jYYYY/jMM/jDD")}},46601:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>l});var n=i(68570);let a=(0,n.createProxy)(String.raw`/Users/alihasani/Workspace/mansoor/bznbrbAdminNew/app/(root)/additional-detail/[...slug]/page.tsx`),{__esModule:s,$$typeof:r}=a;a.default;let l=(0,n.createProxy)(String.raw`/Users/alihasani/Workspace/mansoor/bznbrbAdminNew/app/(root)/additional-detail/[...slug]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[571,315,434,667,226,465,886,14,217,280],()=>i(42664));module.exports=n})();