"use strict";exports.id=566,exports.ids=[566],exports.modules={37419:(e,t,i)=>{i.d(t,{Di:()=>d,LP:()=>p,Vl:()=>o,_5:()=>r,mV:()=>c,nj:()=>n,qo:()=>l});var s=i(12099),a=i(80635);let n=async()=>(await a.x.get("/ads/page")).data.data,r=async(e,t,i)=>(await a.x.get(`/ads/holder?holder=${e}&id=${t}&type=${i}`)).data.data,o=async e=>{let t=new FormData;return t.append("type",e.type),t.append("description",e.description),t.append("page",e.page),t.append("holder",e.holder),t.append("alt",e.alt),t.append("slug",e.slug),t.append("summery",e.summery),t.append("file",e.file),t.append("website",e.website),t.append("socialMedia",e.socialMedia),t.append("sponsor",e.sponsor),t.append("provinceId",e.provinceId?e.provinceId.toString():""),t.append("cityId",e.cityId?e.cityId.toString():""),t.append("townId",e.townId?e.townId.toString():""),t.append("categoryId",e.categoryId?e.categoryId.toString():""),(await s.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},l=async e=>(await a.x.patch("/upload/edit",e)).data,d=async e=>(await a.x.delete("/upload/",{data:e})).data,p=async e=>(await a.x.get(`/ads/page?pageKey=${e}`)).data.data,c=async e=>(await a.x.get(`/ads/page?pageKey=province&id=${e}`)).data.data},26566:(e,t,i)=>{i.d(t,{Z:()=>v});var s=i(10326),a=i(17577),n=i(23920),r=i(74723),o=i(46226),l=i(76812),d=i(39454),p=i(44976),c=i(10119),x=i(8806),u=i(37419),y=i(95441),g=i(71284),h=i(45313),j=i(92766),m=i(98555),b=i(58072),k=i(91629);let v=({data:e})=>{let[t,i]=(0,a.useState)({isOpen:!1,key:"create"}),v=(0,p.NL)(),{control:w,watch:f,setValue:C}=(0,r.cI)({defaultValues:{imageFile:"edit"===t.key?e.path:null,localPic:"",description:"edit"===t.key?e.description:"",alt:"edit"===t.key?e.alt:"",slug:"edit"===t.key?e.slug:"",summery:"edit"===t.key?e.summery:"",website:"edit"===t.key?e.website:"",socialMedia:"edit"===t.key?e.socialMedia:"",sponsor:"edit"===t.key?e.sponsor:"",isReset:!0}});console.log("AdsDetailCardAdsDetailCardAdsDetailCardAdsDetailCard",e),(0,a.useEffect)(()=>{C("imageFile","edit"===t.key?e.path:null),C("description","edit"===t.key?e.description:""),C("alt","edit"===t.key?e.alt:""),C("slug","edit"===t.key?e.slug:""),C("summery","edit"===t.key?e.summery:""),C("website","edit"===t.key?e.website:""),C("socialMedia","edit"===t.key?e.socialMedia:""),C("sponsor","edit"===t.key?e.sponsor:""),C("isReset",!0)},[t.key]),console.log("watch",f());let{mutate:I,isPending:K}=(0,c.D)({mutationFn:async e=>await (0,u.qo)(e),onSuccess:e=>{e.status?(v.invalidateQueries({queryKey:["ads-page-type"]}),(0,j.xO)("آگهی مورد نظر با موفقیت ویرایش شد"),i({...t,isOpen:!1})):(0,j.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:z,isPending:O}=(0,c.D)({mutationFn:async e=>await (0,u.Vl)(e),onSuccess:e=>{e.status?(v.invalidateQueries({queryKey:["ads-page-type"]}),(0,j.xO)("آگهی مورد نظر با موفقیت ایجاد شد"),i({...t,isOpen:!1})):(0,j.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:R,isPending:S}=(0,c.D)({mutationFn:async()=>await (0,u.Di)({id:e.id,type:"ADS"}),onSuccess:e=>{e.status?(v.invalidateQueries({queryKey:["ads-page-type"]}),(0,j.xO)("آگهی مورد نظر با موفقیت حذف شد"),i({...t,isOpen:!1})):(0,j.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),D=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,x.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},F=async(e,t)=>{if(e&&e[0]){let i=e[0],s=await D(i);t(URL.createObjectURL(s)),C("localPic",URL.createObjectURL(s)),C("isReset",!1),C("imageFile",s)}};return(0,s.jsxs)(s.Fragment,{children:[!e?.path&&(0,s.jsxs)(y.kC,{align:"center",position:"relative",minHeight:"200px",p:"16px",justify:"center",style:{borderRadius:"8px",border:`1px dashed ${b.K.blue[9]}`},children:[s.jsx(y.xv,{style:{position:"absolute",color:b.K.gray[8],right:"20px",fontSize:"90px"},children:e?.position}),(0,s.jsxs)(y.kC,{gap:"4px",align:"center",onClick:()=>i({isOpen:!0,key:"create"}),style:{cursor:"pointer"},children:[s.jsx(l.pOD,{stroke:b.K.blue[7]}),s.jsx(y.xv,{...k.p.body1,style:{color:b.K.blue[11]},children:"افزودن آگهی"})]})]}),!!e?.path&&(0,s.jsxs)(y.rj,{p:"16px",style:{borderRadius:"8px",border:`1px solid ${b.K.gray[6]}`},children:[(0,s.jsxs)(y.kC,{width:"100%",align:"center",justify:"between",children:[s.jsx(y.X6,{style:{color:b.K.gray[11],fontSize:"32px",fontWeight:500,lineHeight:"37.5px"},children:e.position}),(0,s.jsxs)(y.kC,{align:"center",gap:"4",children:[s.jsx(y.hU,{size:"3",onClick:()=>i({isOpen:!0,key:"edit"}),children:s.jsx(m.z,{})}),s.jsx(y.hU,{size:"3",variant:"surface",onClick:()=>i({isOpen:!0,key:"delete"}),children:s.jsx(m.rF,{})})]})]}),(0,s.jsxs)(y.kC,{width:"100%",gap:"10px",children:[s.jsx(y.xu,{width:"400px",height:"200px",position:"relative",children:s.jsx(o.default,{src:`https://uploader.bezanimbiroon.ir/${e.path}`,alt:String(e?.alt),fill:!0,style:{borderRadius:8,objectFit:"cover",objectPosition:"center"}})}),(0,s.jsxs)(y.kC,{width:"77.5%",direction:"column",mt:"2",style:{justifyContent:"space-between"},children:[(0,s.jsxs)(y.kC,{direction:"column",gap:"3",children:[s.jsx(y.nv,{placeholder:"متن چایگزین",readOnly:!0,value:e.alt??"",style:{borderRadius:12}}),s.jsx(y.Kx,{placeholder:"توضیحات تصویر",readOnly:!0,value:e.description??"",style:{borderRadius:12}})]}),e.path&&(0,s.jsxs)(y.kC,{p:"12px 16px",gap:"2",align:"center",children:[s.jsx(y.hU,{variant:"surface",size:"1",children:s.jsx(l.TIy,{style:{color:b.K.blue[10]}})}),s.jsx(y.xv,{...k.p.body3,style:{color:b.K.blue[11]},children:e.path})]})]})]})]}),(0,s.jsxs)(y.u_,{isOpen:t.isOpen,onClose:()=>i({...t,isOpen:!1}),children:["delete"!==t.key&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.Z,{title:"create"===t.key?"افزودن آگهی":"ویرایش آگهی",handleClose:()=>i({...t,isOpen:!1})}),s.jsx(y.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!e?.path&&!1==!!f("localPic")?s.jsx(r.Qr,{name:"imageFile",control:w,render:({field:e})=>s.jsx(y.kC,{width:"max-content",position:"relative",direction:"column",children:s.jsx(n.ZP,{onDrop:t=>{F(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,s.jsxs)("div",{...e(),children:[s.jsx("input",{type:"file",...t()}),s.jsx(y.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:s.jsx(y.zx,{size:"3",type:"button",style:{width:"fit-content"},children:(0,s.jsxs)(y.kC,{align:"center",gap:"2",children:[s.jsx(m.V1,{}),s.jsx(y.xv,{...k.p.body1,children:"ارسال تصویر"})]})})})]})})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:`1px solid ${b.K.gray[3]}`},children:["create"===t.key&&s.jsx(y.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:b.K.gray[3],borderRadius:"4px",border:`1px solid ${b.K.pink[9]}`,zIndex:"10"},left:"0",top:"0",children:s.jsx(r.Qr,{name:"pic",control:w,render:({field:e})=>s.jsx(y.kC,{width:"max-content",position:"relative",direction:"column",children:s.jsx(n.ZP,{onDrop:t=>{F(t,e.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:({getRootProps:e,getInputProps:t})=>(0,s.jsxs)("div",{...e(),children:[s.jsx("input",{type:"file",...t()}),s.jsx(y.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:s.jsx(m.rF,{})})]})})})})}),s.jsx(o.default,{src:f("isReset")?`https://uploader.bezanimbiroon.ir/${e?.path}`:f("localPic"),alt:"ugliglhglk",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,s.jsxs)(y.rj,{width:"100%",gap:"5",columns:"3",children:[s.jsx(r.Qr,{name:"sponsor",control:w,render:({field:e})=>s.jsx(y.nv,{...e,label:"نام اسپانسر",placeholder:"نام اسپانسر",selectedValue:!!e.value})}),s.jsx(r.Qr,{name:"website",control:w,render:({field:e})=>s.jsx(y.nv,{...e,label:"سایت",placeholder:"سایت",selectedValue:!!e.value})}),s.jsx(r.Qr,{name:"socialMedia",control:w,render:({field:e})=>s.jsx(y.nv,{...e,label:"شبکه اجتماعی",placeholder:"شبکه اجتماعی",selectedValue:!!e.value})})]}),s.jsx(r.Qr,{name:"alt",control:w,render:({field:e})=>s.jsx(y.nv,{...e,label:"متن جایگزین",placeholder:"متن جایگزین",selectedValue:!!e.value})}),s.jsx(r.Qr,{name:"description",control:w,render:({field:e})=>s.jsx(y.Kx,{...e,label:"توضیحات تصویر",placeholder:"توضیحات تصویر",selectedValue:!!e.value,rows:6})}),s.jsx(r.Qr,{name:"summery",control:w,render:({field:e})=>s.jsx(y.Kx,{...e,label:"شرح مختصر",placeholder:"شزح مختصر",selectedValue:!!e.value,rows:6})})]})}),s.jsx(g.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>i({...t,isOpen:!1}),isDisableSubmitBtn:!1,onSubmit:()=>{"edit"===t.key?I({id:e.id,type:"ADS",alt:f("alt"),description:f("description"),summery:f("summery"),townId:e.townId,socialMedia:f("socialMedia"),sponsor:f("sponsor"),website:f("website")}):"create"===t.key&&z({type:"ADS",description:f("description"),page:e.page,holder:e.position,alt:f("alt"),slug:f("slug"),summery:f("summery"),file:f("imageFile"),socialMedia:f("socialMedia"),sponsor:f("sponsor"),website:f("website"),townId:e.townId,provinceId:e.provincesId,cityId:e.cityId,categoryId:e.categoryId})},isLoading:"edit"===t.key?K:"create"===t.key&&O,isSubmit:!1})]}),"delete"===t.key&&(0,s.jsxs)(y.rj,{gapY:"24px",p:"5",children:[(0,s.jsxs)(y.xv,{children:["آیا از حذف آگهی ",s.jsx("span",{style:{fontWeight:"bold",color:"red"},children:e.position})," اطمینان دارید؟"]}),(0,s.jsxs)(y.rj,{gap:"10px",columns:"2",children:[s.jsx(y.zx,{variant:"soft",size:"4",onClick:()=>R(),children:s.jsx(y.xv,{...k.p.body3,children:S?s.jsx(d.$j,{}):"بله"})}),s.jsx(y.zx,{type:"button",onClick:()=>i({...t,isOpen:!1}),variant:"solid",size:"4",children:s.jsx(y.xv,{...k.p.body3,children:"خیر"})})]})]})]})]})}},71284:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(10326);i(17577);var a=i(39454),n=i(58072),r=i(91629),o=i(95441);let l=({isSubmit:e=!0,closeButtonText:t,submitButtonText:i,isLoading:l,onCloseButton:d,onSubmit:p,isDisableSubmitBtn:c=!1,disabled:x=!1})=>s.jsx(o.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:n.K.gray[2],marginBlockStart:"auto",borderTop:`1px solid ${n.K.gray[3]}`,boxShadow:n.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,s.jsxs)(o.rj,{gap:"16px",columns:"2",children:[s.jsx(o.zx,{disabled:c||x,onClick:p,type:e?"submit":"button",variant:"soft",size:"3",style:{width:"fit-content",padding:"9.5px 38px"},children:l?s.jsx(a.$j,{}):s.jsx(o.xv,{...r.p.body1,children:i})}),s.jsx(o.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:d,style:{width:"fit-content",padding:"9.5px 38px"},children:s.jsx(o.xv,{...r.p.body1,children:t})})]})})},45313:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(10326);i(17577);var a=i(57457),n=i(98555),r=i(58072),o=i(91629),l=i(95441);let d=({handleClose:e,title:t})=>(0,s.jsxs)(p,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:r.K.blue[10],zIndex:"100"},align:"center",children:[s.jsx(l.xv,{...o.p.title2,style:{color:r.K.gray[1],fontWeight:700},children:t}),s.jsx(l.hU,{type:"button",onClick:e,variant:"soft",size:"2",style:{backgroundColor:r.K.blue[9],borderRadius:"12px"},children:s.jsx(n.x8,{})})]}),p=(0,a.zo)(l.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])}};