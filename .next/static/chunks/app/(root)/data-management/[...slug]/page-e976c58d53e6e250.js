(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6158],{46495:function(e,t,n){Promise.resolve().then(n.bind(n,49597))},49597:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tr}});var r=n(57437),i=n(2265),l=n(94963),a=n(69907),s=n(10008),o=n(31067);let c=(e,t)=>{let n={};if(!e||"object"!=typeof e)return n;let r=e=>null!=e&&"null"!==e&&0!==e&&"none"!==e&&!(Array.isArray(e)&&0===e.length);return Object.keys(e).forEach(i=>{let l=e[i];(!1===t?r(l):r(l)&&""!==l)&&(n[i]=l)}),n},d=async(e,t,n)=>(await o.x.get("comment/placeComments/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data;function u(e){return Object.entries(e).map(e=>{let[t,n]=e;return Array.isArray(n)?"".concat(encodeURIComponent(t),"=").concat(n.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&")}let p=async e=>{let t=u(c(e,!0));return(await o.x.get("places/allPlacesWithFilter?".concat(t))).data.data},h=async(e,t,n)=>(await o.x.get("places/placeImproveContent/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data,x=async(e,t,n)=>(await o.x.get("/places/getPlaceUserUploads/".concat(e,"?page=").concat(t,"&limit=6"),{headers:{limit:n}})).data.data,g=async e=>{let t=u(c(e,!0));return(await o.x.get("article/filter?".concat(t))).data.data};function y(e,t){return void 0!==e&&Array.isArray(t)&&0!==t.length?[{placeId:e,placeRelationType:"MAIN"},...t.map(e=>({placeId:e,placeRelationType:"RELATION"}))]:[]}let j=async e=>{let t=c({parentCategoryId:Number(e.parentCategoryId),categoryId:Number(e.categoryId),provincesId:Number(e.provincesId),citiesId:Number(e.citiesId),is_published:"true"===e.is_published||!0===e.is_published||"false"!==e.is_published&&!1!==e.is_published&&String(e.is_published),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),title:e.title,writer:e.writer,tableOfContent:e.articleDetail[0].descriptions,content:e.articleDetail[1].descriptions,on_titile:e.on_titile,source:e.source,summery:e.summery,brief:e.brief,slug:e.slug,inMain:e.inMain,inTop:e.inTop,tags:String(e.metakeywords).split(","),keywords:String(e.keywords).split(","),meta_title:e.meta_title,meta_description:e.meta_description,source_link:e.source_link,isSlider:e.isSlider,type:e.type,places:y(Number(e.mainPoint),e.placeRelationType)});return(await o.x.post("/article",t)).data},m=async(e,t)=>{console.log("run",t.articleDetail);let n=c({parentCategoryId:Number(t.parentCategoryId),categoryId:Number(t.categoryId),provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&String(t.is_published),status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&String(t.status),title:t.title,writer:t.writer,isSlider:t.isSlider,on_titile:t.on_titile,source:t.source,summery:t.summery,brief:t.brief,slug:t.slug,tableOfContent:t.articleDetail[0].descriptions,content:t.articleDetail[1].descriptions,inMain:t.inMain,inTop:t.inTop,tags:String(t.metakeywords).split(","),keywords:String(t.keywords).split(","),meta_title:t.meta_title,meta_description:t.meta_description,source_link:t.source_link,type:t.type,places:y(Number(t.mainPoint),t.placeRelationType)},!1);return(await o.x.patch("/article/id/".concat(e),n)).data},v=async e=>(await o.x.get("/article/id/".concat(e))).data,b=async e=>(await s.j9.patch("upload/edit",e)).data,C=async e=>{let t=new FormData;return t.append("type",e.type),t.append("articleImageType",e.articleImageType),t.append("articleId",e.articleId.toString()),t.append("file",e.file),t.append("summery",e.summery),t.append("slug",e.slug),t.append("alt",e.alt),t.append("description",e.description),t.append("townId",e.townId.toString()),await s.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})},f=async e=>(await s.j9.delete("places/deletePlacePicUserUploads/".concat(e))).data,I=async e=>(await s.j9.delete("places/deletePlacePicUserUploads/".concat(e))).data;var k=n(36721),w=n(39343),S=n(16463),K=n(93191),P=n(76351),Q=n(28326),R=n(72051),T=n(51360),_=n(25231),z=n(21949),N=n(23405),D=n(77855),O=n(27533);let V=[{id:1,key:"هیچکدام",value:null},{id:2,key:"فعال",value:!0},{id:3,key:"غیر فعال",value:!1}],Z=[{id:1,key:"هیچکدام",value:null},{id:2,key:"پیش نویس",value:!1},{id:3,key:"انتشار",value:!0}],F=[{id:1,key:"هیچکدام",value:null},{id:2,key:"دارد",value:!0},{id:3,key:"ندارد",value:!1}],E=[{id:1,key:"فعال",value:!0},{id:2,key:"غیر فعال",value:!1}],q=[{id:1,key:"پیش نویس",value:!1},{id:2,key:"انتشار",value:!0}],U=[{label:"اطلاعات نقطه",key:"place-info"},{label:"موقعیت جفرافیا",key:"geographical-location"},{label:"چجوری برم",key:"routing"},{label:"توضیحات",key:"description"},{label:"ویژگی های و امکانات",key:"features-facilities"},{label:"تحلیل بزنیم بیرون",key:"analysis"},{label:"کی برم",key:"travel-time"},{label:"تنظیمات سئو",key:"seo-setting"}],A=[{label:"اطلاعات نقطه",key:"place-info"},{label:"موقعیت جفرافیا",key:"geographical-location"},{label:"چجوری برم",key:"routing"},{label:"توضیحات",key:"description"},{label:"ویژگی های و امکانات",key:"features-facilities"},{label:"تحلیل بزنیم بیرون",key:"analysis"},{label:"کی برم",key:"travel-time"},{label:"تنظیمات سئو",key:"seo-setting"},{label:"تصاویر",key:"images"},{label:"بهبود اطلاعات",key:"improve-content"},{label:"دیدگاه ها",key:"comments"}],M=[{label:"اطلاعات اولیه",key:"initial-data"},{label:"محتوای متنی",key:"text-content"},{label:"نقاط مرتبط",key:"related-points"},{label:"تنظیمات سئو",key:"seo-setting"}],L=[{label:"اطلاعات اولیه",key:"initial-data"},{label:"محتوای متنی",key:"text-content"},{label:"نقاط مرتبط",key:"related-points"},{label:"تنظیمات سئو",key:"seo-setting"},{label:"تصاویر",key:"images"}];var B=n(59913),W=n(52892),Y=n(72549),X=n(1845);function H(e){if(e)return e.map(e=>({key:e.name,value:e.id,id:e.id,disable:!1}))}var $=e=>{var t,n;let{province:i,categories:l,PlaceType:a,setIsOpen:s}=e,o=(0,K.useQueryClient)(),{replace:c}=(0,S.useRouter)(),{control:d,setValue:u,watch:p,reset:h}=(0,w.Gc)(),x=null===(t=i.filter(e=>e.id===Number(p("provinceId")))[0])||void 0===t?void 0:t.Cities,g=null===(n=l.filter(e=>e.id===Number(p("parentCategoryId")))[0])||void 0===n?void 0:n.children,y=()=>{s(!1)},j=()=>{h({page:1,limit:10,provinceId:"",cityId:"",parentCategoryId:"",arrayCatIds:[],arrayTypes:[],status:"",isPublished:"",searchQuery:"",startDate:"",endDate:"",mainPic:"",gallery:"",info:"",coordinates:"",description:"",features:"",analyse:"",seo:"",workTime:""}),c("/data-management/point-management"),o.invalidateQueries({queryKey:["place-list"]}),s(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.rj,{maxHeight:"776px",width:"100%",p:"4",gapY:"4",style:{overflowY:"auto"},children:[(0,r.jsxs)(Q.rj,{gapY:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12]},children:"موقعیت نقطه"}),(0,r.jsx)(w.Qr,{name:"provinceId",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"استان",value:String(t.value),onValueChange:e=>{t.onChange(e),u("cityId",""),u("page",1)},children:null==i?void 0:i.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityId",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"شهرستان",disabled:!x,value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:null==x?void 0:x.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsxs)(Q.rj,{gapY:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12]},children:"بازه زمانی"}),(0,r.jsxs)(Q.rj,{gap:"16px",columns:"2",children:[(0,r.jsx)(w.Qr,{name:"startDate",control:d,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"از تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",onChangeValue:e=>{let t=new Date(e);t.setHours(0,0,0,0),u("startDate",t.getTime()),u("page",1)}})}),(0,r.jsx)(w.Qr,{name:"endDate",control:d,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"تا تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",minDate:p("startDate"),onChangeValue:e=>{let t=new Date(e);t.setHours(23,59,0,0),u("endDate",t.getTime()),u("page",1)},disabled:!p("startDate")})})]})]}),(0,r.jsx)(Q.Pg,{lable:"نوع نقطه",placeholder:"نوع نقطه",children:(0,r.jsx)(B.Z,{isRow:!1,items:H(a),store:"arrayTypes"})}),(0,r.jsxs)(Q.rj,{gapY:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12]},children:"دسته بندی"}),(0,r.jsx)(w.Qr,{name:"parentCategoryId",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"دسته بندی اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e),u("arrayCatIds",""),u("page",1)},children:l.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(Q.Pg,{placeholder:"زیردسته بندی",disabled:!g,children:(0,r.jsx)(B.Z,{isRow:!1,items:H(g),store:"arrayCatIds"})})]}),(0,r.jsxs)(Q.rj,{gapY:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12]},children:"وضعیت"}),(0,r.jsx)(w.Qr,{name:"isPublished",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"انتشار",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"status",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:V.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"mainPic",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"تصویر اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"gallery",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"تصویر گالری",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"info",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"اطلاعات",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"coordinates",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"موقعیت جغرافیایی",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"description",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"توضیحات",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"features",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"امکانات",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"analyse",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"تحلیل",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"seo",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"سئو",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}})]})]}),(0,r.jsx)(Y.Z,{submitButtonText:"اعمال فیلتر ها",closeButtonText:"حذف فیلتر ها",onCloseButton:()=>j(),onSubmit:()=>y()})]})},G=e=>{var t,n;let{province:i,categories:l,setIsOpen:a}=e,s=(0,K.useQueryClient)(),{replace:o}=(0,S.useRouter)(),{control:c,setValue:d,watch:u,reset:p}=(0,w.Gc)(),h=null===(t=i.filter(e=>e.id===Number(u("provincesId")))[0])||void 0===t?void 0:t.Cities,x=null===(n=l.filter(e=>e.id===Number(u("parentCategoryId")))[0])||void 0===n?void 0:n.children,g=()=>{a(!1)},y=()=>{p({title:"",created_atStart:"",created_atEnd:"",provincesId:"",citiesId:"",parentCategoryId:"",arrayCatIds:[],is_published:"",status:"",base:"",text:"",related:"",seo:"",mainPic:""}),o("/data-management/article-management"),s.invalidateQueries({queryKey:["article-list"]}),a(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.rj,{gapY:"4",p:"4",children:[(0,r.jsxs)(Q.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12],paddingInlineStart:8},children:"بازه زمانی"}),(0,r.jsxs)(Q.rj,{width:"100%",columns:"2",gapX:"2",children:[(0,r.jsx)(w.Qr,{name:"created_atStart",control:c,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"از تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",onChangeValue:e=>{let t=new Date(e);t.setHours(0,0,0,0),d("created_atStart",t.getTime()),d("page",1)}})}),(0,r.jsx)(w.Qr,{name:"created_atEnd",control:c,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"تا تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",minDate:u("created_atStart"),onChangeValue:e=>{let t=new Date(e);t.setHours(23,59,0,0),d("created_atEnd",t.getTime()),d("page",1)},disabled:!u("created_atStart")})})]})]}),(0,r.jsx)(w.Qr,{name:"provincesId",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,lable:"موقعیت",placeholder:"استان",value:String(t.value),onValueChange:e=>{t.onChange(e),d("citiesId","")},children:null==i?void 0:i.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"citiesId",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"شهرستان",disabled:!h,value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==h?void 0:h.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"parentCategoryId",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,lable:"دسته بندی",placeholder:"دسته بندی اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:l.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(Q.Pg,{placeholder:"زیردسته بندی",disabled:!x,children:(0,r.jsx)(B.Z,{isRow:!1,items:H(x),store:"arrayCatIds"})}),(0,r.jsx)(w.Qr,{name:"is_published",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"وضعیت انتشار",lable:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:Z.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"status",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:V.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"base",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"اطلاعات اولیه",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"text",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"محتویات متنی",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"related",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"نقاط مرتبط",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"seo",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"سئو",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"mainPic",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"تصویر اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:F.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}})]}),(0,r.jsx)(Y.Z,{submitButtonText:"اعمال فیلتر ها",closeButtonText:"حذف فیلتر ها",onSubmit:()=>g(),onCloseButton:()=>y(),isFull:!0})]})},J=()=>{let[e,t]=(0,i.useState)(!1),{control:n}=(0,w.Gc)(),l=(0,S.useRouter)(),a=(0,S.useSearchParams)(),s=e=>a.get(e)||"",{data:o}=(0,P.useQuery)({queryKey:["constant"],queryFn:async()=>(0,k.iV)()});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.rj,{width:"100%",gapX:"5",style:{gridTemplateColumns:"auto auto 3fr"},children:[(0,r.jsx)(Q.hU,{colorVariant:"BLUE",variant:"soft",size:"4",type:"button",onClick:()=>t(!0),children:(0,r.jsx)(O.wn,{})}),(0,r.jsx)(Q.zx,{colorVariant:"BLUE",type:"button",variant:"ghost",size:"4",onClick:()=>l.push("/data-management/article-management/create-article"),children:(0,r.jsxs)(Q.kC,{gap:"2",align:"center",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:" افزودن مقاله"})]})}),(0,r.jsx)(w.Qr,{name:"title",control:n,render:e=>{let{field:t}=e;return(0,r.jsx)(N.Z,{...t,placeholder:"جستجو نام نقطه",defaultValue:s("title")?s("title"):""})}})]}),(0,r.jsxs)(Q.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,r.jsx)(D.Z,{title:"فیلتر",handleClose:()=>t(!1)}),(0,r.jsx)(G,{province:(null==o?void 0:o.provinces)?o.provinces:[],categories:(null==o?void 0:o.categories)?o.categories:[],setIsOpen:t})]})]})},ee=n(12767),et=e=>{let t=(0,S.useRouter)();return(0,r.jsx)(ee.iA,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:e.row.index+1})},{accessorKey:"id",header:"شناسه مکان",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"title",header:()=>(0,r.jsx)(Q.kC,{maxWidth:"55%",m:"auto",children:(0,r.jsx)(Q.xv,{...z.p.body2,children:"عنوان مقاله"})}),cell:e=>{let t=e.getValue(),n=e.row.original.status;return(0,r.jsxs)(Q.kC,{width:"100%",maxWidth:"70%",align:"center",justify:"start",gap:"3",mr:"20px",children:[(0,r.jsx)(Q.xu,{width:"12px",height:"12px",style:{borderRadius:100,backgroundColor:!0===n?X.K.blue[6]:X.K.pink[6]},children:" "}),(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})]})}},{accessorKey:"writer",header:"نویسنده",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"citiesName",header:"شهرستان",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"parentCategoryName",header:"دسته بندی",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"categoryName",header:"زیر دسته بندی",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"is_published",header:"وضعیت انتشار",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?X.K.pink[3]:X.K.blue[3],color:!1===t?X.K.pink[11]:X.K.blue[11],borderRadius:4},children:!0===t?"منتشر شده":"منتشر نشده"})}},{id:"details",cell:e=>{let{row:n}=e,i=n.original;return(0,r.jsx)(Q.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,r.jsx)(Q.zx,{variant:"surface",onClick:e=>{console.log("item",i),e.preventDefault(),t.push("/data-management/article-management/edit-article/".concat(i.id))},children:"..."})})}}],data:e.data})},en=()=>{let e=(0,K.useQueryClient)(),t=(0,S.useSearchParams)(),n=e=>t.get(e)||"",i=(0,w.cI)({defaultValues:{page:n("page")?n("page"):1,title:n("title")?n("title"):"",is_published:n("is_published")?String(!!n("is_published")):"",status:n("status")?String(!!n("status")):"",base:n("base")?String(!!n("base")):"",text:n("text")?String(!!n("text")):"",related:n("related")?String(!!n("related")):"",seo:n("seo")?String(!!n("seo")):"",mainPic:n("mainPic")?String(!!n("mainPic")):"",provincesId:n("provincesId")?Number(n("provincesId")):"",citiesId:n("citiesId")?Number(n("citiesId")):"",created_atStart:n("created_atStart")?Number(n("created_atStart")):"",created_atEnd:n("created_atEnd")?Number(n("created_atEnd")):"",parentCategoryId:n("parentCategoryId")?Number(n("parentCategoryId")):"",arrayCatIds:n("arrayCatIds")?n("arrayCatIds").split(",").map(Number):[]}}),{watch:a,handleSubmit:s,setValue:o}=i,{data:d,isLoading:u,isError:p,isFetching:h}=(0,P.useQuery)({queryKey:["article-list"],queryFn:async()=>await g(a())}),x=t=>{let n=c(t,!0),r=(0,_.X)(n);e.invalidateQueries({queryKey:["article-list"]});let i="".concat(window.location.pathname,"?").concat(r);window.history.pushState(null,"",i)};return(0,r.jsx)(w.RV,{...i,children:(0,r.jsx)("form",{onSubmit:s(x),children:(0,r.jsxs)(Q.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(J,{}),p?(0,r.jsx)(Q.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):u||h?(0,r.jsx)(l.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):d?(0,r.jsx)(et,{data:null==d?void 0:d.articles}):(0,r.jsx)(Q.kC,{width:"100%",justify:"center",mt:"6",children:(0,r.jsx)(Q.xv,{...z.p.title1,children:"دیتایی موجود نیست"})}),(null==d?void 0:d.articles)&&(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(R.Z,{current:Number(a("page")),total:d.totalPages,onPageChange:e=>{o("page",e),x(a())}}),(0,r.jsx)(T.Z,{data:d.articles,currentPage:d.currentPage,totalCount:d.totalCount})]})]})})})},er=n(25524),ei=e=>{let{label:t,children:n}=e;return(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",p:"8px 16px",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8,backgroundColor:X.K.gray[2]},children:[(0,r.jsx)(Q.xv,{...z.p.body2,style:{color:X.K.gray[9]},children:t}),(0,r.jsx)(Q.xu,{width:"50%",children:n})]})},el=n(623);let ea="ارسال اطلاعات شما با موفقیت انجام شد";var es=n(31072),eo=n(6850),ec=n(4867),ed=n(89183),eu=()=>{let{setValue:e,watch:t}=(0,w.Gc)(),[n,l]=(0,i.useState)(t("mainPoint")?t("mainPoint"):""),a=()=>{e("mainPoint",null),l("")};return(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",children:[(0,r.jsx)(Q.kC,{width:"40%",align:"center",gap:"3",children:(0,r.jsxs)(ex,{height:"fit-content",gap:"2",disabled:!!t("mainPoint"),children:[(0,r.jsx)(eh,{placeholder:"آیدی نقطه مرتبط اصلی",value:n,disabled:!!t("mainPoint"),type:"number",onChange:e=>l(e.target.value),variant:"surface"}),(0,r.jsx)(Q.hU,{onClick:()=>{e("mainPoint",n),l("")},size:"4",type:"button",className:"icon-button",variant:"surface",disabled:!!t("mainPoint"),children:(0,r.jsx)(ec.pOD,{style:{color:X.K.pink[9]}})})]})}),t("mainPoint")?(0,r.jsxs)(Q.kC,{width:"fit-content",gap:"3",p:"9.5px 16px",align:"center",style:{backgroundColor:X.K.gray[3],borderRadius:16},children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:t("mainPoint")}),(0,r.jsx)(Q.hU,{size:"1",variant:"surface",onClick:()=>a(),children:(0,r.jsx)(ep,{})})]}):(0,r.jsx)(Q.kC,{children:(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11],marginRight:8},children:"در حال حاضر نقطه ای وجود ندارد"})})]})};let ep=(0,ed.ZP)(O.x8).withConfig({componentId:"sc-72f5766e-0"})(["path{fill:",";}"],X.K.pink[11]),eh=(0,ed.ZP)(Q.nv).withConfig({componentId:"sc-72f5766e-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"]),ex=(0,ed.ZP)(Q.kC).withConfig({componentId:"sc-72f5766e-2"})(["width:100%;align-items:center;border:1px solid ",";background-color:",";border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{background-color:",";@media (hover:hover){background-color:transparent !important;}}"],X.K.gray[7],e=>{let{disabled:t}=e;return t?X.K.gray[5]:"transparent"},X.K.blue[2],X.i.shadow1,X.K.gray[3],e=>{let{disabled:t}=e;return t?X.K.gray[5]:"transparent"});var eg=n(66648);let ey=async(e,t)=>(await s.j9.get("article/gallery/".concat(e,"?page=").concat(t))).data.data;var ej=n(38746),em=n(72107),ev=e=>{var t;let{currentItem:n,handleCloseModal:l,articleId:a,constant:s,isOpen:o,resetCurrentItem:c,status:d}=e,u=(0,K.useQueryClient)(),{control:p,watch:h,setValue:x,reset:g}=(0,w.cI)({defaultValues:{town:"",localPic:"",imageFile:null,pic:(null==n?void 0:n.path)?null==n?void 0:n.path:"",provinceId:(null==n?void 0:n.provinceId)?n.provinceId:"",cityID:(null==n?void 0:n.cityId)?n.cityId:"",townId:(null==n?void 0:n.townId)?n.townId:"",alt:(null==n?void 0:n.alt)?null==n?void 0:n.alt:"",description:(null==n?void 0:n.description)?null==n?void 0:n.description:"",brief:(null==n?void 0:n.summery)?n.summery:"",isReset:null!=n&&!!n.path}}),y=null===(t=s.provinces.filter(e=>e.id===Number(h("provinceId")))[0])||void 0===t?void 0:t.Cities,[j,m]=(0,i.useState)([]),v=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},f=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await v(n);t(URL.createObjectURL(r)),x("localPic",URL.createObjectURL(r)),x("isReset",!1),x("imageFile",r)}},{mutate:I,isPending:k}=(0,er.useMutation)({mutationFn:async e=>b(e),onSuccess:async e=>{200===e.statusCode&&(u.invalidateQueries({queryKey:["article-image-gallery"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),l(),c())}}),{mutate:S,isPending:P}=(0,er.useMutation)({mutationFn:async e=>C(e),onSuccess:async e=>{201===e.data.statusCode?(u.invalidateQueries({queryKey:["article-image-gallery"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),l(),c(),g({localPic:""})):(0,es.ToastError)(e.data.message)}});return(0,i.useEffect)(()=>{let e=h("cityID"),t=h("provinceId");if(e&&t){let i=s.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&m(null!==(r=t.Town)&&void 0!==r?r:[])}}},[h("cityID"),h("provinceId")]),(0,r.jsxs)(Q.u_,{isOpen:o,onClose:()=>{c(),l()},children:[(0,r.jsx)(D.Z,{title:"تصاویر",handleClose:()=>{c(),l()}}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==n?void 0:n.path)&&!1==!!h("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{f(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(Q.zx,{size:"3",style:{width:"fit-content"},children:(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(O.V1,{}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:["create"===d&&(0,r.jsx)(Q.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:X.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(X.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{f(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(O.rF,{})})]})}})})}})}),(0,r.jsx)(eg.default,{src:h("isReset")?"".concat("https://uploader.darkube.app/").concat(null==n?void 0:n.path):h("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(Q.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,value:String(h("provinceId")),onValueChange:e=>{t.onChange(e),x("cityID",""),x("townId","")},placeholder:"استان",children:s.provinces.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!h("provinceId"),value:String(h("cityID")),onValueChange:e=>{t.onChange(e),x("townId","")},placeholder:"شهرستان",children:null==y?void 0:y.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!h("provinceId")||!h("cityID"),value:String(h("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==j?void 0:j.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>{c(),l()},isDisableSubmitBtn:!h("townId"),onSubmit:()=>{"create"===d?S({articleImageType:"GALLERY",type:"ARTICLE",alt:h("alt"),description:h("description"),file:h("imageFile"),articleId:a,slug:h("alt"),summery:h("brief"),townId:Number(h("townId"))}):I({alt:h("alt"),description:h("description"),id:n.id,summery:h("brief"),townId:Number(h("townId")),type:"ARTICLE"})},isLoading:P||k})]})]})},eb=e=>{let{articleId:t,constant:n}=e,[a,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)("create"),[d,u]=(0,i.useState)(1),{data:p}=(0,P.useQuery)({queryKey:["article-image-gallery",t,d],queryFn:async()=>ey(t,d)}),[h,x]=(0,i.useState)(!1),[g,y]=(0,i.useState)(null),j=(0,K.useQueryClient)(),{mutate:m,isPending:v}=(0,er.useMutation)({mutationFn:async e=>I(e),onSuccess:async e=>{!0===e.status?(j.invalidateQueries({queryKey:["place"]}),s(!1),(0,es.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,r.jsxs)(r.Fragment,{children:[p&&(null==p?void 0:p.gallery.length)===0?(0,r.jsxs)(Q.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(Q.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصاویر گالری اضافه نشده اند."}),(0,r.jsx)(Q.xv,{...z.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:"تصاویر گالری مجموعه تصاویری هستند که تنها در صفحه نقطه نمایش داده می شوند."}),(0,r.jsx)(Q.zx,{size:"4",type:"button",onClick:()=>{c("create"),x(!0)},children:(0,r.jsxs)(Q.kC,{gap:"2",align:"center",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"افزودن تصویر"})]})})]}):(0,r.jsxs)(Q.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(Q.zx,{variant:"ghost",size:"3",style:{width:"fit-content"},onClick:()=>{c("create"),x(!0)},children:(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"افزودن تصویر"})]})}),null==p?void 0:p.gallery.map(e=>(0,r.jsxs)(Q.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(Q.xu,{width:"328px",height:"200px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(e.path),alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11],marginTop:"10px"},children:e.path}),(0,r.jsxs)(Q.kC,{direction:"column",mt:"12px",children:[(0,r.jsx)(Q.nv,{readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}}),(0,r.jsx)(Q.nv,{value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]})]}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"4",children:[(0,r.jsx)(Q.hU,{size:"3",type:"button",onClick:()=>{c("edit"),y(e),x(!0)},children:(0,r.jsx)(O.z,{})}),(0,r.jsx)(Q.hU,{size:"3",variant:"ghost",type:"button",colorVariant:"PINK",onClick:()=>{s(!0)},children:(0,r.jsx)(O.rF,{height:24})})]})]},e.alt))]}),(0,r.jsx)(R.Z,{current:d,total:null==p?void 0:p.totalPages,maxWidth:24,onPageChange:e=>u(e)}),!!g&&"edit"===o&&(0,r.jsx)(ev,{resetCurrentItem:()=>y(null),articleId:t,constant:n,currentItem:g,handleCloseModal:()=>x(!1),isOpen:h,status:o},""),"create"===o&&(0,r.jsx)(ev,{resetCurrentItem:()=>y(null),articleId:t,constant:n,currentItem:g,handleCloseModal:()=>x(!1),isOpen:h,status:o},""),(0,r.jsx)(Q.u_,{isOpen:a,onClose:()=>s(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>m(Number(1)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:v?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>s(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},eC=e=>{var t,n;let{categories:i,province:l}=e,{control:a,setValue:s,watch:o}=(0,w.Gc)(),c=null===(t=i.filter(e=>e.id===Number(o("parentCategoryId")))[0])||void 0===t?void 0:t.children,d=null===(n=l.filter(e=>e.id===Number(o("provincesId")))[0])||void 0===n?void 0:n.Cities;return(0,r.jsxs)(Q.rj,{width:"100%",gap:"14px",children:[(0,r.jsx)(w.Qr,{name:"on_titile",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"رو تیتر"})}}),(0,r.jsx)(w.Qr,{name:"title",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"عنوان مقاله"})}}),(0,r.jsx)(w.Qr,{name:"slug",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"Custom URL"})}}),(0,r.jsxs)(Q.rj,{width:"100%",columns:"2",gap:"14px",children:[(0,r.jsx)(w.Qr,{name:"writer",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"نام نویسنده"})}}),(0,r.jsx)(w.Qr,{name:"source",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"منبع"})}}),(0,r.jsx)(w.Qr,{name:"parentCategoryId",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"دسته بندی",value:String(t.value),onValueChange:e=>{t.onChange(e),s("categoryId","")},children:i.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"categoryId",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"زیر دسته بندی",disabled:!o("parentCategoryId"),value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==c?void 0:c.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"provincesId",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"استان",value:String(t.value),onValueChange:e=>{t.onChange(e),s("citiesId","")},children:l.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"citiesId",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"شهرستان",disabled:!d,value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==d?void 0:d.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}})]})]})},ef=e=>{var t,n,a,s,o,c,d,u,p,h,x,g,y;let{constant:j,picture:m,articleData:v}=e,[I,k]=(0,i.useState)(!1),[S,P]=(0,i.useState)([]),[R,T]=(0,i.useState)("create"),_=(0,K.useQueryClient)(),[N,V]=(0,i.useState)(!1),{control:Z,watch:F,setValue:E}=(0,w.cI)({defaultValues:{imageFile:null,pic:m||"",localPic:"",provinceId:(null==v?void 0:null===(t=v.picInfo)||void 0===t?void 0:t.picProvince)?null==v?void 0:null===(n=v.picInfo)||void 0===n?void 0:n.picProvince:"",cityID:(null==v?void 0:null===(a=v.picInfo)||void 0===a?void 0:a.picCity)?null==v?void 0:null===(s=v.picInfo)||void 0===s?void 0:s.picCity:"",townId:(null==v?void 0:null===(o=v.picInfo)||void 0===o?void 0:o.picTown)?null==v?void 0:null===(c=v.picInfo)||void 0===c?void 0:c.picTown:"",alt:(null==v?void 0:null===(d=v.picInfo)||void 0===d?void 0:d.alt)?null==v?void 0:null===(u=v.picInfo)||void 0===u?void 0:u.alt:"",description:(null==v?void 0:null===(p=v.picInfo)||void 0===p?void 0:p.description)?null==v?void 0:null===(h=v.picInfo)||void 0===h?void 0:h.description:"",brief:(null==v?void 0:null===(x=v.picInfo)||void 0===x?void 0:x.summery)?null==v?void 0:null===(g=v.picInfo)||void 0===g?void 0:g.summery:"",isReset:!!m,town:""}}),q=null===(y=j.provinces.filter(e=>e.id===Number(F("provinceId")))[0])||void 0===y?void 0:y.Cities,U=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},A=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await U(n);t(URL.createObjectURL(r)),E("localPic",URL.createObjectURL(r)),E("isReset",!1),E("imageFile",r)}},{mutate:M,isPending:L}=(0,er.useMutation)({mutationFn:async e=>b(e),onSuccess:async e=>{200===e.statusCode&&(_.invalidateQueries({queryKey:["place"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),V(!1))}}),{mutate:B,isPending:W}=(0,er.useMutation)({mutationFn:async e=>C(e),onSuccess:async e=>{console.log(e,"datadatadatadatadata"),201===e.data.statusCode&&(_.invalidateQueries({queryKey:["article-data"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),V(!1))}}),{mutate:H,isPending:$}=(0,er.useMutation)({mutationFn:async e=>f(e),onSuccess:async e=>{!0===e.status?(_.invalidateQueries({queryKey:["place"]}),k(!1),(0,es.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.useEffect)(()=>{let e=F("cityID"),t=F("provinceId");if(e&&t){let i=j.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&P(null!==(r=t.Town)&&void 0!==r?r:[])}}},[F("cityID"),F("provinceId")]),(0,r.jsxs)(r.Fragment,{children:[m?(0,r.jsxs)(Q.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(Q.xu,{width:"610px",height:"342px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(m),alt:"تصویر شاخص",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:m}),(0,r.jsx)(w.Qr,{name:"alt",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,readOnly:!0,placeholder:"Alt Text",style:{borderRadius:12}})}}),(0,r.jsx)(w.Qr,{name:"description",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,readOnly:!0,placeholder:"توضیحات تصویر",rows:6,style:{borderRadius:12}})}})]}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"4",px:"10px",children:[(0,r.jsx)(Q.hU,{size:"4",type:"button",onClick:()=>{T("edit"),V(!0)},children:(0,r.jsx)(O.z,{})}),(0,r.jsx)(Q.hU,{size:"3",variant:"ghost",type:"button",colorVariant:"PINK",onClick:()=>{k(!0)},children:(0,r.jsx)(O.rF,{height:24})})]})]}):(0,r.jsxs)(Q.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(Q.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصویر شاخصی اضافه نشده است."}),(0,r.jsxs)(Q.xv,{...z.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر شاخص اولین تصویر نقطه و تصویری است که بر روی کارت ",(0,r.jsx)("br",{})," نقطه نمایش داده می شود!"]}),(0,r.jsx)(Q.zx,{size:"4",type:"button",onClick:()=>{T("create"),V(!0)},children:(0,r.jsxs)(Q.kC,{gap:"2",align:"center",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"افزودن تصویر شاخص"})]})})]}),(0,r.jsxs)(Q.u_,{isOpen:N,onClose:()=>V(!1),children:[(0,r.jsx)(D.Z,{title:"تصویر شاخص",handleClose:()=>V(!1)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!m&&!1==!!F("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{A(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(Q.zx,{size:"3",style:{width:"fit-content"},children:(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(O.V1,{}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:["create"===R&&(0,r.jsx)(Q.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:X.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(X.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(w.Qr,{name:"pic",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{A(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(O.rF,{})})]})}})})}})}),(0,r.jsx)(eg.default,{src:F("isReset")?"".concat("https://uploader.darkube.app/").concat(m):F("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(Q.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,value:String(F("provinceId")),onValueChange:e=>{t.onChange(e),E("cityID",""),E("townId","")},placeholder:"استان",children:j.provinces.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!F("provinceId"),value:String(F("cityID")),onValueChange:e=>{t.onChange(e),E("townId","")},placeholder:"شهرستان",children:null==q?void 0:q.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!F("provinceId")||!F("cityID"),value:String(F("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==S?void 0:S.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:Z,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>V(!1),onSubmit:()=>{"create"===R?B({articleImageType:"MAIN",type:"ARTICLE",alt:F("alt"),description:F("description"),file:F("imageFile"),articleId:null==v?void 0:v.id,slug:F("alt"),summery:F("brief"),townId:Number(F("townId"))}):M({alt:F("alt"),description:F("description"),id:v.picInfo.id,summery:F("brief"),townId:Number(F("townId")),type:"ARTICLE"})},isDisableSubmitBtn:!F("townId"),isLoading:W||L})]})]}),(0,r.jsx)(Q.u_,{isOpen:I,onClose:()=>k(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>H(Number(1)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:$?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>k(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},eI=()=>{let{setValue:e,watch:t,control:n}=(0,w.Gc)(),[l,a]=(0,i.useState)(""),s=(0,w.qo)({control:n,name:"placeRelationType"})||[],o=t=>{e("placeRelationType",s.filter(e=>e!==t))};return(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",children:[(0,r.jsx)(Q.kC,{width:"40%",align:"center",gap:"3",children:(0,r.jsxs)(eS,{children:[(0,r.jsx)(ew,{type:"number",value:l,onChange:e=>a(e.target.value),placeholder:"افزودن نقطه مرتبط"}),(0,r.jsx)(Q.hU,{size:"4",type:"button",className:"icon-button",variant:"surface",onClick:()=>{l&&(e("placeRelationType",[...t("placeRelationType")||[],Number(l)]),a(""))},children:(0,r.jsx)(ec.pOD,{style:{color:X.K.pink[9]}})})]})}),s.length>0?(0,r.jsx)(Q.kC,{width:"100%",gap:"3",wrap:"wrap",children:s.map(e=>(0,r.jsxs)(Q.kC,{width:"fit-content",gap:"3",p:"9.5px 16px",align:"center",style:{backgroundColor:X.K.gray[3],borderRadius:16},children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:e}),(0,r.jsx)(Q.hU,{size:"1",variant:"surface",onClick:()=>o(e),children:(0,r.jsx)(ek,{})})]},e))}):(0,r.jsx)(Q.kC,{p:"54.5px 16px",style:{border:"1px solid ".concat(X.K.gray[7]),borderRadius:8},children:(0,r.jsx)(Q.xv,{...z.p.title1,style:{color:X.K.gray[11]},children:"هنوز نقطه ای اضافه نشده است."})})]})};let ek=(0,ed.ZP)(O.x8).withConfig({componentId:"sc-2978b8bc-0"})(["path{fill:",";}"],X.K.pink[11]),ew=(0,ed.ZP)(Q.nv).withConfig({componentId:"sc-2978b8bc-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"]),eS=(0,ed.ZP)(Q.kC).withConfig({componentId:"sc-2978b8bc-2"})(["width:100%;align-items:center;border:1px solid ",";background-color:transparent;border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{background-color:transparent;@media (hover:hover){background-color:transparent !important;}}"],X.K.gray[7],X.K.blue[2],X.i.shadow1,X.K.gray[3]);n(66173);var eK=n(57818),eP=n(88497),eQ=n(31760),eR=n.n(eQ);let eT=(0,eK.default)(()=>n.e(7335).then(n.t.bind(n,67602,23)).then(e=>e.Editor),{loadableGenerated:{webpack:()=>[67602]},ssr:!1,loading:()=>(0,r.jsx)(l.$j,{})});var e_=()=>{let e=[{name:"فهرست مطالب",id:1},{name:"محتوای اصلی مقاله",id:2}],{setValue:t,getValues:n,control:l,watch:a}=(0,w.Gc)(),s=(0,w.qo)({name:"articleDetail"}),[o,c]=(0,i.useState)(e.reduce((e,t)=>{let n=null==s?void 0:s.find(e=>e.detailId===t.id);if(n&&n.descriptions){let r=(0,eP.convertFromHTML)(n.descriptions),i=eP.ContentState.createFromBlockArray(r.contentBlocks,r.entityMap);e[t.id]=eP.EditorState.createWithContent(i)}else e[t.id]=eP.EditorState.createEmpty();return e},{})),d=(e,r)=>{c(t=>({...t,[e]:r}));let i=r.getCurrentContent(),l=eR()((0,eP.convertToRaw)(i)).trim();if("<p></p>"===l||""===l)return;let a=n("articleDetail")||[],s=a.findIndex(t=>t.detailId===e);-1!==s?a[s].descriptions=l:a.push({detailId:e,descriptions:l}),t("articleDetail",a,{shouldDirty:!0})};return console.log(a()),(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",children:[(0,r.jsx)(w.Qr,{name:"brief",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"خلاصه مقاله",rows:4})}}),(0,r.jsx)(w.Qr,{name:"summery",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"summery",rows:4})}}),(0,r.jsx)(Q.rj,{children:e.map(e=>(0,r.jsx)(eT,{editorStyle:{minHeight:"144px",overflow:"auto",border:"1px solid #CDCED7",borderRadius:"8px",padding:"8px",position:"static",height:"fit-content"},editorState:o[e.id],toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:t=>d(e.id,t),placeholder:e.name},e.id))}),(0,r.jsx)(w.Qr,{name:"isSlider",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.XZ,{...t,size:"2",label:"نمایش در صفحه اصلی",checked:t.value,onCheckedChange:e=>t.onChange(e)})}})]})},ez=e=>{var t,n;let{type:a,placeConstant:s,articleData:o}=e,c=(0,K.useQueryClient)(),d=(0,S.useRouter)(),u=(0,S.useParams)(),[p,h]=(0,i.useState)("initial-data"),x=(0,w.cI)({defaultValues:"create-article"===a?{articleDetail:[],title:"",content:"",writer:"",on_titile:"",source:"",summery:"",brief:"",placeRelationType:(null==o?void 0:o.places)?null==o?void 0:null===(t=o.places.find(e=>(null==e?void 0:e.placeRelationType)==="MAIN"))||void 0===t?void 0:t.placeId:null,slug:"",tableOfContent:"",inMain:!1,inTop:!1,provincesId:"",citiesId:"",metakeywords:[],keywords:[],meta_title:"",meta_description:"",status:"",is_published:"",type:"",categoryId:"",parentCategoryId:"",source_link:"",pic:"",isSlider:!1,mainPoint:null,view:null}:"edit-article"===a?{articleDetail:[{detailId:1,descriptions:o.tableOfContent||""},{detailId:2,descriptions:o.content||""}],type:(null==o?void 0:o.type)?null==o?void 0:o.type:"",is_published:null==o?void 0:o.is_published,status:null==o?void 0:o.status,provincesId:(null==o?void 0:o.provincesId)?null==o?void 0:o.provincesId:"",citiesId:(null==o?void 0:o.citiesId)?null==o?void 0:o.citiesId:"",categoryId:Number(null==o?void 0:o.categoryId),parentCategoryId:Number(null==o?void 0:o.parentCategoryId),title:null==o?void 0:o.title,content:null==o?void 0:o.content,writer:null==o?void 0:o.writer,on_titile:null==o?void 0:o.on_titile,source:null==o?void 0:o.source,summery:null==o?void 0:o.summery,brief:null==o?void 0:o.brief,slug:null==o?void 0:o.slug,tableOfContent:null==o?void 0:o.tableOfContent,inMain:null==o?void 0:o.inMain,inTop:null==o?void 0:o.inTop,mainPoint:(null==o?void 0:o.places)?null===(n=o.places.find(e=>"MAIN"===e.placeRelationType))||void 0===n?void 0:n.placeId:null,placeRelationType:(null==o?void 0:o.places)?(null==o?void 0:o.places).filter(e=>"RELATION"===e.placeRelationType).map(e=>e.placeId):null,metakeywords:null==o?void 0:o.tags,keywords:null==o?void 0:o.keywords,meta_title:null==o?void 0:o.meta_title,meta_description:null==o?void 0:o.meta_description,view:null==o?void 0:o.view,source_link:null==o?void 0:o.source_link,pic:null==o?void 0:o.pic,isSlider:null==o?void 0:o.isSlider}:{}}),{watch:g,control:y}=x,{mutate:v,isPending:b}=(0,er.useMutation)({mutationFn:async e=>j(e),onSuccess:e=>{201===e.statusCode?(d.push("/data-management/article-management"),c.invalidateQueries({queryKey:["article-data"]}),(0,es.ToastSuccess)(ea)):(0,es.ToastError)(e.message)},onError:e=>{console.log("onError",e)}}),{mutate:C,isPending:f}=(0,er.useMutation)({mutationFn:async e=>m(Number(u.slug[2]),e),onSuccess:e=>{200===e.statusCode?((0,es.ToastSuccess)(ea),d.push("/data-management/article-management"),c.invalidateQueries({queryKey:["article-data"]})):(0,es.ToastError)(e.message)},onError:e=>{console.log("onError",e)}});return(0,r.jsx)(w.RV,{...x,children:(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",children:[(0,r.jsxs)(Q.rj,{width:"100%",columns:"3",gap:"5",children:[(0,r.jsx)(ei,{label:"نوع نقطه",children:(0,r.jsx)(w.Qr,{name:"type",control:y,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"نقطه",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==s?void 0:s.PlaceType.map((e,t)=>(0,r.jsx)(Q.Ql,{value:e.id,children:e.name},t))})}})}),(0,r.jsx)(ei,{label:"انتشار",children:(0,r.jsx)(w.Qr,{name:"is_published",control:y,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"انتشار",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:q.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}})}),(0,r.jsx)(ei,{label:"وضعیت",children:(0,r.jsx)(w.Qr,{name:"status",control:y,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:E.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}})})]}),(0,r.jsx)(Q.kC,{position:"sticky",top:"70px",width:"100%",gap:"11px",p:"4",align:"center",style:{overflowX:"auto",border:"1px solid ".concat(X.K.gray[6]),backgroundColor:X.K.gray[2],borderRadius:"4px",zIndex:"2"},children:"create-article"===a?(0,r.jsx)(r.Fragment,{children:M.map((e,t)=>(0,r.jsx)(Q.zx,{size:"3",type:"button",variant:p===e.key?"soft":"solid",onClick:()=>h(e.key),children:(0,r.jsx)(Q.xv,{...z.p.body1,children:e.label})},t))}):"edit-article"===a&&(0,r.jsx)(r.Fragment,{children:L.map((e,t)=>(0,r.jsx)(Q.zx,{size:"3",type:"button",variant:p===e.key?"soft":"solid",onClick:()=>h(e.key),children:(0,r.jsx)(Q.xv,{...z.p.body1,children:e.label})},t))})}),"initial-data"===p&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"اطلاعات اولیه",children:(0,r.jsx)(eC,{categories:(null==s?void 0:s.categories)?s.categories:[],province:(null==s?void 0:s.provinces)?s.provinces:[]})}),"text-content"===p&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"محتوای متنی",children:(0,r.jsx)(e_,{})}),"related-points"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eo.Z,{type:"changeAble",hero:"نقطه مقاله",children:(0,r.jsx)(eu,{})}),(0,r.jsx)(eo.Z,{type:"changeAble",hero:"نقاط مرتبط",children:(0,r.jsx)(eI,{})})]}),"seo-setting"===p&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تنظیمات سئو",children:(0,r.jsx)(el.MK,{})}),"images"===p&&(0,r.jsxs)(Q.kC,{direction:"column",gap:"5",children:[(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تصویر شاخص",children:(0,r.jsx)(ef,{constant:s,picture:null==o?void 0:o.pic,articleData:o})}),(0,r.jsx)(eo.Z,{type:"changeAble",hero:"گالری تصاویر",children:(0,r.jsx)(eb,{articleId:null==o?void 0:o.id,constant:s})})]}),(0,r.jsxs)(Q.kC,{p:"4",gap:"5",style:{backgroundColor:X.K.gray[2],border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(Q.zx,{size:"3",variant:"soft",style:{padding:"13.5px 48.5px"},onClick:()=>"create-article"===a?v(g()):C(g()),children:b||f?(0,r.jsx)(l.$j,{}):(0,r.jsx)(Q.xv,{...z.p.body1,children:"ثبت"})}),(0,r.jsx)(Q.zx,{size:"3",colorVariant:"PINK",onClick:()=>d.back(),style:{padding:"13.5px 48.5px"},children:(0,r.jsx)(Q.xv,{...z.p.body1,children:"لغو"})})]})]})})},eN=n(67753),eD=n(14245),eO=n(24822),eV=n(58606),eZ=n(10504);let eF={open:{opacity:1,height:"auto"},closed:{opacity:0,height:0}};var eE=e=>{let{pic:t,fullName:n,date:l,content:a,onDelete:s,isDisable:o=!0}=e,[c,d]=(0,i.useState)(!1),u=()=>{d(!c)};return(0,r.jsxs)(Q.rj,{width:"100%",p:"4",gapY:"2",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsxs)(Q.kC,{align:"center",gap:"10px",children:[(0,r.jsx)(Q.xu,{width:"32px",height:"32px",position:"relative",children:(0,r.jsx)(eg.default,{src:t?"".concat("https://uploader.darkube.app/").concat(t):"",alt:"",fill:!0,style:{borderRadius:100}})}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"1",children:[(0,r.jsx)(Q.xv,{...z.p.body3,style:{color:X.K.gray[11]},children:n}),(0,r.jsx)(Q.xv,{...z.p.description2,style:{color:X.K.gray[11],opacity:"50%"},children:(0,eZ.l)(l)})]})]}),(0,r.jsx)(Q.hU,{type:"button",size:"3",colorVariant:"PINK",disabled:o,onClick:s,style:{borderRadius:40},children:(0,r.jsx)(O.rF,{})})]}),(0,r.jsx)(eV.E.div,{variants:eF,initial:!1,transition:{duration:.3},style:{overflow:"hidden"},layout:!0,children:(0,r.jsx)(Q.xv,{...z.p.paragraph2,style:{color:X.K.gray[11]},children:c?a:"".concat(a.slice(0,300)).concat(a.length>300?"...":"")})}),(0,r.jsx)(Q.kC,{width:"100%",align:"center",justify:"end",children:(0,r.jsx)(eV.E.div,{transition:{duration:.3},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsxs)(Q.zx,{variant:"surface",colorVariant:"PINK",type:"button",onClick:()=>u(),children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:c?"بستن":"بیشتر"}),c?(0,r.jsx)(ec.g8U,{style:{color:X.K.pink[10]}}):(0,r.jsx)(ec.v4q,{style:{color:X.K.pink[10]}})]})})})]})},eq=e=>{var t,n;let{id:a}=e,[s,o]=(0,i.useState)(1),c=(0,K.useQueryClient)(),[u,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(null),{data:g,isLoading:y,isFetching:j}=(0,P.useQuery)({queryKey:["place-user-comments",a,s],queryFn:async()=>d(a,s,6)}),{mutate:m,isPending:v}=(0,er.useMutation)({mutationFn:async e=>(0,eO.kq)(e),onSuccess:async e=>{!0===e.status?(c.invalidateQueries({queryKey:["place-user-comments"]}),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید"),p(!1)},onError:()=>{(0,es.ToastError)("لطفا دوباره تلاش نمایید"),p(!1)}});return y||j?(0,r.jsx)(l.$j,{style:{margin:"50px auto"}}):(0,r.jsxs)(r.Fragment,{children:[(null==g?void 0:null===(t=g.PlaceComments)||void 0===t?void 0:t.length)===0?(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:"در حال حاضر برای این نقطه نظری ثبت نشده است"}):(0,r.jsxs)(Q.kC,{direction:"column",gap:"5",children:[null==g?void 0:null===(n=g.PlaceComments)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(eE,{...e,isDisable:!1,onDelete:()=>{p(!0),x(e.id)}},t)),(null==g?void 0:g.PlaceComments)&&(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",px:"5",children:[(0,r.jsx)(R.Z,{current:s,total:null==g?void 0:g.totalPages,maxWidth:24,onPageChange:e=>o(e)}),(0,r.jsx)(T.Z,{data:g.PlaceComments,currentPage:null==g?void 0:g.currentPage,totalCount:null==g?void 0:g.totalCount})]})]}),(0,r.jsx)(Q.u_,{isOpen:u,onClose:()=>p(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>m(Number(h)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:v?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>p(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},eU=n(64793),eA=e=>{var t;let{placeId:n,constant:l,currentItem:a,handleCloseModal:s,isOpen:o,resetCurrentItem:c,status:d}=e,u=(0,K.useQueryClient)(),{control:p,watch:h,setValue:x,reset:g}=(0,w.cI)({defaultValues:{town:"",localPic:"",imageFile:null,pic:(null==a?void 0:a.path)?null==a?void 0:a.path:"",provinceId:(null==a?void 0:a.provinceId)?a.provinceId:"",cityID:(null==a?void 0:a.cityId)?a.cityId:"",townId:(null==a?void 0:a.townId)?a.townId:"",alt:(null==a?void 0:a.alt)?null==a?void 0:a.alt:"",description:(null==a?void 0:a.description)?null==a?void 0:a.description:"",brief:(null==a?void 0:a.summery)?a.summery:"",isReset:null!=a&&!!a.path}}),y=null===(t=l.provinces.filter(e=>e.id===Number(h("provinceId")))[0])||void 0===t?void 0:t.Cities,[j,m]=(0,i.useState)([]),v=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},b=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await v(n);t(URL.createObjectURL(r)),x("localPic",URL.createObjectURL(r)),x("isReset",!1),x("imageFile",r)}},{mutate:C,isPending:f}=(0,er.useMutation)({mutationFn:async e=>(0,k.RP)(e),onSuccess:async e=>{201===e.statusCode?(u.invalidateQueries({queryKey:["image-gallery"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),s(),g({localPic:""})):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:I,isPending:S}=(0,er.useMutation)({mutationFn:async e=>(0,k.b)(e),onSuccess:async e=>{200===e.statusCode?(u.invalidateQueries({queryKey:["image-gallery"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),s()):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}});return(0,i.useEffect)(()=>{let e=h("cityID"),t=h("provinceId");if(e&&t){let i=l.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&m(null!==(r=t.Town)&&void 0!==r?r:[])}}},[h("cityID"),h("provinceId")]),(0,r.jsxs)(Q.u_,{isOpen:o,onClose:()=>{c(),s()},children:[(0,r.jsx)(D.Z,{title:"تصاویر",handleClose:()=>{c(),s()}}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==a?void 0:a.path)&&!1==!!h("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{b(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(Q.zx,{size:"3",type:"button",style:{width:"fit-content"},children:(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(O.V1,{}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:["create"===d&&(0,r.jsx)(Q.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:X.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(X.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{b(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(O.rF,{})})]})}})})}})}),(0,r.jsx)(eg.default,{src:h("isReset")?"".concat("https://uploader.darkube.app/").concat(null==a?void 0:a.path):h("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(Q.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,value:String(h("provinceId")),onValueChange:e=>{t.onChange(e),x("cityID",""),x("townId","")},placeholder:"استان",children:l.provinces.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!h("provinceId"),value:String(h("cityID")),onValueChange:e=>{t.onChange(e),x("townId","")},placeholder:"شهرستان",children:null==y?void 0:y.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!h("provinceId")||!h("cityID"),value:String(h("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==j?void 0:j.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>{c(),s()},isDisableSubmitBtn:!h("townId"),onSubmit:()=>{"edit"===d?I({alt:h("alt"),description:h("description"),id:a.id,summery:h("brief"),townId:Number(h("townId")),type:"PLACE"}):C({type:"GALLERY",alt:h("alt")?h("alt"):"",description:h("description")?h("description"):"",file:h("imageFile"),placeId:n,slug:h("alt")?h("alt"):"",summery:h("brief")?h("brief"):"",townId:Number(h("townId"))})},isLoading:f||S,isSubmit:!1})]})]})},eM=e=>{let{placeId:t,constant:n}=e,[a,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),[d,u]=(0,i.useState)("create"),p=(0,K.useQueryClient)(),[h,x]=(0,i.useState)(!1),[g,y]=(0,i.useState)(1),{data:j}=(0,P.useQuery)({queryKey:["image-gallery",g],queryFn:async()=>await (0,k.W5)(t,g)}),[m,v]=(0,i.useState)(null),{mutate:b,isPending:C}=(0,er.useMutation)({mutationFn:async e=>(0,k.Nn)(e),onSuccess:async e=>{!0===e.status?(p.invalidateQueries({queryKey:["image-gallery"]}),(0,es.ToastSuccess)("تصویر مورد نظر با موفقیت حذف شد"),s(!1)):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,r.jsxs)(r.Fragment,{children:[j&&(null==j?void 0:j.gallery.length)===0?(0,r.jsxs)(Q.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(Q.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصاویر گالری اضافه نشده اند."}),(0,r.jsx)(Q.xv,{...z.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:"تصاویر گالری مجموعه تصاویری هستند که تنها در صفحه نقطه نمایش داده می شوند."}),(0,r.jsx)(Q.zx,{size:"4",type:"button",onClick:()=>{v(null),u("create"),x(!0)},children:(0,r.jsxs)(Q.kC,{gap:"2",align:"center",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"افزودن تصویر"})]})})]}):(0,r.jsxs)(Q.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(Q.zx,{variant:"ghost",size:"3",type:"button",style:{width:"fit-content"},onClick:()=>{v(null),u("create"),x(!0)},children:(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"افزودن تصویر"})]})}),null==j?void 0:j.gallery.map(e=>(0,r.jsxs)(Q.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(Q.xu,{width:"328px",height:"200px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(e.path),alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11],marginTop:"10px"},children:e.path}),(0,r.jsxs)(Q.kC,{direction:"column",mt:"12px",children:[(0,r.jsx)(Q.nv,{readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}}),(0,r.jsx)(Q.nv,{value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]})]}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"4",children:[(0,r.jsx)(Q.hU,{size:"3",type:"button",onClick:()=>{u("edit"),v(e),x(!0)},children:(0,r.jsx)(O.z,{})}),(0,r.jsx)(Q.hU,{onClick:()=>{c(e.id),s(!0)},type:"button",size:"3",variant:"surface",colorVariant:"PINK",children:(0,r.jsx)(O.rF,{})})]})]},e.alt))]}),j&&(null==j?void 0:j.gallery.length)>0&&(0,r.jsx)(R.Z,{current:g,total:null==j?void 0:j.totalPages,maxWidth:24,onPageChange:e=>y(e)}),!!m&&(0,r.jsx)(eA,{constant:n,currentItem:m,handleCloseModal:()=>x(!1),isOpen:h,placeId:t,resetCurrentItem:()=>v(null),status:d}),"create"===d&&(0,r.jsx)(eA,{constant:n,currentItem:m,handleCloseModal:()=>x(!1),isOpen:h,placeId:t,resetCurrentItem:()=>v(null),status:d}),(0,r.jsx)(Q.u_,{isOpen:a,onClose:()=>s(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>b(Number(o)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:C?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>s(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},eL=e=>{let{picture:t,description:n,id:a,isTop:s}=e,[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),p=(0,K.useQueryClient)(),[h,x]=(0,i.useState)(s);console.log(h);let{mutate:g,isPending:y}=(0,er.useMutation)({mutationFn:async e=>(0,k.BT)(e),onSuccess:async e=>{!0===e.status?((0,es.ToastSuccess)("تصویر مورد نظر با موفقیت حذف شد"),c(!1),p.invalidateQueries({queryKey:["place-user-uploads"]})):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}}),{mutate:j,isSuccess:m}=(0,er.useMutation)({mutationFn:async e=>(0,k.Yh)(e),onSuccess:async e=>{!0===e.status?((0,es.ToastSuccess)("تصویر مورد نظر با موفقیت به عنوان تصویر برتر انتخاب شد"),c(!1),p.invalidateQueries({queryKey:["place-user-uploads"]})):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return console.log(s,"isTopisTopisTop"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.rj,{width:"100%",p:"12px",gap:"10px",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(Q.xu,{width:"100%",height:"200px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(t),alt:"تصویر مکان ارسال شده",fill:!0,style:{borderRadius:8}})}),(0,r.jsx)(Q.xv,{...z.p.body2,style:{color:X.K.gray[11],width:"fit-content"},children:n}),(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(Q.XZ,{label:"تصویر برتر",checked:s,onCheckedChange:()=>{j(a),m&&x(e=>!e)}}),(0,r.jsxs)(Q.kC,{align:"center",gap:"10px",children:[(0,r.jsx)(Q.hU,{size:"3",type:"button",onClick:()=>{let e="".concat("https://uploader.darkube.app/").concat(t);window.open(e,"_blank")},children:(0,r.jsx)(O.UW,{})}),(0,r.jsx)(Q.hU,{onClick:()=>{c(!0),u(a)},size:"3",type:"button",colorVariant:"PINK",variant:"surface",children:(0,r.jsx)(O.rF,{})})]})]})]}),(0,r.jsx)(Q.u_,{isOpen:o,onClose:()=>c(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>g(Number(d)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:y?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>c(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},eB=e=>{var t,n;let{id:l}=e,[a,s]=(0,i.useState)(1),{data:o}=(0,P.useQuery)({queryKey:["place-user-uploads",l,a],queryFn:async()=>x(l,a,6)});return(0,r.jsx)(r.Fragment,{children:(null==o?void 0:null===(t=o.filteredPics)||void 0===t?void 0:t.length)===0?(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:"در حال حاضر تصویری آپلود نشده است"}):(0,r.jsxs)(Q.kC,{direction:"column",gap:"5",children:[(0,r.jsx)(Q.rj,{columns:{initial:"1",sm:"2",md:"3"},gap:"5",children:null==o?void 0:null===(n=o.filteredPics)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(eL,{...e},t))}),(null==o?void 0:o.filteredPics)&&(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",px:"5",children:[(0,r.jsx)(R.Z,{current:a,total:null==o?void 0:o.totalPages,maxWidth:24,onPageChange:e=>s(e)}),(0,r.jsx)(T.Z,{data:o.filteredPics,currentPage:null==o?void 0:o.currentPage,totalCount:null==o?void 0:o.totalCount})]})]})})},eW=e=>{let{name:t,placeProvinceName:n,cityName:i,provinceName:l,phone:a,website:s,email:o,type:c,index:d,address:u,placeName:p,placeCityName:h,onDelete:x}=e;return(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",p:"4",style:{borderRadius:8,backgroundColor:d%2==0?X.K.blue[2]:X.K.pink[2],border:d%2==0?"1px solid ".concat(X.K.blue[6]):"1px solid ".concat(X.K.pink[6])},children:["improve_data_management"===c&&(0,r.jsx)(Q.kC,{width:"100%",justify:"between",align:"center",children:(0,r.jsxs)(Q.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12]},children:p}),(0,r.jsx)(Q.xv,{...z.p.description2,style:{color:X.K.gray[11]},children:"".concat(n," / ").concat(h)})]})}),(0,r.jsxs)(eX,{type:c,children:[(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",children:[(0,r.jsxs)(Q.rj,{width:"3",columns:"3",gapY:"5",children:[(0,r.jsx)(eY,{label:"نام نقطه",value:t}),(0,r.jsx)(eY,{label:"شماره تماس",value:a}),(0,r.jsx)(eY,{label:"وب سایت",value:s}),(0,r.jsx)(eY,{label:"ایمیل",value:o}),(0,r.jsx)(eY,{label:"استان",value:l}),(0,r.jsx)(eY,{label:"شهر",value:i})]}),(0,r.jsx)(Q.xv,{...z.p.paragraph1,style:{color:X.K.gray[11]},children:u})]}),(0,r.jsx)(Q.hU,{size:"2",type:"button",colorVariant:"PINK",style:{borderRadius:12,marginInline:"auto"},onClick:()=>{x&&x()},children:(0,r.jsx)(O.rF,{})})]})]})};let eY=e=>{let{label:t,value:n}=e;return(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body2,style:{color:X.K.gray[10]},children:t}),(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[12]},children:n||"ــ"})]})},eX=(0,ed.ZP)(Q.rj).withConfig({componentId:"sc-24a60468-0"})(["grid-template-columns:",";column-gap:",";"],e=>{let{type:t}=e;return"improve_data_management"===t?"1fr":"95% 5%"},e=>{let{type:t}=e;return"improve_data_management"===t?"0px":"16px"});var eH=e=>{var t,n;let{id:a}=e,[s,o]=(0,i.useState)(1),[c,d]=(0,i.useState)(null),[u,p]=(0,i.useState)(!1),x=(0,K.useQueryClient)(),{data:g,isLoading:y,isFetching:j}=(0,P.useQuery)({queryKey:["place-user-uploads",a,s],queryFn:async()=>h(a,s,6)}),{mutate:m,isPending:v}=(0,er.useMutation)({mutationFn:async e=>(0,eO.Xo)(e),onSuccess:async e=>{!0===e.status?(x.invalidateQueries({queryKey:["place-user-uploads"]}),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد"),p(!1)):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,r.jsxs)(r.Fragment,{children:[y||j?(0,r.jsx)(l.$j,{style:{margin:"50px auto",scale:2}}):(null==g?void 0:null===(t=g.PlaceImproveContent)||void 0===t?void 0:t.length)===0?(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:"در حال حاضر موردی ثبت نشده است"}):(0,r.jsxs)(Q.kC,{direction:"column",gap:"5",children:[null==g?void 0:null===(n=g.PlaceImproveContent)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(eW,{state:t,...e,type:"point_detail",onDelete:()=>{d(Number(e.id)),p(!0)}},t)),(null==g?void 0:g.PlaceImproveContent)&&(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",px:"5",children:[(0,r.jsx)(R.Z,{current:s,total:null==g?void 0:g.totalPages,maxWidth:24,onPageChange:e=>o(e)}),(0,r.jsx)(T.Z,{data:g.PlaceImproveContent,currentPage:null==g?void 0:g.currentPage,totalCount:null==g?void 0:g.totalCount})]})]}),(0,r.jsx)(Q.u_,{isOpen:u,onClose:()=>p(!1),children:(0,r.jsxs)(l.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(l.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>m(Number(c)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:v?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>p(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},e$=e=>{var t;let{picture:n,constant:a,placeData:s}=e,[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)([]),[p,h]=(0,i.useState)("create"),x=s.pictures.filter(e=>"MAIN"===e.type)[0],g=(0,K.useQueryClient)(),[y,j]=(0,i.useState)(!1),{control:m,watch:v,setValue:b,reset:C}=(0,w.cI)({defaultValues:{imageFile:null,pic:x?x.path:"",localPic:"",provinceId:(null==x?void 0:x.provinceId)?x.provinceId:"",cityID:(null==x?void 0:x.cityID)?x.cityId:"",townId:(null==x?void 0:x.townId)?x.townId:"",isReset:null!=n&&!!n.path,alt:(null==x?void 0:x.alt)&&"null"!==x.alt?x.alt:"",description:(null==x?void 0:x.description)&&"null"!==x.description?x.description:"",brief:(null==x?void 0:x.brief)&&"null"!==x.brief?x.brief:""}}),f=null===(t=a.provinces.filter(e=>e.id===Number(v("provinceId")))[0])||void 0===t?void 0:t.Cities,I=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},S=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await I(n);t(URL.createObjectURL(r)),b("localPic",URL.createObjectURL(r)),b("isReset",!1),b("imageFile",r)}},{mutate:P,isPending:R}=(0,er.useMutation)({mutationFn:async e=>(0,k.b)(e),onSuccess:async e=>{200===e.statusCode?(g.invalidateQueries({queryKey:["place"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),j(!1)):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:T,isPending:_}=(0,er.useMutation)({mutationFn:async e=>(0,k.RP)(e),onSuccess:async e=>{201===e.statusCode?(g.invalidateQueries({queryKey:["place"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),j(!1)):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:N,isPending:V}=(0,er.useMutation)({mutationFn:async e=>(0,k.bb)(e),onSuccess:async e=>{!0===e.status?(g.invalidateQueries({queryKey:["place"]}),c(!1),(0,es.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد"),C({alt:"",brief:"",cityID:"",description:"",localPic:"",provinceId:"",townId:""})):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.useEffect)(()=>{let e=v("cityID"),t=v("provinceId");if(e&&t){let i=a.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&u(null!==(r=t.Town)&&void 0!==r?r:[])}}},[v("cityID"),v("provinceId")]),(0,r.jsxs)(r.Fragment,{children:[n?(0,r.jsxs)(Q.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(Q.xu,{width:"610px",height:"342px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(n.path),alt:"تصویر شاخص",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:x.path}),(0,r.jsx)(w.Qr,{name:"alt",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{readOnly:!0,...t,placeholder:"Alt Text",style:{borderRadius:12}})}}),(0,r.jsx)(w.Qr,{name:"description",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{readOnly:!0,...t,placeholder:"توضیحات تصویر",rows:6,style:{borderRadius:12}})}})]}),(0,r.jsxs)(Q.kC,{direction:"column",gap:"4",px:"10px",children:[(0,r.jsx)(Q.hU,{size:"3",type:"button",onClick:()=>{h("edit"),j(!0)},children:(0,r.jsx)(O.z,{})}),(0,r.jsx)(Q.hU,{size:"3",variant:"ghost",type:"button",colorVariant:"PINK",onClick:()=>{c(!0)},children:(0,r.jsx)(O.rF,{height:24})})]})]}):(0,r.jsxs)(Q.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(Q.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصویر شاخصی اضافه نشده است."}),(0,r.jsxs)(Q.xv,{...z.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر شاخص اولین تصویر نقطه و تصویری است که بر روی کارت ",(0,r.jsx)("br",{})," نقطه نمایش داده می شود!"]}),(0,r.jsx)(Q.zx,{size:"4",type:"button",onClick:()=>{h("create"),j(!0),b("localPic","")},children:(0,r.jsxs)(Q.kC,{gap:"2",align:"center",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"افزودن تصویر شاخص"})]})})]}),(0,r.jsxs)(Q.u_,{isOpen:y,onClose:()=>j(!1),children:[(0,r.jsx)(D.Z,{title:"تصویر شاخص",handleClose:()=>j(!1)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==n?void 0:n.path)&&!1==!!v("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>S(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(Q.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(Q.zx,{type:"button",size:"3",style:{width:"fit-content"},children:(0,r.jsxs)(Q.kC,{align:"center",gap:"2",children:[(0,r.jsx)(O.V1,{}),(0,r.jsx)(Q.xv,{...z.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:(0,r.jsx)(eg.default,{src:v("isReset")?"".concat("https://uploader.darkube.app/").concat(n.path):v("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})}),(0,r.jsxs)(Q.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,value:String(v("provinceId")),onValueChange:e=>{t.onChange(e),b("cityID",""),b("townId","")},placeholder:"استان",children:a.provinces.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!v("provinceId"),value:String(v("cityID")),onValueChange:e=>{t.onChange(e),b("townId","")},placeholder:"شهرستان",children:null==f?void 0:f.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,disabled:!v("provinceId")||!v("cityID"),value:String(v("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==d?void 0:d.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{isDisableSubmitBtn:!v("townId"),isLoading:_||R,submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>j(!1),onSubmit:()=>{"create"===p?T({type:"MAIN",alt:v("alt"),description:v("description"),file:v("imageFile"),placeId:s.id,slug:v("alt"),summery:v("brief"),townId:Number(v("townId"))}):P({alt:v("alt"),description:v("description"),id:x.id,summery:v("brief"),townId:Number(v("townId")),type:"PLACE"})},isSubmit:!1})]})]}),(0,r.jsx)(Q.u_,{isOpen:o,onClose:()=>c(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>N(Number(x.id)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:V?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>c(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},eG=()=>{var e,t;let{control:n,watch:l}=(0,w.Gc)(),[a,s]=(0,i.useState)(null===(e=l("vehicleOptions")[0])||void 0===e?void 0:e.key),[o,c]=(0,i.useState)(0),d=(0,w.qo)({control:n,name:"vehicleOptions"})||[],u=(0,w.qo)({control:n,name:"vehicleOptions[".concat(o,"].content"),defaultValue:(null===(t=d[o])||void 0===t?void 0:t.content)||""}),[p,h]=(0,i.useState)(u),x=e=>{switch(e){case"taxi":return"تاکسی";case"car":return"ماشین شخصی";case"train":return"قطار";case"subway":return"مترو";case"ship":return"کشتی";case"airplane":return"هواپیما";case"hike":return"پیاده روی";case"bus":return"اتوبوس"}};return(0,i.useEffect)(()=>{h(l("vehicleOptions[".concat(o,"].content")))},[o]),(0,r.jsx)(Q.kC,{direction:"column",gap:"28px",children:(0,r.jsxs)(Q.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(Q.kC,{width:"100%",gap:"5",align:"center",style:{overflow:"auto"},children:null==d?void 0:d.map((e,t)=>(0,r.jsx)(Q.zx,{variant:e.key===a?"soft":"solid",type:"button",size:"3",style:{paddingInline:16},onClick:()=>{s(e.key),c(t)},children:(0,r.jsx)(Q.xv,{...z.p.body1,children:x(e.key)})},e.key))}),(0,r.jsx)(w.Qr,{name:"vehicleOptions[".concat(o,"].content"),control:n,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.Kx,{...t,value:p,onChange:e=>{t.onChange(e.target.value),h(e.target.value)},placeholder:"شرح مسیر ".concat(x(a)),rows:5})}})]})})},eJ=n(52795),e0=n(86084),e1=n(75312),e2=e=>{let{description:t,type:n,id:i,cardType:l,onDelete:a,onPublish:s}=e;return(0,r.jsxs)(Q.kC,{position:"relative",direction:"column",p:"16px",gap:"16px",style:{borderRadius:"8px",backgroundColor:i%2==0?X.K.blue[2]:X.K.pink[2],border:i%2==0?"1px solid ".concat(X.K.blue[6]):"1px solid ".concat(X.K.pink[6])},children:[(0,r.jsx)(Q.kC,{justify:"between",children:(0,r.jsx)(Q.xv,{...z.p.body2,style:{color:i%2==0?X.K.blue[9]:X.K.pink[9]},children:"AIRPLANE"===n?"هواپیما":"BUS"===n?"اتوبوس":"CAR"===n?"ماشین":"HIKE"===n?"پیاده روی":"SHIP"===n?"کشتی":"TAXI"===n?"تاکسی":"TRAIN"===n&&"قطار"})}),(0,r.jsxs)(Q.kC,{width:"100%",justify:"between",gap:"2",children:[(0,r.jsx)(Q.xv,{...z.p.paragraph2,style:{color:X.K.gray[11]},children:t}),"route_sent"===l&&(0,r.jsxs)(Q.kC,{gap:"2",children:[s&&(0,r.jsx)(Q.hU,{type:"button",size:"3",variant:"soft",onClick:s,children:(0,r.jsx)(O.Jr,{})}),(0,r.jsx)(Q.hU,{type:"button",size:"3",colorVariant:"PINK",onClick:a,children:(0,r.jsx)(O.rF,{})})]})]}),(0,r.jsx)(Q.kC,{justify:"center",align:"center",style:{position:"absolute",right:"-38px",top:"-2px",width:"30px",height:"30px",borderRadius:"50%",backgroundColor:i%2==0?X.K.blue[9]:X.K.pink[9]},children:(e=>{switch(e){case"BUS":return(0,r.jsx)(O.Gc,{});case"TAXI":default:return(0,r.jsx)(O.Ou,{});case"AIRPLANE":return(0,r.jsx)(O.g,{});case"CAR":return(0,r.jsx)(O.lG,{});case"HIKE":return(0,r.jsx)(O.Ir,{});case"SHIP":return(0,r.jsx)(O.lO,{});case"TRAIN":return(0,r.jsx)(O.Qr,{})}})(n)})]})},e3=e=>{let{id:t}=e,[n,a]=(0,i.useState)(1),s=(0,K.useQueryClient)(),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),{data:p}=(0,P.useQuery)({queryKey:["RoutingGuideList",n],queryFn:async()=>await (0,k.LY)(t,n)}),{mutate:h,isPending:x}=(0,er.useMutation)({mutationFn:async e=>(0,eO.M9)(e),onSuccess:async e=>{!0===e.status?(s.invalidateQueries({queryKey:["RoutingGuideList"]}),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید"),c(!1)},onError:()=>{(0,es.ToastError)("لطفا دوباره تلاش نمایید"),c(!1)}});return p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.kC,{direction:"column",gap:"24px",children:[0===p.filteredSuggestions.length?(0,r.jsx)(Q.xv,{...z.p.body1,style:{color:X.K.gray[11]},children:"هیچ راهنمای مسیری ارسال نشده است."}):(0,r.jsxs)(Q.kC,{direction:"column",pr:"36px",gap:"16px",style:{flex:1},position:"relative",children:[(0,r.jsx)("div",{style:{position:"absolute",height:"100%",right:"12px",border:"1px dashed ".concat(X.K.gray[6])}}),p.filteredSuggestions.map((e,t)=>(0,r.jsx)(e2,{onDelete:()=>{u(e.id),c(!0)},id:t,description:e.description,type:e.travelMode,cardType:"route_sent"},t))]}),(0,r.jsx)(R.Z,{current:n,total:null==p?void 0:p.totalPages,maxWidth:24,onPageChange:e=>{a(e)}})]}),(0,r.jsx)(Q.u_,{isOpen:o,onClose:()=>c(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>h(Number(d)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:x?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>c(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]}):(0,r.jsx)(l.$j,{style:{margin:"auto"}})};let e4=(0,eK.default)(()=>Promise.resolve().then(n.bind(n,49796)),{loadableGenerated:{webpack:()=>[49796]},ssr:!1}),e5=(0,eK.default)(()=>Promise.resolve().then(n.bind(n,39224)),{loadableGenerated:{webpack:()=>[39224]},ssr:!1}),e6=eD.Ry().shape({category_id:eD.Z_().required("لطفاً دسته بندی را وارد کنید"),sub_category_id:eD.Z_().required("لطفاً زیر دسته بندی را وارد کنید"),name:eD.Z_().required("لطفاً نام را وارد کنید"),provinceId:eD.Z_().required("لطفاً استان را وارد کنید"),cityID:eD.Z_().required("لطفاً شهرستان را وارد کنید"),townId:eD.Z_().required("لطفاً شهر را وارد کنید"),type:eD.Z_(),status:eD.Z_(),isPublished:eD.O7(),slug:eD.Z_(),basicInfoDescription:eD.Z_(),basicInfosummary:eD.Z_(),area:eD.Z_(),tell:eD.Z_(),website:eD.Z_(),email:eD.Z_(),address:eD.Z_(),vehicleOptions:eD.IX(),PlaceDetails:eD.IX(),features:eD.IX(),trip_value:eD.Rx(),rating:eD.Rx(),TripTypes:eD.IX(),PlaceCategories:eD.IX(),PlaceTripSeasons:eD.IX(),tripLimitations:eD.IX(),gender:eD.Z_(),PlaceWorkTimes:eD.IX(),meta_description:eD.Z_(),meta_title:eD.Z_(),metakeyword:eD.Z_(),uploadImage:eD.IX(),pictures:eD.IX(),suggested_time:eD.Z_()});function e8(e){return Object.entries(e).map(e=>{let[t,n]=e;return{key:t,content:n}})}var e7=e=>{var t,n,a,s,o;let{placeConstant:c,status:d,placeID:u,placeData:p}=e,[h,x]=(0,i.useState)("place-info"),g={taxi:(null==p?void 0:p.taxi)?null==p?void 0:p.taxi:"",bus:(null==p?void 0:p.bus)?null==p?void 0:p.bus:"",subway:(null==p?void 0:p.subway)?null==p?void 0:p.subway:"",car:(null==p?void 0:p.car)?null==p?void 0:p.car:"",train:(null==p?void 0:p.train)?null==p?void 0:p.train:"",airplane:(null==p?void 0:p.airplane)?null==p?void 0:p.airplane:"",hike:(null==p?void 0:p.hike)?null==p?void 0:p.hike:"",ship:(null==p?void 0:p.ship)?null==p?void 0:p.ship:""},y=(0,K.useQueryClient)(),{push:j,back:m}=(0,S.useRouter)(),v=(0,w.cI)({resolver:(0,eN.X)(e6),defaultValues:"edit-point"==d?{type:null==p?void 0:p.type,status:null==p?void 0:p.status,isPublished:null!=p&&!!p.isPublished&&(null==p?void 0:p.isPublished),name:null==p?void 0:p.name,category_id:(null==p?void 0:p.category_id)?function e(t,n){for(let r of t){if(r.id===n)return r;if(r.children&&r.children.length>0){let t=e(r.children,n);if(t)return t}}return null}(c.categories,p.category_id).parent_id:"",sub_category_id:(null==p?void 0:p.category_id)?null==p?void 0:p.category_id:"",slug:null==p?void 0:p.slug,basicInfoDescription:null==p?void 0:p.description,basicInfosummary:null==p?void 0:p.summary,provinceId:(null==p?void 0:p.Cities)?null==p?void 0:p.Cities.Provinces.id:"",cityID:(null==p?void 0:p.Cities)?null==p?void 0:p.Cities.id:"",area:null==p?void 0:p.area,townId:null==p?void 0:null===(t=p.Town)||void 0===t?void 0:t.id,tell:null==p?void 0:p.tell,website:null==p?void 0:p.website,email:null==p?void 0:p.email,address:null==p?void 0:p.address,lat:null==p?void 0:p.lat,lng:null==p?void 0:p.lng,vehicleOptions:e8(g),PlaceDetails:(null==(n=null==p?void 0:p.PlaceDetails)?void 0:n.length)>0?n.map(e=>({detailId:e.id,descriptions:e.description})):[],features:(0,e0.$)(null==p?void 0:p.features),cost:null==p?void 0:p.cost,trip_value:null==p?void 0:p.trip_value,renown:null==p?void 0:p.renown,rating:null==p?void 0:p.rating,TripTypes:(a=null==p?void 0:p.Place_TripType,c.tripDatas.map(e=>{let t=null==a?void 0:a.find(t=>t.id===e.id);return t?{tripTypeId:e.id,score:t.score}:{tripTypeId:e.id,score:0}})),PlaceCategories:(s=null==p?void 0:p.Place_Category,c.categories.map(e=>{let t=null==s?void 0:s.find(t=>t.id===e.id);return t?{categoryId:e.id,score:t.score}:{categoryId:e.id,score:0}})),PlaceTripSeasons:(null==p?void 0:p.Place_TripSeason.length)>0?(0,e1.zW)(p.Place_TripSeason):(0,e1.zW)(eU.fR),tripLimitations:(o=null==p?void 0:p.Place_TripLimitation,c.tripLimitations.map(e=>{let t=null==o?void 0:o.find(t=>t.id===e.id);return t?{tripLimitationId:e.id,score:t.score}:{tripLimitationId:e.id,score:0}})),gender:p.gender,PlaceWorkTimes:null==p?void 0:p.PlaceWorkTime,keywords:null==p?void 0:p.keywords,metakeywords:null==p?void 0:p.tags,keyword:null==p?void 0:p.keywords,meta_description:null==p?void 0:p.meta_description,meta_title:null==p?void 0:p.meta_title,metakeyword:"",uploadImage:null==p?void 0:p.UserSentPicturesForPlace,pictures:null==p?void 0:p.pictures,suggested_time:null==p?void 0:p.suggested_time}:{type:"PLACE",isPublished:!1,status:!1,name:"",category_id:"",sub_category_id:"",slug:"",basicInfoDescription:"",basicInfosummary:"",cityID:"",provinceId:"",townId:"",tell:"",website:"",email:"",address:"",lat:"",lng:"",vehicleOptions:e8(g),PlaceDetails:[],features:[],cost:"LOW",renown:"LOW",rating:0,trip_value:0,TripTypes:(0,e1.TY)(null==c?void 0:c.tripDatas),PlaceCategories:(0,e1.Ai)(null==c?void 0:c.categories),PlaceTripSeasons:(0,e1.zW)(null==c?void 0:c.seasons),tripLimitations:(0,e1.iF)(null==c?void 0:c.tripLimitations),gender:"UNKNOWN",PlaceWorkTimes:(0,e1.hn)(eJ.m8),keywords:"",metakeywords:"",keyword:"",meta_description:"",meta_title:"",metakeyword:"",pictures:[],suggested_time:0}}),{handleSubmit:b,control:C,formState:{errors:f}}=v;console.log(f,"errorserrorserrors");let{mutate:I,isPending:P}=(0,er.useMutation)({mutationFn:async e=>(0,k.x1)(e,u),onSuccess:async e=>{!0===e.status?((0,es.ToastSuccess)("اطلاعات شما با موفقیت ویرایش شد"),y.invalidateQueries({queryKey:["place"]}),y.invalidateQueries({queryKey:["all-places"]}),j("/data-management/point-management")):(0,es.ToastError)("لطفا دوباره امتحان نمایید")},onError:e=>{console.log(e,"useRemovePlace")},gcTime:0}),{mutate:R,isPending:T}=(0,er.useMutation)({mutationFn:async e=>(0,k.Nc)(e),onSuccess:async e=>{201===e.statusCode?((0,es.ToastSuccess)("اطلاعات شما با موفقیت ثبت شد"),y.invalidateQueries({queryKey:["all-places"]}),j("/data-management/point-management")):(0,es.ToastError)(String(e.message))},onError:e=>{console.log(e,"createPlaceMutatecreatePlaceMutatecreatePlaceMutate")}});return(0,r.jsx)(w.RV,{...v,children:(0,r.jsx)("form",{onSubmit:b(e=>{"edit-point"===d?I(e):R(e)}),children:(0,r.jsxs)(Q.rj,{width:"100%",gapY:"5",children:[(0,r.jsxs)(Q.rj,{width:"100%",columns:"3",gap:"5",children:[(0,r.jsx)(ei,{label:"نوع نقطه",children:(0,r.jsx)(w.Qr,{name:"type",control:C,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"نقطه",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:c.PlaceType.map((e,t)=>(0,r.jsx)(Q.Ql,{value:e.id,children:e.name},t))})}})}),(0,r.jsx)(ei,{label:"انتشار",children:(0,r.jsx)(w.Qr,{name:"isPublished",control:C,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"انتشار",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:q.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}})}),(0,r.jsx)(ei,{label:"وضعیت",children:(0,r.jsx)(w.Qr,{name:"status",control:C,render:e=>{let{field:t}=e;return(0,r.jsx)(Q.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:E.map(e=>(0,r.jsx)(Q.Ql,{value:String(e.value),children:e.key},e.id))})}})})]}),(0,r.jsx)(Q.kC,{width:"100%",gap:"11px",p:"4",align:"center",style:{overflowX:"auto",backgroundColor:X.K.gray[1],border:"1px solid ".concat(X.K.gray[6]),borderRadius:"8px",zIndex:"10"},position:"sticky",top:"70px",children:"create-point"===d?(0,r.jsx)(r.Fragment,{children:U.map((e,t)=>(0,r.jsx)(Q.zx,{size:"3",type:"button",variant:h===e.key?"soft":"solid",onClick:()=>x(e.key),children:(0,r.jsx)(Q.xv,{...z.p.body1,children:e.label})},t))}):"edit-point"===d&&(0,r.jsx)(r.Fragment,{children:A.map((e,t)=>(0,r.jsx)(Q.zx,{size:"3",type:"button",variant:h===e.key?"soft":"solid",onClick:()=>x(e.key),children:(0,r.jsx)(Q.xv,{...z.p.body1,children:e.label})},t))})}),"place-info"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"اطلاعات نقطه",children:(0,r.jsx)(el.T0,{categoris:c?c.categories:[]})}),"geographical-location"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"موقعیت جغرافیایی",children:(0,r.jsx)(el.kD,{constant:c,province:c?c.provinces:[]})}),"routing"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"چجوری برم",children:(0,r.jsx)(eG,{})}),"routing"===h&&"edit-point"===d&&(0,r.jsx)(eo.Z,{type:"readOnly",hero:"چجوری برم",children:(0,r.jsx)(e3,{id:p.id})}),"description"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"توضیحات",children:(0,r.jsx)(e4,{details:c?c.details:[]},"Description")}),"features-facilities"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"ویژگی ها و امکانات",children:(0,r.jsx)(el.vH,{featureItems:c?c.features:[]})}),"analysis"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تحلیل بزنیم بیرون",children:(0,r.jsx)(el.EB,{constants:c,tripLimitations:c?c.tripLimitations:[],seasons:c?c.seasons:[],tripDatas:c?c.tripDatas:[],Categories:(null==c?void 0:c.categories)?c.categories:[]})}),"travel-time"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"کی برم",children:(0,r.jsx)(e5,{})}),"seo-setting"===h&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تنظیمات سئو",children:(0,r.jsx)(el.MK,{})}),"images"===h&&(0,r.jsxs)(Q.kC,{direction:"column",gap:"5",children:[(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تصویر شاخص",children:(0,r.jsx)(e$,{constant:c,picture:null==p?void 0:p.pictures.filter(e=>"MAIN"===e.type)[0],placeData:p})}),(0,r.jsx)(eo.Z,{type:"changeAble",hero:"گالری تصاویر",children:(0,r.jsx)(eM,{constant:c,placeId:p.id})}),(0,r.jsx)(eo.Z,{type:"readOnly",hero:"تصاویر ارسال شده",children:(0,r.jsx)(eB,{id:u})})]}),"improve-content"===h&&(0,r.jsx)(eo.Z,{type:"readOnly",hero:"اصلاح اطلاعات ارسال شده",children:(0,r.jsx)(eH,{id:u})}),"comments"===h&&(0,r.jsx)(eo.Z,{type:"readOnly",hero:"نظرات",children:(0,r.jsx)(eq,{id:u})}),(0,r.jsxs)(Q.kC,{width:"100%",align:"center",gap:"5",p:"4",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8,backgroundColor:X.K.gray[2]},children:[(0,r.jsx)(Q.zx,{size:"3",variant:"soft",style:{paddingInline:48.5},children:T||P?(0,r.jsx)(l.$j,{}):(0,r.jsx)(Q.xv,{...z.p.body1,children:"ثبت"})}),(0,r.jsx)(Q.zx,{size:"3",colorVariant:"PINK",style:{paddingInline:51},onClick:()=>m,children:(0,r.jsx)(Q.xv,{...z.p.body1,children:"لغو"})}),(0,r.jsx)(Q.kC,{gap:"8px",children:Object.entries(f).map((e,t,n)=>{let[i,l]=e;return(0,r.jsx)("div",{style:{color:X.K.pink[9]},children:(0,r.jsxs)("span",{children:[null==l?void 0:l.message,n.length-1===t?".":"-"]})},i)})})]})]})})})},e9=()=>{let[e,t]=(0,i.useState)(!1),n=(0,S.useRouter)(),{control:l,watch:a}=(0,w.Gc)(),{data:s}=(0,P.useQuery)({queryKey:["constant"],queryFn:async()=>(0,k.iV)()});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Q.rj,{width:"100%",gapX:"5",style:{gridTemplateColumns:"auto auto 3fr "},children:[(0,r.jsx)(Q.hU,{colorVariant:"BLUE",variant:"soft",size:"4",type:"button",onClick:()=>t(!0),children:(0,r.jsx)(O.wn,{})}),(0,r.jsx)(Q.zx,{colorVariant:"BLUE",variant:"ghost",type:"button",size:"4",onClick:()=>n.push("/data-management/point-management/create-point"),children:(0,r.jsxs)(Q.kC,{gap:"2",align:"center",children:[(0,r.jsx)(Q.xv,{...z.p.body1,children:"+"}),(0,r.jsx)(Q.xv,{...z.p.body1,children:" افزودن نقطه"})]})}),(0,r.jsx)(w.Qr,{name:"searchQuery",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(N.Z,{...t,placeholder:"جستجو نام نقطه",defaultValue:a("searchQuery")?a("searchQuery"):""})}})]}),(0,r.jsxs)(Q.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,r.jsx)(D.Z,{title:"فیلتر",handleClose:()=>t(!1)}),(0,r.jsx)($,{province:(null==s?void 0:s.provinces)?s.provinces:[],categories:(null==s?void 0:s.categories)?s.categories:[],PlaceType:(null==s?void 0:s.PlaceType)?s.PlaceType:[],setIsOpen:t})]})]})},te=e=>{let t=(0,S.useRouter)(),[n,a]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),{mutate:c,isPending:d}=(0,er.useMutation)({mutationFn:async e=>(0,eO.OJ)(e),onSuccess:async t=>{!0===t.status?(e.onRevalidate(),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید"),a(!1)},onError:()=>{(0,es.ToastError)("لطفا دوباره تلاش نمایید"),a(!1)}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.iA,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:e.row.index+1})},{accessorKey:"id",header:"شناسه مکان",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"name",header:()=>(0,r.jsx)(Q.kC,{maxWidth:"170px",m:"auto",children:(0,r.jsx)(Q.xv,{...z.p.body2,children:"نام نقطه"})}),cell:e=>{let t=e.getValue(),n=e.row.original.status;return(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"start",maxWidth:"250px",gap:"3",mr:"20px",children:[(0,r.jsx)(Q.xu,{width:"12px",height:"12px",style:{borderRadius:100,backgroundColor:!0===n?X.K.blue[6]:X.K.pink[6]},children:" "}),(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})]})}},{accessorKey:"province",header:"استان",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"city",header:"شهرستان",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"parentCategory",header:"دسته بندی",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"type",header:"نوع نقطه",cell:t=>{var n;let i=null===(n=e.constant.PlaceType)||void 0===n?void 0:n.find(e=>e.id==t.getValue()),l=null==i?void 0:i.name;return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:l||"-"})}},{accessorKey:"isPublished",header:"وضعیت انتشار",cell:e=>{let t=e.getValue();return(0,r.jsx)(Q.xv,{...z.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?X.K.pink[3]:X.K.blue[3],color:!1===t?X.K.pink[11]:X.K.blue[11],borderRadius:4},children:!1===t?"منتشر نشده":!0===t?"منتشر شده":"-"})}},{id:"remove",cell:e=>{let{row:t}=e,n=t.original;return(0,r.jsx)(Q.hU,{variant:"solid",size:"3",type:"button",colorVariant:"PINK",onClick:e=>{e.preventDefault(),a(!0),o(n.id)},children:(0,r.jsx)(O.rF,{})})}},{id:"details",cell:e=>{let{row:n}=e,i=n.original;return(0,r.jsx)(Q.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,r.jsx)(Q.zx,{variant:"surface",onClick:e=>{e.preventDefault(),t.push("/data-management/point-management/edit-point/".concat(i.id))},children:"..."})})}}],data:e.data}),(0,r.jsx)(Q.u_,{isOpen:n,onClose:()=>a(!1),children:(0,r.jsxs)(Q.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(Q.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(Q.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(Q.zx,{type:"button",onClick:()=>c(Number(s)),variant:"soft",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:d?(0,r.jsx)(l.$j,{}):"بله"})}),(0,r.jsx)(Q.zx,{type:"button",onClick:()=>a(!1),variant:"solid",size:"4",children:(0,r.jsx)(Q.xv,{...z.p.body3,children:"خیر"})})]})]})})]})},tt=e=>{let{constant:t}=e,n=(0,S.useSearchParams)(),i=(0,K.useQueryClient)(),a=e=>n.get(e)||"",s=Number(a("page"))||1,o=(0,w.cI)({defaultValues:{page:s,searchQuery:a("searchQuery")||"",provinceId:Number(a("provinceId"))||"",cityId:Number(a("cityId"))||"",parentCategoryId:Number(a("parentCategoryId"))||"",arrayCatIds:a("arrayCatIds")?a("arrayCatIds").split(",").map(Number):[],arrayTypes:a("arrayTypes")?a("arrayTypes").split(",").map(String):[],startDate:Number(a("startDate"))||"",endDate:Number(a("endDate"))||"",isPublished:a("isPublished")?!!a("isPublished"):"",status:a("status")?!!a("status"):"",mainPic:a("mainPic")?!!a("mainPic"):"",gallery:a("gallery")?!!a("gallery"):"",info:a("info")?!!a("info"):"",coordinates:a("coordinates")?!!a("coordinates"):"",description:a("description")?!!a("description"):"",features:a("features")?!!a("features"):"",analyse:a("analyse")?!!a("analyse"):"",seo:a("seo")?!!a("seo"):""}}),{watch:d,setValue:u,handleSubmit:h}=o,{data:x,isLoading:g,isError:y,isFetching:j}=(0,P.useQuery)({queryKey:["place-list"],queryFn:async()=>await p(d())}),m=e=>{let t=Object.entries(c(e,!0)).map(e=>{let[t,n]=e;return Array.isArray(n)?"".concat(encodeURIComponent(t),"=").concat(n.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");i.invalidateQueries({queryKey:["place-list"]});let n="".concat(window.location.pathname,"?").concat(t);window.history.pushState(null,"",n)};return(0,r.jsx)(w.RV,{...o,children:(0,r.jsx)("form",{onSubmit:h(m),children:(0,r.jsxs)(Q.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(e9,{}),y?(0,r.jsx)(Q.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):g||j?(0,r.jsx)(l.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):x?(0,r.jsx)(te,{data:null==x?void 0:x.allFilteredPlaces,onRevalidate:()=>{console.log("onRevalidate")},constant:t}):(0,r.jsx)(Q.kC,{width:"100%",justify:"center",mt:"6",children:(0,r.jsx)(Q.xv,{...z.p.title1,children:"دیتایی موجود نیست"})}),(null==x?void 0:x.allFilteredPlaces)&&(0,r.jsxs)(Q.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(R.Z,{current:d("page"),total:null==x?void 0:x.totalPages,maxWidth:24,onPageChange:e=>{u("page",e),m(d())}}),(0,r.jsx)(T.Z,{data:null==x?void 0:x.allFilteredPlaces,currentPage:null==x?void 0:x.currentPage,totalCount:null==x?void 0:x.totalCount,keyText:"نقطه"})]})]})})})},tn=n(29962),tr=e=>{let{params:t}=e,n=t.slug[1],i=t.slug[2],[s,o,c]=(0,a.useQueries)({queries:[{queryKey:["constant"],queryFn:async()=>await (0,k.iV)()},{queryKey:["place",i],queryFn:async()=>await (0,k._7)(Number(i)),enabled:"create-point"===n||"edit-point"===n||"point-detail"===n},{queryKey:["article-data",i],staleTime:0,gcTime:0,queryFn:async()=>await v(Number(i)),enabled:"edit-article"===n||"create-article"===n}]}),{data:d}=s,{data:u,isLoading:p}=o,{data:h,isLoading:x}=c;return!d||p||x?(0,r.jsx)(Q.kC,{width:"100%",height:"100vh",justify:"center",align:"center",children:(0,r.jsx)(l.$j,{style:{scale:3}})}):(0,r.jsxs)(Q.kC,{direction:"column",children:[(0,r.jsx)(tn.default,{title:"point-management"===t.slug[0]?"create-point"===n?"ساخت نقطه":"point-detail"===n?"اطلاعات نقطه":"edit-point"===n?"ویرایش نقطه":"لیست نقاط":"article-management"===t.slug[0]?"create-article"===n?"ساخت مقاله":"edit-article"===n?"ویرایش مقاله":"لیست مقالات":"",isNavigation:!0}),(0,r.jsx)(Q.xu,{p:"24px 110px 40px 40px ",children:(0,r.jsx)(Q.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(()=>{switch(t.slug[0]){case"point-management":switch(t.slug[1]){case"create-point":case"edit-point":return(0,r.jsx)(e7,{placeConstant:d,status:n,placeID:Number(i),placeData:u});default:return(0,r.jsx)(tt,{constant:d})}case"article-management":switch(t.slug[1]){case"create-article":return(0,r.jsx)(ez,{placeConstant:d,articleData:null==h?void 0:h.data,type:"create-article"});case"edit-article":return(0,r.jsx)(ez,{placeConstant:d,articleData:null==h?void 0:h.data,type:"edit-article"});default:return(0,r.jsx)(en,{})}}})()})})]})}},24822:function(e,t,n){"use strict";n.d(t,{AO:function(){return j},Al:function(){return d},Ck:function(){return h},EC:function(){return i},M6:function(){return o},M9:function(){return b},OJ:function(){return C},V4:function(){return s},Vu:function(){return a},WA:function(){return c},We:function(){return l},Xo:function(){return y},Yr:function(){return v},bP:function(){return p},iB:function(){return x},kq:function(){return m},p5:function(){return u},tJ:function(){return g}});var r=n(31067);let i=async e=>(await r.x.get("places/getAllPlacePicUserUploadsForAllPlaces?page=".concat(e,"&limit=10"))).data.data,l=async e=>(await r.x.get("places/getAllPlaceImproveContent?page=".concat(e,"&limit=10"))).data.data,a=async e=>(await r.x.get("/places/getAllTravelMethodSuggestions?page=".concat(e,"&limit=10"))).data.data,s=async()=>(await r.x.get("ads")).data.data,o=async e=>(await r.x.get("/ads/comments/".concat(e))).data.data,c=async e=>(await r.x.get("/comment/all?page=".concat(e,"&limit=10"))).data.data,d=async e=>(await r.x.patch("/places/changeTravelMethodStatusById/".concat(e,"?status=true"))).data,u=async e=>(await r.x.patch("/places/changeTravelMethodStatusById/".concat(e,"?status=false"))).data,p=async e=>(await r.x.patch("/places/acceptPlacePicUserUploads/".concat(e))).data,h=async e=>(await r.x.delete("/places/deletePlacePicUserUploads/".concat(e))).data,x=async e=>(await r.x.patch("/places/makeTopPlacePicUserUploads/".concat(e))).data,g=async e=>(await r.x.patch("/places/acceptPlaceImproveContent/".concat(e))).data,y=async e=>(await r.x.delete("/places/deletePlaceImproveContent/".concat(e))).data,j=async(e,t)=>(await r.x.put("/ads/comments/".concat(e),t)).data,m=async e=>(await r.x.delete("/ads/comments/".concat(e))).data,v=async e=>(await r.x.post("/ads",e)).data,b=async e=>(await r.x.delete("places/tarvelMethod/".concat(e))).data,C=async e=>(await r.x.delete("places/".concat(e))).data},51360:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(1845),l=n(21949),a=n(28326);t.Z=e=>{let{data:t,currentPage:n,totalCount:s,keyText:o="برنامه"}=e,c=null==t?void 0:t.length,d=(n-1)*c+1,u=Math.min(d+c-1,s);return(0,r.jsx)(a.xv,{...l.p.body2,style:{color:i.K.gray[11]},children:"".concat(d,"-").concat(u," از ").concat(s," ").concat(o)})}},72549:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(94963),l=n(1845),a=n(21949),s=n(28326);t.Z=e=>{let{isSubmit:t=!0,closeButtonText:n,submitButtonText:o,isLoading:c,onCloseButton:d,onSubmit:u,isFull:p,isDisableSubmitBtn:h=!1,disabled:x=!1}=e;return(0,r.jsx)(s.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:l.K.gray[2],marginBlockStart:"auto",borderTop:"1px solid ".concat(l.K.gray[3]),boxShadow:l.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,r.jsxs)(s.rj,{gap:"16px",columns:"2",width:p?"100%":"max-content",children:[(0,r.jsx)(s.zx,{disabled:h||x,onClick:u,type:t?"submit":"button",variant:"soft",size:"3",style:{width:p?"100%":"fit-content",padding:"9.5px 38px"},children:c?(0,r.jsx)(i.$j,{}):(0,r.jsx)(s.xv,{...a.p.body1,children:o})}),(0,r.jsx)(s.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:d,style:{width:p?"100%":"fit-content",padding:"9.5px 46px"},children:(0,r.jsx)(s.xv,{...a.p.body1,children:n})})]})})}},77855:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(89183),l=n(27533),a=n(1845),s=n(21949),o=n(28326);t.Z=e=>{let{handleClose:t,title:n}=e;return(0,r.jsxs)(c,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:a.K.blue[10],zIndex:"100"},align:"center",children:[(0,r.jsx)(o.xv,{...s.p.title2,style:{color:a.K.gray[1],fontWeight:700},children:n}),(0,r.jsx)(o.hU,{type:"button",onClick:t,variant:"soft",size:"2",style:{backgroundColor:a.K.blue[9],borderRadius:"12px"},children:(0,r.jsx)(l.x8,{})})]})};let c=(0,i.zo)(o.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},72051:function(e,t,n){"use strict";var r=n(57437);n(2265),n(61170);var i=n(57818),l=n(28326),a=n(27533);n(34916);let s=(0,i.default)(()=>n.e(8372).then(n.bind(n,94212)).then(e=>e.default),{loadableGenerated:{webpack:()=>[94212]},ssr:!1});t.Z=e=>{let{current:t,total:n,onPageChange:i,...o}=e;return(0,r.jsx)(l.kC,{align:"center",maxWidth:"348px",children:(0,r.jsx)(s,{current:t,total:n,onPageChange:i,...o,className:"pagination",previousLabel:(0,r.jsx)(a.jR,{}),nextLabel:(0,r.jsx)(a.EB,{})})})}},23405:function(e,t,n){"use strict";var r=n(57437),i=n(2265),l=n(39343),a=n(89183),s=n(28326),o=n(27533),c=n(1845),d=n(93191);let u=(0,i.forwardRef)((e,t)=>{let{placeholder:n,defaultValue:i,...a}=e,c=(0,d.useQueryClient)(),{setValue:u}=(0,l.Gc)();return(0,r.jsxs)(p,{...a,ref:t,height:"fit-content",children:[(0,r.jsx)(h,{...a,ref:t,placeholder:n,variant:"surface",defaultValue:i,onChange:()=>{u("page",1)}}),(0,r.jsx)(s.hU,{size:"4",variant:"soft",onClick:()=>{c.invalidateQueries({queryKey:["article-list"]})},children:(0,r.jsx)(o.HN,{})})]})});u.displayName="CustomSearch",t.Z=u;let p=(0,a.ZP)(s.kC).withConfig({componentId:"sc-f22ede8b-0"})(["max-height:48px;align-items:center;border:1px solid ",";border-radius:12px;padding-inline-start:1rem;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}"],c.K.gray[7],c.K.blue[2],c.i.shadow1,c.K.gray[3]),h=(0,a.ZP)(s.nv).withConfig({componentId:"sc-f22ede8b-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},6850:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(28326),l=n(1845);t.Z=e=>{let{hero:t,type:n,children:a}=e;return(0,r.jsxs)(i.rj,{width:"100%",style:{borderRadius:8,border:"1px solid ".concat(l.K.gray[6])},children:[(0,r.jsx)(i.kC,{width:"100%",justify:"between",align:"center",p:"8px 16px",style:{height:"fit-content",backgroundColor:"changeAble"===n?l.K.blue[4]:l.K.gray[3],borderRadius:"8px 8px 0px 0px"},children:(0,r.jsx)(i.X6,{as:"h6",style:{color:l.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"27px"},children:t})}),(0,r.jsx)(i.rj,{gap:"16px",p:"24px 16px 16px 16px",style:{backgroundColor:l.K.gray[2]},children:a})]})}},25231:function(e,t,n){"use strict";function r(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,r]=e;t.append(n,String(r))}),t.toString()}n.d(t,{X:function(){return r}})},61170:function(){},34916:function(){},69907:function(e,t,n){"use strict";n.d(t,{useQueries:function(){return g}});var r=n(2265),i=n(69948),l=n(83667),a=n(49010),s=n(56298);function o(e,t){return e.filter(e=>!t.includes(e))}var c=class extends a.l{#e;#t;#n;#r;#i;#l;#a;constructor(e,t,n){super(),this.#e=e,this.#n=[],this.#r=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#r.forEach(e=>{e.subscribe(t=>{this.#s(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#r.forEach(e=>{e.destroy()})}setQueries(e,t,n){this.#n=e,i.V.batch(()=>{let e=this.#r,t=this.#o(this.#n);t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions,n));let r=t.map(e=>e.observer),i=r.map(e=>e.getCurrentResult()),l=r.some((t,n)=>t!==e[n]);(e.length!==r.length||l)&&(this.#r=r,this.#t=i,this.hasListeners()&&(o(e,r).forEach(e=>{e.destroy()}),o(r,e).forEach(e=>{e.subscribe(t=>{this.#s(e,t)})}),this.#c()))})}getCurrentResult(){return this.#t}getQueries(){return this.#r.map(e=>e.getCurrentQuery())}getObservers(){return this.#r}getOptimisticResult(e,t){let n=this.#o(e),r=n.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#d(e??r,t),()=>n.map((e,t)=>{let i=r[t];return e.defaultedQueryOptions.notifyOnChangeProps?i:e.observer.trackResult(i,e=>{n.forEach(t=>{t.observer.trackProp(e)})})})]}#d(e,t){return t?(this.#i&&this.#t===this.#a&&t===this.#l||(this.#l=t,this.#a=this.#t,this.#i=(0,s.Q$)(this.#i,t(e))),this.#i):e}#o(e){let t=new Map(this.#r.map(e=>[e.options.queryHash,e])),n=e.map(e=>this.#e.defaultQueryOptions(e)),r=n.flatMap(e=>{let n=t.get(e.queryHash);return null!=n?[{defaultedQueryOptions:e,observer:n}]:[]}),i=new Set(r.map(e=>e.defaultedQueryOptions.queryHash)),a=n.filter(e=>!i.has(e.queryHash)),s=e=>{let t=this.#e.defaultQueryOptions(e);return this.#r.find(e=>e.options.queryHash===t.queryHash)??new l.z(this.#e,t)},o=a.map(e=>({defaultedQueryOptions:e,observer:s(e)}));return r.concat(o).sort((e,t)=>n.indexOf(e.defaultedQueryOptions)-n.indexOf(t.defaultedQueryOptions))}#s(e,t){let n=this.#r.indexOf(e);-1!==n&&(this.#t=function(e,t,n){let r=e.slice(0);return r[t]=n,r}(this.#t,n,t),this.#c())}#c(){i.V.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}},d=n(93191),u=n(99038),p=n(53e3),h=n(88472),x=n(38261);function g(e,t){let{queries:n,...a}=e,s=(0,d.useQueryClient)(t),o=(0,u.useIsRestoring)(),g=(0,p.useQueryErrorResetBoundary)(),y=r.useMemo(()=>n.map(e=>{let t=s.defaultQueryOptions(e);return t._optimisticResults=o?"isRestoring":"optimistic",t}),[n,s,o]);y.forEach(e=>{(0,x.A8)(e),(0,h.pf)(e,g)}),(0,h.JN)(g);let[j]=r.useState(()=>new c(s,y,a)),[m,v,b]=j.getOptimisticResult(y,a.combine);r.useSyncExternalStore(r.useCallback(e=>o?()=>void 0:j.subscribe(i.V.batchCalls(e)),[j,o]),()=>j.getCurrentResult(),()=>j.getCurrentResult()),r.useEffect(()=>{j.setQueries(y,a,{listeners:!1})},[y,a,j]);let C=m.some((e,t)=>(0,x.SB)(y[t],e))?m.flatMap((e,t)=>{let n=y[t];if(n){let t=new l.z(s,n);if((0,x.SB)(n,e))return(0,x.j8)(n,t,g);(0,x.Z$)(e,o)&&(0,x.j8)(n,t,g)}return[]}):[];if(C.length>0)throw Promise.all(C);let f=m.find((e,t)=>{let n=y[t];return n&&(0,h.KJ)({result:e,errorResetBoundary:g,throwOnError:n.throwOnError,query:s.getQueryCache().get(n.queryHash)})});if(null==f?void 0:f.error)throw f.error;return v(b())}}},function(e){e.O(0,[1553,3048,3497,8334,2295,5452,8310,6990,9212,1825,8702,6648,9269,5639,7138,2718,1705,2107,8326,7533,341,4035,2971,7023,1744],function(){return e(e.s=46495)}),_N_E=e.O()}]);