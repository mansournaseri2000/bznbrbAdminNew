(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6158],{46495:function(e,t,n){Promise.resolve().then(n.bind(n,49597))},49597:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return te}});var r=n(57437),i=n(2265),a=n(94963),l=n(69907),s=n(10008),o=n(31067);let c=(e,t)=>{let n={};return!1!==t?Object.keys(e).forEach(t=>{let r=e[t];null===r||"null"===r||""===r||0===r||"none"===r||Array.isArray(r)&&0===r.length||(n[t]=r)}):Object.keys(e).forEach(t=>{let r=e[t];null===r||"null"===r||0===r||"none"===r||Array.isArray(r)&&0===r.length||(n[t]=r)}),n},d=async(e,t,n)=>(await o.x.get("comment/placeComments/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data,u=async e=>{let t=c({...e,provinceId:Number(e.provinceId),cityId:Number(e.cityId),parentCategoryId:Number(e.parentCategoryId),isPublished:"true"===e.isPublished||!0===e.isPublished||"false"!==e.isPublished&&!1!==e.isPublished&&String(e.isPublished),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),mainPic:"true"===e.mainPic||!0===e.mainPic||"false"!==e.mainPic&&!1!==e.mainPic&&String(e.mainPic),gallery:"true"===e.gallery||!0===e.gallery||"false"!==e.gallery&&!1!==e.gallery&&String(e.gallery),info:"true"===e.info||!0===e.info||"false"!==e.info&&!1!==e.info&&String(e.info),coordinates:"true"===e.coordinates||!0===e.coordinates||"false"!==e.coordinates&&!1!==e.coordinates&&String(e.coordinates),description:"true"===e.description||!0===e.description||"false"!==e.description&&!1!==e.description&&String(e.description),features:"true"===e.features||!0===e.features||"false"!==e.features&&!1!==e.features&&String(e.features),analyse:"true"===e.analyse||!0===e.analyse||"false"!==e.analyse&&!1!==e.analyse&&String(e.analyse),seo:"true"===e.seo||!0===e.seo||"false"!==e.seo&&!1!==e.seo&&String(e.seo),startDate:new Date(e.startDate).getTime()?new Date(e.startDate).getTime():null,endDate:new Date(e.endDate).getTime()?new Date(e.endDate).getTime():null},!0);return(await o.x.post("places/allPlacesWithFilter",t)).data.data},p=async(e,t,n)=>(await o.x.get("places/placeImproveContent/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data,x=async(e,t,n)=>(await o.x.get("/places/getPlaceUserUploads/".concat(e,"?page=").concat(t,"&limit=6"),{headers:{limit:n}})).data.data,h=async(e,t)=>{let n=c({...t,provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),parentCategoryId:Number(t.parentCategoryId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&null,status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&null,text:"true"===t.text||"false"!==t.text&&String(t.text),seo:"true"===t.seo||"false"!==t.seo&&String(t.seo),mainPic:"true"===t.mainPic||"false"!==t.mainPic&&String(t.mainPic),related:"true"===t.related||"false"!==t.related&&String(t.related),created_atStart:new Date(t.created_atStart).getTime()?new Date(t.created_atStart).getTime():null,created_atEnd:new Date(t.created_atEnd).getTime()?new Date(t.created_atEnd).getTime():null},!0);return delete n.page,(await o.x.post("/article/filter?limit=10&page=".concat(e),n)).data.data};function g(e,t){return void 0!==e&&Array.isArray(t)&&0!==t.length?[{placeId:e,placeRelationType:"MAIN"},...t.map(e=>({placeId:e,placeRelationType:"RELATION"}))]:[]}let y=async e=>{let t=c({parentCategoryId:Number(e.parentCategoryId),categoryId:Number(e.categoryId),provincesId:Number(e.provincesId),citiesId:Number(e.citiesId),is_published:"true"===e.is_published||!0===e.is_published||"false"!==e.is_published&&!1!==e.is_published&&String(e.is_published),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),title:e.title,writer:e.writer,tableOfContent:e.articleDetail[0].descriptions,content:e.articleDetail[1].descriptions,on_titile:e.on_titile,source:e.source,summery:e.summery,brief:e.brief,slug:e.slug,inMain:e.inMain,inTop:e.inTop,tags:String(e.metakeywords).split(","),keywords:String(e.keywords).split(","),meta_title:e.meta_title,meta_description:e.meta_description,source_link:e.source_link,isSlider:e.isSlider,type:e.type,places:g(Number(e.mainPoint),e.placeRelationType)});return(await o.x.post("/article",t)).data},j=async(e,t)=>{console.log("run",t.articleDetail);let n=c({parentCategoryId:Number(t.parentCategoryId),categoryId:Number(t.categoryId),provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&String(t.is_published),status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&String(t.status),title:t.title,writer:t.writer,isSlider:t.isSlider,on_titile:t.on_titile,source:t.source,summery:t.summery,brief:t.brief,slug:t.slug,tableOfContent:t.articleDetail[0].descriptions,content:t.articleDetail[1].descriptions,inMain:t.inMain,inTop:t.inTop,tags:String(t.metakeywords).split(","),keywords:String(t.keywords).split(","),meta_title:t.meta_title,meta_description:t.meta_description,source_link:t.source_link,type:t.type,places:g(Number(t.mainPoint),t.placeRelationType)},!1);return(await o.x.patch("/article/id/".concat(e),n)).data},m=async e=>(await o.x.get("/article/id/".concat(e))).data,v=async e=>(await s.j9.patch("upload/edit",e)).data,b=async e=>{let t=new FormData;return t.append("type",e.type),t.append("articleImageType",e.articleImageType),t.append("articleId",e.articleId.toString()),t.append("file",e.file),t.append("summery",e.summery),t.append("slug",e.slug),t.append("alt",e.alt),t.append("description",e.description),t.append("townId",e.townId.toString()),await s.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})},f=async e=>(await s.j9.delete("places/deletePlacePicUserUploads/".concat(e))).data,C=async e=>(await s.j9.delete("places/deletePlacePicUserUploads/".concat(e))).data;var k=n(36721),w=n(39343),I=n(16463),S=n(25524),P=n(28326),K=n(72051),Q=n(51360),T=n(86555),R=n(25231),D=n(21949),z=n(76351),_=n(23405),N=n(77855),E=n(27533);let V=[{id:1,key:"هیچکدام",value:null},{id:2,key:"فعال",value:!0},{id:3,key:"غیر فعال",value:!1}],F=[{id:1,key:"هیچکدام",value:null},{id:2,key:"پیش نویس",value:!1},{id:3,key:"انتشار",value:!0}],Z=[{id:1,key:"هیچکدام",value:null},{id:2,key:"دارد",value:!0},{id:3,key:"ندارد",value:!1}],A=[{id:1,key:"فعال",value:!0},{id:2,key:"غیر فعال",value:!1}],O=[{id:1,key:"پیش نویس",value:!1},{id:2,key:"انتشار",value:!0}],U=[{label:"اطلاعات نقطه",key:"place-info"},{label:"موقعیت جفرافیا",key:"geographical-location"},{label:"چجوری برم",key:"routing"},{label:"توضیحات",key:"description"},{label:"ویژگی های و امکانات",key:"features-facilities"},{label:"تحلیل بزنیم بیرون",key:"analysis"},{label:"کی برم",key:"travel-time"},{label:"تنظیمات سئو",key:"seo-setting"}],L=[{label:"اطلاعات نقطه",key:"place-info"},{label:"موقعیت جفرافیا",key:"geographical-location"},{label:"چجوری برم",key:"routing"},{label:"توضیحات",key:"description"},{label:"ویژگی های و امکانات",key:"features-facilities"},{label:"تحلیل بزنیم بیرون",key:"analysis"},{label:"کی برم",key:"travel-time"},{label:"تنظیمات سئو",key:"seo-setting"},{label:"تصاویر",key:"images"},{label:"بهبود اطلاعات",key:"improve-content"},{label:"دیدگاه ها",key:"comments"}],M=[{label:"اطلاعات اولیه",key:"initial-data"},{label:"محتوای متنی",key:"text-content"},{label:"نقاط مرتبط",key:"related-points"},{label:"تنظیمات سئو",key:"seo-setting"}],q=[{label:"اطلاعات اولیه",key:"initial-data"},{label:"محتوای متنی",key:"text-content"},{label:"نقاط مرتبط",key:"related-points"},{label:"تنظیمات سئو",key:"seo-setting"},{label:"تصاویر",key:"images"}];var B=n(59913),W=n(52892),Y=n(72549),X=n(1845);function G(e){if(e)return e.map(e=>({key:e.name,value:e.id,id:e.id,disable:!1}))}var $=e=>{var t,n;let{province:i,categories:a,PlaceType:l,setIsOpen:s,onSubmit:o}=e,{replace:c}=(0,I.useRouter)(),{control:d,setValue:u,watch:p,reset:x}=(0,w.Gc)(),h=null===(t=i.filter(e=>e.id===Number(p("provinceId")))[0])||void 0===t?void 0:t.Cities,g=null===(n=a.filter(e=>e.id===Number(p("parentCategoryId")))[0])||void 0===n?void 0:n.children,y=()=>{s(!1)},j=()=>{x({page:1,limit:10,provinceId:"",cityId:"",parentCategoryId:"",arrayCatIds:[],arrayTypes:[],status:"",isPublished:"",searchQuery:"",startDate:"",endDate:"",mainPic:"",gallery:"",info:"",coordinates:"",description:"",features:"",analyse:"",seo:"",workTime:""}),c("/data-management/point-management"),o(),s(!1)},m=e=>{let t=new Date(e);return t.setDate(e.getDate()+1),new Date(t)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.rj,{maxHeight:"776px",width:"100%",p:"4",gapY:"4",style:{overflowY:"auto"},children:[(0,r.jsxs)(P.rj,{gapY:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12]},children:"موقعیت نقطه"}),(0,r.jsx)(w.Qr,{name:"provinceId",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"استان",value:String(t.value),onValueChange:e=>{t.onChange(e),u("cityId",""),u("page",1)},children:null==i?void 0:i.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityId",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"شهرستان",disabled:!h,value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:null==h?void 0:h.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsxs)(P.rj,{gapY:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12]},children:"بازه زمانی"}),(0,r.jsxs)(P.rj,{gap:"16px",columns:"2",children:[(0,r.jsx)(w.Qr,{name:"startDate",control:d,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"از تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",onChangeValue:e=>{let t=new Date(e);t.setHours(0,0,0,0),u("startDate",t),u("endDate",m(new Date(e))),u("page",1)}})}),(0,r.jsx)(w.Qr,{name:"endDate",control:d,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"تا تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",minDate:p("startDate"),onChangeValue:e=>{let t=new Date(e);t.setHours(23,59,0,0),u("endDate",t),u("page",1)},disabled:!p("startDate")})})]})]}),(0,r.jsx)(P.Pg,{lable:"نوع نقطه",placeholder:"نوع نقطه",children:(0,r.jsx)(B.Z,{isRow:!1,items:G(l),store:"arrayTypes"})}),(0,r.jsxs)(P.rj,{gapY:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12]},children:"دسته بندی"}),(0,r.jsx)(w.Qr,{name:"parentCategoryId",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"دسته بندی اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e),u("arrayCatIds",""),u("page",1)},children:a.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(P.Pg,{placeholder:"زیردسته بندی",disabled:!g,children:(0,r.jsx)(B.Z,{isRow:!1,items:G(g),store:"arrayCatIds"})})]}),(0,r.jsxs)(P.rj,{gapY:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12]},children:"وضعیت"}),(0,r.jsx)(w.Qr,{name:"isPublished",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"انتشار",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:F.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"status",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:V.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"mainPic",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"تصویر اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"gallery",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"تصویر گالری",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"info",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"اطلاعات",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"coordinates",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"موقعیت جغرافیایی",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"description",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"توضیحات",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"features",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"امکانات",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"analyse",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"تحلیل",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"seo",control:d,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"سئو",value:String(t.value),onValueChange:e=>{t.onChange(e),u("page",1)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}})]})]}),(0,r.jsx)(Y.Z,{submitButtonText:"اعمال فیلتر ها",closeButtonText:"حذف فیلتر ها",onCloseButton:()=>j(),onSubmit:()=>y()})]})},H=e=>{var t,n;let{province:i,categories:a,setIsOpen:l,onSubmit:s}=e,{replace:o}=(0,I.useRouter)(),{control:c,setValue:d,watch:u,reset:p}=(0,w.Gc)(),x=null===(t=i.filter(e=>e.id===Number(u("provincesId")))[0])||void 0===t?void 0:t.Cities,h=null===(n=a.filter(e=>e.id===Number(u("parentCategoryId")))[0])||void 0===n?void 0:n.children,g=()=>{l(!1)},y=()=>{p({title:"",created_atStart:"",created_atEnd:"",provincesId:"",citiesId:"",parentCategoryId:"",arrayCatIds:[],is_published:"",status:"",base:"",text:"",related:"",seo:"",mainPic:""}),o("/data-management/article-management"),s(),l(!1)},j=e=>{let t=new Date(e);return t.setDate(e.getDate()+1),new Date(t)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.rj,{gapY:"4",p:"4",children:[(0,r.jsxs)(P.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12],paddingInlineStart:8},children:"بازه زمانی"}),(0,r.jsxs)(P.rj,{width:"100%",columns:"2",gapX:"2",children:[(0,r.jsx)(w.Qr,{name:"created_atStart",control:c,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"از تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",onChangeValue:e=>{d("created_atStart",new Date(e)),d("created_atEnd",j(new Date(e)))}})}),(0,r.jsx)(w.Qr,{name:"created_atEnd",control:c,render:e=>(0,r.jsx)(W.Z,{...e,inputMode:"none",placeholder:"تا تاریخ",value:e.field.value?new Date(e.field.value).toISOString():"",minDate:u("created_atStart"),onChangeValue:e=>{d("created_atEnd",new Date(e))},disabled:!u("created_atStart")})})]})]}),(0,r.jsx)(w.Qr,{name:"provincesId",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,lable:"موقعیت",placeholder:"استان",value:String(t.value),onValueChange:e=>{t.onChange(e),d("citiesId","")},children:null==i?void 0:i.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"citiesId",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"شهرستان",disabled:!x,value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==x?void 0:x.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"parentCategoryId",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,lable:"دسته بندی",placeholder:"دسته بندی اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:a.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(P.Pg,{placeholder:"زیردسته بندی",disabled:!h,children:(0,r.jsx)(B.Z,{isRow:!1,items:G(h),store:"arrayCatIds"})}),(0,r.jsx)(w.Qr,{name:"is_published",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"وضعیت انتشار",lable:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:F.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"status",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:V.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"base",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"اطلاعات اولیه",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"text",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"محتویات متنی",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"related",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"نقاط مرتبط",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"seo",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"سئو",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}}),(0,r.jsx)(w.Qr,{name:"mainPic",control:c,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"تصویر اصلی",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:Z.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}})]}),(0,r.jsx)(Y.Z,{submitButtonText:"اعمال فیلتر ها",closeButtonText:"حذف فیلتر ها",onSubmit:()=>g(),onCloseButton:()=>y(),isFull:!0})]})},J=e=>{let{onSubmit:t}=e,[n,a]=(0,i.useState)(!1),{control:l}=(0,w.Gc)(),s=(0,I.useRouter)(),o=(0,I.useSearchParams)(),c=e=>o.get(e)||"",{data:d}=(0,z.useQuery)({queryKey:["constant"],queryFn:async()=>(0,k.iV)()});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.rj,{width:"100%",gapX:"5",style:{gridTemplateColumns:"auto auto 3fr"},children:[(0,r.jsx)(P.hU,{colorVariant:"BLUE",variant:"soft",size:"4",type:"button",onClick:()=>a(!0),children:(0,r.jsx)(E.wn,{})}),(0,r.jsx)(P.zx,{colorVariant:"BLUE",type:"button",variant:"ghost",size:"4",onClick:()=>s.push("/data-management/article-management/create-article"),children:(0,r.jsxs)(P.kC,{gap:"2",align:"center",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:" افزودن مقاله"})]})}),(0,r.jsx)(w.Qr,{name:"title",control:l,render:e=>{let{field:n}=e;return(0,r.jsx)(_.Z,{...n,placeholder:"جستجو نام نقطه",defaultValue:c("title")?c("title"):"",onClick:t})}})]}),(0,r.jsxs)(P.u_,{isOpen:n,onClose:()=>a(!1),children:[(0,r.jsx)(N.Z,{title:"فیلتر",handleClose:()=>a(!1)}),(0,r.jsx)(H,{province:(null==d?void 0:d.provinces)?d.provinces:[],categories:(null==d?void 0:d.categories)?d.categories:[],setIsOpen:a,onSubmit:t})]})]})},ee=n(12767),et=e=>{let t=(0,I.useRouter)();return(0,r.jsx)(ee.iA,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:e.row.index+1})},{accessorKey:"id",header:"شناسه مکان",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"title",header:()=>(0,r.jsx)(P.kC,{maxWidth:"55%",m:"auto",children:(0,r.jsx)(P.xv,{...D.p.body2,children:"عنوان مقاله"})}),cell:e=>{let t=e.getValue(),n=e.row.original.status;return(0,r.jsxs)(P.kC,{width:"100%",maxWidth:"70%",align:"center",justify:"start",gap:"3",mr:"20px",children:[(0,r.jsx)(P.xu,{width:"12px",height:"12px",style:{borderRadius:100,backgroundColor:!0===n?X.K.blue[6]:X.K.pink[6]},children:" "}),(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})]})}},{accessorKey:"writer",header:"نویسنده",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"citiesName",header:"شهرستان",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"parentCategoryName",header:"دسته بندی",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"categoryName",header:"زیر دسته بندی",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"is_published",header:"وضعیت انتشار",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?X.K.pink[3]:X.K.blue[3],color:!1===t?X.K.pink[11]:X.K.blue[11],borderRadius:4},children:!0===t?"منتشر شده":"منتشر نشده"})}},{id:"details",cell:e=>{let{row:n}=e,i=n.original;return(0,r.jsx)(P.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,r.jsx)(P.zx,{variant:"surface",onClick:e=>{console.log("item",i),e.preventDefault(),t.push("/data-management/article-management/edit-article/".concat(i.id))},children:"..."})})}}],data:e.data})},en=()=>{let{replace:e}=(0,I.useRouter)(),t=(0,I.useSearchParams)(),[n,l]=(0,i.useState)(t.get("page")?Number(t.get("page")):1),s=e=>t.get(e)||"",o=(0,w.cI)({defaultValues:{title:s("title")?s("title"):"",is_published:s("is_published")?String(!!s("is_published")):"",status:s("status")?String(!!s("status")):"",base:s("base")?String(!!s("base")):"",text:s("text")?String(!!s("text")):"",related:s("related")?String(!!s("related")):"",seo:s("seo")?String(!!s("seo")):"",mainPic:s("mainPic")?String(!!s("mainPic")):"",provincesId:s("provincesId")?Number(s("provincesId")):"",citiesId:s("citiesId")?Number(s("citiesId")):"",created_atStart:s("created_atStart")?Number(s("created_atStart")):"",created_atEnd:s("created_atEnd")?Number(s("created_atEnd")):"",parentCategoryId:s("parentCategoryId")?Number(s("parentCategoryId")):"",arrayCatIds:s("arrayCatIds")?s("arrayCatIds").split(",").map(Number):[]}}),{watch:c,handleSubmit:d}=o,{data:u,mutate:p,isError:x,isPending:g}=(0,S.useMutation)({mutationFn:async e=>h(n,e),onSuccess:async()=>{let t=Object.fromEntries(Object.entries(c()).filter(e=>{let[t,n]=e;return!(void 0===n||""===n||"none"===n||null===n||Array.isArray(n)&&0===n.length||Array.isArray(n)&&n.every(e=>""===e)||Array.isArray(n)&&n.every(e=>"none"===e))&&(!["created_atStart","created_atEnd"].includes(t)||new Date(n).getTime())}));Object.keys(t).forEach(e=>{["created_atStart","created_atEnd"].includes(e)&&(t[e]=new Date(t[e]).getTime())});let n=(0,R.X)(t);e("/data-management/article-management?".concat(n))},onError:async e=>{console.log("DATA Error",e)}});(0,i.useEffect)(()=>{p(c())},[]);let y=()=>{p(c())};return(0,r.jsx)(w.RV,{...o,children:(0,r.jsx)("form",{onSubmit:d(y),children:(0,r.jsxs)(P.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(J,{onSubmit:()=>y()}),x?(0,r.jsx)(P.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):g?(0,r.jsx)(a.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):u?(0,r.jsx)(et,{data:null==u?void 0:u.articles}):(0,r.jsx)(P.kC,{width:"100%",justify:"center",mt:"6",children:(0,r.jsx)(P.xv,{...D.p.title1,children:"دیتایی موجود نیست"})}),(null==u?void 0:u.articles)&&(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(K.Z,{current:n,total:u.totalPages,onPageChange:e=>{l(e),(0,T.Z)(e),y()}}),(0,r.jsx)(Q.Z,{data:u.articles,currentPage:u.currentPage,totalCount:u.totalCount})]})]})})})},er=n(93191),ei=e=>{let{label:t,children:n}=e;return(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",p:"8px 16px",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8,backgroundColor:X.K.gray[2]},children:[(0,r.jsx)(P.xv,{...D.p.body2,style:{color:X.K.gray[9]},children:t}),(0,r.jsx)(P.xu,{width:"50%",children:n})]})},ea=n(623);let el="ارسال اطلاعات شما با موفقیت انجام شد";var es=n(31072),eo=n(6850),ec=n(4867),ed=n(89183),eu=()=>{let{setValue:e,watch:t}=(0,w.Gc)(),[n,a]=(0,i.useState)(t("mainPoint")?t("mainPoint"):""),l=()=>{e("mainPoint",null),a("")};return(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",children:[(0,r.jsx)(P.kC,{width:"40%",align:"center",gap:"3",children:(0,r.jsxs)(eh,{height:"fit-content",gap:"2",disabled:!!t("mainPoint"),children:[(0,r.jsx)(ex,{placeholder:"آیدی نقطه مرتبط اصلی",value:n,disabled:!!t("mainPoint"),type:"number",onChange:e=>a(e.target.value),variant:"surface"}),(0,r.jsx)(P.hU,{onClick:()=>{e("mainPoint",n),a("")},size:"4",type:"button",className:"icon-button",variant:"surface",disabled:!!t("mainPoint"),children:(0,r.jsx)(ec.pOD,{style:{color:X.K.pink[9]}})})]})}),t("mainPoint")?(0,r.jsxs)(P.kC,{width:"fit-content",gap:"3",p:"9.5px 16px",align:"center",style:{backgroundColor:X.K.gray[3],borderRadius:16},children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:t("mainPoint")}),(0,r.jsx)(P.hU,{size:"1",variant:"surface",onClick:()=>l(),children:(0,r.jsx)(ep,{})})]}):(0,r.jsx)(P.kC,{children:(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11],marginRight:8},children:"در حال حاضر نقطه ای وجود ندارد"})})]})};let ep=(0,ed.ZP)(E.x8).withConfig({componentId:"sc-72f5766e-0"})(["path{fill:",";}"],X.K.pink[11]),ex=(0,ed.ZP)(P.nv).withConfig({componentId:"sc-72f5766e-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"]),eh=(0,ed.ZP)(P.kC).withConfig({componentId:"sc-72f5766e-2"})(["width:100%;align-items:center;border:1px solid ",";background-color:",";border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{background-color:",";@media (hover:hover){background-color:transparent !important;}}"],X.K.gray[7],e=>{let{disabled:t}=e;return t?X.K.gray[5]:"transparent"},X.K.blue[2],X.i.shadow1,X.K.gray[3],e=>{let{disabled:t}=e;return t?X.K.gray[5]:"transparent"});var eg=n(66648);let ey=async(e,t)=>(await s.j9.get("article/gallery/".concat(e,"?page=").concat(t))).data.data;var ej=n(38746),em=n(72107),ev=e=>{var t;let{currentItem:n,handleCloseModal:a,articleId:l,constant:s,isOpen:o,resetCurrentItem:c,status:d}=e,u=(0,er.useQueryClient)(),{control:p,watch:x,setValue:h,reset:g}=(0,w.cI)({defaultValues:{town:"",localPic:"",imageFile:null,pic:(null==n?void 0:n.path)?null==n?void 0:n.path:"",provinceId:(null==n?void 0:n.provinceId)?n.provinceId:"",cityID:(null==n?void 0:n.cityId)?n.cityId:"",townId:(null==n?void 0:n.townId)?n.townId:"",alt:(null==n?void 0:n.alt)?null==n?void 0:n.alt:"",description:(null==n?void 0:n.description)?null==n?void 0:n.description:"",brief:(null==n?void 0:n.summery)?n.summery:"",isReset:null!=n&&!!n.path}}),y=null===(t=s.provinces.filter(e=>e.id===Number(x("provinceId")))[0])||void 0===t?void 0:t.Cities,[j,m]=(0,i.useState)([]),f=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},C=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await f(n);t(URL.createObjectURL(r)),h("localPic",URL.createObjectURL(r)),h("isReset",!1),h("imageFile",r)}},{mutate:k,isPending:I}=(0,S.useMutation)({mutationFn:async e=>v(e),onSuccess:async e=>{200===e.statusCode&&(u.invalidateQueries({queryKey:["article-image-gallery"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),a(),c())}}),{mutate:K,isPending:Q}=(0,S.useMutation)({mutationFn:async e=>b(e),onSuccess:async e=>{201===e.data.statusCode?(u.invalidateQueries({queryKey:["article-image-gallery"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),a(),c(),g({localPic:""})):(0,es.ToastError)(e.data.message)}});return(0,i.useEffect)(()=>{let e=x("cityID"),t=x("provinceId");if(e&&t){let i=s.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&m(null!==(r=t.Town)&&void 0!==r?r:[])}}},[x("cityID"),x("provinceId")]),(0,r.jsxs)(P.u_,{isOpen:o,onClose:()=>{c(),a()},children:[(0,r.jsx)(N.Z,{title:"تصاویر",handleClose:()=>{c(),a()}}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==n?void 0:n.path)&&!1==!!x("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{C(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(P.zx,{size:"3",style:{width:"fit-content"},children:(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(E.V1,{}),(0,r.jsx)(P.xv,{...D.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:["create"===d&&(0,r.jsx)(P.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:X.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(X.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{C(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(E.rF,{})})]})}})})}})}),(0,r.jsx)(eg.default,{src:x("isReset")?"".concat("https://uploader.darkube.app/").concat(null==n?void 0:n.path):x("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(P.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,value:String(x("provinceId")),onValueChange:e=>{t.onChange(e),h("cityID",""),h("townId","")},placeholder:"استان",children:s.provinces.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!x("provinceId"),value:String(x("cityID")),onValueChange:e=>{t.onChange(e),h("townId","")},placeholder:"شهرستان",children:null==y?void 0:y.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!x("provinceId")||!x("cityID"),value:String(x("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==j?void 0:j.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>{c(),a()},isDisableSubmitBtn:!x("townId"),onSubmit:()=>{"create"===d?K({articleImageType:"GALLERY",type:"ARTICLE",alt:x("alt"),description:x("description"),file:x("imageFile"),articleId:l,slug:x("alt"),summery:x("brief"),townId:Number(x("townId"))}):k({alt:x("alt"),description:x("description"),id:n.id,summery:x("brief"),townId:Number(x("townId")),type:"ARTICLE"})},isLoading:Q||I})]})]})},eb=e=>{let{articleId:t,constant:n}=e,[l,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)("create"),[d,u]=(0,i.useState)(1),{data:p}=(0,z.useQuery)({queryKey:["article-image-gallery",t,d],queryFn:async()=>ey(t,d)}),[x,h]=(0,i.useState)(!1),[g,y]=(0,i.useState)(null),j=(0,er.useQueryClient)(),{mutate:m,isPending:v}=(0,S.useMutation)({mutationFn:async e=>C(e),onSuccess:async e=>{!0===e.status?(j.invalidateQueries({queryKey:["place"]}),s(!1),(0,es.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,r.jsxs)(r.Fragment,{children:[p&&(null==p?void 0:p.gallery.length)===0?(0,r.jsxs)(P.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(P.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصاویر گالری اضافه نشده اند."}),(0,r.jsx)(P.xv,{...D.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:"تصاویر گالری مجموعه تصاویری هستند که تنها در صفحه نقطه نمایش داده می شوند."}),(0,r.jsx)(P.zx,{size:"4",type:"button",onClick:()=>{c("create"),h(!0)},children:(0,r.jsxs)(P.kC,{gap:"2",align:"center",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:"افزودن تصویر"})]})})]}):(0,r.jsxs)(P.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(P.zx,{variant:"ghost",size:"3",style:{width:"fit-content"},onClick:()=>{c("create"),h(!0)},children:(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:"افزودن تصویر"})]})}),null==p?void 0:p.gallery.map(e=>(0,r.jsxs)(P.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(P.xu,{width:"328px",height:"200px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(e.path),alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(P.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11],marginTop:"10px"},children:e.path}),(0,r.jsxs)(P.kC,{direction:"column",mt:"12px",children:[(0,r.jsx)(P.nv,{readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}}),(0,r.jsx)(P.nv,{value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]})]}),(0,r.jsxs)(P.kC,{direction:"column",gap:"4",children:[(0,r.jsx)(P.hU,{size:"3",type:"button",onClick:()=>{c("edit"),y(e),h(!0)},children:(0,r.jsx)(E.z,{})}),(0,r.jsx)(P.hU,{size:"3",variant:"ghost",type:"button",colorVariant:"PINK",onClick:()=>{s(!0)},children:(0,r.jsx)(E.rF,{height:24})})]})]},e.alt))]}),(0,r.jsx)(K.Z,{current:d,total:null==p?void 0:p.totalPages,maxWidth:24,onPageChange:e=>u(e)}),!!g&&"edit"===o&&(0,r.jsx)(ev,{resetCurrentItem:()=>y(null),articleId:t,constant:n,currentItem:g,handleCloseModal:()=>h(!1),isOpen:x,status:o},""),"create"===o&&(0,r.jsx)(ev,{resetCurrentItem:()=>y(null),articleId:t,constant:n,currentItem:g,handleCloseModal:()=>h(!1),isOpen:x,status:o},""),(0,r.jsx)(P.u_,{isOpen:l,onClose:()=>s(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>m(Number(1)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:v?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>s(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},ef=e=>{var t,n;let{categories:i,province:a}=e,{control:l,setValue:s,watch:o}=(0,w.Gc)(),c=null===(t=i.filter(e=>e.id===Number(o("parentCategoryId")))[0])||void 0===t?void 0:t.children,d=null===(n=a.filter(e=>e.id===Number(o("provincesId")))[0])||void 0===n?void 0:n.Cities;return(0,r.jsxs)(P.rj,{width:"100%",gap:"14px",children:[(0,r.jsx)(w.Qr,{name:"on_titile",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"رو تیتر"})}}),(0,r.jsx)(w.Qr,{name:"title",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"عنوان مقاله"})}}),(0,r.jsx)(w.Qr,{name:"slug",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"Custom URL"})}}),(0,r.jsxs)(P.rj,{width:"100%",columns:"2",gap:"14px",children:[(0,r.jsx)(w.Qr,{name:"writer",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"نام نویسنده"})}}),(0,r.jsx)(w.Qr,{name:"source",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"منبع"})}}),(0,r.jsx)(w.Qr,{name:"parentCategoryId",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"دسته بندی",value:String(t.value),onValueChange:e=>{t.onChange(e),s("categoryId","")},children:i.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"categoryId",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"زیر دسته بندی",disabled:!o("parentCategoryId"),value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==c?void 0:c.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"provincesId",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"استان",value:String(t.value),onValueChange:e=>{t.onChange(e),s("citiesId","")},children:a.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"citiesId",control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"شهرستان",disabled:!d,value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==d?void 0:d.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}})]})]})},eC=e=>{var t,n,l,s,o,c,d,u,p,x,h,g,y;let{constant:j,picture:m,articleData:C}=e,[k,I]=(0,i.useState)(!1),[K,Q]=(0,i.useState)([]),[T,R]=(0,i.useState)("create"),z=(0,er.useQueryClient)(),[_,V]=(0,i.useState)(!1),{control:F,watch:Z,setValue:A}=(0,w.cI)({defaultValues:{imageFile:null,pic:m||"",localPic:"",provinceId:(null==C?void 0:null===(t=C.picInfo)||void 0===t?void 0:t.picProvince)?null==C?void 0:null===(n=C.picInfo)||void 0===n?void 0:n.picProvince:"",cityID:(null==C?void 0:null===(l=C.picInfo)||void 0===l?void 0:l.picCity)?null==C?void 0:null===(s=C.picInfo)||void 0===s?void 0:s.picCity:"",townId:(null==C?void 0:null===(o=C.picInfo)||void 0===o?void 0:o.picTown)?null==C?void 0:null===(c=C.picInfo)||void 0===c?void 0:c.picTown:"",alt:(null==C?void 0:null===(d=C.picInfo)||void 0===d?void 0:d.alt)?null==C?void 0:null===(u=C.picInfo)||void 0===u?void 0:u.alt:"",description:(null==C?void 0:null===(p=C.picInfo)||void 0===p?void 0:p.description)?null==C?void 0:null===(x=C.picInfo)||void 0===x?void 0:x.description:"",brief:(null==C?void 0:null===(h=C.picInfo)||void 0===h?void 0:h.summery)?null==C?void 0:null===(g=C.picInfo)||void 0===g?void 0:g.summery:"",isReset:!!m,town:""}}),O=null===(y=j.provinces.filter(e=>e.id===Number(Z("provinceId")))[0])||void 0===y?void 0:y.Cities,U=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},L=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await U(n);t(URL.createObjectURL(r)),A("localPic",URL.createObjectURL(r)),A("isReset",!1),A("imageFile",r)}},{mutate:M,isPending:q}=(0,S.useMutation)({mutationFn:async e=>v(e),onSuccess:async e=>{200===e.statusCode&&(z.invalidateQueries({queryKey:["place"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),V(!1))}}),{mutate:B,isPending:W}=(0,S.useMutation)({mutationFn:async e=>b(e),onSuccess:async e=>{console.log(e,"datadatadatadatadata"),201===e.data.statusCode&&(z.invalidateQueries({queryKey:["article-data"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),V(!1))}}),{mutate:G,isPending:$}=(0,S.useMutation)({mutationFn:async e=>f(e),onSuccess:async e=>{!0===e.status?(z.invalidateQueries({queryKey:["place"]}),I(!1),(0,es.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.useEffect)(()=>{let e=Z("cityID"),t=Z("provinceId");if(e&&t){let i=j.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&Q(null!==(r=t.Town)&&void 0!==r?r:[])}}},[Z("cityID"),Z("provinceId")]),(0,r.jsxs)(r.Fragment,{children:[m?(0,r.jsxs)(P.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(P.xu,{width:"610px",height:"342px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(m),alt:"تصویر شاخص",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(P.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:m}),(0,r.jsx)(w.Qr,{name:"alt",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,readOnly:!0,placeholder:"Alt Text",style:{borderRadius:12}})}}),(0,r.jsx)(w.Qr,{name:"description",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,readOnly:!0,placeholder:"توضیحات تصویر",rows:6,style:{borderRadius:12}})}})]}),(0,r.jsxs)(P.kC,{direction:"column",gap:"4",px:"10px",children:[(0,r.jsx)(P.hU,{size:"4",type:"button",onClick:()=>{R("edit"),V(!0)},children:(0,r.jsx)(E.z,{})}),(0,r.jsx)(P.hU,{size:"3",variant:"ghost",type:"button",colorVariant:"PINK",onClick:()=>{I(!0)},children:(0,r.jsx)(E.rF,{height:24})})]})]}):(0,r.jsxs)(P.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(P.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصویر شاخصی اضافه نشده است."}),(0,r.jsxs)(P.xv,{...D.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر شاخص اولین تصویر نقطه و تصویری است که بر روی کارت ",(0,r.jsx)("br",{})," نقطه نمایش داده می شود!"]}),(0,r.jsx)(P.zx,{size:"4",type:"button",onClick:()=>{R("create"),V(!0)},children:(0,r.jsxs)(P.kC,{gap:"2",align:"center",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:"افزودن تصویر شاخص"})]})})]}),(0,r.jsxs)(P.u_,{isOpen:_,onClose:()=>V(!1),children:[(0,r.jsx)(N.Z,{title:"تصویر شاخص",handleClose:()=>V(!1)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!m&&!1==!!Z("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{L(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(P.zx,{size:"3",style:{width:"fit-content"},children:(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(E.V1,{}),(0,r.jsx)(P.xv,{...D.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:["create"===T&&(0,r.jsx)(P.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:X.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(X.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(w.Qr,{name:"pic",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{L(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(E.rF,{})})]})}})})}})}),(0,r.jsx)(eg.default,{src:Z("isReset")?"".concat("https://uploader.darkube.app/").concat(m):Z("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(P.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,value:String(Z("provinceId")),onValueChange:e=>{t.onChange(e),A("cityID",""),A("townId","")},placeholder:"استان",children:j.provinces.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!Z("provinceId"),value:String(Z("cityID")),onValueChange:e=>{t.onChange(e),A("townId","")},placeholder:"شهرستان",children:null==O?void 0:O.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!Z("provinceId")||!Z("cityID"),value:String(Z("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==K?void 0:K.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:F,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>V(!1),onSubmit:()=>{"create"===T?B({articleImageType:"MAIN",type:"ARTICLE",alt:Z("alt"),description:Z("description"),file:Z("imageFile"),articleId:null==C?void 0:C.id,slug:Z("alt"),summery:Z("brief"),townId:Number(Z("townId"))}):M({alt:Z("alt"),description:Z("description"),id:C.picInfo.id,summery:Z("brief"),townId:Number(Z("townId")),type:"ARTICLE"})},isDisableSubmitBtn:!Z("townId"),isLoading:W||q})]})]}),(0,r.jsx)(P.u_,{isOpen:k,onClose:()=>I(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>G(Number(1)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:$?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>I(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},ek=()=>{let{setValue:e,watch:t,control:n}=(0,w.Gc)(),[a,l]=(0,i.useState)(""),s=(0,w.qo)({control:n,name:"placeRelationType"})||[],o=t=>{e("placeRelationType",s.filter(e=>e!==t))};return(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",children:[(0,r.jsx)(P.kC,{width:"40%",align:"center",gap:"3",children:(0,r.jsxs)(eS,{children:[(0,r.jsx)(eI,{type:"number",value:a,onChange:e=>l(e.target.value),placeholder:"افزودن نقطه مرتبط"}),(0,r.jsx)(P.hU,{size:"4",type:"button",className:"icon-button",variant:"surface",onClick:()=>{a&&(e("placeRelationType",[...t("placeRelationType")||[],Number(a)]),l(""))},children:(0,r.jsx)(ec.pOD,{style:{color:X.K.pink[9]}})})]})}),s.length>0?(0,r.jsx)(P.kC,{width:"100%",gap:"3",wrap:"wrap",children:s.map(e=>(0,r.jsxs)(P.kC,{width:"fit-content",gap:"3",p:"9.5px 16px",align:"center",style:{backgroundColor:X.K.gray[3],borderRadius:16},children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:e}),(0,r.jsx)(P.hU,{size:"1",variant:"surface",onClick:()=>o(e),children:(0,r.jsx)(ew,{})})]},e))}):(0,r.jsx)(P.kC,{p:"54.5px 16px",style:{border:"1px solid ".concat(X.K.gray[7]),borderRadius:8},children:(0,r.jsx)(P.xv,{...D.p.title1,style:{color:X.K.gray[11]},children:"هنوز نقطه ای اضافه نشده است."})})]})};let ew=(0,ed.ZP)(E.x8).withConfig({componentId:"sc-2978b8bc-0"})(["path{fill:",";}"],X.K.pink[11]),eI=(0,ed.ZP)(P.nv).withConfig({componentId:"sc-2978b8bc-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"]),eS=(0,ed.ZP)(P.kC).withConfig({componentId:"sc-2978b8bc-2"})(["width:100%;align-items:center;border:1px solid ",";background-color:transparent;border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{background-color:transparent;@media (hover:hover){background-color:transparent !important;}}"],X.K.gray[7],X.K.blue[2],X.i.shadow1,X.K.gray[3]);n(66173);var eP=n(57818),eK=n(88497),eQ=n(31760),eT=n.n(eQ);let eR=(0,eP.default)(()=>n.e(7335).then(n.t.bind(n,67602,23)).then(e=>e.Editor),{loadableGenerated:{webpack:()=>[67602]},ssr:!1,loading:()=>(0,r.jsx)(a.$j,{})});var eD=()=>{let e=[{name:"فهرست مطالب",id:1},{name:"محتوای اصلی مقاله",id:2}],{setValue:t,getValues:n,control:a,watch:l}=(0,w.Gc)(),s=(0,w.qo)({name:"articleDetail"}),[o,c]=(0,i.useState)(e.reduce((e,t)=>{let n=null==s?void 0:s.find(e=>e.detailId===t.id);if(n&&n.descriptions){let r=(0,eK.convertFromHTML)(n.descriptions),i=eK.ContentState.createFromBlockArray(r.contentBlocks,r.entityMap);e[t.id]=eK.EditorState.createWithContent(i)}else e[t.id]=eK.EditorState.createEmpty();return e},{})),d=(e,r)=>{c(t=>({...t,[e]:r}));let i=r.getCurrentContent(),a=eT()((0,eK.convertToRaw)(i)).trim();if("<p></p>"===a||""===a)return;let l=n("articleDetail")||[],s=l.findIndex(t=>t.detailId===e);-1!==s?l[s].descriptions=a:l.push({detailId:e,descriptions:a}),t("articleDetail",l,{shouldDirty:!0})};return console.log(l()),(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",children:[(0,r.jsx)(w.Qr,{name:"brief",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"خلاصه مقاله",rows:4})}}),(0,r.jsx)(w.Qr,{name:"summery",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"summery",rows:4})}}),(0,r.jsx)(P.rj,{children:e.map(e=>(0,r.jsx)(eR,{editorStyle:{minHeight:"144px",overflow:"auto",border:"1px solid #CDCED7",borderRadius:"8px",padding:"8px",position:"static",height:"fit-content"},editorState:o[e.id],toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:t=>d(e.id,t),placeholder:e.name},e.id))}),(0,r.jsx)(w.Qr,{name:"isSlider",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(P.XZ,{...t,size:"2",label:"نمایش در صفحه اصلی",checked:t.value,onCheckedChange:e=>t.onChange(e)})}})]})},ez=e=>{var t,n;let{type:l,placeConstant:s,articleData:o}=e,c=(0,er.useQueryClient)(),d=(0,I.useRouter)(),u=(0,I.useParams)(),[p,x]=(0,i.useState)("initial-data"),h=(0,w.cI)({defaultValues:"create-article"===l?{articleDetail:[],title:"",content:"",writer:"",on_titile:"",source:"",summery:"",brief:"",placeRelationType:(null==o?void 0:o.places)?null==o?void 0:null===(t=o.places.find(e=>(null==e?void 0:e.placeRelationType)==="MAIN"))||void 0===t?void 0:t.placeId:null,slug:"",tableOfContent:"",inMain:!1,inTop:!1,provincesId:"",citiesId:"",metakeywords:[],keywords:[],meta_title:"",meta_description:"",status:"",is_published:"",type:"",categoryId:"",parentCategoryId:"",source_link:"",pic:"",isSlider:!1,mainPoint:null,view:null}:"edit-article"===l?{articleDetail:[{detailId:1,descriptions:o.tableOfContent||""},{detailId:2,descriptions:o.content||""}],type:(null==o?void 0:o.type)?null==o?void 0:o.type:"",is_published:null==o?void 0:o.is_published,status:null==o?void 0:o.status,provincesId:(null==o?void 0:o.provincesId)?null==o?void 0:o.provincesId:"",citiesId:(null==o?void 0:o.citiesId)?null==o?void 0:o.citiesId:"",categoryId:Number(null==o?void 0:o.categoryId),parentCategoryId:Number(null==o?void 0:o.parentCategoryId),title:null==o?void 0:o.title,content:null==o?void 0:o.content,writer:null==o?void 0:o.writer,on_titile:null==o?void 0:o.on_titile,source:null==o?void 0:o.source,summery:null==o?void 0:o.summery,brief:null==o?void 0:o.brief,slug:null==o?void 0:o.slug,tableOfContent:null==o?void 0:o.tableOfContent,inMain:null==o?void 0:o.inMain,inTop:null==o?void 0:o.inTop,mainPoint:(null==o?void 0:o.places)?null===(n=o.places.find(e=>"MAIN"===e.placeRelationType))||void 0===n?void 0:n.placeId:null,placeRelationType:(null==o?void 0:o.places)?(null==o?void 0:o.places).filter(e=>"RELATION"===e.placeRelationType).map(e=>e.placeId):null,metakeywords:null==o?void 0:o.tags,keywords:null==o?void 0:o.keywords,meta_title:null==o?void 0:o.meta_title,meta_description:null==o?void 0:o.meta_description,view:null==o?void 0:o.view,source_link:null==o?void 0:o.source_link,pic:null==o?void 0:o.pic,isSlider:null==o?void 0:o.isSlider}:{}}),{watch:g,control:m}=h,{mutate:v,isPending:b}=(0,S.useMutation)({mutationFn:async e=>y(e),onSuccess:e=>{201===e.statusCode?(d.push("/data-management/article-management"),c.invalidateQueries({queryKey:["article-data"]}),(0,es.ToastSuccess)(el)):(0,es.ToastError)(e.message)},onError:e=>{console.log("onError",e)}}),{mutate:f,isPending:C}=(0,S.useMutation)({mutationFn:async e=>j(Number(u.slug[2]),e),onSuccess:e=>{200===e.statusCode?((0,es.ToastSuccess)(el),d.push("/data-management/article-management"),c.invalidateQueries({queryKey:["article-data"]})):(0,es.ToastError)(e.message)},onError:e=>{console.log("onError",e)}});return console.log(o,"articleDataarticleDataarticleData"),(0,r.jsx)(w.RV,{...h,children:(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",children:[(0,r.jsxs)(P.rj,{width:"100%",columns:"3",gap:"5",children:[(0,r.jsx)(ei,{label:"نوع نقطه",children:(0,r.jsx)(w.Qr,{name:"type",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"نقطه",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:null==s?void 0:s.PlaceType.map((e,t)=>(0,r.jsx)(P.Ql,{value:e.id,children:e.name},t))})}})}),(0,r.jsx)(ei,{label:"انتشار",children:(0,r.jsx)(w.Qr,{name:"is_published",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"انتشار",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:O.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}})}),(0,r.jsx)(ei,{label:"وضعیت",children:(0,r.jsx)(w.Qr,{name:"status",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:A.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}})})]}),(0,r.jsx)(P.kC,{position:"sticky",top:"70px",width:"100%",gap:"11px",p:"4",align:"center",style:{overflowX:"auto",border:"1px solid ".concat(X.K.gray[6]),backgroundColor:X.K.gray[2],borderRadius:"4px",zIndex:"2"},children:"create-article"===l?(0,r.jsx)(r.Fragment,{children:M.map((e,t)=>(0,r.jsx)(P.zx,{size:"3",type:"button",variant:p===e.key?"soft":"solid",onClick:()=>x(e.key),children:(0,r.jsx)(P.xv,{...D.p.body1,children:e.label})},t))}):"edit-article"===l&&(0,r.jsx)(r.Fragment,{children:q.map((e,t)=>(0,r.jsx)(P.zx,{size:"3",type:"button",variant:p===e.key?"soft":"solid",onClick:()=>x(e.key),children:(0,r.jsx)(P.xv,{...D.p.body1,children:e.label})},t))})}),"initial-data"===p&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"اطلاعات اولیه",children:(0,r.jsx)(ef,{categories:(null==s?void 0:s.categories)?s.categories:[],province:(null==s?void 0:s.provinces)?s.provinces:[]})}),"text-content"===p&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"محتوای متنی",children:(0,r.jsx)(eD,{})}),"related-points"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eo.Z,{type:"changeAble",hero:"نقطه مقاله",children:(0,r.jsx)(eu,{})}),(0,r.jsx)(eo.Z,{type:"changeAble",hero:"نقاط مرتبط",children:(0,r.jsx)(ek,{})})]}),"seo-setting"===p&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تنظیمات سئو",children:(0,r.jsx)(ea.MK,{})}),"images"===p&&(0,r.jsxs)(P.kC,{direction:"column",gap:"5",children:[(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تصویر شاخص",children:(0,r.jsx)(eC,{constant:s,picture:null==o?void 0:o.pic,articleData:o})}),(0,r.jsx)(eo.Z,{type:"changeAble",hero:"گالری تصاویر",children:(0,r.jsx)(eb,{articleId:null==o?void 0:o.id,constant:s})})]}),(0,r.jsxs)(P.kC,{p:"4",gap:"5",style:{backgroundColor:X.K.gray[2],border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(P.zx,{size:"3",variant:"soft",style:{padding:"13.5px 48.5px"},onClick:()=>"create-article"===l?v(g()):f(g()),children:b||C?(0,r.jsx)(a.$j,{}):(0,r.jsx)(P.xv,{...D.p.body1,children:"ثبت"})}),(0,r.jsx)(P.zx,{size:"3",colorVariant:"PINK",onClick:()=>d.back(),style:{padding:"13.5px 48.5px"},children:(0,r.jsx)(P.xv,{...D.p.body1,children:"لغو"})})]})]})})},e_=n(24822),eN=n(58606),eE=n(10504);let eV={open:{opacity:1,height:"auto"},closed:{opacity:0,height:0}};var eF=e=>{let{pic:t,fullName:n,date:a,content:l,onDelete:s,isDisable:o=!0}=e,[c,d]=(0,i.useState)(!1),u=()=>{d(!c)};return(0,r.jsxs)(P.rj,{width:"100%",p:"4",gapY:"2",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsxs)(P.kC,{align:"center",gap:"10px",children:[(0,r.jsx)(P.xu,{width:"32px",height:"32px",position:"relative",children:(0,r.jsx)(eg.default,{src:t?"".concat("https://uploader.darkube.app/").concat(t):"",alt:"",fill:!0,style:{borderRadius:100}})}),(0,r.jsxs)(P.kC,{direction:"column",gap:"1",children:[(0,r.jsx)(P.xv,{...D.p.body3,style:{color:X.K.gray[11]},children:n}),(0,r.jsx)(P.xv,{...D.p.description2,style:{color:X.K.gray[11],opacity:"50%"},children:(0,eE.l)(a)})]})]}),(0,r.jsx)(P.hU,{type:"button",size:"3",colorVariant:"PINK",disabled:o,onClick:s,style:{borderRadius:40},children:(0,r.jsx)(E.rF,{})})]}),(0,r.jsx)(eN.E.div,{variants:eV,initial:!1,transition:{duration:.3},style:{overflow:"hidden"},layout:!0,children:(0,r.jsx)(P.xv,{...D.p.paragraph2,style:{color:X.K.gray[11]},children:c?l:"".concat(l.slice(0,300)).concat(l.length>300?"...":"")})}),(0,r.jsx)(P.kC,{width:"100%",align:"center",justify:"end",children:(0,r.jsx)(eN.E.div,{transition:{duration:.3},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsxs)(P.zx,{variant:"surface",colorVariant:"PINK",type:"button",onClick:()=>u(),children:[(0,r.jsx)(P.xv,{...D.p.body1,children:c?"بستن":"بیشتر"}),c?(0,r.jsx)(ec.g8U,{style:{color:X.K.pink[10]}}):(0,r.jsx)(ec.v4q,{style:{color:X.K.pink[10]}})]})})})]})},eZ=e=>{var t,n;let{id:l}=e,[s,o]=(0,i.useState)(1),c=(0,er.useQueryClient)(),[u,p]=(0,i.useState)(!1),[x,h]=(0,i.useState)(null),{data:g,isLoading:y,isFetching:j}=(0,z.useQuery)({queryKey:["place-user-comments",l,s],queryFn:async()=>d(l,s,6)}),{mutate:m,isPending:v}=(0,S.useMutation)({mutationFn:async e=>(0,e_.kq)(e),onSuccess:async e=>{!0===e.status?(c.invalidateQueries({queryKey:["place-user-comments"]}),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید"),p(!1)},onError:()=>{(0,es.ToastError)("لطفا دوباره تلاش نمایید"),p(!1)}});return y||j?(0,r.jsx)(a.$j,{style:{margin:"50px auto"}}):(0,r.jsxs)(r.Fragment,{children:[(null==g?void 0:null===(t=g.PlaceComments)||void 0===t?void 0:t.length)===0?(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:"در حال حاضر برای این نقطه نظری ثبت نشده است"}):(0,r.jsxs)(P.kC,{direction:"column",gap:"5",children:[null==g?void 0:null===(n=g.PlaceComments)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(eF,{...e,isDisable:!1,onDelete:()=>{p(!0),h(e.id)}},t)),(null==g?void 0:g.PlaceComments)&&(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",px:"5",children:[(0,r.jsx)(K.Z,{current:s,total:null==g?void 0:g.totalPages,maxWidth:24,onPageChange:e=>o(e)}),(0,r.jsx)(Q.Z,{data:g.PlaceComments,currentPage:null==g?void 0:g.currentPage,totalCount:null==g?void 0:g.totalCount})]})]}),(0,r.jsx)(P.u_,{isOpen:u,onClose:()=>p(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>m(Number(x)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:v?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>p(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},eA=n(64793),eO=e=>{var t;let{placeId:n,constant:a,currentItem:l,handleCloseModal:s,isOpen:o,resetCurrentItem:c,status:d}=e,u=(0,er.useQueryClient)(),{control:p,watch:x,setValue:h,reset:g}=(0,w.cI)({defaultValues:{town:"",localPic:"",imageFile:null,pic:(null==l?void 0:l.path)?null==l?void 0:l.path:"",provinceId:(null==l?void 0:l.provinceId)?l.provinceId:"",cityID:(null==l?void 0:l.cityId)?l.cityId:"",townId:(null==l?void 0:l.townId)?l.townId:"",alt:(null==l?void 0:l.alt)?null==l?void 0:l.alt:"",description:(null==l?void 0:l.description)?null==l?void 0:l.description:"",brief:(null==l?void 0:l.summery)?l.summery:"",isReset:null!=l&&!!l.path}}),y=null===(t=a.provinces.filter(e=>e.id===Number(x("provinceId")))[0])||void 0===t?void 0:t.Cities,[j,m]=(0,i.useState)([]),v=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},b=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await v(n);t(URL.createObjectURL(r)),h("localPic",URL.createObjectURL(r)),h("isReset",!1),h("imageFile",r)}},{mutate:f,isPending:C}=(0,S.useMutation)({mutationFn:async e=>(0,k.RP)(e),onSuccess:async e=>{201===e.statusCode?(u.invalidateQueries({queryKey:["image-gallery"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),s(),g({localPic:""})):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:I,isPending:K}=(0,S.useMutation)({mutationFn:async e=>(0,k.b)(e),onSuccess:async e=>{200===e.statusCode?(u.invalidateQueries({queryKey:["image-gallery"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),s()):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}});return(0,i.useEffect)(()=>{let e=x("cityID"),t=x("provinceId");if(e&&t){let i=a.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&m(null!==(r=t.Town)&&void 0!==r?r:[])}}},[x("cityID"),x("provinceId")]),(0,r.jsxs)(P.u_,{isOpen:o,onClose:()=>{c(),s()},children:[(0,r.jsx)(N.Z,{title:"تصاویر",handleClose:()=>{c(),s()}}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==l?void 0:l.path)&&!1==!!x("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{b(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(P.zx,{size:"3",type:"button",style:{width:"fit-content"},children:(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(E.V1,{}),(0,r.jsx)(P.xv,{...D.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:["create"===d&&(0,r.jsx)(P.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:X.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(X.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(w.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>{b(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(E.rF,{})})]})}})})}})}),(0,r.jsx)(eg.default,{src:x("isReset")?"".concat("https://uploader.darkube.app/").concat(null==l?void 0:l.path):x("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(P.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,value:String(x("provinceId")),onValueChange:e=>{t.onChange(e),h("cityID",""),h("townId","")},placeholder:"استان",children:a.provinces.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!x("provinceId"),value:String(x("cityID")),onValueChange:e=>{t.onChange(e),h("townId","")},placeholder:"شهرستان",children:null==y?void 0:y.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!x("provinceId")||!x("cityID"),value:String(x("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==j?void 0:j.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:p,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>{c(),s()},isDisableSubmitBtn:!x("townId"),onSubmit:()=>{"edit"===d?I({alt:x("alt"),description:x("description"),id:l.id,summery:x("brief"),townId:Number(x("townId")),type:"PLACE"}):f({type:"GALLERY",alt:x("alt")?x("alt"):"",description:x("description")?x("description"):"",file:x("imageFile"),placeId:n,slug:x("alt")?x("alt"):"",summery:x("brief")?x("brief"):"",townId:Number(x("townId"))})},isLoading:C||K,isSubmit:!1})]})]})},eU=e=>{let{placeId:t,constant:n}=e,[l,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),[d,u]=(0,i.useState)("create"),p=(0,er.useQueryClient)(),[x,h]=(0,i.useState)(!1),[g,y]=(0,i.useState)(1),{data:j}=(0,z.useQuery)({queryKey:["image-gallery",g],queryFn:async()=>await (0,k.W5)(t,g)}),[m,v]=(0,i.useState)(null),{mutate:b,isPending:f}=(0,S.useMutation)({mutationFn:async e=>(0,k.Nn)(e),onSuccess:async e=>{!0===e.status?(p.invalidateQueries({queryKey:["image-gallery"]}),(0,es.ToastSuccess)("تصویر مورد نظر با موفقیت حذف شد"),s(!1)):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,r.jsxs)(r.Fragment,{children:[j&&(null==j?void 0:j.gallery.length)===0?(0,r.jsxs)(P.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(P.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصاویر گالری اضافه نشده اند."}),(0,r.jsx)(P.xv,{...D.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:"تصاویر گالری مجموعه تصاویری هستند که تنها در صفحه نقطه نمایش داده می شوند."}),(0,r.jsx)(P.zx,{size:"4",type:"button",onClick:()=>{v(null),u("create"),h(!0)},children:(0,r.jsxs)(P.kC,{gap:"2",align:"center",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:"افزودن تصویر"})]})})]}):(0,r.jsxs)(P.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(P.zx,{variant:"ghost",size:"3",type:"button",style:{width:"fit-content"},onClick:()=>{v(null),u("create"),h(!0)},children:(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:"افزودن تصویر"})]})}),null==j?void 0:j.gallery.map(e=>(0,r.jsxs)(P.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(P.xu,{width:"328px",height:"200px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(e.path),alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(P.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11],marginTop:"10px"},children:e.path}),(0,r.jsxs)(P.kC,{direction:"column",mt:"12px",children:[(0,r.jsx)(P.nv,{readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}}),(0,r.jsx)(P.nv,{value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]})]}),(0,r.jsxs)(P.kC,{direction:"column",gap:"4",children:[(0,r.jsx)(P.hU,{size:"3",type:"button",onClick:()=>{u("edit"),v(e),h(!0)},children:(0,r.jsx)(E.z,{})}),(0,r.jsx)(P.hU,{onClick:()=>{c(e.id),s(!0)},type:"button",size:"3",variant:"surface",colorVariant:"PINK",children:(0,r.jsx)(E.rF,{})})]})]},e.alt))]}),j&&(null==j?void 0:j.gallery.length)>0&&(0,r.jsx)(K.Z,{current:g,total:null==j?void 0:j.totalPages,maxWidth:24,onPageChange:e=>y(e)}),!!m&&(0,r.jsx)(eO,{constant:n,currentItem:m,handleCloseModal:()=>h(!1),isOpen:x,placeId:t,resetCurrentItem:()=>v(null),status:d}),"create"===d&&(0,r.jsx)(eO,{constant:n,currentItem:m,handleCloseModal:()=>h(!1),isOpen:x,placeId:t,resetCurrentItem:()=>v(null),status:d}),(0,r.jsx)(P.u_,{isOpen:l,onClose:()=>s(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>b(Number(o)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:f?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>s(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},eL=e=>{let{picture:t,description:n,id:l,isTop:s}=e,[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),p=(0,er.useQueryClient)(),[x,h]=(0,i.useState)(s);console.log(x);let{mutate:g,isPending:y}=(0,S.useMutation)({mutationFn:async e=>(0,k.BT)(e),onSuccess:async e=>{!0===e.status?((0,es.ToastSuccess)("تصویر مورد نظر با موفقیت حذف شد"),c(!1),p.invalidateQueries({queryKey:["place-user-uploads"]})):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}}),{mutate:j,isSuccess:m}=(0,S.useMutation)({mutationFn:async e=>(0,k.Yh)(e),onSuccess:async e=>{!0===e.status?((0,es.ToastSuccess)("تصویر مورد نظر با موفقیت به عنوان تصویر برتر انتخاب شد"),c(!1),p.invalidateQueries({queryKey:["place-user-uploads"]})):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return console.log(s,"isTopisTopisTop"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.rj,{width:"100%",p:"12px",gap:"10px",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(P.xu,{width:"100%",height:"200px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(t),alt:"تصویر مکان ارسال شده",fill:!0,style:{borderRadius:8}})}),(0,r.jsx)(P.xv,{...D.p.body2,style:{color:X.K.gray[11],width:"fit-content"},children:n}),(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(P.XZ,{label:"تصویر برتر",checked:s,onCheckedChange:()=>{j(l),m&&h(e=>!e)}}),(0,r.jsxs)(P.kC,{align:"center",gap:"10px",children:[(0,r.jsx)(P.hU,{size:"3",type:"button",onClick:()=>{let e="".concat("https://uploader.darkube.app/").concat(t);window.open(e,"_blank")},children:(0,r.jsx)(E.UW,{})}),(0,r.jsx)(P.hU,{onClick:()=>{c(!0),u(l)},size:"3",type:"button",colorVariant:"PINK",variant:"surface",children:(0,r.jsx)(E.rF,{})})]})]})]}),(0,r.jsx)(P.u_,{isOpen:o,onClose:()=>c(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>g(Number(d)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:y?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>c(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},eM=e=>{var t,n;let{id:a}=e,[l,s]=(0,i.useState)(1),{data:o}=(0,z.useQuery)({queryKey:["place-user-uploads",a,l],queryFn:async()=>x(a,l,6)});return(0,r.jsx)(r.Fragment,{children:(null==o?void 0:null===(t=o.filteredPics)||void 0===t?void 0:t.length)===0?(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:"در حال حاضر تصویری آپلود نشده است"}):(0,r.jsxs)(P.kC,{direction:"column",gap:"5",children:[(0,r.jsx)(P.rj,{columns:{initial:"1",sm:"2",md:"3"},gap:"5",children:null==o?void 0:null===(n=o.filteredPics)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(eL,{...e},t))}),(null==o?void 0:o.filteredPics)&&(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",px:"5",children:[(0,r.jsx)(K.Z,{current:l,total:null==o?void 0:o.totalPages,maxWidth:24,onPageChange:e=>s(e)}),(0,r.jsx)(Q.Z,{data:o.filteredPics,currentPage:null==o?void 0:o.currentPage,totalCount:null==o?void 0:o.totalCount})]})]})})},eq=e=>{let{name:t,placeProvinceName:n,cityName:i,provinceName:a,phone:l,website:s,email:o,type:c,index:d,address:u,placeName:p,placeCityName:x,onDelete:h}=e;return(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",p:"4",style:{borderRadius:8,backgroundColor:d%2==0?X.K.blue[2]:X.K.pink[2],border:d%2==0?"1px solid ".concat(X.K.blue[6]):"1px solid ".concat(X.K.pink[6])},children:["improve_data_management"===c&&(0,r.jsx)(P.kC,{width:"100%",justify:"between",align:"center",children:(0,r.jsxs)(P.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12]},children:p}),(0,r.jsx)(P.xv,{...D.p.description2,style:{color:X.K.gray[11]},children:"".concat(n," / ").concat(x)})]})}),(0,r.jsxs)(eW,{type:c,children:[(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",children:[(0,r.jsxs)(P.rj,{width:"3",columns:"3",gapY:"5",children:[(0,r.jsx)(eB,{label:"نام نقطه",value:t}),(0,r.jsx)(eB,{label:"شماره تماس",value:l}),(0,r.jsx)(eB,{label:"وب سایت",value:s}),(0,r.jsx)(eB,{label:"ایمیل",value:o}),(0,r.jsx)(eB,{label:"استان",value:a}),(0,r.jsx)(eB,{label:"شهر",value:i})]}),(0,r.jsx)(P.xv,{...D.p.paragraph1,style:{color:X.K.gray[11]},children:u})]}),(0,r.jsx)(P.hU,{size:"2",type:"button",colorVariant:"PINK",style:{borderRadius:12,marginInline:"auto"},onClick:()=>{h&&h()},children:(0,r.jsx)(E.rF,{})})]})]})};let eB=e=>{let{label:t,value:n}=e;return(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body2,style:{color:X.K.gray[10]},children:t}),(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[12]},children:n||"ــ"})]})},eW=(0,ed.ZP)(P.rj).withConfig({componentId:"sc-24a60468-0"})(["grid-template-columns:",";column-gap:",";"],e=>{let{type:t}=e;return"improve_data_management"===t?"1fr":"95% 5%"},e=>{let{type:t}=e;return"improve_data_management"===t?"0px":"16px"});var eY=e=>{var t,n;let{id:l}=e,[s,o]=(0,i.useState)(1),[c,d]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),h=(0,er.useQueryClient)(),{data:g,isLoading:y,isFetching:j}=(0,z.useQuery)({queryKey:["place-user-uploads",l,s],queryFn:async()=>p(l,s,6)}),{mutate:m,isPending:v}=(0,S.useMutation)({mutationFn:async e=>(0,e_.Xo)(e),onSuccess:async e=>{!0===e.status?(h.invalidateQueries({queryKey:["place-user-uploads"]}),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد"),x(!1)):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,r.jsxs)(r.Fragment,{children:[y||j?(0,r.jsx)(a.$j,{style:{margin:"50px auto",scale:2}}):(null==g?void 0:null===(t=g.PlaceImproveContent)||void 0===t?void 0:t.length)===0?(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:"در حال حاضر موردی ثبت نشده است"}):(0,r.jsxs)(P.kC,{direction:"column",gap:"5",children:[null==g?void 0:null===(n=g.PlaceImproveContent)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(eq,{state:t,...e,type:"point_detail",onDelete:()=>{d(Number(e.id)),x(!0)}},t)),(null==g?void 0:g.PlaceImproveContent)&&(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",px:"5",children:[(0,r.jsx)(K.Z,{current:s,total:null==g?void 0:g.totalPages,maxWidth:24,onPageChange:e=>o(e)}),(0,r.jsx)(Q.Z,{data:g.PlaceImproveContent,currentPage:null==g?void 0:g.currentPage,totalCount:null==g?void 0:g.totalCount})]})]}),(0,r.jsx)(P.u_,{isOpen:u,onClose:()=>x(!1),children:(0,r.jsxs)(a.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(a.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>m(Number(c)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:v?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>x(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},eX=e=>{var t;let{picture:n,constant:l,placeData:s}=e,[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)([]),[p,x]=(0,i.useState)("create"),h=s.pictures.filter(e=>"MAIN"===e.type)[0],g=(0,er.useQueryClient)(),[y,j]=(0,i.useState)(!1),{control:m,watch:v,setValue:b,reset:f}=(0,w.cI)({defaultValues:{imageFile:null,pic:h?h.path:"",localPic:"",provinceId:(null==h?void 0:h.provinceId)?h.provinceId:"",cityID:(null==h?void 0:h.cityID)?h.cityId:"",townId:(null==h?void 0:h.townId)?h.townId:"",isReset:null!=n&&!!n.path,alt:(null==h?void 0:h.alt)&&"null"!==h.alt?h.alt:"",description:(null==h?void 0:h.description)&&"null"!==h.description?h.description:"",brief:(null==h?void 0:h.brief)&&"null"!==h.brief?h.brief:""}}),C=null===(t=l.provinces.filter(e=>e.id===Number(v("provinceId")))[0])||void 0===t?void 0:t.Cities,I=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,em.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},K=async(e,t)=>{if(e&&e[0]){let n=e[0],r=await I(n);t(URL.createObjectURL(r)),b("localPic",URL.createObjectURL(r)),b("isReset",!1),b("imageFile",r)}},{mutate:Q,isPending:T}=(0,S.useMutation)({mutationFn:async e=>(0,k.b)(e),onSuccess:async e=>{200===e.statusCode?(g.invalidateQueries({queryKey:["place"]}),(0,es.ToastSuccess)("مشخصات تصویر با موفقیت به روز شد"),j(!1)):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:R,isPending:z}=(0,S.useMutation)({mutationFn:async e=>(0,k.RP)(e),onSuccess:async e=>{201===e.statusCode?(g.invalidateQueries({queryKey:["place"]}),(0,es.ToastSuccess)("تصویر ارسالی با موفقیت اپلود شد"),j(!1)):(0,es.ToastError)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:_,isPending:V}=(0,S.useMutation)({mutationFn:async e=>(0,k.bb)(e),onSuccess:async e=>{!0===e.status?(g.invalidateQueries({queryKey:["place"]}),c(!1),(0,es.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد"),f({alt:"",brief:"",cityID:"",description:"",localPic:"",provinceId:"",townId:""})):(0,es.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.useEffect)(()=>{let e=v("cityID"),t=v("provinceId");if(e&&t){let i=l.provinces.find(e=>e.id===Number(t));if(i){var n,r;let t=null===(n=i.Cities)||void 0===n?void 0:n.find(t=>t.id===Number(e));t&&u(null!==(r=t.Town)&&void 0!==r?r:[])}}},[v("cityID"),v("provinceId")]),(0,r.jsxs)(r.Fragment,{children:[n?(0,r.jsxs)(P.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(X.K.gray[6]),borderRadius:8},children:[(0,r.jsx)(P.xu,{width:"610px",height:"342px",position:"relative",children:(0,r.jsx)(eg.default,{src:"".concat("https://uploader.darkube.app/").concat(n.path),alt:"تصویر شاخص",fill:!0,style:{borderRadius:8}})}),(0,r.jsxs)(P.kC,{direction:"column",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:h.path}),(0,r.jsx)(w.Qr,{name:"alt",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{readOnly:!0,...t,placeholder:"Alt Text",style:{borderRadius:12}})}}),(0,r.jsx)(w.Qr,{name:"description",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{readOnly:!0,...t,placeholder:"توضیحات تصویر",rows:6,style:{borderRadius:12}})}})]}),(0,r.jsxs)(P.kC,{direction:"column",gap:"4",px:"10px",children:[(0,r.jsx)(P.hU,{size:"3",type:"button",onClick:()=>{x("edit"),j(!0)},children:(0,r.jsx)(E.z,{})}),(0,r.jsx)(P.hU,{size:"3",variant:"ghost",type:"button",colorVariant:"PINK",onClick:()=>{c(!0)},children:(0,r.jsx)(E.rF,{height:24})})]})]}):(0,r.jsxs)(P.kC,{direction:"column",gap:"6",align:"center",py:"87.5px",children:[(0,r.jsx)(P.X6,{as:"h3",size:"3",style:{color:X.K.gray[11]},children:"هنوز تصویر شاخصی اضافه نشده است."}),(0,r.jsxs)(P.xv,{...D.p.paragraph1,style:{color:X.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر شاخص اولین تصویر نقطه و تصویری است که بر روی کارت ",(0,r.jsx)("br",{})," نقطه نمایش داده می شود!"]}),(0,r.jsx)(P.zx,{size:"4",type:"button",onClick:()=>{x("create"),j(!0),b("localPic","")},children:(0,r.jsxs)(P.kC,{gap:"2",align:"center",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:"افزودن تصویر شاخص"})]})})]}),(0,r.jsxs)(P.u_,{isOpen:y,onClose:()=>j(!1),children:[(0,r.jsx)(N.Z,{title:"تصویر شاخص",handleClose:()=>j(!1)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==n?void 0:n.path)&&!1==!!v("localPic")?(0,r.jsx)(w.Qr,{name:"pic",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(ej.ZP,{onDrop:e=>K(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...n()}),(0,r.jsx)(P.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(P.zx,{type:"button",size:"3",style:{width:"fit-content"},children:(0,r.jsxs)(P.kC,{align:"center",gap:"2",children:[(0,r.jsx)(E.V1,{}),(0,r.jsx)(P.xv,{...D.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(X.K.gray[3])},children:(0,r.jsx)(eg.default,{src:v("isReset")?"".concat("https://uploader.darkube.app/").concat(n.path):v("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})}),(0,r.jsxs)(P.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(w.Qr,{name:"provinceId",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,value:String(v("provinceId")),onValueChange:e=>{t.onChange(e),b("cityID",""),b("townId","")},placeholder:"استان",children:l.provinces.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"cityID",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!v("provinceId"),value:String(v("cityID")),onValueChange:e=>{t.onChange(e),b("townId","")},placeholder:"شهرستان",children:null==C?void 0:C.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,r.jsx)(w.Qr,{name:"townId",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,disabled:!v("provinceId")||!v("cityID"),value:String(v("townId")),onValueChange:e=>{t.onChange(e)},placeholder:"شهر",children:null==d?void 0:d.map(e=>(0,r.jsx)(P.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,r.jsx)(w.Qr,{name:"alt",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.nv,{...t,placeholder:"متن جایگزین"})}}),(0,r.jsx)(w.Qr,{name:"description",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,r.jsx)(w.Qr,{name:"brief",control:m,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,r.jsx)(Y.Z,{isDisableSubmitBtn:!v("townId"),isLoading:z||T,submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>j(!1),onSubmit:()=>{"create"===p?R({type:"MAIN",alt:v("alt"),description:v("description"),file:v("imageFile"),placeId:s.id,slug:v("alt"),summery:v("brief"),townId:Number(v("townId"))}):Q({alt:v("alt"),description:v("description"),id:h.id,summery:v("brief"),townId:Number(v("townId")),type:"PLACE"})},isSubmit:!1})]})]}),(0,r.jsx)(P.u_,{isOpen:o,onClose:()=>c(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>_(Number(h.id)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:V?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>c(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},eG=()=>{var e,t;let{control:n,watch:a}=(0,w.Gc)(),[l,s]=(0,i.useState)(null===(e=a("vehicleOptions")[0])||void 0===e?void 0:e.key),[o,c]=(0,i.useState)(0),d=(0,w.qo)({control:n,name:"vehicleOptions"})||[],u=(0,w.qo)({control:n,name:"vehicleOptions[".concat(o,"].content"),defaultValue:(null===(t=d[o])||void 0===t?void 0:t.content)||""}),[p,x]=(0,i.useState)(u),h=e=>{switch(e){case"taxi":return"تاکسی";case"car":return"ماشین شخصی";case"train":return"قطار";case"subway":return"مترو";case"ship":return"کشتی";case"airplane":return"هواپیما";case"hike":return"پیاده روی";case"bus":return"اتوبوس"}};return(0,i.useEffect)(()=>{x(a("vehicleOptions[".concat(o,"].content")))},[o]),(0,r.jsx)(P.kC,{direction:"column",gap:"28px",children:(0,r.jsxs)(P.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(P.kC,{width:"100%",gap:"5",align:"center",style:{overflow:"auto"},children:null==d?void 0:d.map((e,t)=>(0,r.jsx)(P.zx,{variant:e.key===l?"soft":"solid",type:"button",size:"3",style:{paddingInline:16},onClick:()=>{s(e.key),c(t)},children:(0,r.jsx)(P.xv,{...D.p.body1,children:h(e.key)})},e.key))}),(0,r.jsx)(w.Qr,{name:"vehicleOptions[".concat(o,"].content"),control:n,render:e=>{let{field:t}=e;return(0,r.jsx)(P.Kx,{...t,value:p,onChange:e=>{t.onChange(e.target.value),x(e.target.value)},placeholder:"شرح مسیر ".concat(h(l)),rows:5})}})]})})},e$=n(52795),eH=n(86084),eJ=n(75312),e0=e=>{let{description:t,type:n,id:i,cardType:a,onDelete:l,onPublish:s}=e;return(0,r.jsxs)(P.kC,{position:"relative",direction:"column",p:"16px",gap:"16px",style:{borderRadius:"8px",backgroundColor:i%2==0?X.K.blue[2]:X.K.pink[2],border:i%2==0?"1px solid ".concat(X.K.blue[6]):"1px solid ".concat(X.K.pink[6])},children:[(0,r.jsx)(P.kC,{justify:"between",children:(0,r.jsx)(P.xv,{...D.p.body2,style:{color:i%2==0?X.K.blue[9]:X.K.pink[9]},children:"AIRPLANE"===n?"هواپیما":"BUS"===n?"اتوبوس":"CAR"===n?"ماشین":"HIKE"===n?"پیاده روی":"SHIP"===n?"کشتی":"TAXI"===n?"تاکسی":"TRAIN"===n&&"قطار"})}),(0,r.jsxs)(P.kC,{width:"100%",justify:"between",gap:"2",children:[(0,r.jsx)(P.xv,{...D.p.paragraph2,style:{color:X.K.gray[11]},children:t}),"route_sent"===a&&(0,r.jsxs)(P.kC,{gap:"2",children:[s&&(0,r.jsx)(P.hU,{type:"button",size:"3",variant:"soft",onClick:s,children:(0,r.jsx)(E.Jr,{})}),(0,r.jsx)(P.hU,{type:"button",size:"3",colorVariant:"PINK",onClick:l,children:(0,r.jsx)(E.rF,{})})]})]}),(0,r.jsx)(P.kC,{justify:"center",align:"center",style:{position:"absolute",right:"-38px",top:"-2px",width:"30px",height:"30px",borderRadius:"50%",backgroundColor:i%2==0?X.K.blue[9]:X.K.pink[9]},children:(e=>{switch(e){case"BUS":return(0,r.jsx)(E.Gc,{});case"TAXI":default:return(0,r.jsx)(E.Ou,{});case"AIRPLANE":return(0,r.jsx)(E.g,{});case"CAR":return(0,r.jsx)(E.lG,{});case"HIKE":return(0,r.jsx)(E.Ir,{});case"SHIP":return(0,r.jsx)(E.lO,{});case"TRAIN":return(0,r.jsx)(E.Qr,{})}})(n)})]})},e1=e=>{let{id:t}=e,[n,l]=(0,i.useState)(1),s=(0,er.useQueryClient)(),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),{data:p}=(0,z.useQuery)({queryKey:["RoutingGuideList",n],queryFn:async()=>await (0,k.LY)(t,n)}),{mutate:x,isPending:h}=(0,S.useMutation)({mutationFn:async e=>(0,e_.M9)(e),onSuccess:async e=>{!0===e.status?(s.invalidateQueries({queryKey:["RoutingGuideList"]}),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید"),c(!1)},onError:()=>{(0,es.ToastError)("لطفا دوباره تلاش نمایید"),c(!1)}});return p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.kC,{direction:"column",gap:"24px",children:[0===p.filteredSuggestions.length?(0,r.jsx)(P.xv,{...D.p.body1,style:{color:X.K.gray[11]},children:"هیچ راهنمای مسیری ارسال نشده است."}):(0,r.jsxs)(P.kC,{direction:"column",pr:"36px",gap:"16px",style:{flex:1},position:"relative",children:[(0,r.jsx)("div",{style:{position:"absolute",height:"100%",right:"12px",border:"1px dashed ".concat(X.K.gray[6])}}),p.filteredSuggestions.map((e,t)=>(0,r.jsx)(e0,{onDelete:()=>{u(e.id),c(!0)},id:t,description:e.description,type:e.travelMode,cardType:"route_sent"},t))]}),(0,r.jsx)(K.Z,{current:n,total:null==p?void 0:p.totalPages,maxWidth:24,onPageChange:e=>{l(e)}})]}),(0,r.jsx)(P.u_,{isOpen:o,onClose:()=>c(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>x(Number(d)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:h?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>c(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]}):(0,r.jsx)(a.$j,{style:{margin:"auto"}})};let e2=(0,eP.default)(()=>Promise.resolve().then(n.bind(n,49796)),{loadableGenerated:{webpack:()=>[49796]},ssr:!1}),e3=(0,eP.default)(()=>Promise.resolve().then(n.bind(n,39224)),{loadableGenerated:{webpack:()=>[39224]},ssr:!1});function e4(e){return Object.entries(e).map(e=>{let[t,n]=e;return{key:t,content:n}})}var e5=e=>{var t,n,l,s,o;let{placeConstant:c,status:d,placeID:u,placeData:p}=e,[x,h]=(0,i.useState)("place-info"),g={taxi:(null==p?void 0:p.taxi)?null==p?void 0:p.taxi:"",bus:(null==p?void 0:p.bus)?null==p?void 0:p.bus:"",subway:(null==p?void 0:p.subway)?null==p?void 0:p.subway:"",car:(null==p?void 0:p.car)?null==p?void 0:p.car:"",train:(null==p?void 0:p.train)?null==p?void 0:p.train:"",airplane:(null==p?void 0:p.airplane)?null==p?void 0:p.airplane:"",hike:(null==p?void 0:p.hike)?null==p?void 0:p.hike:"",ship:(null==p?void 0:p.ship)?null==p?void 0:p.ship:""},y=(0,er.useQueryClient)(),{push:j,back:m}=(0,I.useRouter)(),v=(0,w.cI)({defaultValues:"edit-point"==d?{type:null==p?void 0:p.type,status:null==p?void 0:p.status,isPublished:null!=p&&!!p.isPublished&&(null==p?void 0:p.isPublished),name:null==p?void 0:p.name,category_id:(null==p?void 0:p.category_id)?function e(t,n){for(let r of t){if(r.id===n)return r;if(r.children&&r.children.length>0){let t=e(r.children,n);if(t)return t}}return null}(c.categories,p.category_id).parent_id:"",sub_category_id:(null==p?void 0:p.category_id)?null==p?void 0:p.category_id:"",slug:null==p?void 0:p.slug,basicInfoDescription:null==p?void 0:p.description,basicInfosummary:null==p?void 0:p.summary,provinceId:(null==p?void 0:p.Cities)?null==p?void 0:p.Cities.Provinces.id:"",cityID:(null==p?void 0:p.Cities)?null==p?void 0:p.Cities.id:"",area:null==p?void 0:p.area,townId:null==p?void 0:null===(t=p.Town)||void 0===t?void 0:t.id,tell:null==p?void 0:p.tell,website:null==p?void 0:p.website,email:null==p?void 0:p.email,address:null==p?void 0:p.address,lat:null==p?void 0:p.lat,lng:null==p?void 0:p.lng,vehicleOptions:e4(g),PlaceDetails:(null==(n=null==p?void 0:p.PlaceDetails)?void 0:n.length)>0?n.map(e=>({detailId:e.id,descriptions:e.description})):[],features:(0,eH.$)(null==p?void 0:p.features),cost:null==p?void 0:p.cost,trip_value:null==p?void 0:p.trip_value,renown:null==p?void 0:p.renown,rating:null==p?void 0:p.rating,TripTypes:(l=null==p?void 0:p.Place_TripType,c.tripDatas.map(e=>{let t=null==l?void 0:l.find(t=>t.id===e.id);return t?{tripTypeId:e.id,score:t.score}:{tripTypeId:e.id,score:0}})),PlaceCategories:(s=null==p?void 0:p.Place_Category,c.categories.map(e=>{let t=null==s?void 0:s.find(t=>t.id===e.id);return t?{categoryId:e.id,score:t.score}:{categoryId:e.id,score:0}})),PlaceTripSeasons:(null==p?void 0:p.Place_TripSeason.length)>0?(0,eJ.zW)(p.Place_TripSeason):(0,eJ.zW)(eA.fR),tripLimitations:(o=null==p?void 0:p.Place_TripLimitation,c.tripLimitations.map(e=>{let t=null==o?void 0:o.find(t=>t.id===e.id);return t?{tripLimitationId:e.id,score:t.score}:{tripLimitationId:e.id,score:0}})),gender:p.gender,PlaceWorkTimes:null==p?void 0:p.PlaceWorkTime,keywords:null==p?void 0:p.keywords,metakeywords:null==p?void 0:p.tags,keyword:null==p?void 0:p.keywords,meta_description:null==p?void 0:p.meta_description,meta_title:null==p?void 0:p.meta_title,metakeyword:"",uploadImage:null==p?void 0:p.UserSentPicturesForPlace,pictures:null==p?void 0:p.pictures,suggested_time:null==p?void 0:p.suggested_time}:{type:"PLACE",isPublished:!1,status:!1,name:"",category_id:"",sub_category_id:"",slug:"",basicInfoDescription:"",basicInfosummary:"",cityID:"",provinceId:"",townId:"",tell:"",website:"",email:"",address:"",lat:"",lng:"",vehicleOptions:e4(g),PlaceDetails:[],features:[],cost:"LOW",renown:"LOW",rating:0,trip_value:0,TripTypes:(0,eJ.TY)(null==c?void 0:c.tripDatas),PlaceCategories:(0,eJ.Ai)(null==c?void 0:c.categories),PlaceTripSeasons:(0,eJ.zW)(null==c?void 0:c.seasons),tripLimitations:(0,eJ.iF)(null==c?void 0:c.tripLimitations),gender:"UNKNOWN",PlaceWorkTimes:(0,eJ.hn)(e$.m8),keywords:"",metakeywords:"",keyword:"",meta_description:"",meta_title:"",metakeyword:"",pictures:[],suggested_time:0}}),{handleSubmit:b,control:f}=v,{mutate:C,isPending:K}=(0,S.useMutation)({mutationFn:async e=>(0,k.x1)(e,u),onSuccess:async e=>{!0===e.status?((0,es.ToastSuccess)("اطلاعات شما با موفقیت ویرایش شد"),y.invalidateQueries({queryKey:["place"]}),y.invalidateQueries({queryKey:["all-places"]}),j("/data-management/point-management")):(0,es.ToastError)("لطفا دوباره امتحان نمایید")},onError:e=>{console.log(e,"useRemovePlace")},gcTime:0}),{mutate:Q,isPending:T}=(0,S.useMutation)({mutationFn:async e=>(0,k.Nc)(e),onSuccess:async e=>{201===e.statusCode?((0,es.ToastSuccess)("اطلاعات شما با موفقیت ثبت شد"),y.invalidateQueries({queryKey:["all-places"]}),j("/data-management/point-management")):(0,es.ToastError)(String(e.message))},onError:e=>{console.log(e,"createPlaceMutatecreatePlaceMutatecreatePlaceMutate")}});return(0,r.jsx)(w.RV,{...v,children:(0,r.jsx)("form",{onSubmit:b(e=>{"edit-point"===d?C(e):Q(e)}),children:(0,r.jsxs)(P.rj,{width:"100%",gapY:"5",children:[(0,r.jsxs)(P.rj,{width:"100%",columns:"3",gap:"5",children:[(0,r.jsx)(ei,{label:"نوع نقطه",children:(0,r.jsx)(w.Qr,{name:"type",control:f,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"نقطه",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:c.PlaceType.map((e,t)=>(0,r.jsx)(P.Ql,{value:e.id,children:e.name},t))})}})}),(0,r.jsx)(ei,{label:"انتشار",children:(0,r.jsx)(w.Qr,{name:"isPublished",control:f,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"انتشار",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:O.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}})}),(0,r.jsx)(ei,{label:"وضعیت",children:(0,r.jsx)(w.Qr,{name:"status",control:f,render:e=>{let{field:t}=e;return(0,r.jsx)(P.fp,{...t,placeholder:"وضعیت",value:String(t.value),onValueChange:e=>{t.onChange(e)},children:A.map(e=>(0,r.jsx)(P.Ql,{value:String(e.value),children:e.key},e.id))})}})})]}),(0,r.jsx)(P.kC,{width:"100%",gap:"11px",p:"4",align:"center",style:{overflowX:"auto",backgroundColor:X.K.gray[1],border:"1px solid ".concat(X.K.gray[6]),borderRadius:"8px",zIndex:"10"},position:"sticky",top:"70px",children:"create-point"===d?(0,r.jsx)(r.Fragment,{children:U.map((e,t)=>(0,r.jsx)(P.zx,{size:"3",type:"button",variant:x===e.key?"soft":"solid",onClick:()=>h(e.key),children:(0,r.jsx)(P.xv,{...D.p.body1,children:e.label})},t))}):"edit-point"===d&&(0,r.jsx)(r.Fragment,{children:L.map((e,t)=>(0,r.jsx)(P.zx,{size:"3",type:"button",variant:x===e.key?"soft":"solid",onClick:()=>h(e.key),children:(0,r.jsx)(P.xv,{...D.p.body1,children:e.label})},t))})}),"place-info"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"اطلاعات نقطه",children:(0,r.jsx)(ea.T0,{categoris:c?c.categories:[]})}),"geographical-location"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"موقعیت جغرافیایی",children:(0,r.jsx)(ea.kD,{constant:c,province:c?c.provinces:[]})}),"routing"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"چجوری برم",children:(0,r.jsx)(eG,{})}),"routing"===x&&"edit-point"===d&&(0,r.jsx)(eo.Z,{type:"readOnly",hero:"چجوری برم",children:(0,r.jsx)(e1,{id:p.id})}),"description"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"توضیحات",children:(0,r.jsx)(e2,{details:c?c.details:[]},"Description")}),"features-facilities"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"ویژگی ها و امکانات",children:(0,r.jsx)(ea.vH,{featureItems:c?c.features:[]})}),"analysis"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تحلیل بزنیم بیرون",children:(0,r.jsx)(ea.EB,{constants:c,tripLimitations:c?c.tripLimitations:[],seasons:c?c.seasons:[],tripDatas:c?c.tripDatas:[],Categories:(null==c?void 0:c.categories)?c.categories:[]})}),"travel-time"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"کی برم",children:(0,r.jsx)(e3,{})}),"seo-setting"===x&&(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تنظیمات سئو",children:(0,r.jsx)(ea.MK,{})}),"images"===x&&(0,r.jsxs)(P.kC,{direction:"column",gap:"5",children:[(0,r.jsx)(eo.Z,{type:"changeAble",hero:"تصویر شاخص",children:(0,r.jsx)(eX,{constant:c,picture:null==p?void 0:p.pictures.filter(e=>"MAIN"===e.type)[0],placeData:p})}),(0,r.jsx)(eo.Z,{type:"changeAble",hero:"گالری تصاویر",children:(0,r.jsx)(eU,{constant:c,placeId:p.id})}),(0,r.jsx)(eo.Z,{type:"readOnly",hero:"تصاویر ارسال شده",children:(0,r.jsx)(eM,{id:u})})]}),"improve-content"===x&&(0,r.jsx)(eo.Z,{type:"readOnly",hero:"اصلاح اطلاعات ارسال شده",children:(0,r.jsx)(eY,{id:u})}),"comments"===x&&(0,r.jsx)(eo.Z,{type:"readOnly",hero:"نظرات",children:(0,r.jsx)(eZ,{id:u})}),(0,r.jsxs)(P.kC,{width:"100%",align:"center",gap:"5",p:"4",style:{border:"1px solid ".concat(X.K.gray[6]),borderRadius:8,backgroundColor:X.K.gray[2]},children:[(0,r.jsx)(P.zx,{size:"3",variant:"soft",style:{paddingInline:48.5},children:T||K?(0,r.jsx)(a.$j,{}):(0,r.jsx)(P.xv,{...D.p.body1,children:"ثبت"})}),(0,r.jsx)(P.zx,{size:"3",colorVariant:"PINK",style:{paddingInline:51},onClick:()=>m,children:(0,r.jsx)(P.xv,{...D.p.body1,children:"لغو"})})]})]})})})},e6=e=>{let{onSubmit:t}=e,[n,a]=(0,i.useState)(!1),l=(0,I.useRouter)(),{control:s,watch:o}=(0,w.Gc)(),c=(0,er.useQueryClient)(),{data:d}=(0,z.useQuery)({queryKey:["constant"],queryFn:async()=>(0,k.iV)()}),u=()=>{c.invalidateQueries({queryKey:["point-data"]})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.rj,{width:"100%",gapX:"5",style:{gridTemplateColumns:"auto auto 3fr "},children:[(0,r.jsx)(P.hU,{colorVariant:"BLUE",variant:"soft",size:"4",type:"button",onClick:()=>a(!0),children:(0,r.jsx)(E.wn,{})}),(0,r.jsx)(P.zx,{colorVariant:"BLUE",variant:"ghost",type:"button",size:"4",onClick:()=>l.push("/data-management/point-management/create-point"),children:(0,r.jsxs)(P.kC,{gap:"2",align:"center",children:[(0,r.jsx)(P.xv,{...D.p.body1,children:"+"}),(0,r.jsx)(P.xv,{...D.p.body1,children:" افزودن نقطه"})]})}),(0,r.jsx)(w.Qr,{name:"searchQuery",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(_.Z,{...t,placeholder:"جستجو نام نقطه",defaultValue:o("searchQuery")?o("searchQuery"):"",onClick:u})}})]}),(0,r.jsxs)(P.u_,{isOpen:n,onClose:()=>a(!1),children:[(0,r.jsx)(N.Z,{title:"فیلتر",handleClose:()=>a(!1)}),(0,r.jsx)($,{province:(null==d?void 0:d.provinces)?d.provinces:[],categories:(null==d?void 0:d.categories)?d.categories:[],PlaceType:(null==d?void 0:d.PlaceType)?d.PlaceType:[],setIsOpen:a,onSubmit:t})]})]})},e8=e=>{let t=(0,I.useRouter)(),[n,l]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),{mutate:c,isPending:d}=(0,S.useMutation)({mutationFn:async e=>(0,e_.OJ)(e),onSuccess:async t=>{!0===t.status?(e.onRevalidate(),(0,es.ToastSuccess)(" آیتم مورد نظر با موفقیت حذف شد")):(0,es.ToastError)("لطفا دوباره تلاش نمایید"),l(!1)},onError:()=>{(0,es.ToastError)("لطفا دوباره تلاش نمایید"),l(!1)}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.iA,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:e.row.index+1})},{accessorKey:"id",header:"شناسه مکان",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"name",header:()=>(0,r.jsx)(P.kC,{maxWidth:"170px",m:"auto",children:(0,r.jsx)(P.xv,{...D.p.body2,children:"نام نقطه"})}),cell:e=>{let t=e.getValue(),n=e.row.original.status;return(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"start",maxWidth:"250px",gap:"3",mr:"20px",children:[(0,r.jsx)(P.xu,{width:"12px",height:"12px",style:{borderRadius:100,backgroundColor:!0===n?X.K.blue[6]:X.K.pink[6]},children:" "}),(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})]})}},{accessorKey:"province",header:"استان",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"city",header:"شهرستان",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"parentCategory",header:"دسته بندی",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"category",header:"نوع نقطه",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:X.K.gray[11]},children:t||"-"})}},{accessorKey:"isPublished",header:"وضعیت انتشار",cell:e=>{let t=e.getValue();return(0,r.jsx)(P.xv,{...D.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?X.K.pink[3]:X.K.blue[3],color:!1===t?X.K.pink[11]:X.K.blue[11],borderRadius:4},children:!1===t?"منتشر نشده":!0===t?"منتشر شده":"-"})}},{id:"remove",cell:e=>{let{row:t}=e,n=t.original;return(0,r.jsx)(P.hU,{variant:"solid",size:"3",type:"button",colorVariant:"PINK",onClick:e=>{e.preventDefault(),l(!0),o(n.id)},children:(0,r.jsx)(E.rF,{})})}},{id:"details",cell:e=>{let{row:n}=e,i=n.original;return(0,r.jsx)(P.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,r.jsx)(P.zx,{variant:"surface",onClick:e=>{e.preventDefault(),t.push("/data-management/point-management/edit-point/".concat(i.id))},children:"..."})})}}],data:e.data}),(0,r.jsx)(P.u_,{isOpen:n,onClose:()=>l(!1),children:(0,r.jsxs)(P.rj,{gapY:"24px",p:"5",children:[(0,r.jsx)(P.xv,{children:"آیا از حذف این آیتم اطمینان دارید؟ "}),(0,r.jsxs)(P.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(P.zx,{type:"button",onClick:()=>c(Number(s)),variant:"soft",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:d?(0,r.jsx)(a.$j,{}):"بله"})}),(0,r.jsx)(P.zx,{type:"button",onClick:()=>l(!1),variant:"solid",size:"4",children:(0,r.jsx)(P.xv,{...D.p.body3,children:"خیر"})})]})]})})]})},e7=()=>{let{push:e}=(0,I.useRouter)(),t=(0,I.useSearchParams)(),n=e=>t.get(e)||"",l=Number(n("page"))||1,s=(0,w.cI)({defaultValues:{page:l,limit:Number(n("limit"))||10,searchQuery:n("searchQuery")||"",provinceId:Number(n("provinceId"))||"",cityId:Number(n("cityId"))||"",parentCategoryId:Number(n("parentCategoryId"))||"",arrayCatIds:n("arrayCatIds")?n("arrayCatIds").split(",").map(Number):[],arrayTypes:n("arrayTypes")?n("arrayTypes").split(",").map(String):[],startDate:Number(n("startDate"))||"",endDate:Number(n("endDate"))||"",isPublished:n("isPublished")?!!n("isPublished"):"",status:n("status")?!!n("status"):"",mainPic:n("mainPic")?!!n("mainPic"):"",gallery:n("gallery")?!!n("gallery"):"",info:n("info")?!!n("info"):"",coordinates:n("coordinates")?!!n("coordinates"):"",description:n("description")?!!n("description"):"",features:n("features")?!!n("features"):"",analyse:n("analyse")?!!n("analyse"):"",seo:n("seo")?!!n("seo"):""}}),{watch:o,setValue:c,handleSubmit:d}=s,{data:p,mutate:x,isError:h,isPending:g}=(0,S.useMutation)({mutationKey:["place-data"],mutationFn:async e=>u(e),onSuccess:async t=>{let n=Object.fromEntries(Object.entries(s.watch()).filter(e=>{let[t,n]=e;return!(void 0===n||""===n||"none"===n||null===n||"null"===n||Array.isArray(n)&&0===n.length||Array.isArray(n)&&n.every(e=>""===e)||Array.isArray(n)&&n.every(e=>"none"===e))&&(!["startDate","endDate"].includes(t)||new Date(n).getTime())}));Object.keys(n).forEach(e=>{["startDate","endDate"].includes(e)&&(n[e]=new Date(n[e]).getTime())});let r=(0,R.X)(n);e("/data-management/point-management?".concat(r)),console.log("data",t)},onError:async e=>{console.log("DATA Error",e)}});(0,i.useEffect)(()=>{x(o())},[]);let y=()=>{x(o())};return(0,r.jsx)(w.RV,{...s,children:(0,r.jsx)("form",{onSubmit:d(y),children:(0,r.jsxs)(P.kC,{width:"100%",direction:"column",gap:"5",children:[(0,r.jsx)(e6,{onSubmit:()=>y()}),h?(0,r.jsx)(P.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):g?(0,r.jsx)(a.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):p?(0,r.jsx)(e8,{data:null==p?void 0:p.allFilteredPlaces,onRevalidate:()=>{x(o())}}):(0,r.jsx)(P.kC,{width:"100%",justify:"center",mt:"6",children:(0,r.jsx)(P.xv,{...D.p.title1,children:"دیتایی موجود نیست"})}),(null==p?void 0:p.allFilteredPlaces)&&(0,r.jsxs)(P.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(K.Z,{current:o("page"),total:null==p?void 0:p.totalPages,maxWidth:24,onPageChange:e=>{c("page",e),(0,T.Z)(e),y()}}),(0,r.jsx)(Q.Z,{data:null==p?void 0:p.allFilteredPlaces,currentPage:null==p?void 0:p.currentPage,totalCount:null==p?void 0:p.totalCount,keyText:"نقطه"})]})]})})})},e9=n(29962),te=e=>{let{params:t}=e,n=t.slug[1],i=t.slug[2],[s,o,c]=(0,l.useQueries)({queries:[{queryKey:["constant"],queryFn:async()=>await (0,k.iV)()},{queryKey:["place",i],queryFn:async()=>await (0,k._7)(Number(i)),enabled:"create-point"===n||"edit-point"===n||"point-detail"===n},{queryKey:["article-data",i],staleTime:0,gcTime:0,queryFn:async()=>await m(Number(i)),enabled:"edit-article"===n||"create-article"===n}]}),{data:d}=s,{data:u,isLoading:p}=o,{data:x,isLoading:h}=c;return!d||p||h?(0,r.jsx)(P.kC,{width:"100%",height:"100vh",justify:"center",align:"center",children:(0,r.jsx)(a.$j,{style:{scale:3}})}):(0,r.jsxs)(P.kC,{direction:"column",children:[(0,r.jsx)(e9.default,{title:"point-management"===t.slug[0]?"create-point"===n?"ساخت نقطه":"point-detail"===n?"اطلاعات نقطه":"edit-point"===n?"ویرایش نقطه":"لیست نقاط":"article-management"===t.slug[0]?"create-article"===n?"ساخت مقاله":"edit-article"===n?"ویرایش مقاله":"لیست مقالات":"",isNavigation:!0}),(0,r.jsx)(P.xu,{p:"24px 110px 40px 40px ",children:(0,r.jsx)(P.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(()=>{switch(t.slug[0]){case"point-management":switch(t.slug[1]){case"create-point":case"edit-point":return(0,r.jsx)(e5,{placeConstant:d,status:n,placeID:Number(i),placeData:u});default:return(0,r.jsx)(e7,{})}case"article-management":switch(t.slug[1]){case"create-article":return(0,r.jsx)(ez,{placeConstant:d,articleData:null==x?void 0:x.data,type:"create-article"});case"edit-article":return(0,r.jsx)(ez,{placeConstant:d,articleData:null==x?void 0:x.data,type:"edit-article"});default:return(0,r.jsx)(en,{})}}})()})})]})}},24822:function(e,t,n){"use strict";n.d(t,{AO:function(){return j},Al:function(){return d},Ck:function(){return x},EC:function(){return i},M6:function(){return o},M9:function(){return b},OJ:function(){return f},V4:function(){return s},Vu:function(){return l},WA:function(){return c},We:function(){return a},Xo:function(){return y},Yr:function(){return v},bP:function(){return p},iB:function(){return h},kq:function(){return m},p5:function(){return u},tJ:function(){return g}});var r=n(31067);let i=async e=>(await r.x.get("places/getAllPlacePicUserUploadsForAllPlaces?page=".concat(e,"&limit=10"))).data.data,a=async e=>(await r.x.get("places/getAllPlaceImproveContent?page=".concat(e,"&limit=10"))).data.data,l=async e=>(await r.x.get("/places/getAllTravelMethodSuggestions?page=".concat(e,"&limit=10"))).data.data,s=async()=>(await r.x.get("ads")).data.data,o=async e=>(await r.x.get("/ads/comments/".concat(e))).data.data,c=async e=>(await r.x.get("/comment/all?page=".concat(e,"&limit=10"))).data.data,d=async e=>(await r.x.patch("/places/changeTravelMethodStatusById/".concat(e,"?status=true"))).data,u=async e=>(await r.x.patch("/places/changeTravelMethodStatusById/".concat(e,"?status=false"))).data,p=async e=>(await r.x.patch("/places/acceptPlacePicUserUploads/".concat(e))).data,x=async e=>(await r.x.delete("/places/deletePlacePicUserUploads/".concat(e))).data,h=async e=>(await r.x.patch("/places/makeTopPlacePicUserUploads/".concat(e))).data,g=async e=>(await r.x.patch("/places/acceptPlaceImproveContent/".concat(e))).data,y=async e=>(await r.x.delete("/places/deletePlaceImproveContent/".concat(e))).data,j=async(e,t)=>(await r.x.put("/ads/comments/".concat(e),t)).data,m=async e=>(await r.x.delete("/ads/comments/".concat(e))).data,v=async e=>(await r.x.post("/ads",e)).data,b=async e=>(await r.x.delete("places/tarvelMethod/".concat(e))).data,f=async e=>(await r.x.delete("places/".concat(e))).data},29962:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(16463),a=n(89183),l=n(28326),s=n(27533),o=n(1845),c=n(21949);t.default=e=>{let{title:t,isNavigation:n}=e,a=(0,i.useRouter)();return(0,r.jsx)(d,{children:(0,r.jsxs)(u,{children:[(0,r.jsx)(l.xv,{...c.p.title1,style:{color:o.K.gray[11]},children:t}),n&&(0,r.jsx)(l.hU,{size:"3",variant:"surface",onClick:()=>a.back(),children:(0,r.jsx)(s.jb,{color:"#373737"})})]})})};let d=a.ZP.header.withConfig({componentId:"sc-132ec2d4-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],o.K.gray[6],o.K.gray[1],o.i.shadow1),u=(0,a.ZP)(l.kC).withConfig({componentId:"sc-132ec2d4-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},59913:function(e,t,n){"use strict";var r=n(57437),i=n(39343),a=n(94963),l=n(28326),s=n(1845),o=n(21949);t.Z=e=>{let{items:t,store:n,isRow:c=!0}=e,{control:d}=(0,i.Gc)();return(0,r.jsx)(i.Qr,{name:n,control:d,render:e=>{let{field:n}=e,{value:i,onChange:d}=n,u=e=>{(null==i?void 0:i.includes(e))?d(null==i?void 0:i.filter(t=>t!==e)):d([...i,e])};return(0,r.jsx)(l.kC,{width:"100%",gap:"10px",wrap:"wrap",direction:c?"row":"column",children:t.map(e=>(0,r.jsx)(l.xv,{style:{textWrap:"nowrap",backgroundColor:s.K.gray[1],padding:"12px",borderRadius:"8px",border:"1px solid ".concat(s.K.gray[7])},as:"label",size:"2",children:(0,r.jsxs)(l.kC,{gap:"2",style:{cursor:"pointer"},children:[(0,r.jsx)(a.XZ,{disabled:e.disable,value:e.value,checked:null==i?void 0:i.includes(e.value),onCheckedChange:()=>{u(e.value),console.log("onChange",e.value)}}),(0,r.jsx)(l.xv,{...o.p.body2,style:{color:e.disable?s.K.gray[8]:s.K.gray[11]},children:e.key})]})},e.id))})}})}},52892:function(e,t,n){"use strict";var r=n(57437),i=n(2265),a=n(73094),l=n.n(a),s=n(66032),o=n.n(s),c=n(37261),d=n(27704),u=n(89183),p=n(1845),x=n(28326),h=n(86324);let g=(0,i.forwardRef)((e,t)=>{let{onChangeValue:n,calendarPosition:a="bottom-right",errorText:s,...u}=e,g=(0,i.useRef)(null);return(0,i.useEffect)(()=>{g.current&&g.current.setAttribute("readonly","true")},[]),(0,i.useEffect)(()=>{let e=e=>{let t=e.target;t.value.length>10&&(t.value=t.value.slice(0,10))};return g.current&&(g.current.setAttribute("readonly","true"),g.current.addEventListener("input",e)),()=>{g.current&&g.current.removeEventListener("input",e)}},[]),(0,i.useEffect)(()=>{let e=e=>{"Tab"!==e.key&&e.preventDefault()};return g.current&&g.current.addEventListener("keydown",e),()=>{g.current&&g.current.removeEventListener("keydown",e)}},[]),(0,r.jsxs)(x.kC,{position:"relative",width:"100%",children:[(0,r.jsxs)(y,{isError:!!s,position:"relative",align:"center",width:"100%",children:[(0,r.jsx)(d.ZP,{...u,...t,inputClass:"input-class",ref:g,calendar:l(),locale:o(),calendarPosition:a,onChange:e=>n(e)}),(0,r.jsx)(c.pNA,{style:{position:"absolute",left:"20px",stroke:p.K.pink[9]}})]}),(0,r.jsx)(h.Z,{text:s})]})});g.displayName="CustomDatePicker",t.Z=g;let y=(0,u.zo)(x.kC).withConfig({componentId:"sc-35a92b7b-0"})([".rmdp-day.rmdp-selected span:not(.highlight){background-color:",";}.rmdp-arrow{border-color:",";}.rmdp-week-day{color:",";}input{width:-webkit-fill-available !important;background-color:",";font-size:14px;color:",";}& .rmdp-container{display:flex;width:-webkit-fill-available !important;}.input-class{--default-font-family:var(--sans-font) !important;font-family:var(--sans-font) !important;width:100%;text-align:right;outline:none;border:",";border-radius:8px;padding:13px 16px;&:disabled{background-color:",";cursor:not-allowed;}}"],p.K.pink[9],p.K.pink[9],p.K.pink[9],p.K.gray[2],p.K.gray[11],e=>{let{isError:t}=e;return t?"1px solid ".concat(p.K.pink[9]):"1px solid ".concat(p.K.gray[7])},p.K.gray[4])},51360:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(1845),a=n(21949),l=n(28326);t.Z=e=>{let{data:t,currentPage:n,totalCount:s,keyText:o="برنامه"}=e,c=null==t?void 0:t.length,d=(n-1)*c+1,u=Math.min(d+c-1,s);return(0,r.jsx)(l.xv,{...a.p.body2,style:{color:i.K.gray[11]},children:"".concat(d,"-").concat(u," از ").concat(s," ").concat(o)})}},72549:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(94963),a=n(1845),l=n(21949),s=n(28326);t.Z=e=>{let{isSubmit:t=!0,closeButtonText:n,submitButtonText:o,isLoading:c,onCloseButton:d,onSubmit:u,isFull:p,isDisableSubmitBtn:x=!1,disabled:h=!1}=e;return(0,r.jsx)(s.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:a.K.gray[2],marginBlockStart:"auto",borderTop:"1px solid ".concat(a.K.gray[3]),boxShadow:a.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,r.jsxs)(s.rj,{gap:"16px",columns:"2",width:p?"100%":"max-content",children:[(0,r.jsx)(s.zx,{disabled:x||h,onClick:u,type:t?"submit":"button",variant:"soft",size:"3",style:{width:p?"100%":"fit-content",padding:"9.5px 38px"},children:c?(0,r.jsx)(i.$j,{}):(0,r.jsx)(s.xv,{...l.p.body1,children:o})}),(0,r.jsx)(s.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:d,style:{width:p?"100%":"fit-content",padding:"9.5px 46px"},children:(0,r.jsx)(s.xv,{...l.p.body1,children:n})})]})})}},77855:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(89183),a=n(27533),l=n(1845),s=n(21949),o=n(28326);t.Z=e=>{let{handleClose:t,title:n}=e;return(0,r.jsxs)(c,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:l.K.blue[10],zIndex:"100"},align:"center",children:[(0,r.jsx)(o.xv,{...s.p.title2,style:{color:l.K.gray[1],fontWeight:700},children:n}),(0,r.jsx)(o.hU,{type:"button",onClick:t,variant:"soft",size:"2",style:{backgroundColor:l.K.blue[9],borderRadius:"12px"},children:(0,r.jsx)(a.x8,{})})]})};let c=(0,i.zo)(o.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},72051:function(e,t,n){"use strict";var r=n(57437);n(2265),n(61170);var i=n(57818),a=n(28326),l=n(27533);n(34916);let s=(0,i.default)(()=>n.e(8372).then(n.bind(n,94212)).then(e=>e.default),{loadableGenerated:{webpack:()=>[94212]},ssr:!1});t.Z=e=>{let{current:t,total:n,onPageChange:i,...o}=e;return(0,r.jsx)(a.kC,{align:"center",maxWidth:"348px",children:(0,r.jsx)(s,{current:t,total:n,onPageChange:i,...o,className:"pagination",previousLabel:(0,r.jsx)(l.jR,{}),nextLabel:(0,r.jsx)(l.EB,{})})})}},23405:function(e,t,n){"use strict";var r=n(57437),i=n(2265),a=n(39343),l=n(89183),s=n(28326),o=n(27533),c=n(1845);let d=(0,i.forwardRef)((e,t)=>{let{placeholder:n,defaultValue:i,onClick:l,...c}=e,{setValue:d}=(0,a.Gc)();return(0,r.jsxs)(u,{...c,ref:t,height:"fit-content",children:[(0,r.jsx)(p,{...c,ref:t,placeholder:n,variant:"surface",defaultValue:i,onChange:()=>{d("page",1)}}),(0,r.jsx)(s.hU,{size:"4",variant:"soft",onClick:l,children:(0,r.jsx)(o.HN,{})})]})});d.displayName="CustomSearch",t.Z=d;let u=(0,l.ZP)(s.kC).withConfig({componentId:"sc-2a59b276-0"})(["max-height:48px;align-items:center;border:1px solid ",";border-radius:12px;padding-inline-start:1rem;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}"],c.K.gray[7],c.K.blue[2],c.i.shadow1,c.K.gray[3]),p=(0,l.ZP)(s.nv).withConfig({componentId:"sc-2a59b276-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},6850:function(e,t,n){"use strict";var r=n(57437);n(2265);var i=n(28326),a=n(1845);t.Z=e=>{let{hero:t,type:n,children:l}=e;return(0,r.jsxs)(i.rj,{width:"100%",style:{borderRadius:8,border:"1px solid ".concat(a.K.gray[6])},children:[(0,r.jsx)(i.kC,{width:"100%",justify:"between",align:"center",p:"8px 16px",style:{height:"fit-content",backgroundColor:"changeAble"===n?a.K.blue[4]:a.K.gray[3],borderRadius:"8px 8px 0px 0px"},children:(0,r.jsx)(i.X6,{as:"h6",style:{color:a.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"27px"},children:t})}),(0,r.jsx)(i.rj,{gap:"16px",p:"24px 16px 16px 16px",style:{backgroundColor:a.K.gray[2]},children:l})]})}},10504:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(64673),i=n.n(r);function a(e){return i()(e).locale("fa").format("jYYYY/jMM/jDD")}},31067:function(e,t,n){"use strict";n.d(t,{x:function(){return c},z:function(){return d}});var r=n(16463),i=n(38472),a=n(15263),l=n(86300).Buffer;let s="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),o=l.from(s).toString("base64"),c=i.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"up-auth":"Basic ".concat(o),"Content-Type":"application/json"}}),d=i.Z.create({baseURL:"https://uploader.darkube.app/admin/uploads/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(o)}});d.interceptors.request.use(e=>{let t=new a.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.request.use(e=>{let t=new a.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,r.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,r.redirect)("/error")):((0,r.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})},25231:function(e,t,n){"use strict";function r(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,r]=e;t.append(n,String(r))}),t.toString()}n.d(t,{X:function(){return r}})},86555:function(e,t){"use strict";t.Z=e=>{{let t=new URLSearchParams(window.location.search);t.set("page",e.toString());let n=window.location.pathname;window.history.pushState({},"","".concat(n,"?").concat(t.toString()))}}},34916:function(){}},function(e){e.O(0,[1553,3048,3497,8334,2295,5452,8310,6990,9212,1825,8702,6648,9269,5639,7138,1705,2107,1092,8326,7533,341,2971,7023,1744],function(){return e(e.s=46495)}),_N_E=e.O()}]);