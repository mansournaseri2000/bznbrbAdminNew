(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{15849:function(e,t,r){Promise.resolve().then(r.bind(r,23315))},23315:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var n=r(57437),a=r(2265),i=r(39343),l=r(94963),o=r(93191),d=r(43767),s=r(37969),u=r(20254),c=r(16463),p=r(43397),g=r(36721),h=r(51537),x=r(7507),y=r(23405),m=r(72549),v=r(77855),f=r(19051),j=r(21949),b=r(47964),C=e=>{let{onSubmit:t,isOpen:r,setIsOpen:a,isPending:l}=e,o=(0,p.tv)(),{control:s,reset:u,setValue:C}=(0,i.Gc)(),w=(0,c.useSearchParams)(),D=e=>w.get(e)||"",{data:I}=(0,d.a)({queryKey:["constant"],queryFn:async()=>(0,g.iV)()}),S=()=>{u({page:1,searchQuery:"",sortDate:"",targetDate:"",userId:"",originCityId:"",originProvinceId:"",destinationCityId:"",destinationProvinceId:"",departureDateStart:"",departureDateEnd:"",returnDateStart:"",returnDateEnd:"",sort:""}),o.replace("/plans"),t(),a(!1)},E=e=>{switch(e){case 1:return C("sortDate","des"),C("targetDate","dep");case 2:return C("targetDate","dep"),C("sortDate","asc");case 3:return C("targetDate","ret"),C("sortDate","des");case 4:return C("targetDate","ret"),C("sortDate","asc")}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.rj,{width:"100%",columns:"5",align:"center",gapX:"5",style:{gridTemplateColumns:"auto auto 2fr  1fr"},children:[(0,n.jsx)(x.hU,{type:"button",colorVariant:"BLUE",variant:"soft",size:"4",onClick:()=>a(!0),children:(0,n.jsx)(f.wn,{width:16,height:16})}),(0,n.jsx)(x.zx,{colorVariant:"BLUE",variant:"ghost",type:"button",size:"4",onClick:()=>o.push("/plans/create-plan"),style:{padding:"11.5px 16px"},children:(0,n.jsxs)(x.kC,{gap:"2",align:"center",children:[(0,n.jsx)(x.xv,{...j.p.body1,children:"+"}),(0,n.jsx)(x.xv,{...j.p.body1,children:" افزودن برنامه"})]})}),(0,n.jsx)(i.Qr,{name:"searchQuery",control:s,render:e=>{let{field:t}=e;return(0,n.jsx)(y.Z,{...t,placeholder:"جستجو",defaultValue:D("searchQuery")?D("searchQuery"):""})}}),(0,n.jsx)(i.Qr,{name:"sort",control:s,render:e=>{let{field:r}=e;return(0,n.jsx)(x.fp,{...r,placeholder:"مرتب سازی بر اساس",size:"3",value:String(r.value||D("sort")),onValueChange:e=>{let n=h.gy.find(t=>t.id===Number(e));E(null==n?void 0:n.id),r.onChange(e),t(),C("page",1)},children:h.gy.map(e=>(0,n.jsx)(x.Ql,{value:String(e.id),style:{padding:"13.5px 12px"},children:e.name},e.id))})}})]}),(0,n.jsxs)(x.u_,{isOpen:r,onClose:()=>a(!1),children:[(0,n.jsx)(v.Z,{title:"فیلتر",handleClose:()=>a(!1)}),(0,n.jsx)(b.Z,{province:(null==I?void 0:I.provinces)?I.provinces:[]}),(0,n.jsx)(m.Z,{submitButtonText:"اعمال فیلتر ها",closeButtonText:"حذف فیلتر ها",onCloseButton:()=>S(),onSubmit:()=>{t()},isLoading:l})]})]})},w=r(46302),D=r(10504),I=r(1845),S=e=>{let{push:t}=(0,p.tv)();return(0,n.jsx)(w.iA,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,n.jsx)(x.xv,{...j.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:I.K.gray[11]},children:e.row.index+1})},{accessorKey:"userMobile",header:"شماره کاربر",cell:e=>{let t=e.getValue();return(0,n.jsx)(x.xv,{...j.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:I.K.gray[11]},children:t||"-"})}},{accessorKey:"sourceCityName",header:"مبدا",cell:e=>{let t=e.getValue();return(0,n.jsx)(x.xv,{...j.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:I.K.gray[11]},children:t||"-"})}},{accessorKey:"destinationCity",header:"مقصد",cell:e=>{let t=e.getValue();return(0,n.jsx)(x.xv,{...j.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:I.K.gray[11]},children:t||"-"})}},{accessorKey:"departureDate",header:"تاریخ رفت",cell:e=>{let t=e.getValue();return(0,n.jsx)(x.xv,{...j.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:I.K.gray[11]},children:t?(0,D.l)(t):"-"})}},{accessorKey:"returnDate",header:"تاریخ بازگشت",cell:e=>{let t=e.getValue();return(0,n.jsx)(x.xv,{...j.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:I.K.gray[11]},children:t?(0,D.l)(t):"-"})}},{id:"details",cell:e=>{let{row:r}=e,a=r.original;return(0,n.jsx)(x.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,n.jsx)(x.zx,{variant:"surface",onClick:e=>{e.preventDefault(),t("/plans/user-plan/".concat(a.tripId))},children:"..."})})}}],data:e.data})},E=r(68665),k=r(72051),N=r(51360),P=r(86555),V=r(25231);function T(e){let{searchParams:t}=e,[r,c]=(0,a.useState)(!1),p=(0,o.NL)(),g=(0,i.cI)({defaultValues:{page:t.page?Number(t.page):1,searchQuery:t.searchQuery||"",sortDate:t.sortDate?t.sortDate:"",targetDate:t.targetDate?t.targetDate:"",userId:t.userId?Number(t.userId):"",originCityId:t.originCityId?Number(t.originCityId):"",originProvinceId:t.originProvinceId?Number(t.originProvinceId):"",destinationCityId:t.destinationCityId?Number(t.destinationCityId):"",destinationProvinceId:t.destinationProvinceId?Number(t.destinationProvinceId):"",departureDateStart:t.departureDateStart?Number(t.departureDateStart):"",departureDateEnd:t.departureDateEnd?Number(t.departureDateEnd):"",returnDateStart:t.returnDateStart?Number(t.returnDateStart):"",returnDateEnd:t.returnDateEnd?Number(t.returnDateEnd):"",sort:t.sort||""}}),{watch:h,handleSubmit:y,setValue:m}=g,{data:v,isLoading:f,isFetching:b,isError:w}=(0,d.a)({queryKey:["recent-trips"],queryFn:async()=>await (0,u.gG)(h())}),D=e=>{let t=(0,s.v7)(e,!0),r=(0,V.X)(t);p.invalidateQueries({queryKey:["recent-trips"]});let n="".concat(window.location.pathname,"?").concat(r);window.history.pushState(null,"",n)};return(0,n.jsxs)(x.kC,{direction:"column",children:[(0,n.jsx)(E.Z,{title:"لیست برنامه ها",isNavigation:!0}),(0,n.jsx)(x.xu,{pr:{initial:"8px",lg:"90px"},children:(0,n.jsx)(x.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(0,n.jsx)(i.RV,{...g,children:(0,n.jsx)("form",{onSubmit:y(D),children:(0,n.jsxs)(x.rj,{width:"100%",gap:"4",p:"5",children:[(0,n.jsx)(C,{onSubmit:()=>D(h()),isOpen:r,setIsOpen:c,isPending:f||b}),w?(0,n.jsx)(x.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):b||f?(0,n.jsx)(l.$j,{style:{marginInline:"auto",scale:2,marginBlock:"40px"}}):v?(0,n.jsx)(S,{data:null==v?void 0:v.latestTrips}):(0,n.jsx)(x.kC,{width:"100%",justify:"center",mt:"6",children:(0,n.jsx)(x.xv,{...j.p.title1,children:"دیتایی موجود نیست"})}),(null==v?void 0:v.latestTrips)&&(0,n.jsxs)(x.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsx)(k.Z,{current:h("page"),total:v.totalPages,onPageChange:e=>{m("page",e),(0,P.Z)(e),D(h())}}),(0,n.jsx)(N.Z,{data:null==v?void 0:v.latestTrips,currentPage:null==v?void 0:v.currentPage,totalCount:null==v?void 0:v.totalCount})]})]})})})})})]})}},10912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(55592);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},61481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let n=r(57437),a=r(58512);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),i=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,n.jsx)(n.Fragment,{children:i.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},20254:function(e,t,r){"use strict";r.d(t,{Er:function(){return c},XS:function(){return d},gG:function(){return s}});var n=r(39053),a=r.n(n),i=r(15263),l=r(31067),o=r(37969);let d=async e=>{try{return(await l.x.get("trips/id/".concat(e))).data}catch(e){if(e.response)throw console.error("Error:",e.response.data.message||"Server Error"),Error("Failed to fetch trip: ".concat(e.response.statusText));if(e.request)throw console.error("Network error:",e.message),Error("Network error: Unable to fetch trip data");throw console.error("Unexpected error:",e.message),Error("Unexpected error: Please try again later")}},s=async e=>{let t=(0,o.v7)(e);delete t.sort;let r=(0,o.X_)(t);return(await l.x.get("trips?limit=10&".concat(r))).data.data};function u(e,t){let r=a().tz(e,"Asia/Tehran"),n=a().tz(t,"Asia/Tehran");return r.set({hour:n.hour(),minute:n.minute(),second:n.second(),millisecond:n.millisecond()}),r.clone().tz("UTC",!0).toISOString()}let c=async e=>{let t=new i.Z,r=Object.fromEntries(Object.entries({departureDateTime:u(new Date(e.departureDate).getTime(),new Date(e.departureTime).getTime()),returnDateTime:u(new Date(e.returnDate).getTime(),new Date(e.returnTime).getTime()),travelMode:e.isExpand?e.travelMode:void 0,accommodationType:e.isExpand?e.accommodationType:void 0,companions:e.isExpand?e.companions:void 0,popularity:e.isExpand?[e.popularity]:void 0,placeCategoryId:e.isExpand?e.placeCategoryId:void 0,adultCount:e.isExpand?Number(e.adultCount):1,childCount:e.isExpand?Number(e.childCount):0,infantCount:e.isExpand?Number(e.infantCount):void 0,destinationProvinceId:Number(e.destinationProvinceId),destinationCityId:[Number(e.destinationCityId)],sourceProvinceId:Number(e.sourceProvinceId),sourceCityId:Number(e.sourceCityId),justInside:e.justInside}).filter(e=>{let[t,r]=e;return void 0!==r&&""!==r&&"none"!==r&&null!==r&&!(Array.isArray(r)&&0===r.length)&&!(Array.isArray(r)&&r.every(e=>""===e))&&!(Array.isArray(r)&&r.every(e=>"none"===e))&&!("object"==typeof r&&null!==r&&0===Object.keys(r).length)}));return t.set("ticketData",r),(await l.x.post("trips",r)).data.data}},51537:function(e,t,r){"use strict";r.d(t,{C0:function(){return n},Qd:function(){return i},gy:function(){return a}});let n=[{id:1,key:"فعال",value:"true",disable:!1},{id:2,key:"غیر فعال",value:"false",disable:!1},{id:3,key:"هیچکدام",value:"all",disable:!1}],a=[{id:1,name:"تاریخ رفت - جدیدترین "},{id:2,name:"تاریخ رفت - قدیمی ترین"},{id:3,name:"تاریخ بازگشت - جدیدترین"},{id:4,name:"تاریخ بازگشت - قدیمی ترین"}],i=[{id:1,name:"مرد",value:"MALE"},{id:2,name:"زن",value:"FEMALE"}]},47964:function(e,t,r){"use strict";var n=r(57437);r(2265);var a=r(39343),i=r(7507),l=r(1845),o=r(21949),d=r(52892);t.Z=e=>{var t,r;let{province:s}=e,{control:u,setValue:c,watch:p}=(0,a.Gc)(),g=null===(t=s.filter(e=>e.id===Number(p("originProvinceId")))[0])||void 0===t?void 0:t.Cities,h=null===(r=s.filter(e=>e.id===Number(p("destinationProvinceId")))[0])||void 0===r?void 0:r.Cities;return(0,n.jsxs)(i.rj,{width:"100%",p:"4",gapY:"4",children:[(0,n.jsxs)(i.kC,{direction:"column",gap:"4",children:[(0,n.jsx)(i.xv,{...o.p.body1,style:{color:l.K.gray[12],paddingInlineStart:8},children:"تاریخ رفت"}),(0,n.jsxs)(i.rj,{gap:"16px",columns:"2",children:[(0,n.jsx)(a.Qr,{name:"departureDateStart",control:u,render:e=>(0,n.jsx)(d.Z,{...e,inputMode:"none",label:"از تاریخ",placeholder:"از تاریخ",selectedValue:!!e.field.value,value:e.field.value?new Date(e.field.value).toISOString():"",onChangeValue:e=>{let t=new Date(e);t.setHours(0,0,0,0),c("departureDateStart",t.getTime()),c("page",1)}})}),(0,n.jsx)(a.Qr,{name:"departureDateEnd",control:u,render:e=>(0,n.jsx)(d.Z,{...e,label:"تا تاریخ",placeholder:"تا تاریخ",selectedValue:!!e.field.value,value:e.field.value?new Date(e.field.value).toISOString():"",minDate:p("departureDateStart"),inputMode:"none",onChangeValue:e=>{let t=new Date(e);t.setHours(23,59,0,0),c("departureDateEnd",t.getTime()),c("page",1)}})})]})]}),(0,n.jsxs)(i.kC,{direction:"column",gap:"4",children:[(0,n.jsx)(i.xv,{...o.p.body1,style:{color:l.K.gray[12],paddingInlineStart:8},children:"تاریخ برگشت"}),(0,n.jsxs)(i.rj,{gap:"16px",columns:"2",children:[(0,n.jsx)(a.Qr,{name:"returnDateStart",control:u,render:e=>(0,n.jsx)(d.Z,{...e,inputMode:"none",label:"از تاریخ",placeholder:"از تاریخ",selectedValue:!!e.field.value,value:e.field.value?new Date(e.field.value).toISOString():"",onChangeValue:e=>{let t=new Date(e);t.setHours(0,0,0,0),c("returnDateStart",t.getTime()),c("page",1)}})}),(0,n.jsx)(a.Qr,{name:"returnDateEnd",control:u,render:e=>(0,n.jsx)(d.Z,{...e,label:"تا تاریخ",placeholder:"تا تاریخ",selectedValue:!!e.field.value,value:e.field.value?new Date(e.field.value).toISOString():"",inputMode:"none",minDate:p("returnDateStart"),onChangeValue:e=>{let t=new Date(e);t.setHours(23,59,0,0),c("returnDateEnd",t.getTime()),c("page",1)}})})]})]}),(0,n.jsxs)(i.rj,{gapY:"4",children:[(0,n.jsx)(i.xv,{...o.p.body1,style:{color:l.K.gray[12],paddingInlineStart:8},children:"مبدا"}),(0,n.jsx)(a.Qr,{name:"originProvinceId",control:u,render:e=>{let{field:t}=e;return(0,n.jsx)(i.fp,{...t,label:"استان",placeholder:"استان",selectedValue:!!t.value,value:String(t.value),onValueChange:e=>{t.onChange(Number(e)),c("originCityId",""),c("page",1)},children:null==s?void 0:s.map(e=>(0,n.jsx)(i.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,n.jsx)(a.Qr,{name:"originCityId",control:u,render:e=>{let{field:t}=e;return(0,n.jsx)(i.fp,{...t,label:"شهر",placeholder:"شهر",selectedValue:!!t.value,disabled:!g,value:String(t.value),onValueChange:e=>{t.onChange(Number(e)),c("page",1)},children:null==g?void 0:g.map(e=>(0,n.jsx)(i.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,n.jsxs)(i.rj,{gapY:"4",children:[(0,n.jsx)(i.xv,{...o.p.body1,style:{color:l.K.gray[12],paddingInlineStart:8},children:"مقصد"}),(0,n.jsx)(a.Qr,{name:"destinationProvinceId",control:u,render:e=>{let{field:t}=e;return(0,n.jsx)(i.fp,{...t,label:"استان",placeholder:"استان",selectedValue:!!t.value,value:String(t.value),onValueChange:e=>{t.onChange(e),c("destinationCityId",""),c("page",1)},children:null==s?void 0:s.map(e=>(0,n.jsx)(i.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,n.jsx)(a.Qr,{name:"destinationCityId",control:u,render:e=>{let{field:t}=e;return(0,n.jsx)(i.fp,{...t,label:"شهر",placeholder:"شهر",selectedValue:!!t.value,disabled:!h,value:String(t.value),onValueChange:e=>{t.onChange(e),c("page",1)},children:null==h?void 0:h.map(e=>(0,n.jsx)(i.Ql,{value:String(e.id),children:e.name},e.id))})}})]})]})}},68672:function(e,t,r){"use strict";r.d(t,{SP:function(){return l},yM:function(){return o}});var n=r(89183),a=r(1845),i=r(7507);(0,n.zo)(i.kC).withConfig({componentId:"sc-2ff6b81e-0"})(["padding:2px 12px;border-radius:8px;background-color:",";font-size:10px;align-items:center;"],a.K.gray[3]),n.zo.div.withConfig({componentId:"sc-2ff6b81e-1"})(["height:0.1px;border-top:",";width:-webkit-fill-available;opacity:30%;"],e=>{let{color:t}=e;return t?"1px dashed ".concat(t):"1px dashed ".concat(a.K.gray[12])});let l=(0,n.zo)(i.kC).withConfig({componentId:"sc-2ff6b81e-2"})(["max-height:48px;align-items:center;border:1px solid ",";border-radius:12px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}"],a.K.gray[7],a.K.blue[2],a.i.shadow1,a.K.gray[3]),o=(0,n.zo)(i.nv).withConfig({componentId:"sc-2ff6b81e-3"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;background-color:transparent !important;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},23405:function(e,t,r){"use strict";var n=r(57437),a=r(2265),i=r(39343),l=r(93191),o=r(7507),d=r(19051),s=r(68672);let u=(0,a.forwardRef)((e,t)=>{let{placeholder:r,defaultValue:a,...u}=e,c=(0,l.NL)(),{setValue:p}=(0,i.Gc)();return(0,n.jsxs)(s.SP,{...u,ref:t,height:"fit-content",children:[(0,n.jsx)(s.yM,{...u,ref:t,placeholder:r,variant:"surface",defaultValue:a}),(0,n.jsx)(o.hU,{size:"4",variant:"soft",onClick:()=>{p("page",1),c.invalidateQueries({queryKey:["article-list"]}),c.invalidateQueries({queryKey:["user-list"]})},children:(0,n.jsx)(d.HN,{})})]})});u.displayName="CustomSearch",t.Z=u},86555:function(e,t){"use strict";t.Z=e=>{{let t=new URLSearchParams(window.location.search);t.set("page",e.toString());let r=window.location.pathname;window.history.pushState({},"","".concat(r,"?").concat(t.toString()))}}}},function(e){e.O(0,[1553,3048,1383,3497,8334,5452,8310,6990,9212,7326,1825,8702,3397,9269,7138,1773,3734,7507,9051,6265,5262,2971,7023,1744],function(){return e(e.s=15849)}),_N_E=e.O()}]);