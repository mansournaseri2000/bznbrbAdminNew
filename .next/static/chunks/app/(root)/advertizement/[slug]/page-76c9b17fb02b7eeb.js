(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8423,3767],{65929:function(e,t,r){Promise.resolve().then(r.bind(r,63248))},63248:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var i=r(57437),n=r(2265),s=r(94963),o=r(43767),l=r(927),a=r(38746),c=r(39343),d=r(66648),u=r(4867),p=r(72107),x=r(7507),h=r(72549),g=r(77855),j=r(27533),b=r(1845),y=r(21949),m=e=>{let{data:t}=e,[r,s]=(0,n.useState)("create"),[o,l]=(0,n.useState)(!1),{control:m,watch:f,setValue:v}=(0,c.cI)({defaultValues:{imageFile:"edit"===r?t.path:null,localPic:"",description:"edit"===r?t.description:"",alt:"edit"===r?t.alt:"",slug:"edit"===r?t.slug:"",summery:"edit"===r?t.summery:"",website:"edit"===r?t.website:"",socialMedia:"edit"===r?t.socialMedia:"",sponsor:"edit"===r?t.sponsor:"",isReset:!0}});(0,n.useEffect)(()=>{v("imageFile","edit"===r?t.path:null),v("description","edit"===r?t.description:""),v("alt","edit"===r?t.alt:""),v("slug","edit"===r?t.slug:""),v("summery","edit"===r?t.summery:""),v("website","edit"===r?t.website:""),v("socialMedia","edit"===r?t.socialMedia:""),v("sponsor","edit"===r?t.sponsor:""),v("isReset",!0)},[r]),console.log(null==t?void 0:t.path,"pathpathpath");let k=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,p.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},w=async(e,t)=>{if(e&&e[0]){let r=e[0],i=await k(r);t(URL.createObjectURL(i)),v("localPic",URL.createObjectURL(i)),v("isReset",!1),v("imageFile",i)}};return(0,i.jsxs)(i.Fragment,{children:[!(null==t?void 0:t.path)&&(0,i.jsxs)(x.kC,{align:"center",position:"relative",minHeight:"200px",p:"16px",justify:"center",style:{borderRadius:"8px",border:"1px dashed ".concat(b.K.blue[9])},children:[(0,i.jsx)(x.xv,{style:{position:"absolute",color:b.K.gray[8],right:"20px",fontSize:"90px"},children:"A22"}),(0,i.jsxs)(x.kC,{gap:"4px",align:"center",onClick:()=>{s("create"),l(!0)},style:{cursor:"pointer"},children:[(0,i.jsx)(u.pOD,{stroke:b.K.blue[7]}),(0,i.jsx)(x.xv,{...y.p.body1,style:{color:b.K.blue[11]},children:"افزودن آگهی"})]})]}),!!(null==t?void 0:t.path)&&(0,i.jsxs)(x.rj,{p:"16px",style:{borderRadius:"8px",border:"1px solid ".concat(b.K.gray[6])},children:[(0,i.jsxs)(x.kC,{width:"100%",align:"center",justify:"between",children:[(0,i.jsx)(x.X6,{style:{color:b.K.gray[11],fontSize:"32px",fontWeight:500,lineHeight:"37.5px"},children:t.position}),(0,i.jsxs)(x.kC,{align:"center",gap:"4",children:[(0,i.jsx)(x.hU,{size:"3",onClick:()=>{s("edit"),l(!0)},children:(0,i.jsx)(j.z,{})}),(0,i.jsx)(x.hU,{size:"3",variant:"surface",children:(0,i.jsx)(j.rF,{})})]})]}),(0,i.jsxs)(x.kC,{width:"100%",gap:"10px",children:[(0,i.jsx)(x.xu,{width:"400px",height:"200px",position:"relative",children:(0,i.jsx)(d.default,{src:"".concat("https://uploader.darkube.app/").concat(t.path),alt:String(null==t?void 0:t.alt),fill:!0,style:{borderRadius:8,objectFit:"cover",objectPosition:"center"}})}),(0,i.jsxs)(x.kC,{width:"77.5%",direction:"column",mt:"2",style:{justifyContent:"space-between"},children:[(0,i.jsxs)(x.kC,{direction:"column",gap:"3",children:[(0,i.jsx)(x.nv,{placeholder:"متن چایگزین",readOnly:!0,style:{borderRadius:12}}),(0,i.jsx)(x.Kx,{placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]}),t.slug&&(0,i.jsxs)(x.kC,{p:"12px 16px",gap:"2",align:"center",children:[(0,i.jsx)(x.hU,{variant:"surface",size:"1",children:(0,i.jsx)(u.TIy,{style:{color:b.K.blue[10]}})}),(0,i.jsx)(x.xv,{...y.p.body3,style:{color:b.K.blue[11]},children:t.slug})]})]})]})]}),(0,i.jsxs)(x.u_,{isOpen:o,onClose:()=>l(!1),children:[(0,i.jsx)(g.Z,{title:"create"===r?"افزودن آگهی":"ویرایش آگهی",handleClose:()=>{l(!1)}}),(0,i.jsx)(x.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==t?void 0:t.path)&&!1==!!f("localPic")?(0,i.jsx)(c.Qr,{name:"imageFile",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(a.ZP,{onDrop:e=>{w(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:r}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...r()}),(0,i.jsx)(x.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(x.zx,{size:"3",type:"button",style:{width:"fit-content"},children:(0,i.jsxs)(x.kC,{align:"center",gap:"2",children:[(0,i.jsx)(j.V1,{}),(0,i.jsx)(x.xv,{...y.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(x.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(b.K.gray[3])},children:["create"===r&&(0,i.jsx)(x.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:b.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(b.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,i.jsx)(c.Qr,{name:"pic",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(a.ZP,{onDrop:e=>{w(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:r}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...r()}),(0,i.jsx)(x.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(j.rF,{})})]})}})})}})}),(0,i.jsx)(d.default,{src:f("isReset")?"".concat("https://uploader.darkube.app/").concat(null==t?void 0:t.path):f("localPic"),alt:"ugliglhglk",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,i.jsxs)(x.rj,{width:"100%",gap:"5",columns:"3",children:[(0,i.jsx)(c.Qr,{name:"sponsor",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.nv,{...t,placeholder:"نام اسپانسر"})}}),(0,i.jsx)(c.Qr,{name:"website",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.nv,{...t,placeholder:"سایت"})}}),(0,i.jsx)(c.Qr,{name:"socialMedia",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.nv,{...t,placeholder:"شبکه اجتماعی"})}})]}),(0,i.jsx)(c.Qr,{name:"alt",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.nv,{...t,placeholder:"متن جایگزین"})}}),(0,i.jsx)(c.Qr,{name:"description",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,i.jsx)(c.Qr,{name:"brief",control:m,render:e=>{let{field:t}=e;return(0,i.jsx)(x.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,i.jsx)(h.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>{l(!1)},isDisableSubmitBtn:!1,onSubmit:()=>{},isLoading:!1,isSubmit:!1})]})]})},f=r(29962),v=r(31072);function k(e){let{params:t}=e,r=t.slug,{data:n,isLoading:a,isError:c,isFetching:d}=(0,o.a)({queryKey:["ads-page-type"],queryFn:async()=>await (0,l._5)(r)});return a||d?(0,i.jsx)(x.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,i.jsx)(s.$j,{style:{scale:2.5}})}):!n||c?(0,v.bW)("مشکلی پیش آمده . لطفا دوباره تلاش نمایید"):(0,i.jsxs)(x.kC,{direction:"column",children:[(0,i.jsx)(f.default,{title:"",isNavigation:!0}),(0,i.jsx)(x.xu,{p:"24px 110px 40px 40px ",children:(0,i.jsx)(x.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(0,i.jsx)(x.rj,{gapY:"5",children:n.map((e,t,r)=>e&&(0,i.jsx)(m,{data:r.length-1===t?null:e},t))})})})]})}},927:function(e,t,r){"use strict";r.d(t,{_5:function(){return s},nj:function(){return n}});var i=r(31067);let n=async()=>(await i.x.get("/ads/page")).data.data,s=async e=>(await i.x.get("/ads/holder?holder=".concat(e))).data.data},29962:function(e,t,r){"use strict";var i=r(57437);r(2265);var n=r(16463),s=r(89183),o=r(7507),l=r(27533),a=r(1845),c=r(21949);t.default=e=>{let{title:t,isNavigation:r}=e,s=(0,n.useRouter)();return(0,i.jsx)(d,{children:(0,i.jsxs)(u,{children:[(0,i.jsx)(o.xv,{...c.p.title1,style:{color:a.K.gray[11]},children:t}),r&&(0,i.jsx)(o.hU,{size:"3",variant:"surface",onClick:()=>s.back(),children:(0,i.jsx)(l.jb,{color:"#373737"})})]})})};let d=s.ZP.header.withConfig({componentId:"sc-132ec2d4-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],a.K.gray[6],a.K.gray[1],a.i.shadow1),u=(0,s.ZP)(o.kC).withConfig({componentId:"sc-132ec2d4-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},72549:function(e,t,r){"use strict";var i=r(57437);r(2265);var n=r(94963),s=r(1845),o=r(21949),l=r(7507);t.Z=e=>{let{isSubmit:t=!0,closeButtonText:r,submitButtonText:a,isLoading:c,onCloseButton:d,onSubmit:u,isDisableSubmitBtn:p=!1,disabled:x=!1}=e;return(0,i.jsx)(l.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:s.K.gray[2],marginBlockStart:"auto",borderTop:"1px solid ".concat(s.K.gray[3]),boxShadow:s.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,i.jsxs)(l.rj,{gap:"16px",columns:"2",children:[(0,i.jsx)(l.zx,{disabled:p||x,onClick:u,type:t?"submit":"button",variant:"soft",size:"3",style:{width:"fit-content",padding:"9.5px 38px"},children:c?(0,i.jsx)(n.$j,{}):(0,i.jsx)(l.xv,{...o.p.body1,children:a})}),(0,i.jsx)(l.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:d,style:{width:"fit-content",padding:"9.5px 38px"},children:(0,i.jsx)(l.xv,{...o.p.body1,children:r})})]})})}},77855:function(e,t,r){"use strict";var i=r(57437);r(2265);var n=r(89183),s=r(27533),o=r(1845),l=r(21949),a=r(7507);t.Z=e=>{let{handleClose:t,title:r}=e;return(0,i.jsxs)(c,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:o.K.blue[10],zIndex:"100"},align:"center",children:[(0,i.jsx)(a.xv,{...l.p.title2,style:{color:o.K.gray[1],fontWeight:700},children:r}),(0,i.jsx)(a.hU,{type:"button",onClick:t,variant:"soft",size:"2",style:{backgroundColor:o.K.blue[9],borderRadius:"12px"},children:(0,i.jsx)(s.x8,{})})]})};let c=(0,n.zo)(a.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},31067:function(e,t,r){"use strict";r.d(t,{x:function(){return c},z:function(){return d}});var i=r(16463),n=r(38472),s=r(15263),o=r(86300).Buffer;let l="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),a=o.from(l).toString("base64"),c=n.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"up-auth":"Basic ".concat(a),"Content-Type":"application/json"}}),d=n.Z.create({baseURL:"https://uploader.darkube.app/admin/uploads/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(a)}});d.interceptors.request.use(e=>{let t=new s.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.request.use(e=>{let t=new s.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,i.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,i.redirect)("/error")):((0,i.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})},43767:function(e,t,r){"use strict";r.d(t,{a:function(){return u}});var i=r(83667),n=r(2265),s=r(69948),o=r(53e3),l=r(93191),a=r(99038),c=r(88472),d=r(38261);function u(e,t){return function(e,t,r){var i,u,p,x;let h=(0,l.NL)(r),g=(0,a.S)(),j=(0,o._)(),b=h.defaultQueryOptions(e);null===(u=h.getDefaultOptions().queries)||void 0===u||null===(i=u._experimental_beforeQuery)||void 0===i||i.call(u,b),b._optimisticResults=g?"isRestoring":"optimistic",(0,d.A8)(b),(0,c.pf)(b,j),(0,c.JN)(j);let[y]=n.useState(()=>new t(h,b)),m=y.getOptimisticResult(b);if(n.useSyncExternalStore(n.useCallback(e=>{let t=g?()=>void 0:y.subscribe(s.V.batchCalls(e));return y.updateResult(),t},[y,g]),()=>y.getCurrentResult(),()=>y.getCurrentResult()),n.useEffect(()=>{y.setOptions(b,{listeners:!1})},[b,y]),(0,d.SB)(b,m))throw(0,d.j8)(b,y,j);if((0,c.KJ)({result:m,errorResetBoundary:j,throwOnError:b.throwOnError,query:h.getQueryCache().get(b.queryHash)}))throw m.error;return null===(x=h.getDefaultOptions().queries)||void 0===x||null===(p=x._experimental_afterQuery)||void 0===p||p.call(x,b,m),b.notifyOnChangeProps?m:y.trackResult(m)}(e,i.z,t)}}},function(e){e.O(0,[1553,3048,5452,8310,1825,8702,9269,6648,2107,7507,7533,2971,7023,1744],function(){return e(e.s=65929)}),_N_E=e.O()}]);