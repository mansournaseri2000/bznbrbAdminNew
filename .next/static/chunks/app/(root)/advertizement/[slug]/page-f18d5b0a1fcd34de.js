(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8423],{65929:function(e,t,s){Promise.resolve().then(s.bind(s,10574))},10574:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var i=s(57437),n=s(2265),r=s(94963),a=s(93191),l=s(43767),u=s(25524),o=s(89216),c=s(85977),d=s(71166),p=s(29962),y=s(7507),x=s(77855),h=s(31072),g=s(1845),m=s(21949);function j(e){let{params:t}=e,s=t.slug,j=(0,a.NL)(),[f,O]=(0,n.useState)(null),[k,b]=(0,n.useState)({isOpen:!1,key:"create"}),{data:v,isLoading:C,isError:w,isFetching:_}=(0,l.a)({queryKey:["ads-page-type"],queryFn:async()=>await (0,o._5)(s)}),{mutate:S,isPending:D}=(0,u.D)({mutationFn:async e=>await (0,o.Vl)(e),onSuccess:e=>{e.status?(j.invalidateQueries({queryKey:["ads-page-type"]}),(0,h.xO)("آگهی مورد نظر با موفقیت ایجاد شد"),b({...k,isOpen:!1})):(0,h.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:q,isPending:E}=(0,u.D)({mutationFn:async e=>await (0,o.qo)(e),onSuccess:e=>{e.status?(j.invalidateQueries({queryKey:["ads-page-type"]}),(0,h.xO)("آگهی مورد نظر با موفقیت ویرایش شد"),b({...k,isOpen:!1})):(0,h.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:A,isPending:F}=(0,u.D)({mutationFn:async()=>await (0,o.Di)({id:null==f?void 0:f.id,type:"ADS"}),onSuccess:e=>{e.status?(j.invalidateQueries({queryKey:["ads-page-type"]}),(0,h.xO)("آگهی مورد نظر با موفقیت حذف شد"),b({...k,isOpen:!1})):(0,h.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),K=e=>{b({key:e,isOpen:!0})},N=()=>{b({isOpen:!0,key:"delete"})};return C||_?(0,i.jsx)(y.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,i.jsx)(r.$j,{style:{scale:2.5}})}):!v||w?(0,h.bW)("مشکلی پیش آمده . لطفا دوباره تلاش نمایید"):(console.log("AdsDetailCardAdsDetailCardAdsDetailCard",v),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.kC,{direction:"column",children:[(0,i.jsx)(p.Z,{title:(()=>{switch(s){case"main_page":return"تبلیغات صفحه اصلی";case"planner":return"تبلیغات صفحه برنامه ریز";case"tourmaker":return"تبلیغات صفحه تورساز";case"article":return"تبلیغات صفحه مقاله";case"article_list":return"تبلیغات صفحه مقالات";case"maps":return"تبلیغات صفحه نقشه گردی";case"place":return"تبلیغات صفحه نقطه";default:return""}})(),isNavigation:!0}),(0,i.jsx)(y.xu,{p:"24px 110px 40px 40px ",children:(0,i.jsx)(y.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(0,i.jsx)(y.rj,{gapY:"5",children:0===v.length?(0,i.jsx)(y.kC,{width:"100%",mt:"4",children:(0,i.jsx)(y.X6,{as:"h4",size:"4",style:{color:g.K.gray[11]},children:"در حال حاضر آگهی برای نمایش وجود ندارد."})}):v.map((e,t)=>e&&(0,i.jsx)(c.Z,{onClick:()=>O(e),onDelete:()=>N(),onCreateOrEdit:K,data:e},t))})})})]}),(0,i.jsxs)(y.u_,{isOpen:k.isOpen,onClose:()=>b({...k,isOpen:!1}),children:["delete"!==k.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{title:"create"===k.key?"ثبت آگهی":"ویرایش آگهی",handleClose:()=>b({...k,isOpen:!1})}),(0,i.jsx)(d.Z,{data:f,type:k.key,isOpen:k.isOpen,onClose:()=>b({...k,isOpen:!1}),onSubmit:e=>{let t={alt:e.alt,description:e.description,file:e.imageFile,type:"ADS",sponsor:e.sponsor,website:e.website,socialMedia:e.socialMedia,summery:e.summery,page:e.page,holder:e.holder};"edit"===k.key&&f?q({id:null==f?void 0:f.id,type:"ADS",alt:t.alt,description:t.description,summery:t.summery,socialMedia:t.socialMedia,sponsor:t.sponsor,website:t.website}):"create"===k.key&&S(t)},isLoading:"create"===k.key?D:E})]}),"delete"===k.key&&(0,i.jsxs)(y.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(y.xv,{...m.p.body1,style:{color:g.K.gray[11]},children:["آیا از حذف آگهی ",(0,i.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:null==f?void 0:f.position})," اطمینان دارید؟"]}),(0,i.jsxs)(y.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(y.zx,{variant:"soft",size:"4",onClick:()=>A(),children:(0,i.jsx)(y.xv,{...m.p.body3,children:F?(0,i.jsx)(r.$j,{}):"بله"})}),(0,i.jsx)(y.zx,{type:"button",onClick:()=>b({...k,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(y.xv,{...m.p.body3,children:"خیر"})})]})]})]})]}))}},43767:function(e,t,s){"use strict";s.d(t,{a:function(){return d}});var i=s(83667),n=s(2265),r=s(69948),a=s(53e3),l=s(93191),u=s(99038),o=s(88472),c=s(38261);function d(e,t){return function(e,t,s){var i,d,p,y;let x=(0,l.NL)(s),h=(0,u.S)(),g=(0,a._)(),m=x.defaultQueryOptions(e);null===(d=x.getDefaultOptions().queries)||void 0===d||null===(i=d._experimental_beforeQuery)||void 0===i||i.call(d,m),m._optimisticResults=h?"isRestoring":"optimistic",(0,c.A8)(m),(0,o.pf)(m,g),(0,o.JN)(g);let[j]=n.useState(()=>new t(x,m)),f=j.getOptimisticResult(m);if(n.useSyncExternalStore(n.useCallback(e=>{let t=h?()=>void 0:j.subscribe(r.V.batchCalls(e));return j.updateResult(),t},[j,h]),()=>j.getCurrentResult(),()=>j.getCurrentResult()),n.useEffect(()=>{j.setOptions(m,{listeners:!1})},[m,j]),(0,c.SB)(m,f))throw(0,c.j8)(m,j,g);if((0,o.KJ)({result:f,errorResetBoundary:g,throwOnError:m.throwOnError,query:x.getQueryCache().get(m.queryHash)}))throw f.error;return null===(y=x.getDefaultOptions().queries)||void 0===y||null===(p=y._experimental_afterQuery)||void 0===p||p.call(y,m,f),m.notifyOnChangeProps?f:j.trackResult(f)}(e,i.z,t)}}},function(e){e.O(0,[1553,3048,5452,8310,1825,8702,3397,9269,6648,2107,7507,2336,1329,2971,7023,1744],function(){return e(e.s=65929)}),_N_E=e.O()}]);