(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7688],{84332:function(e,s,i){Promise.resolve().then(i.bind(i,50615))},50615:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return K}});var n=i(57437),t=i(2265),l=i(43767),r=i(36721),a=i(16463),c=i(94963),o=i(93191),u=i(25524),d=i(89216),p=i(7507),g=i(77855),y=i(31072),x=i(1845),h=i(21949),j=i(85977),v=i(71166),m=()=>{let e=(0,a.useParams)(),s=e.slug[0],i=!0==!!e.slug[3]?Number(e.slug[7]):Number(e.slug[2]),r=!0==!!e.slug[3]?"children":"parent",m=(0,o.NL)(),[b,k]=(0,t.useState)(null),[f,w]=(0,t.useState)({isOpen:!1,key:"create"}),{data:C,isLoading:O,isError:K,isFetching:_}=(0,l.a)({queryKey:["ads-page-type"],queryFn:async()=>await (0,d._5)(s,i,r)}),{mutate:N,isPending:q}=(0,u.D)({mutationFn:async e=>await (0,d.Vl)(e),onSuccess:e=>{e.status?(m.invalidateQueries({queryKey:["ads-page-type"]}),(0,y.xO)("آگهی مورد نظر با موفقیت ایجاد شد"),w({...f,isOpen:!1})):(0,y.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:S,isPending:D}=(0,u.D)({mutationFn:async e=>await (0,d.qo)(e),onSuccess:e=>{e.status?(m.invalidateQueries({queryKey:["ads-page-type"]}),(0,y.xO)("آگهی مورد نظر با موفقیت ویرایش شد"),w({...f,isOpen:!1})):(0,y.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:F,isPending:A}=(0,u.D)({mutationFn:async()=>await (0,d.Di)({id:null==b?void 0:b.id,type:"ADS"}),onSuccess:e=>{e.status?(m.invalidateQueries({queryKey:["ads-page-type"]}),(0,y.xO)("آگهی مورد نظر با موفقیت حذف شد"),w({...f,isOpen:!1})):(0,y.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}});console.log("selected item",b);let M=e=>{w({key:e,isOpen:!0})},z=()=>{w({isOpen:!0,key:"delete"})};return O||_?(0,n.jsx)(p.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(c.$j,{style:{scale:2.5}})}):!C||K?(0,y.bW)("مشکلی پیش آمده . لطفا دوباره تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.rj,{gapY:"5",children:C.map((e,s)=>e&&(0,n.jsx)(j.Z,{onClick:()=>k(e),onDelete:()=>z(),onCreateOrEdit:M,data:e},s))}),(0,n.jsxs)(p.u_,{isOpen:f.isOpen,onClose:()=>w({...f,isOpen:!1}),children:["delete"!==f.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{title:"create"===f.key?"ثبت آگهی":"ویرایش آگهی",handleClose:()=>w({...f,isOpen:!1})}),(0,n.jsx)(v.Z,{data:b,type:f.key,isOpen:f.isOpen,onClose:()=>w({...f,isOpen:!1}),onSubmit:e=>{let s={alt:e.alt,description:e.description,file:e.imageFile,type:"ADS",sponsor:e.sponsor,website:e.website,socialMedia:e.socialMedia,summery:e.summery,page:e.page,holder:e.holder,provinceId:e.provinceId,cityId:e.cityId};console.log("payload",s),"edit"===f.key&&b?S({id:null==b?void 0:b.id,type:"ADS",alt:s.alt,description:s.description,summery:s.summery,socialMedia:s.socialMedia,sponsor:s.sponsor,website:s.website}):"create"===f.key&&N(s)},isLoading:"create"===f.key?q:D})]}),"delete"===f.key&&(0,n.jsxs)(p.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(p.xv,{...h.p.body1,style:{color:x.K.gray[11]},children:["آیا از حذف آگهی ",(0,n.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:null==b?void 0:b.position})," اطمینان دارید؟"]}),(0,n.jsxs)(p.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(p.zx,{variant:"soft",size:"4",onClick:()=>F(),children:(0,n.jsx)(p.xv,{...h.p.body3,children:A?(0,n.jsx)(c.$j,{}):"بله"})}),(0,n.jsx)(p.zx,{type:"button",onClick:()=>w({...f,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(p.xv,{...h.p.body3,children:"خیر"})})]})]})]})]})},b=i(43397),k=i(33879),f=()=>{let e=(0,b.tv)(),s=(0,a.useParams)(),i=s.slug[0],t=s.slug[3],{data:r,isLoading:o,isFetching:u,isError:g}=(0,l.a)({queryKey:["cities-list"],queryFn:async()=>await (0,d.mV)(Number(t))}),x=e=>"planner_trips"===i?"planner_trips/provinces/cities/".concat(t,"/").concat(e):"tours"===i?"tours/provinces/cities/".concat(t,"/").concat(e):"";return o||u?(0,n.jsx)(p.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(c.$j,{style:{scale:2}})}):!r||g?(0,y.bW)("مشکلی پیش آمده است . لطفا مجددا تلاش کنید"):(0,n.jsx)(p.rj,{width:"100%",columns:{initial:"1",sm:"2"},gap:"5",children:null==r?void 0:r.map((s,i)=>(0,n.jsx)(k.Z,{type:"other",lable:s.label,latestUpdatedAt:s.latestUpdatedAt,space:s.freeSpace,handleRedirectAdsManagment:()=>e.push(x(Number(s.key)))},i))})},w=()=>{let e=(0,b.tv)(),s=(0,a.useParams)().slug[0],{data:i,isLoading:t,isFetching:r,isError:o}=(0,l.a)({queryKey:["ads-list"],queryFn:async()=>await (0,d.LP)(s)}),u=e=>"planner_trips"===s?"planner_trips/provinces/".concat(e):"tours"===s?"tours/provinces/".concat(e):"",g=e=>"planner_trips"===s?"planner_trips/provinces/cities/".concat(e):"tours"===s?"tours/provinces/cities/".concat(e):"";return t||r?(0,n.jsx)(p.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(c.$j,{style:{scale:2}})}):!i||o?(0,y.bW)("مشکلی پیش آمده است . لطفا مجددا تلاش کنید"):(0,n.jsx)(p.rj,{width:"100%",columns:{initial:"1",sm:"2"},gap:"5",children:i.map((s,i)=>(0,n.jsx)(k.Z,{type:"provinces",lable:s.label,latestUpdatedAt:s.latestUpdatedAt,space:s.freeSpace,handleRedirectAdsManagment:()=>e.push(u(Number(s.key))),handleRedirectCities:()=>e.push(g(Number(s.key)))},i))})},C=i(68665),O=i(28232);function K(e){var s,i,t;let{params:a}=e,c="planner_trips"===a.slug[0]&&!a.slug[1]&&!a.slug[2]||"tours"===a.slug[0]&&!a.slug[1]&&!a.slug[2],o="planner_trips"===a.slug[0]&&"provinces"===a.slug[1]&&a.slug[2]&&"cities"!==a.slug[2]||"tours"===a.slug[0]&&"provinces"===a.slug[1]&&a.slug[2]&&"cities"!==a.slug[2],u="cities"===a.slug[2]&&!0==!!a.slug[3]&&!1==!!a.slug[5],d="cities"===a.slug[2]&&!0==!!a.slug[3]&&!0==!!a.slug[4],{data:g}=(0,l.a)({queryKey:["constant"],queryFn:async()=>await (0,r.iV)()}),y=(0,O.L)(Number(a.slug[7]),null!==(s=null==g?void 0:g.cities)&&void 0!==s?s:[]),x=(0,O.L)(Number(a.slug[2]),null!==(i=null==g?void 0:g.provinces)&&void 0!==i?i:[]),h=(0,O.L)(Number(a.slug[3]),null!==(t=null==g?void 0:g.provinces)&&void 0!==t?t:[]);return(0,n.jsxs)(p.kC,{direction:"column",children:[(0,n.jsx)(C.Z,{title:"planner_trips"===a.slug[0]?!0==!!a.slug[3]&&"cities"===a.slug[2]?!0==!!a.slug[4]?" تبلیغات برنامه سفر - شهرستان ".concat(y):"تبلیغات برنامه سفر - لیست شهرستان های استان ".concat(h):!0==!!a.slug[2]&&"provinces"===a.slug[1]?"تبلیغات برنامه سفر - استان ".concat(x):"تبلیغات برنامه سفر - لیست استان ها":"tours"===a.slug[0]?!0==!!a.slug[3]&&"cities"===a.slug[2]?!0==!!a.slug[4]?"تبلیغات لیست تورها - شهرستان ".concat(y):"تبلیغات لیست تورها - لیست شهرستان های استان ".concat(h):!0==!!a.slug[2]&&"provinces"===a.slug[1]?"تبلیغات لیست تورها - استان ".concat(x):"تبلیغات لیست تورها - لیست استان ها":"",isNavigation:!0}),(0,n.jsx)(p.xu,{p:{initial:"24px 24px 40px 40px",lg:"24px 110px 40px 40px "},children:(0,n.jsx)(p.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:c?(0,n.jsx)(w,{}):o||d?(0,n.jsx)(m,{}):u?(0,n.jsx)(f,{}):void 0})})]})}},33879:function(e,s,i){"use strict";var n=i(57437),t=i(7507),l=i(10504),r=i(1845),a=i(21949);s.Z=e=>{let{lable:s,latestUpdatedAt:i,space:c,type:o,holder:u,handleRedirectAdsManagment:d,handleRedirectCities:p}=e;return(0,n.jsxs)(t.kC,{p:"16px",justify:"between",style:{border:"1px solid ".concat(r.K.gray[6]),borderRadius:"8px",backgroundColor:r.K.gray[2]},children:[(0,n.jsxs)(t.rj,{gap:"12px",children:[(0,n.jsx)(t.xv,{...a.p.body1,style:{color:r.K.gray[12]},children:s}),(0,n.jsxs)(t.kC,{align:"center",gap:"8px",children:[(0,n.jsx)(t.xv,{...a.p.description2,style:{color:r.K.gray[10]},children:"main"===o?"تعداد تبلیغات":"بنر های خالی"}),(0,n.jsxs)(t.xv,{...a.p.description2,style:{color:r.K.gray[12]},children:[c," عدد"]})]}),(0,n.jsxs)(t.kC,{align:"center",gap:"8px",children:[(0,n.jsx)(t.xv,{...a.p.description2,style:{color:r.K.gray[10]},children:"آخرین ویرایش"}),(0,n.jsx)(t.xv,{...a.p.description2,style:{color:r.K.gray[12]},children:i?(0,l.l)(i):"_"})]})]}),(0,n.jsxs)(t.kC,{direction:"column",justify:"between",align:"end",children:["main"===o&&(0,n.jsx)(t.xv,{...a.p.body1,style:{color:r.K.pink[9],paddingLeft:"4px"},children:u}),"provinces"===o&&(0,n.jsx)(t.zx,{variant:"soft",size:"2",onClick:()=>{p&&p()},children:(0,n.jsx)(t.xv,{...a.p.body3,style:{color:r.K.gray[1]},children:"شهرستان ها"})}),(0,n.jsx)(t.zx,{variant:"solid",size:"2",style:{marginBlockStart:"auto"},onClick:()=>{d&&d()},children:(0,n.jsx)(t.xv,{...a.p.body3,style:{color:r.K.blue[12]},children:"مدیریت تبلیغات"})})]})]})}},28232:function(e,s,i){"use strict";i.d(s,{L:function(){return t}});var n=i(2265);function t(e,s){return(0,n.useMemo)(()=>{if(!e||!(null==s?void 0:s.length))return"";let i=s.find(s=>s.id===e);return i?i.name:""},[e,s])}},10504:function(e,s,i){"use strict";i.d(s,{l:function(){return l}});var n=i(64673),t=i.n(n);function l(e){return t()(e).locale("fa").format("jYYYY/jMM/jDD")}}},function(e){e.O(0,[1553,3048,1383,5452,8310,6990,1825,8702,3397,9269,7138,6648,1773,2107,7507,9248,6265,660,2971,7023,1744],function(){return e(e.s=84332)}),_N_E=e.O()}]);