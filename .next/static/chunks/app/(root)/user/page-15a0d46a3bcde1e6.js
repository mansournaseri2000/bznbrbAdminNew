(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9960],{48017:function(e,t,r){Promise.resolve().then(r.bind(r,67580))},67580:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(57437),a=r(2265),o=r(39343),l=r(16463),i=r(94963),s=r(25524),u=r(27918),c=r(51537),d=r(96396),f=r(23405),p=e=>{let{control:t}=(0,o.Gc)(),r=(0,l.useSearchParams)(),a=e=>r.get(e)||"";return(0,n.jsxs)(d.rj,{width:"100%",columns:"3",gapX:"4",style:{gridTemplateColumns:"3fr 1fr"},children:[(0,n.jsx)(o.Qr,{name:"searchQuery",control:t,render:t=>{let{field:r}=t;return(0,n.jsx)(f.Z,{...r,placeholder:"جستجو نام کاربر یا شماره تماس",defaultValue:a("searchQuery")?a("searchQuery"):"",onClick:e.onSubmit})}}),(0,n.jsx)(o.Qr,{name:"status",control:t,render:t=>{let{field:r}=t;return(0,n.jsx)(d.fp,{...r,placeholder:"وضعیت کاربر",value:String(r.value),onValueChange:t=>{r.onChange(t),e.onSubmit()},size:"3",children:c.C0.map(e=>(0,n.jsx)(d.Ql,{value:String(e.value),children:e.key},e.id))})}})]})},h=r(57818),g=r(1845),x=r(21949);let m=(0,h.default)(()=>Promise.resolve().then(r.bind(r,62188)),{loadableGenerated:{webpack:()=>[62188]},ssr:!1});var y=e=>{let{data:t}=e,r=(0,l.useRouter)();return(0,n.jsx)(d.xu,{width:"100%",style:{overflow:"scroll"},children:(0,n.jsx)(m,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,n.jsx)(d.xv,{...x.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:e.row.index+1})},{accessorKey:"fullName",header:"نام و نام خانوادگی",cell:e=>{let t=e.getValue();return(0,n.jsx)(d.xv,{...x.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:t&&""!==t.trim()?t:"-"})}},{accessorKey:"mobileNumber",header:"شماره تماس",cell:e=>{let t=e.getValue();return(0,n.jsx)(d.xv,{...x.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:t||"-"})}},{accessorKey:"email",header:"ایمیل",cell:e=>{let t=e.getValue();return(0,n.jsx)(d.xv,{...x.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:t||"-"})}},{accessorKey:"status",header:"نوع کاربر",cell:e=>{let t=e.getValue();return(0,n.jsx)(d.xv,{...x.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?g.K.pink[3]:g.K.blue[3],color:!1===t?g.K.pink[11]:g.K.blue[11],borderRadius:4},children:!0===t?"فعال":"غیر فعال"})}},{id:"details",cell:e=>{let{row:t}=e,a=t.original;return(0,n.jsx)(d.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,n.jsx)(d.zx,{variant:"surface",onClick:e=>{console.log("item",a),e.preventDefault(),r.push("/user/".concat(a.id))},children:"..."})})}}],data:t})})},b=r(29962),j=r(72051),v=r(51360),w=r(86555),k=r(25231);function C(e){let{searchParams:t}=e,{replace:r}=(0,l.useRouter)(),[c,f]=(0,a.useState)(t.page?Number(t.page):1),h=(0,o.cI)({defaultValues:{searchQuery:t.searchQuery||"",status:t.status?t.status:"",limit:10,page:c}}),{watch:g,handleSubmit:x,setValue:m}=h,{data:C,mutate:P,isError:S,isPending:D}=(0,s.useMutation)({mutationFn:async e=>(0,u.qD)(e),onSuccess:async e=>{let t=Object.fromEntries(Object.entries(g()).filter(e=>{let[t,r]=e;return void 0!==r&&""!==r&&"none"!==r&&null!==r&&!(Array.isArray(r)&&0===r.length)&&!(Array.isArray(r)&&r.every(e=>""===e))&&!(Array.isArray(r)&&r.every(e=>"none"===e))&&!("object"==typeof r&&null!==r&&0===Object.keys(r).length)})),n=(0,k.X)(t);r("/user?".concat(n)),console.log("data",e)},onError:async e=>{console.log("DATA Error",e)}});(0,a.useEffect)(()=>{P(g())},[]);let E=()=>{P(g())};return(0,n.jsxs)(d.kC,{direction:"column",children:[(0,n.jsx)(b.default,{title:"لیست کاربران",isNavigation:!0}),(0,n.jsx)(d.xu,{pr:"90px",children:(0,n.jsx)(d.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(0,n.jsx)(o.RV,{...h,children:(0,n.jsx)("form",{onSubmit:x(E),children:(0,n.jsxs)(d.kC,{width:"100%",direction:"column",gap:"5",p:"5",children:[(0,n.jsx)(p,{onSubmit:()=>E()}),S?(0,n.jsx)(d.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):D?(0,n.jsx)(i.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):(0,n.jsx)(y,{data:null==C?void 0:C.latestUsers}),(null==C?void 0:C.latestUsers)&&(0,n.jsxs)(d.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsx)(j.Z,{current:c,total:null==C?void 0:C.totalPages,onPageChange:e=>{f(e),m("page",e),(0,w.Z)(e),E()}}),(0,n.jsx)(v.Z,{data:null==C?void 0:C.latestUsers,currentPage:null==C?void 0:C.currentPage,totalCount:null==C?void 0:C.totalCount})]})]})})})})})]})}},57818:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(50551),a=r.n(n)},50551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=r(99920);r(57437),r(2265);let a=n._(r(40148));function o(e,t){var r;let n={loading:e=>{let{error:t,isLoading:r,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let o={...n,...t};return(0,a.default)({...o,modules:null==(r=o.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(55592);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},40148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(57437),a=r(2265),o=r(10912),l=r(61481);function i(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},u=function(e){let t={...s,...e},r=(0,a.lazy)(()=>t.loader().then(i)),u=t.loading;function c(e){let i=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,s=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(l.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(a.Suspense,{fallback:i,children:s})}return c.displayName="LoadableComponent",c}},61481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return o}});let n=r(57437),a=r(58512);function o(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),o=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));o.push(...t)}}return 0===o.length?null:(0,n.jsx)(n.Fragment,{children:o.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},27918:function(e,t,r){"use strict";r.d(t,{bG:function(){return s},gG:function(){return l},qD:function(){return o},uz:function(){return i},v7:function(){return a}});var n=r(31067);let a=e=>{let t={};return Object.keys(e).forEach(r=>{let n=e[r];null===n||""===n||Array.isArray(n)&&0===n.length||0===n||"null"===n||(t[r]=n)}),t},o=async e=>{let t=a({...e});return(await n.x.post("user",t)).data.data},l=async e=>{let t=a({...e,originCityId:Number(e.originCityId),originProvinceId:Number([e.originProvinceId]),destinationCityId:Number(e.destinationCityId),destinationProvinceId:Number(e.destinationProvinceId),departureDateStart:new Date(e.departureDateStart).getTime()?new Date(e.departureDateStart).getTime():null,departureDateEnd:new Date(e.departureDateEnd).getTime()?new Date(e.departureDateEnd).getTime():null,returnDateStart:new Date(e.returnDateStart).getTime()?new Date(e.returnDateStart).getTime():null,returnDateEnd:new Date(e.returnDateEnd).getTime()?new Date(e.returnDateEnd).getTime():null,createdAt:new Date(e.createdAt).getTime()?new Date(e.returnDateEnd).getTime():null,sort:null,userId:null});return(await n.x.post("trips/recentTrips",t,{headers:{userId:e.userId}})).data.data},i=async(e,t)=>{let r=a({...t,mobile:null,pic:null});return(await n.x.patch("user/profile/partiallyEditUser/".concat(e),r)).data},s=async e=>(await n.x.get("user/userInfoForUserTrips/".concat(e))).data.data},51537:function(e,t,r){"use strict";r.d(t,{C0:function(){return n},Qd:function(){return o},gy:function(){return a}});let n=[{id:1,key:"فعال",value:"true",disable:!1},{id:2,key:"غیر فعال",value:"false",disable:!1},{id:3,key:"هیچکدام",value:"all",disable:!1}],a=[{id:1,name:"تاریخ رفت - جدیدترین "},{id:2,name:"تاریخ رفت - قدیمی ترین"},{id:3,name:"تاریخ بازگشت - جدیدترین"},{id:4,name:"تاریخ بازگشت - قدیمی ترین"}],o=[{id:1,name:"مرد",value:"MALE"},{id:2,name:"زن",value:"FEMALE"}]},29962:function(e,t,r){"use strict";var n=r(57437);r(2265);var a=r(16463),o=r(89183),l=r(96396),i=r(40722),s=r(1845),u=r(21949);t.default=e=>{let{title:t,isNavigation:r}=e,o=(0,a.useRouter)();return(0,n.jsx)(c,{children:(0,n.jsxs)(d,{children:[(0,n.jsx)(l.xv,{...u.p.title1,style:{color:s.K.gray[11]},children:t}),r&&(0,n.jsx)(l.hU,{size:"3",variant:"surface",onClick:()=>o.back(),children:(0,n.jsx)(i.jb,{color:"#373737"})})]})})};let c=o.ZP.header.withConfig({componentId:"sc-132ec2d4-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],s.K.gray[6],s.K.gray[1],s.i.shadow1),d=(0,o.ZP)(l.kC).withConfig({componentId:"sc-132ec2d4-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},51360:function(e,t,r){"use strict";var n=r(57437);r(2265);var a=r(1845),o=r(21949),l=r(96396);t.Z=e=>{let{data:t,currentPage:r,totalCount:i}=e,s=null==t?void 0:t.length,u=(r-1)*s+1,c=Math.min(u+s-1,i);return(0,n.jsx)(l.xv,{...o.p.body2,style:{color:a.K.gray[11]},children:"".concat(u,"-").concat(c," از ").concat(i," برنامه")})}},72051:function(e,t,r){"use strict";var n=r(57437);r(2265),r(61170);var a=r(57818),o=r(96396),l=r(40722);r(34916);let i=(0,a.default)(()=>r.e(8372).then(r.bind(r,94212)).then(e=>e.default),{loadableGenerated:{webpack:()=>[94212]},ssr:!1});t.Z=e=>{let{current:t,total:r,onPageChange:a,...s}=e;return(0,n.jsx)(o.kC,{align:"center",maxWidth:"348px",children:(0,n.jsx)(i,{current:t,total:r,onPageChange:a,...s,className:"pagination",previousLabel:(0,n.jsx)(l.jR,{}),nextLabel:(0,n.jsx)(l.EB,{})})})}},23405:function(e,t,r){"use strict";var n=r(57437),a=r(2265),o=r(89183),l=r(96396),i=r(40722),s=r(1845);let u=(0,a.forwardRef)((e,t)=>{let{placeholder:r,defaultValue:a,onClick:o,...s}=e;return(0,n.jsxs)(c,{...s,ref:t,height:"fit-content",children:[(0,n.jsx)(d,{placeholder:r,variant:"surface",defaultValue:a}),(0,n.jsx)(l.hU,{size:"4",variant:"soft",onClick:o,children:(0,n.jsx)(i.HN,{})})]})});u.displayName="CustomSearch",t.Z=u;let c=(0,o.ZP)(l.kC).withConfig({componentId:"sc-b2f9bf24-0"})(["align-items:center;border:1px solid ",";border-radius:12px;padding-inline-start:1rem;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}"],s.K.gray[7],s.K.blue[2],s.i.shadow1,s.K.gray[3]),d=(0,o.ZP)(l.nv).withConfig({componentId:"sc-b2f9bf24-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},31067:function(e,t,r){"use strict";r.d(t,{x:function(){return u}});var n=r(16463),a=r(38472),o=r(15263),l=r(86300).Buffer;let i="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),s=l.from(i).toString("base64"),u=a.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"up-auth":"Basic ".concat(s),"Content-Type":"application/json"}});u.interceptors.request.use(e=>{let t=new o.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),u.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,n.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,n.redirect)("/error")):((0,n.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})},25231:function(e,t,r){"use strict";function n(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,n]=e;t.append(r,String(n))}),t.toString()}r.d(t,{X:function(){return n}})},86555:function(e,t){"use strict";t.Z=e=>{{let t=new URLSearchParams(window.location.search);t.set("page",e.toString());let r=window.location.pathname;window.history.pushState({},"","".concat(r,"?").concat(t.toString()))}}},61170:function(){},34916:function(){}},function(e){e.O(0,[1553,3048,3497,8334,5452,8310,9673,3348,4518,6396,3913,722,2971,7023,1744],function(){return e(e.s=48017)}),_N_E=e.O()}]);