(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9960],{48017:function(e,t,n){Promise.resolve().then(n.bind(n,67580))},67580:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(57437);n(2265);var a=n(39343),i=n(94963),l=n(93191),o=n(43767),s=n(37969),c=n(27918),u=n(16463),d=n(51537),p=n(7507),f=n(23405),m=e=>{let{control:t,setValue:n}=(0,a.Gc)(),i=(0,u.useSearchParams)(),l=e=>i.get(e)||"";return(0,r.jsxs)(p.rj,{width:"100%",columns:"3",gapX:"4",style:{gridTemplateColumns:"3fr 1fr"},children:[(0,r.jsx)(a.Qr,{name:"searchQuery",control:t,render:e=>{let{field:t}=e;return(0,r.jsx)(f.Z,{...t,placeholder:"جستجو نام کاربر یا شماره تماس",defaultValue:l("searchQuery")?l("searchQuery"):""})}}),(0,r.jsx)(a.Qr,{name:"status",control:t,render:t=>{let{field:a}=t;return(0,r.jsx)(p.fp,{...a,placeholder:"وضعیت کاربر",value:String(a.value),onValueChange:t=>{n("page",1),a.onChange(t),e.onSubmit()},size:"3",children:d.C0.map(e=>(0,r.jsx)(p.Ql,{value:String(e.value),children:e.key},e.id))})}})]})},y=n(57818),h=n(43397),g=n(1845),b=n(21949);let x=(0,y.default)(()=>Promise.resolve().then(n.bind(n,62188)),{loadableGenerated:{webpack:()=>[62188]},ssr:!1});var v=e=>{let{data:t}=e,n=(0,h.tv)();return(0,r.jsx)(p.xu,{width:"100%",style:{overflow:"scroll"},children:(0,r.jsx)(x,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,r.jsx)(p.xv,{...b.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:e.row.index+1})},{accessorKey:"fullName",header:"نام و نام خانوادگی",cell:e=>{let t=e.getValue();return(0,r.jsx)(p.xv,{...b.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:t&&""!==t.trim()?t:"-"})}},{accessorKey:"mobileNumber",header:"شماره تماس",cell:e=>{let t=e.getValue();return(0,r.jsx)(p.xv,{...b.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:t||"-"})}},{accessorKey:"email",header:"ایمیل",cell:e=>{let t=e.getValue();return(0,r.jsx)(p.xv,{...b.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:g.K.gray[11]},children:t||"-"})}},{accessorKey:"status",header:"نوع کاربر",cell:e=>{let t=e.getValue();return(0,r.jsx)(p.xv,{...b.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?g.K.pink[3]:g.K.blue[3],color:!1===t?g.K.pink[11]:g.K.blue[11],borderRadius:4},children:!0===t?"فعال":"غیر فعال"})}},{id:"details",cell:e=>{let{row:t}=e,a=t.original;return(0,r.jsx)(p.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,r.jsx)(p.zx,{variant:"surface",onClick:e=>{console.log("item",a),e.preventDefault(),n.push("/user/".concat(a.id))},children:"..."})})}}],data:t})})},w=n(68665),j=n(72051),_=n(51360);function C(e){let{searchParams:t}=e,n=(0,l.NL)(),u=(0,a.cI)({defaultValues:{searchQuery:t.searchQuery||"",status:t.status?t.status:"",page:t.page?t.page:1}}),{watch:d,handleSubmit:f,setValue:y}=u,{data:h,isLoading:g,isError:b,isFetching:x}=(0,o.a)({queryKey:["user-list"],queryFn:async()=>await (0,c.AW)(d())}),C=e=>{let t=Object.entries((0,s.v7)(e,!0)).map(e=>{let[t,n]=e;return Array.isArray(n)?"".concat(encodeURIComponent(t),"=").concat(n.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");n.invalidateQueries({queryKey:["user-list"]});let r="".concat(window.location.pathname,"?").concat(t);window.history.pushState(null,"",r)};return(0,r.jsxs)(p.kC,{direction:"column",children:[(0,r.jsx)(w.Z,{title:"لیست کاربران",isNavigation:!0}),(0,r.jsx)(p.xu,{pr:{initial:"8px",lg:"90px"},children:(0,r.jsx)(p.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(0,r.jsx)(a.RV,{...u,children:(0,r.jsx)("form",{onSubmit:f(C),children:(0,r.jsxs)(p.kC,{width:"100%",direction:"column",gap:"5",p:"5",children:[(0,r.jsx)(m,{onSubmit:()=>C(d())}),b?(0,r.jsx)(p.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):g||x?(0,r.jsx)(i.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):(0,r.jsx)(v,{data:null==h?void 0:h.latestUsers}),(null==h?void 0:h.latestUsers)&&(0,r.jsxs)(p.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(j.Z,{current:Number(d("page")),total:null==h?void 0:h.totalPages,onPageChange:e=>{y("page",e),C(d())}}),(0,r.jsx)(_.Z,{data:null==h?void 0:h.latestUsers,currentPage:null==h?void 0:h.currentPage,totalCount:null==h?void 0:h.totalCount})]})]})})})})})]})}},57818:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var r=n(50551),a=n.n(r)},50551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=n(99920);n(57437),n(2265);let a=r._(n(40148));function i(e,t){var n;let r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let i={...r,...t};return(0,a.default)({...i,modules:null==(n=i.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=n(55592);function a(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},40148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let r=n(57437),a=n(2265),i=n(10912),l=n(61481);function o(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...s,...e},n=(0,a.lazy)(()=>t.loader().then(o)),c=t.loading;function u(e){let o=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,s=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(l.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(a.Suspense,{fallback:o,children:s})}return u.displayName="LoadableComponent",u}},61481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let r=n(57437),a=n(58512);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,a.getExpectedRequestStore)("next/dynamic css"),i=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,r.jsx)(r.Fragment,{children:i.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},13457:function(e,t,n){"use strict";var r=n(2265);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){var t,n=e.open,i=e.onClose,l=e.children,o=e.style,s=e.enableOverlay,c=e.overlayColor,u=e.overlayOpacity,d=e.zIndex,p=void 0===d?100:d,f=e.duration,m=e.direction,y=e.size,h=e.className,g=e.customIdSuffix,b=e.lockBackgroundScroll,x=void 0!==b&&b,v=e.overlayClassName,w=(0,r.useRef)(null);(0,r.useEffect)(function(){w.current=window.document.querySelector("body"),w.current&&x&&(w.current.style.overflow=n?"hidden":"")},[n]);var j=(0,r.useMemo)(function(){return g||(Math.random()+1).toString(36).substring(7)},[g]),_={backgroundColor:(void 0===c?"#000":c).toString(),opacity:void 0===u?.4:u,zIndex:p},C=a({zIndex:p+1,transitionDuration:(void 0===f?500:f)+"ms"},{left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t=void 0===y?250:y,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}}[m],o);return r.createElement("div",{id:"EZDrawer"+j,className:"EZDrawer"},r.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+j,className:"EZDrawer__checkbox",onChange:void 0===i?function(){}:i,checked:n}),r.createElement("nav",{role:"navigation",id:"EZDrawer__container"+j,style:C,className:"EZDrawer__container "+h},l),(void 0===s||s)&&r.createElement("label",{htmlFor:"EZDrawer__checkbox"+j,id:"EZDrawer__overlay"+j,className:"EZDrawer__overlay "+(void 0===v?"":v),style:_}))}},37969:function(e,t,n){"use strict";n.d(t,{CM:function(){return b},OD:function(){return m},RJ:function(){return x},Vq:function(){return g},Vr:function(){return y},XZ:function(){return c},X_:function(){return o},b:function(){return h},h4:function(){return s},nJ:function(){return l},o$:function(){return u},rI:function(){return d},tu:function(){return f},v7:function(){return i}});var r=n(10008),a=n(31067);let i=(e,t)=>{let n={};if(!e||"object"!=typeof e)return n;let r=e=>null!=e&&"null"!==e&&0!==e&&"none"!==e&&!(Array.isArray(e)&&0===e.length);return Object.keys(e).forEach(a=>{let i=e[a];(!1===t?r(i):r(i)&&""!==i)&&(n[a]=i)}),n},l=async(e,t,n)=>(await a.x.get("comment/placeComments/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data;function o(e){return Object.entries(e).map(e=>{let[t,n]=e;return Array.isArray(n)?"".concat(encodeURIComponent(t),"=").concat(n.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&")}let s=async e=>{let t=o(i(e,!0));return(await a.x.get("places/allPlacesWithFilter?".concat(t))).data.data},c=async(e,t,n)=>(await a.x.get("places/placeImproveContent/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data,u=async(e,t,n)=>(await a.x.get("/places/getPlaceUserUploads/".concat(e,"?page=").concat(t,"&limit=6"),{headers:{limit:n}})).data.data,d=async e=>{let t=o(i(e,!0));return(await a.x.get("article/filter?".concat(t))).data.data};function p(e,t){return void 0!==e&&Array.isArray(t)&&0!==t.length?[{placeId:e,placeRelationType:"MAIN"},...t.map(e=>({placeId:e,placeRelationType:"RELATION"}))]:[]}let f=async e=>{console.log(e,"paramsparamsparamsparamsparams");let t=i({parentCategoryId:Number(e.parentCategoryId),categoryId:Number(e.categoryId),provincesId:Number(e.provincesId),citiesId:Number(e.citiesId),is_published:"true"===e.is_published||!0===e.is_published||"false"!==e.is_published&&!1!==e.is_published&&String(e.is_published),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),title:e.title,writer:e.writer,tableOfContent:e.articleDetail.length>0?e.articleDetail[0].descriptions:"",content:e.articleDetail.length>0?e.articleDetail[1].descriptions:"",on_titile:e.on_titile,source:e.source,summery:e.summery,brief:e.brief,slug:e.slug,inMain:e.inMain,inTop:e.inTop,tags:String(e.metakeywords).split(","),keywords:String(e.keywords).split(","),meta_title:e.meta_title,meta_description:e.meta_description,source_link:e.source_link,isSlider:e.isSlider,type:e.type,places:p(Number(e.mainPoint),e.placeRelationType)});return(await a.x.post("/article",t)).data},m=async(e,t)=>{let n=i({parentCategoryId:Number(t.parentCategoryId),categoryId:Number(t.categoryId),provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&String(t.is_published),status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&String(t.status),title:t.title,writer:t.writer,isSlider:t.isSlider,on_titile:t.on_titile,source:t.source,summery:t.summery,brief:t.brief,slug:t.slug,tableOfContent:t.articleDetail[0].descriptions,content:t.articleDetail[1].descriptions,inMain:t.inMain,inTop:t.inTop,tags:String(t.metakeywords).split(","),keywords:String(t.keywords).split(","),meta_title:t.meta_title,meta_description:t.meta_description,source_link:t.source_link,type:t.type,places:p(Number(t.mainPoint),t.placeRelationType)},!1);return(await a.x.patch("/article/id/".concat(e),n)).data},y=async e=>(await a.x.get("/article/id/".concat(e))).data,h=async e=>(await r.j9.patch("upload/edit",e)).data,g=async e=>{let t=new FormData;return t.append("type",e.type),t.append("articleImageType",e.articleImageType),t.append("articleId",e.articleId.toString()),t.append("file",e.file),t.append("summery",e.summery),t.append("slug",e.slug),t.append("alt",e.alt),t.append("description",e.description),t.append("townId",e.townId.toString()),await r.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})},b=async e=>(await r.j9.delete("upload",{data:{id:e,type:"ARTICLE"}})).data,x=async e=>(await a.x.delete("article/id/".concat(e))).data},27918:function(e,t,n){"use strict";n.d(t,{AW:function(){return l},bG:function(){return c},mP:function(){return o},uz:function(){return s},v7:function(){return i}});var r=n(31067),a=n(37969);let i=e=>{let t={};return Object.keys(e).forEach(n=>{let r=e[n];null===r||""===r||Array.isArray(r)&&0===r.length||0===r||"null"===r||(t[n]=r)}),t},l=async e=>{let t=i(e),n=(0,a.X_)(t);return(await r.x.get("user?limit=10&".concat(n))).data.data},o=async(e,t)=>{let n=i(e);delete n.sort;let l=(0,a.X_)(n);return(await r.x.get("user/trips?userId=".concat(t,"&limit=10&").concat(l))).data.data},s=async(e,t)=>{let n=i({...t,mobile:null,pic:null});return(await r.x.patch("user/profile/partiallyEditUser/".concat(e),n)).data},c=async e=>(await r.x.get("user/userInfoForUserTrips/".concat(e))).data.data},51537:function(e,t,n){"use strict";n.d(t,{C0:function(){return r},Qd:function(){return i},gy:function(){return a}});let r=[{id:1,key:"فعال",value:"true",disable:!1},{id:2,key:"غیر فعال",value:"false",disable:!1},{id:3,key:"هیچکدام",value:"all",disable:!1}],a=[{id:1,name:"تاریخ رفت - جدیدترین "},{id:2,name:"تاریخ رفت - قدیمی ترین"},{id:3,name:"تاریخ بازگشت - جدیدترین"},{id:4,name:"تاریخ بازگشت - قدیمی ترین"}],i=[{id:1,name:"مرد",value:"MALE"},{id:2,name:"زن",value:"FEMALE"}]},51360:function(e,t,n){"use strict";var r=n(57437);n(2265);var a=n(1845),i=n(21949),l=n(7507);t.Z=e=>{let{data:t,currentPage:n,totalCount:o,keyText:s="برنامه"}=e,c=null==t?void 0:t.length,u=(n-1)*c+1,d=Math.min(u+c-1,o);return(0,r.jsx)(l.xv,{...i.p.body2,style:{color:a.K.gray[11]},children:"".concat(u,"-").concat(d," از ").concat(o," ").concat(s)})}},68672:function(e,t,n){"use strict";n.d(t,{SP:function(){return l},yM:function(){return o}});var r=n(89183),a=n(1845),i=n(7507);(0,r.zo)(i.kC).withConfig({componentId:"sc-2ff6b81e-0"})(["padding:2px 12px;border-radius:8px;background-color:",";font-size:10px;align-items:center;"],a.K.gray[3]),r.zo.div.withConfig({componentId:"sc-2ff6b81e-1"})(["height:0.1px;border-top:",";width:-webkit-fill-available;opacity:30%;"],e=>{let{color:t}=e;return t?"1px dashed ".concat(t):"1px dashed ".concat(a.K.gray[12])});let l=(0,r.zo)(i.kC).withConfig({componentId:"sc-2ff6b81e-2"})(["max-height:48px;align-items:center;border:1px solid ",";border-radius:12px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}"],a.K.gray[7],a.K.blue[2],a.i.shadow1,a.K.gray[3]),o=(0,r.zo)(i.nv).withConfig({componentId:"sc-2ff6b81e-3"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;background-color:transparent !important;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},72051:function(e,t,n){"use strict";var r=n(57437);n(2265),n(61170);var a=n(57818),i=n(7507),l=n(19051);n(34916);let o=(0,a.default)(()=>n.e(8372).then(n.bind(n,94212)).then(e=>e.default),{loadableGenerated:{webpack:()=>[94212]},ssr:!1});t.Z=e=>{let{current:t,total:n,onPageChange:a,...s}=e;return(0,r.jsx)(i.kC,{align:"center",maxWidth:"348px",children:(0,r.jsx)(o,{current:t,total:n,onPageChange:a,...s,className:"pagination",previousLabel:(0,r.jsx)(l.jR,{}),nextLabel:(0,r.jsx)(l.EB,{})})})}},23405:function(e,t,n){"use strict";var r=n(57437),a=n(2265),i=n(39343),l=n(93191),o=n(7507),s=n(19051),c=n(68672);let u=(0,a.forwardRef)((e,t)=>{let{placeholder:n,defaultValue:a,...u}=e,d=(0,l.NL)(),{setValue:p}=(0,i.Gc)();return(0,r.jsxs)(c.SP,{...u,ref:t,height:"fit-content",children:[(0,r.jsx)(c.yM,{...u,ref:t,placeholder:n,variant:"surface",defaultValue:a}),(0,r.jsx)(o.hU,{size:"4",variant:"soft",onClick:()=>{p("page",1),d.invalidateQueries({queryKey:["article-list"]}),d.invalidateQueries({queryKey:["user-list"]})},children:(0,r.jsx)(s.HN,{})})]})});u.displayName="CustomSearch",t.Z=u},83657:function(){},61170:function(){},34916:function(){},43767:function(e,t,n){"use strict";n.d(t,{a:function(){return d}});var r=n(83667),a=n(2265),i=n(69948),l=n(53e3),o=n(93191),s=n(99038),c=n(88472),u=n(38261);function d(e,t){return function(e,t,n){var r,d,p,f;let m=(0,o.NL)(n),y=(0,s.S)(),h=(0,l._)(),g=m.defaultQueryOptions(e);null===(d=m.getDefaultOptions().queries)||void 0===d||null===(r=d._experimental_beforeQuery)||void 0===r||r.call(d,g),g._optimisticResults=y?"isRestoring":"optimistic",(0,u.A8)(g),(0,c.pf)(g,h),(0,c.JN)(h);let[b]=a.useState(()=>new t(m,g)),x=b.getOptimisticResult(g);if(a.useSyncExternalStore(a.useCallback(e=>{let t=y?()=>void 0:b.subscribe(i.V.batchCalls(e));return b.updateResult(),t},[b,y]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),a.useEffect(()=>{b.setOptions(g,{listeners:!1})},[g,b]),(0,u.SB)(g,x))throw(0,u.j8)(g,b,h);if((0,c.KJ)({result:x,errorResetBoundary:h,throwOnError:g.throwOnError,query:m.getQueryCache().get(g.queryHash)}))throw x.error;return null===(f=m.getDefaultOptions().queries)||void 0===f||null===(p=f._experimental_afterQuery)||void 0===p||p.call(f,g,x),g.notifyOnChangeProps?x:b.trackResult(x)}(e,r.z,t)}}},function(e){e.O(0,[1553,3048,1383,3497,8334,5452,8310,1825,8702,3397,9269,7138,7507,9051,6265,2971,7023,1744],function(){return e(e.s=48017)}),_N_E=e.O()}]);