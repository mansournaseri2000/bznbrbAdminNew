(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5524],{30392:function(e,r,t){Promise.resolve().then(t.bind(t,88141))},88141:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Q}});var n=t(57437),l=t(2265),s=t(39343),a=t(94963),i=t(76351),o=t(25524),c=t(27918),d=t(93191),u=t(51537),x=t(96396),h=t(52892),g=t(72549),j=t(31072),p=t(1845),y=e=>{let{onClose:r,userId:t,data:l}=e,{mutate:a,isPending:i}=(0,o.useMutation)({mutationFn:async e=>(0,c.uz)(t,e),onSuccess:async e=>{!0===e.status?(f.invalidateQueries({queryKey:["user_info"]}),(0,j.ToastSuccess)("اطلاعات مورد نظر با موفقیت بروزرسانی شد"),r()):(0,j.ToastError)("لطفا دوباره امتحان نمایید")},onError:e=>{console.log(e)}});console.log("USER_DATA",l.userInfo);let{control:y,setValue:m,watch:v}=(0,s.cI)({defaultValues:{name:null==l?void 0:l.userInfo.name,last_name:null==l?void 0:l.userInfo.last_name,email:null==l?void 0:l.userInfo.email,birthday:null==l?void 0:l.userInfo.birthday,pic:null==l?void 0:l.userInfo.pic,gender:null==l?void 0:l.userInfo.gender,mobile:null==l?void 0:l.userInfo.mobile,status:null==l?void 0:l.userInfo.status}}),f=(0,d.useQueryClient)();return(0,n.jsxs)(x.rj,{width:"100%",gap:"5",style:{backgroundColor:p.K.gray[2]},children:[(0,n.jsx)(x.kC,{width:"100%",justify:"center",mt:"5",children:(0,n.jsx)(x.kC,{width:"120px",height:"120px",justify:"center",align:"center",style:{border:"1px solid gray",borderRadius:"100%"},children:(0,n.jsx)(x.xv,{children:"image picker"})})}),(0,n.jsxs)(x.rj,{columns:"2",gap:"5",px:"5",children:[(0,n.jsx)(s.Qr,{name:"name",control:y,render:e=>{let{field:r}=e;return(0,n.jsx)(x.nv,{...r,placeholder:"نام"})}}),(0,n.jsx)(s.Qr,{name:"last_name",control:y,render:e=>{let{field:r}=e;return(0,n.jsx)(x.nv,{...r,placeholder:"نام خانوادگی"})}}),(0,n.jsx)(s.Qr,{name:"gender",control:y,render:e=>{let{field:r}=e;return(0,n.jsx)(x.fp,{...r,placeholder:"جنسیت",size:"3",value:String(r.value),onValueChange:e=>{r.onChange(e)},children:u.Qd.map(e=>(0,n.jsx)(x.Ql,{value:e.value,children:e.name},e.id))})}}),(0,n.jsx)(s.Qr,{name:"birthday",control:y,render:e=>(0,n.jsx)(h.Z,{inputMode:"none",placeholder:"تاریخ تولد",value:e.field.value,onChangeValue:e=>{m("birthday",Number(new Date(e)))}})}),(0,n.jsx)(s.Qr,{name:"mobile",control:y,render:e=>{let{field:r}=e;return(0,n.jsx)(x.nv,{...r,placeholder:"شماره تماس"})}}),(0,n.jsx)(s.Qr,{name:"email",control:y,render:e=>{let{field:r}=e;return(0,n.jsx)(x.nv,{...r,placeholder:"ایمیل"})}})]}),(0,n.jsx)(g.Z,{submitButtonText:"ثبت تغییرات",closeButtonText:"لغو و بازگشت",isLoading:i,onCloseButton:r,onSubmit:()=>a(v())})]})},m=t(16463),v=t(19156),f=t(47964),b=t(77855),C=t(60376),I=t(83882),k=e=>{let[r,t]=(0,l.useState)(!1),a=(0,m.useSearchParams)(),o=(0,m.useRouter)(),{control:c,watch:d,reset:h,setValue:j}=(0,s.Gc)(),{data:p}=(0,i.useQuery)({queryKey:["constant"],queryFn:async()=>(0,v.iV)()}),y=()=>{let e=d();(0,C.L)(o,a,e),t(!1)},k=()=>{h(),(0,C.L)(o,a,{}),t(!1)},K=e=>{switch(e){case 1:return j("sortDate","des"),j("targetDate","dep");case 2:return j("targetDate","dep"),j("sortDate","asc");case 3:return j("targetDate","ret"),j("sortDate","des");case 4:return j("targetDate","ret"),j("sortDate","asc")}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsx)(x.hU,{colorVariant:"BLUE",variant:"soft",size:"3",onClick:()=>t(!0),children:(0,n.jsx)(I.wn,{})}),(0,n.jsx)(x.kC,{width:"240px",children:(0,n.jsx)(s.Qr,{name:"sort",control:c,render:r=>{let{field:t}=r;return(0,n.jsx)(x.fp,{size:"3",...t,placeholder:"مرتب سازی بر اساس",value:String(t.value),onValueChange:r=>{let n=u.gy.find(e=>e.id===Number(r));K(null==n?void 0:n.id),t.onChange(r),e.onSubmit()},children:u.gy.map(e=>(0,n.jsx)(x.Ql,{value:String(e.id),children:e.name},e.id))})}})})]}),(0,n.jsxs)(x.u_,{isOpen:r,onClose:()=>t(!1),children:[(0,n.jsx)(b.Z,{title:"فیلتر",icon:(0,n.jsx)(I.ol,{}),handleClose:()=>t(!1)}),(0,n.jsx)(f.Z,{province:(null==p?void 0:p.provinces)?p.provinces:[]}),(0,n.jsx)(g.Z,{submitButtonText:"اعمال فیلتر ها",closeButtonText:"حذف فیلتر ها",onCloseButton:()=>k(),onSubmit:()=>y()})]})]})},K=t(12767),w=t(10504),D=t(21949),S=e=>{let{data:r}=e,t=(0,m.useRouter)();return(0,n.jsx)(K.iA,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,n.jsx)(x.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:p.K.gray[11]},children:e.row.index+1})},{accessorKey:"sourceCityName",header:"مبدا",cell:e=>{let r=e.getValue();return(0,n.jsx)(x.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:p.K.gray[11]},children:r||"-"})}},{accessorKey:"destinationCity",header:"مقصد",cell:e=>{let r=e.getValue();return(0,n.jsx)(x.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:p.K.gray[11]},children:r||"-"})}},{accessorKey:"createAt",header:"تاریخ ساخت برنامه",cell:e=>{let r=e.getValue();return(0,n.jsx)(x.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:p.K.gray[11]},children:r||"-"})}},{accessorKey:"departureDate",header:"تاریخ رفت",cell:e=>{let r=e.getValue();return(0,n.jsx)(x.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:p.K.gray[11]},children:r?(0,w.l)(r):"-"})}},{accessorKey:"returnDate",header:"تاریخ بازگشت",cell:e=>{let r=e.getValue();return(0,n.jsx)(x.xv,{...D.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:p.K.gray[11]},children:r?(0,w.l)(r):"-"})}},{id:"details",cell:e=>{let{row:r}=e,l=r.original;return(0,n.jsx)(x.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,n.jsx)(x.zx,{variant:"surface",onClick:()=>{console.log("item",l),t.push("/plans/user-plan")},children:"..."})})}}],data:r})},E=t(72051),V=t(51360),z=t(94881),P=t(86555);function Q(e){let{params:r}=e,[t,d]=(0,l.useState)(!1),u=r.slug,h=(0,s.cI)({defaultValues:{page:1,limit:10,sortDate:"",sort:"",userId:Number(u),targetDate:"",originCityId:"",originProvinceId:"",destinationCityId:"",destinationProvinceId:"",departureDateStart:"",departureDateEnd:"",returnDateStart:"",returnDateEnd:""}}),{watch:g,setValue:j,handleSubmit:m}=h,{data:v,isLoading:f,isFetching:C}=(0,i.useQuery)({queryKey:["user_info"],queryFn:async()=>(0,c.bG)(u)}),{data:K,mutate:w,isPending:Q}=(0,o.useMutation)({mutationFn:async e=>(0,c.gG)(e),onSuccess:async e=>{console.log("OnSuccess",e)},onError:async e=>{console.log("OnError",e)}});(0,l.useEffect)(()=>{w(g())},[]);let _=()=>{w(g()),console.log("run")};return console.log("DATA",K),(0,n.jsx)(s.RV,{...h,children:(0,n.jsxs)("form",{onSubmit:m(_),children:[(0,n.jsxs)(x.rj,{width:"100%",gapY:"5",children:[f||C?(0,n.jsx)(a.$j,{style:{marginInline:"auto",scale:2,marginBlock:"20px"}}):(0,n.jsx)(z.Z,{...null==v?void 0:v.userInfo,type:"USER",onEditInfo:()=>d(!0)}),(0,n.jsx)(x.xv,{...D.p.title2,style:{color:p.K.gray[12]},children:"برنامه های کاربر"}),(0,n.jsx)(k,{onSubmit:()=>w(g())}),Q?(0,n.jsx)(a.$j,{style:{marginInline:"auto",scale:2,marginBlock:"20px"}}):(0,n.jsx)(S,{data:(null==K?void 0:K.latestTrips)?K.latestTrips:[]}),(null==K?void 0:K.latestTrips)&&(0,n.jsxs)(x.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsx)(E.Z,{current:g("page"),total:null==K?void 0:K.totalPages,onPageChange:e=>{j("page",e),(0,P.Z)(e),_()}}),(0,n.jsx)(V.Z,{data:null==K?void 0:K.latestTrips,currentPage:null==K?void 0:K.currentPage,totalCount:null==K?void 0:K.totalCount})]})]}),(0,n.jsxs)(x.u_,{isOpen:t,onClose:()=>d(!1),children:[(0,n.jsx)(b.Z,{title:"ویرایش کاربر",icon:(0,n.jsx)(I.x8,{}),handleClose:()=>d(!1)}),(0,n.jsx)(y,{onClose:()=>d(!1),userId:u,data:v})]})]})})}},94881:function(e,r,t){"use strict";var n=t(57437);t(2265);var l=t(66648),s=t(96396),a=t(40252),i=t(1845),o=t(21949),c=t(10504);r.Z=e=>{let{pic:r,name:t,last_name:u,birthday:x,gender:h,mobile:g,email:j,type:p,status:y,onShowProfile:m,onDeActive:v,onEditInfo:f}=e;return(0,n.jsx)(a.default,{hero:"سازنده برنامه",children:(0,n.jsxs)(s.rj,{width:"100%",columns:"3",px:"4",gapX:"5",style:{gridTemplateColumns:"auto 3fr auto"},children:[(0,n.jsx)(s.xu,{width:"130px",height:"130px",position:"relative",children:(0,n.jsx)(l.default,{src:r||"",alt:"تصویر کاربر",fill:!0,style:{borderRadius:"100px",border:"1px solid ".concat(i.K.blue[9])}})}),(0,n.jsxs)(s.rj,{width:"3",columns:"3",gapY:"5",children:[(0,n.jsx)(d,{label:"نام",value:t}),(0,n.jsx)(d,{label:"نام خانوادگی",value:u}),(0,n.jsx)(d,{label:"تاریخ تولد",value:(0,c.l)(x)}),(0,n.jsx)(d,{label:"جنسیت",value:"MALE"===h?"مرد":"زن"}),(0,n.jsx)(d,{label:"شماره تماس",value:g}),(0,n.jsx)(d,{label:"ایمیل",value:j})]}),(0,n.jsx)(s.kC,{align:"end",children:"PLAN"===p?(0,n.jsx)(s.zx,{size:"3",colorVariant:"PINK",onClick:m,children:(0,n.jsx)(s.xv,{...o.p.body1,children:"مشاهده پروفایل"})}):(0,n.jsxs)(s.kC,{direction:"column",gap:"2",children:[!0===y?(0,n.jsx)(s.zx,{size:"3",colorVariant:"PINK",onClick:v,children:(0,n.jsx)(s.xv,{...o.p.body1,children:"غیرفعال کردن کاربر"})}):(0,n.jsx)(s.zx,{size:"3",onClick:f,children:(0,n.jsx)(s.xv,{...o.p.body1,children:"فعال سازی کاربر"})}),(0,n.jsx)(s.zx,{size:"3",onClick:f,children:(0,n.jsx)(s.xv,{...o.p.body1,children:"ویرایش اطلاعات"})})]})})]})})};let d=e=>{let{label:r,value:t}=e;return(0,n.jsxs)(s.kC,{align:"center",gap:"2",children:[(0,n.jsx)(s.xv,{...o.p.body2,style:{color:i.K.gray[10]},children:r}),(0,n.jsx)(s.xv,{...o.p.body1,style:{color:i.K.gray[12]},children:t})]})}},40252:function(e,r,t){"use strict";var n=t(57437),l=t(2265),s=t(89183),a=t(96396),i=t(1845);let o=l.forwardRef((e,r)=>{let{hero:t,children:l,...s}=e;return(0,n.jsxs)(c,{ref:r,...s,children:[(0,n.jsx)(a.kC,{className:"style",p:"8px 16px",children:(0,n.jsx)(a.X6,{as:"h6",size:"6",style:{color:i.K.gray[1],fontWeight:700},children:t})}),(0,n.jsx)(a.rj,{gap:"16px",p:"24px 16px 16px 16px",children:l})]})});r.default=o;let c=(0,s.ZP)(a.rj).withConfig({componentId:"sc-3db28b84-0"})(["background-color:",";border-radius:8px;border:1px solid ",";min-height:100px;.style{border-top-right-radius:8px;border-top-left-radius:8px;height:fit-content;background-color:",";}"],i.K.gray[2],i.K.gray[6],i.K.blue[10])}},function(e){e.O(0,[1553,3048,3497,8334,5452,8310,6990,9212,9673,3348,4518,9269,6648,5639,6396,3882,6412,9491,2971,7023,1744],function(){return e(e.s=30392)}),_N_E=e.O()}]);