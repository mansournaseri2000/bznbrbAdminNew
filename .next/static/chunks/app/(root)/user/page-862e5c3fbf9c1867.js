(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9960,3767],{48017:function(e,t,r){Promise.resolve().then(r.bind(r,67580))},67580:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(57437);r(2265);var a=r(39343),i=r(94963),o=r(93191),l=r(43767),s=r(37969),c=r(27918),u=r(16463),d=r(51537),p=r(7507),f=r(23405),h=e=>{let{control:t,setValue:r}=(0,a.Gc)(),i=(0,u.useSearchParams)(),o=e=>i.get(e)||"";return(0,n.jsxs)(p.rj,{width:"100%",columns:"3",gapX:"4",style:{gridTemplateColumns:"3fr 1fr"},children:[(0,n.jsx)(a.Qr,{name:"searchQuery",control:t,render:e=>{let{field:t}=e;return(0,n.jsx)(f.Z,{...t,placeholder:"جستجو نام کاربر یا شماره تماس",defaultValue:o("searchQuery")?o("searchQuery"):""})}}),(0,n.jsx)(a.Qr,{name:"status",control:t,render:t=>{let{field:a}=t;return(0,n.jsx)(p.fp,{...a,placeholder:"وضعیت کاربر",value:String(a.value),onValueChange:t=>{r("page",1),a.onChange(t),e.onSubmit()},size:"3",children:d.C0.map(e=>(0,n.jsx)(p.Ql,{value:String(e.value),children:e.key},e.id))})}})]})},m=r(57818),y=r(1845),g=r(21949);let x=(0,m.default)(()=>Promise.resolve().then(r.bind(r,62188)),{loadableGenerated:{webpack:()=>[62188]},ssr:!1});var b=e=>{let{data:t}=e,r=(0,u.useRouter)();return(0,n.jsx)(p.xu,{width:"100%",style:{overflow:"scroll"},children:(0,n.jsx)(x,{columns:[{accessorKey:"index",header:"ردیف",cell:e=>(0,n.jsx)(p.xv,{...g.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:y.K.gray[11]},children:e.row.index+1})},{accessorKey:"fullName",header:"نام و نام خانوادگی",cell:e=>{let t=e.getValue();return(0,n.jsx)(p.xv,{...g.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:y.K.gray[11]},children:t&&""!==t.trim()?t:"-"})}},{accessorKey:"mobileNumber",header:"شماره تماس",cell:e=>{let t=e.getValue();return(0,n.jsx)(p.xv,{...g.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:y.K.gray[11]},children:t||"-"})}},{accessorKey:"email",header:"ایمیل",cell:e=>{let t=e.getValue();return(0,n.jsx)(p.xv,{...g.p.body2,style:{display:"flex",height:"100%",alignItems:"center",color:y.K.gray[11]},children:t||"-"})}},{accessorKey:"status",header:"نوع کاربر",cell:e=>{let t=e.getValue();return(0,n.jsx)(p.xv,{...g.p.body2,style:{display:"flex",width:"fit-content",alignItems:"center",padding:"4px 8px",backgroundColor:!1===t?y.K.pink[3]:y.K.blue[3],color:!1===t?y.K.pink[11]:y.K.blue[11],borderRadius:4},children:!0===t?"فعال":"غیر فعال"})}},{id:"details",cell:e=>{let{row:t}=e,a=t.original;return(0,n.jsx)(p.kC,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,n.jsx)(p.zx,{variant:"surface",onClick:e=>{console.log("item",a),e.preventDefault(),r.push("/user/".concat(a.id))},children:"..."})})}}],data:t})})},j=r(29962),v=r(72051),w=r(51360);function C(e){let{searchParams:t}=e,r=(0,o.NL)(),u=(0,a.cI)({defaultValues:{searchQuery:t.searchQuery||"",status:t.status?t.status:"",page:t.page?t.page:1}}),{watch:d,handleSubmit:f,setValue:m}=u,{data:y,isLoading:g,isError:x,isFetching:C}=(0,l.a)({queryKey:["user-list"],queryFn:async()=>await (0,c.AW)(d())}),_=e=>{let t=Object.entries((0,s.v7)(e,!0)).map(e=>{let[t,r]=e;return Array.isArray(r)?"".concat(encodeURIComponent(t),"=").concat(r.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))}).join("&");r.invalidateQueries({queryKey:["user-list"]});let n="".concat(window.location.pathname,"?").concat(t);window.history.pushState(null,"",n)};return(0,n.jsxs)(p.kC,{direction:"column",children:[(0,n.jsx)(j.default,{title:"لیست کاربران",isNavigation:!0}),(0,n.jsx)(p.xu,{pr:"90px",children:(0,n.jsx)(p.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(0,n.jsx)(a.RV,{...u,children:(0,n.jsx)("form",{onSubmit:f(_),children:(0,n.jsxs)(p.kC,{width:"100%",direction:"column",gap:"5",p:"5",children:[(0,n.jsx)(h,{onSubmit:()=>_(d())}),x?(0,n.jsx)(p.xv,{children:"مشکلی پیش آمده لطفا مجدد تلاش نمایید"}):g||C?(0,n.jsx)(i.$j,{style:{marginInline:"auto",scale:3,marginBlock:"20px"}}):(0,n.jsx)(b,{data:null==y?void 0:y.latestUsers}),(null==y?void 0:y.latestUsers)&&(0,n.jsxs)(p.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsx)(v.Z,{current:Number(d("page")),total:null==y?void 0:y.totalPages,onPageChange:e=>{m("page",e),_(d())}}),(0,n.jsx)(w.Z,{data:null==y?void 0:y.latestUsers,currentPage:null==y?void 0:y.currentPage,totalCount:null==y?void 0:y.totalCount})]})]})})})})})]})}},57818:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(50551),a=r.n(n)},50551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=r(99920);r(57437),r(2265);let a=n._(r(40148));function i(e,t){var r;let n={loading:e=>{let{error:t,isLoading:r,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let i={...n,...t};return(0,a.default)({...i,modules:null==(r=i.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(55592);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},40148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let n=r(57437),a=r(2265),i=r(10912),o=r(61481);function l(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},c=function(e){let t={...s,...e},r=(0,a.lazy)(()=>t.loader().then(l)),c=t.loading;function u(e){let l=c?(0,n.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,s=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(o.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(a.Suspense,{fallback:l,children:s})}return u.displayName="LoadableComponent",u}},61481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let n=r(57437),a=r(58512);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),i=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,n.jsx)(n.Fragment,{children:i.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},37969:function(e,t,r){"use strict";r.d(t,{CM:function(){return x},OD:function(){return h},RJ:function(){return b},Vq:function(){return g},Vr:function(){return m},XZ:function(){return c},X_:function(){return l},b:function(){return y},h4:function(){return s},nJ:function(){return o},o$:function(){return u},rI:function(){return d},tu:function(){return f},v7:function(){return i}});var n=r(10008),a=r(31067);let i=(e,t)=>{let r={};if(!e||"object"!=typeof e)return r;let n=e=>null!=e&&"null"!==e&&0!==e&&"none"!==e&&!(Array.isArray(e)&&0===e.length);return Object.keys(e).forEach(a=>{let i=e[a];(!1===t?n(i):n(i)&&""!==i)&&(r[a]=i)}),r},o=async(e,t,r)=>(await a.x.get("comment/placeComments/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data;function l(e){return Object.entries(e).map(e=>{let[t,r]=e;return Array.isArray(r)?"".concat(encodeURIComponent(t),"=").concat(r.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))}).join("&")}let s=async e=>{let t=l(i(e,!0));return(await a.x.get("places/allPlacesWithFilter?".concat(t))).data.data},c=async(e,t,r)=>(await a.x.get("places/placeImproveContent/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data,u=async(e,t,r)=>(await a.x.get("/places/getPlaceUserUploads/".concat(e,"?page=").concat(t,"&limit=6"),{headers:{limit:r}})).data.data,d=async e=>{let t=l(i(e,!0));return(await a.x.get("article/filter?".concat(t))).data.data};function p(e,t){return void 0!==e&&Array.isArray(t)&&0!==t.length?[{placeId:e,placeRelationType:"MAIN"},...t.map(e=>({placeId:e,placeRelationType:"RELATION"}))]:[]}let f=async e=>{console.log(e,"paramsparamsparamsparamsparams");let t=i({parentCategoryId:Number(e.parentCategoryId),categoryId:Number(e.categoryId),provincesId:Number(e.provincesId),citiesId:Number(e.citiesId),is_published:"true"===e.is_published||!0===e.is_published||"false"!==e.is_published&&!1!==e.is_published&&String(e.is_published),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),title:e.title,writer:e.writer,tableOfContent:e.articleDetail.length>0?e.articleDetail[0].descriptions:"",content:e.articleDetail.length>0?e.articleDetail[1].descriptions:"",on_titile:e.on_titile,source:e.source,summery:e.summery,brief:e.brief,slug:e.slug,inMain:e.inMain,inTop:e.inTop,tags:String(e.metakeywords).split(","),keywords:String(e.keywords).split(","),meta_title:e.meta_title,meta_description:e.meta_description,source_link:e.source_link,isSlider:e.isSlider,type:e.type,places:p(Number(e.mainPoint),e.placeRelationType)});return(await a.x.post("/article",t)).data},h=async(e,t)=>{let r=i({parentCategoryId:Number(t.parentCategoryId),categoryId:Number(t.categoryId),provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&String(t.is_published),status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&String(t.status),title:t.title,writer:t.writer,isSlider:t.isSlider,on_titile:t.on_titile,source:t.source,summery:t.summery,brief:t.brief,slug:t.slug,tableOfContent:t.articleDetail[0].descriptions,content:t.articleDetail[1].descriptions,inMain:t.inMain,inTop:t.inTop,tags:String(t.metakeywords).split(","),keywords:String(t.keywords).split(","),meta_title:t.meta_title,meta_description:t.meta_description,source_link:t.source_link,type:t.type,places:p(Number(t.mainPoint),t.placeRelationType)},!1);return(await a.x.patch("/article/id/".concat(e),r)).data},m=async e=>(await a.x.get("/article/id/".concat(e))).data,y=async e=>(await n.j9.patch("upload/edit",e)).data,g=async e=>{let t=new FormData;return t.append("type",e.type),t.append("articleImageType",e.articleImageType),t.append("articleId",e.articleId.toString()),t.append("file",e.file),t.append("summery",e.summery),t.append("slug",e.slug),t.append("alt",e.alt),t.append("description",e.description),t.append("townId",e.townId.toString()),await n.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})},x=async e=>(await n.j9.delete("upload",{data:{id:e,type:"ARTICLE"}})).data,b=async e=>(await a.x.delete("article/id/".concat(e))).data},27918:function(e,t,r){"use strict";r.d(t,{AW:function(){return o},bG:function(){return c},mP:function(){return l},uz:function(){return s},v7:function(){return i}});var n=r(31067),a=r(37969);let i=e=>{let t={};return Object.keys(e).forEach(r=>{let n=e[r];null===n||""===n||Array.isArray(n)&&0===n.length||0===n||"null"===n||(t[r]=n)}),t},o=async e=>{let t=i(e),r=(0,a.X_)(t);return(await n.x.get("user?limit=10&".concat(r))).data.data},l=async(e,t)=>{let r=i(e);delete r.sort;let o=(0,a.X_)(r);return(await n.x.get("user/trips?userId=".concat(t,"&limit=10&").concat(o))).data.data},s=async(e,t)=>{let r=i({...t,mobile:null,pic:null});return(await n.x.patch("user/profile/partiallyEditUser/".concat(e),r)).data},c=async e=>(await n.x.get("user/userInfoForUserTrips/".concat(e))).data.data},51537:function(e,t,r){"use strict";r.d(t,{C0:function(){return n},Qd:function(){return i},gy:function(){return a}});let n=[{id:1,key:"فعال",value:"true",disable:!1},{id:2,key:"غیر فعال",value:"false",disable:!1},{id:3,key:"هیچکدام",value:"all",disable:!1}],a=[{id:1,name:"تاریخ رفت - جدیدترین "},{id:2,name:"تاریخ رفت - قدیمی ترین"},{id:3,name:"تاریخ بازگشت - جدیدترین"},{id:4,name:"تاریخ بازگشت - قدیمی ترین"}],i=[{id:1,name:"مرد",value:"MALE"},{id:2,name:"زن",value:"FEMALE"}]},29962:function(e,t,r){"use strict";var n=r(57437);r(2265);var a=r(16463),i=r(89183),o=r(7507),l=r(27533),s=r(1845),c=r(21949);t.default=e=>{let{title:t,isNavigation:r}=e,i=(0,a.useRouter)();return(0,n.jsx)(u,{children:(0,n.jsxs)(d,{children:[(0,n.jsx)(o.xv,{...c.p.title1,style:{color:s.K.gray[11]},children:t}),r&&(0,n.jsx)(o.hU,{size:"3",variant:"surface",onClick:()=>i.back(),children:(0,n.jsx)(l.jb,{color:"#373737"})})]})})};let u=i.ZP.header.withConfig({componentId:"sc-132ec2d4-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],s.K.gray[6],s.K.gray[1],s.i.shadow1),d=(0,i.ZP)(o.kC).withConfig({componentId:"sc-132ec2d4-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},51360:function(e,t,r){"use strict";var n=r(57437);r(2265);var a=r(1845),i=r(21949),o=r(7507);t.Z=e=>{let{data:t,currentPage:r,totalCount:l,keyText:s="برنامه"}=e,c=null==t?void 0:t.length,u=(r-1)*c+1,d=Math.min(u+c-1,l);return(0,n.jsx)(o.xv,{...i.p.body2,style:{color:a.K.gray[11]},children:"".concat(u,"-").concat(d," از ").concat(l," ").concat(s)})}},72051:function(e,t,r){"use strict";var n=r(57437);r(2265),r(61170);var a=r(57818),i=r(7507),o=r(27533);r(34916);let l=(0,a.default)(()=>r.e(8372).then(r.bind(r,94212)).then(e=>e.default),{loadableGenerated:{webpack:()=>[94212]},ssr:!1});t.Z=e=>{let{current:t,total:r,onPageChange:a,...s}=e;return(0,n.jsx)(i.kC,{align:"center",maxWidth:"348px",children:(0,n.jsx)(l,{current:t,total:r,onPageChange:a,...s,className:"pagination",previousLabel:(0,n.jsx)(o.jR,{}),nextLabel:(0,n.jsx)(o.EB,{})})})}},23405:function(e,t,r){"use strict";var n=r(57437),a=r(2265),i=r(39343),o=r(93191),l=r(89183),s=r(7507),c=r(27533),u=r(1845);let d=(0,a.forwardRef)((e,t)=>{let{placeholder:r,defaultValue:a,...l}=e,u=(0,o.NL)(),{setValue:d}=(0,i.Gc)();return(0,n.jsxs)(p,{...l,ref:t,height:"fit-content",children:[(0,n.jsx)(f,{...l,ref:t,placeholder:r,variant:"surface",defaultValue:a}),(0,n.jsx)(s.hU,{size:"4",variant:"soft",onClick:()=>{d("page",1),u.invalidateQueries({queryKey:["article-list"]}),u.invalidateQueries({queryKey:["user-list"]})},children:(0,n.jsx)(c.HN,{})})]})});d.displayName="CustomSearch",t.Z=d;let p=(0,l.ZP)(s.kC).withConfig({componentId:"sc-11ef2f74-0"})(["max-height:48px;align-items:center;border:1px solid ",";border-radius:12px;padding-inline-start:1rem;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}"],u.K.gray[7],u.K.blue[2],u.i.shadow1,u.K.gray[3]),f=(0,l.ZP)(s.nv).withConfig({componentId:"sc-11ef2f74-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},31067:function(e,t,r){"use strict";r.d(t,{x:function(){return c},z:function(){return u}});var n=r(16463),a=r(38472),i=r(15263),o=r(86300).Buffer;let l="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),s=o.from(l).toString("base64"),c=a.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"up-auth":"Basic ".concat(s),"Content-Type":"application/json"}}),u=a.Z.create({baseURL:"https://uploader.darkube.app/admin/uploads/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(s)}});u.interceptors.request.use(e=>{let t=new i.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.request.use(e=>{let t=new i.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,n.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,n.redirect)("/error")):((0,n.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})},61170:function(){},34916:function(){},43767:function(e,t,r){"use strict";r.d(t,{a:function(){return d}});var n=r(83667),a=r(2265),i=r(69948),o=r(53e3),l=r(93191),s=r(99038),c=r(88472),u=r(38261);function d(e,t){return function(e,t,r){var n,d,p,f;let h=(0,l.NL)(r),m=(0,s.S)(),y=(0,o._)(),g=h.defaultQueryOptions(e);null===(d=h.getDefaultOptions().queries)||void 0===d||null===(n=d._experimental_beforeQuery)||void 0===n||n.call(d,g),g._optimisticResults=m?"isRestoring":"optimistic",(0,u.A8)(g),(0,c.pf)(g,y),(0,c.JN)(y);let[x]=a.useState(()=>new t(h,g)),b=x.getOptimisticResult(g);if(a.useSyncExternalStore(a.useCallback(e=>{let t=m?()=>void 0:x.subscribe(i.V.batchCalls(e));return x.updateResult(),t},[x,m]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),a.useEffect(()=>{x.setOptions(g,{listeners:!1})},[g,x]),(0,u.SB)(g,b))throw(0,u.j8)(g,x,y);if((0,c.KJ)({result:b,errorResetBoundary:y,throwOnError:g.throwOnError,query:h.getQueryCache().get(g.queryHash)}))throw b.error;return null===(f=h.getDefaultOptions().queries)||void 0===f||null===(p=f._experimental_afterQuery)||void 0===p||p.call(f,g,b),g.notifyOnChangeProps?b:x.trackResult(b)}(e,n.z,t)}}},function(e){e.O(0,[1553,3048,3497,8334,5452,8310,1825,8702,9269,7507,7533,2971,7023,1744],function(){return e(e.s=48017)}),_N_E=e.O()}]);