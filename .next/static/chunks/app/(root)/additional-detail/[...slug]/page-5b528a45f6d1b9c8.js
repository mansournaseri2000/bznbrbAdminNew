(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4291],{80690:function(e,t,n){Promise.resolve().then(n.bind(n,76669)),Promise.resolve().then(n.bind(n,13304)),Promise.resolve().then(n.bind(n,68602)),Promise.resolve().then(n.bind(n,7580)),Promise.resolve().then(n.bind(n,61485)),Promise.resolve().then(n.bind(n,56935)),Promise.resolve().then(n.bind(n,52431)),Promise.resolve().then(n.bind(n,99497)),Promise.resolve().then(n.bind(n,80023)),Promise.resolve().then(n.bind(n,67553)),Promise.resolve().then(n.bind(n,9646)),Promise.resolve().then(n.bind(n,62447)),Promise.resolve().then(n.bind(n,27071)),Promise.resolve().then(n.bind(n,76697)),Promise.resolve().then(n.bind(n,44581)),Promise.resolve().then(n.bind(n,36756)),Promise.resolve().then(n.bind(n,76895)),Promise.resolve().then(n.bind(n,2738)),Promise.resolve().then(n.bind(n,23195)),Promise.resolve().then(n.bind(n,62187)),Promise.resolve().then(n.bind(n,76484)),Promise.resolve().then(n.bind(n,62381)),Promise.resolve().then(n.bind(n,90393)),Promise.resolve().then(n.bind(n,26480)),Promise.resolve().then(n.bind(n,36982)),Promise.resolve().then(n.bind(n,90448)),Promise.resolve().then(n.bind(n,29340)),Promise.resolve().then(n.bind(n,50807)),Promise.resolve().then(n.bind(n,13800)),Promise.resolve().then(n.bind(n,43986)),Promise.resolve().then(n.bind(n,35952)),Promise.resolve().then(n.bind(n,17076)),Promise.resolve().then(n.bind(n,74906)),Promise.resolve().then(n.bind(n,29962)),Promise.resolve().then(n.bind(n,20375)),Promise.resolve().then(n.bind(n,81365)),Promise.resolve().then(n.bind(n,3630)),Promise.resolve().then(n.bind(n,34402)),Promise.resolve().then(n.bind(n,27485)),Promise.resolve().then(n.bind(n,50581)),Promise.resolve().then(n.bind(n,55713)),Promise.resolve().then(n.bind(n,78393)),Promise.resolve().then(n.bind(n,19733)),Promise.resolve().then(n.bind(n,90269)),Promise.resolve().then(n.bind(n,82596)),Promise.resolve().then(n.bind(n,69242)),Promise.resolve().then(n.bind(n,24360)),Promise.resolve().then(n.bind(n,23759)),Promise.resolve().then(n.bind(n,45553)),Promise.resolve().then(n.bind(n,68457)),Promise.resolve().then(n.bind(n,50842))},1365:function(e,t,n){"use strict";n.d(t,{CP:function(){return a},EI:function(){return d},Fw:function(){return O},H1:function(){return C},HJ:function(){return p},HV:function(){return x},Mn:function(){return k},N$:function(){return u},PT:function(){return g},V$:function(){return w},Ve:function(){return j},Wo:function(){return h},_4:function(){return P},aR:function(){return y},fC:function(){return S},fQ:function(){return m},ht:function(){return l},hu:function(){return Z},jM:function(){return I},jx:function(){return T},kv:function(){return b},lv:function(){return v},rG:function(){return z},uu:function(){return c},vD:function(){return D},vw:function(){return s},wc:function(){return o},x8:function(){return F},zZ:function(){return f},zv:function(){return K}});var i=n(31067),r=n(27918);let a=async()=>(await i.x.get("/category?sort=asc")).data.data,s=async e=>(await i.x.post("/category/array",{categories:e})).data,o=async e=>{let t=(0,r.v7)(e);return(await i.x.post("category/createSubcategories",t)).data},l=async(e,t)=>(await i.x.patch("/category/editCategory/".concat(e),{name:t})).data,c=async e=>(await i.x.delete("/category/delete/".concat(e))).data,d=async e=>(await i.x.get("/category/id/".concat(e))).data.data[0],u=async()=>(await i.x.get("/features")).data.data,p=async e=>(await i.x.get("/features/getFeatureGroup/".concat(e))).data.data,h=async e=>(await i.x.post("/features/array",{features:e})).data,x=async e=>(await i.x.post("/features/addFeature",e)).data,g=async(e,t)=>(await i.x.patch("/features/editFeatureGroup/".concat(e),{name:t})).data,j=async(e,t)=>(await i.x.patch("/features/editFeature/".concat(e),{name:t})).data,m=async e=>(await i.x.delete("/features/deleteFeature/".concat(e))).data,y=async e=>(await i.x.delete("/features/deleteFeatureGroup/".concat(e))).data,v=async()=>(await i.x.get("/provinces/sorted/")).data.data,f=async e=>(await i.x.get("/provinces/sorted/".concat(e))).data.data,b=async e=>(await i.x.get("/cities/id/".concat(e))).data.data,w=async e=>(await i.x.post("/cities/array",{cities:e})).data,C=async e=>(await i.x.post("/town/create",e)).data,P=async e=>(await i.x.get("/provinces/map/".concat(e))).data.data,k=async e=>(await i.x.delete("/provinces/map",{data:e})).data,I=async e=>(await i.x.get("/provinces/about/".concat(e))).data.data,O=async e=>(await i.x.post("/provinces/detail",e)).data,S=async e=>(await i.x.patch("/provinces/detail",e)).data,T=async e=>(await i.x.post("/provinces/about",e)).data,K=async e=>{let t=new FormData;return t.append("type",e.type),t.append("categoryId",e.categoryId.toString()),t.append("file",e.file),(await i.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},z=async e=>{let t=new FormData;return t.append("type",e.type),t.append("categoryId",e.categoryId.toString()),t.append("file",e.file),(await i.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},Z=async e=>{let t=new FormData;return t.append("type",e.type),t.append("featureId",e.featureId.toString()),t.append("file",e.file),(await i.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},F=async e=>{let t=new FormData;return t.append("type",e.type),t.append("featureId",e.featureId.toString()),t.append("file",e.file),(await i.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},D=async e=>{let t=new FormData;return t.append("type",e.type),t.append("aboutId",e.aboutId.toString()),t.append("file",e.file),(await i.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data}},27918:function(e,t,n){"use strict";n.d(t,{bG:function(){return l},gG:function(){return s},qD:function(){return a},uz:function(){return o},v7:function(){return r}});var i=n(31067);let r=e=>{let t={};return Object.keys(e).forEach(n=>{let i=e[n];null===i||""===i||Array.isArray(i)&&0===i.length||0===i||"null"===i||(t[n]=i)}),t},a=async e=>{let t=r({...e});return(await i.x.post("user",t)).data.data},s=async e=>{let t=r({...e,originCityId:Number(e.originCityId),originProvinceId:Number([e.originProvinceId]),destinationCityId:Number(e.destinationCityId),destinationProvinceId:Number(e.destinationProvinceId),departureDateStart:new Date(e.departureDateStart).getTime()?new Date(e.departureDateStart).getTime():null,departureDateEnd:new Date(e.departureDateEnd).getTime()?new Date(e.departureDateEnd).getTime():null,returnDateStart:new Date(e.returnDateStart).getTime()?new Date(e.returnDateStart).getTime():null,returnDateEnd:new Date(e.returnDateEnd).getTime()?new Date(e.returnDateEnd).getTime():null,createdAt:new Date(e.createdAt).getTime()?new Date(e.returnDateEnd).getTime():null,sort:null,userId:null});return(await i.x.post("trips/recentTrips",t,{headers:{userId:e.userId}})).data.data},o=async(e,t)=>{let n=r({...t,mobile:null,pic:null});return(await i.x.patch("user/profile/partiallyEditUser/".concat(e),n)).data},l=async e=>(await i.x.get("user/userInfoForUserTrips/".concat(e))).data.data},50807:function(e,t,n){"use strict";n.d(t,{default:function(){return O}});var i=n(57437),r=n(2265),a=n(4867),s=n(94963),o=n(76351),l=n(1365),c=n(28326),d=n(77855),u=n(31072),p=n(1845),h=n(21949),x=n(39343),g=n(93191),j=n(25524),m=n(32644),y=n(19780),v=n(30884),f=n(97622),b=n(49609),w=n(72549),C=n(84781),P=e=>{let{data:t,setIsOpen:n}=e,r=(0,x.cI)({defaultValues:{name:null==t?void 0:t.name,imagePath:null==t?void 0:t.banner,iconPath:null==t?void 0:t.icon,localImagePath:null,localIconPath:null,isBanner:null!=t&&!!t.banner,isIcon:null!=t&&!!t.icon}}),{control:a,watch:s}=r,o=(0,g.useQueryClient)(),{mutate:d}=(0,j.useMutation)({mutationFn:async e=>await (0,l.zv)(e)}),{mutate:p}=(0,j.useMutation)({mutationFn:async e=>await (0,l.rG)(e)}),{mutate:h,isPending:m}=(0,j.useMutation)({mutationFn:async()=>await (0,l.ht)(t.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("localImagePath"),i=s("localIconPath");e&&d({categoryId:String(t.id),file:s("imagePath"),type:"CATEGORY"}),i&&p({categoryId:String(t.id),file:s("iconPath"),type:"CATEGORY"}),o.invalidateQueries({queryKey:["categories"]}),(0,u.ToastSuccess)("دسته بندی مورد نظر با موفقیت ویرایش شد"),n({key:"edit-category",isOpen:!1})}else(0,u.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.jsxs)(x.RV,{...r,children:[(0,i.jsxs)(c.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:[(0,i.jsxs)(c.kC,{gap:"3",children:[s("imagePath")?(0,i.jsx)(b.Z,{resetStore:"isBanner",type:"image",localPath:"".concat(s("localImagePath")),filePath:null==t?void 0:t.banner,isOrigin:s("isBanner")}):(0,i.jsx)(f.Z,{resetStore:"isBanner",name:"imagePath",localPath:"localImagePath",children:(0,i.jsx)(C.Z,{type:"pic"})}),s("iconPath")?(0,i.jsx)(b.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(s("localIconPath")),filePath:null==t?void 0:t.icon,isOrigin:s("isIcon")}):(0,i.jsx)(f.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(C.Z,{type:"icon"})})]}),(0,i.jsx)(x.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,i.jsx)(c.nv,{...t,placeholder:"",style:{width:"50%",margin:"0 auto"}})}})]}),(0,i.jsx)(w.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>n({key:"edit-category",isOpen:!1}),onSubmit:()=>h(),isLoading:m})]})};let k=(0,r.forwardRef)((e,t)=>{let{name:n,id:a,isEditable:f,hasMedia:b,selected:w,onSelect:C}=e,[k,I]=(0,r.useState)({isOpen:!1,key:"edit-category"}),O=(0,g.useQueryClient)(),{control:S,watch:T,setValue:K,getValues:z}=(0,x.cI)({defaultValues:{name:""}}),{data:Z,isLoading:F,isFetching:D}=(0,o.useQuery)({queryKey:["single-category",a],queryFn:async()=>(0,l.EI)(a),initialData:e,enabled:w}),{mutate:Q,isPending:B}=(0,j.useMutation)({mutationFn:async()=>(0,l.uu)(a),onSuccess:async e=>{!0===e.status?(O.invalidateQueries({queryKey:["categories"]}),(0,u.ToastSuccess)("دسته بندی مورد نظر با موفقیت حذف شد"),I({...k,isOpen:!1})):(0,u.ToastError)("لطفا دوباره تلاش نمایید")}}),{mutate:R,isPending:E}=(0,j.useMutation)({mutationFn:async()=>(0,l.wc)({name:T("name"),parent_id:a}),onSuccess:async e=>{!0===e.status?(O.invalidateQueries({queryKey:["single-category"]}),K("name",""),(0,u.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت ایجاد شد")):(0,u.ToastError)("لطفا دوباره تلاش نمایید")}}),L=()=>{let e=z("name").trim();if(!e){(0,u.ToastError)("نام زیر دسته بندی نمی‌تواند خالی باشد");return}if(Z&&Z.children.some(t=>t.name===e)){(0,u.ToastError)("این زیر دسته بندی از قبل وجود دارد");return}R()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.rj,{width:"100%",gapY:"5",ref:t,onClick:()=>{C()},children:(0,i.jsx)(v.default,{hero:n,withEdit:!0,withDelete:!0,hasMedia:!0===b,isDisableDelete:!1===f,onEdit:e=>{e.stopPropagation(),I({key:"edit-category",isOpen:!0}),C()},onDelete:e=>{e.stopPropagation(),I({key:"delete-category",isOpen:!0})},children:(0,i.jsxs)(c.kC,{direction:"column",gap:"5",children:[(0,i.jsx)(c.kC,{width:"100%",align:"center",gap:"5",wrap:"wrap",children:F||D?(0,i.jsx)(s.$j,{style:{margin:"0 auto",scale:1.2}}):(null==Z?void 0:Z.children.length)===0?(0,i.jsxs)(c.kC,{direction:"column",gap:"5",children:[(0,i.jsx)(c.xv,{...h.p.title1,style:{color:p.K.gray[11]},children:"هنوز زیر دسته بندی اضافه نشده است."}),(0,i.jsx)(c.xv,{...h.p.paragraph2,style:{color:p.K.gray[11]},children:"از فیلد زیر استفاده کنید و زیردسته بندی را به لیست اضافه کنید."})]}):(0,i.jsx)(i.Fragment,{children:null==Z?void 0:Z.children.map(e=>(0,i.jsx)(m.Z,{type:"category",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))})}),(0,i.jsx)(c.xu,{width:"40%",children:(0,i.jsx)(x.Qr,{name:"name",control:S,render:e=>{let{field:t}=e;return(0,i.jsx)(y.Z,{...t,placeholder:"افزودن زیر دسته بندی",onClick:()=>L(),isLoading:E})}})})]})})}),(0,i.jsxs)(c.u_,{isOpen:k.isOpen,onClose:()=>I({...k,isOpen:!1}),children:["edit-category"===k.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{title:"ویرایش دسته بندی",handleClose:()=>I({...k,isOpen:!1})}),(0,i.jsx)(P,{setIsOpen:()=>I({key:"edit-category",isOpen:!1}),data:null!=Z?Z:{name:"",id:null}})]}),"delete-category"===k.key&&(0,i.jsxs)(c.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(c.xv,{children:["آیا از حذف دسته بندی ",(0,i.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:n})," اطمینان دارید؟"," "]}),(0,i.jsxs)(c.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(c.zx,{variant:"soft",size:"4",onClick:()=>Q(),children:(0,i.jsx)(c.xv,{...h.p.body3,children:B?(0,i.jsx)(s.$j,{}):"بله"})}),(0,i.jsx)(c.zx,{type:"button",onClick:()=>I({...k,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(c.xv,{...h.p.body3,children:"خیر"})})]})]})]})]})});var I=e=>{let{data:t,setIsOpen:n}=e,{control:r,watch:a,setValue:s,getValues:o}=(0,x.cI)({defaultValues:{name:"",parent_id:0,categoryList:t.map(e=>e.name)}}),d=(0,g.useQueryClient)(),{mutate:m,isPending:v}=(0,j.useMutation)({mutationFn:async e=>await (0,l.vw)(e),onSuccess:e=>{!0===e.status?((0,u.ToastSuccess)("دسته بندی مورد نظر با موفقیت ایجاد شد"),d.invalidateQueries({queryKey:["categories"]}),n(!1)):(0,u.ToastError)("لطفا دوباره تلاش نمایید")}}),f=()=>{let e=o("name").trim(),t=o("categoryList");!e||(null==t?void 0:t.includes(e))?e&&(0,u.ToastError)("دسته بندی تکراری است"):(s("categoryList",[...t,e]),s("name",""))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.kC,{direction:"column",p:"12px 16px",gap:"4",children:[(0,i.jsx)(c.xu,{width:"50%",children:(0,i.jsx)(x.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,i.jsx)(y.Z,{...t,placeholder:"افزودن دسته بندی",onClick:()=>f()})}})}),(0,i.jsx)(c.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:"1px solid ".concat(p.K.gray[7]),borderRadius:8},children:a("categoryList").map((e,t)=>(0,i.jsx)(c.xu,{p:"9.5px 16px",style:{backgroundColor:p.K.gray[3],borderRadius:16},children:(0,i.jsx)(c.xv,{...h.p.body1,style:{color:p.K.gray[11]},children:e})},t))})]}),(0,i.jsx)(w.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onSubmit:()=>{let e=o("categoryList"),n=t.map(e=>e.name),i=e.filter(e=>!n.includes(e)).map(e=>({name:e,parent_id:0}));i.length>0?m(i):(0,u.ToastError)("هیچ دسته بندی جدیدی اضافه نشده است")},onCloseButton:()=>n(!1),isLoading:v})]})},O=()=>{let[e,t]=(0,r.useState)(!1),[n,x]=(0,r.useState)(null),{data:g,isLoading:j,isFetching:m,isError:y}=(0,o.useQuery)({queryKey:["categories"],queryFn:async()=>await (0,l.CP)()});return j||m?(0,i.jsx)(c.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,i.jsx)(s.$j,{style:{scale:3}})}):!g||y?(0,u.ToastError)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(console.log("category data",g),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.kC,{width:"100%",direction:"column",gap:"5",children:[(0,i.jsx)(c.kC,{width:"100%",align:"center",justify:"between",children:(0,i.jsx)(c.zx,{size:"3",variant:"ghost",onClick:()=>t(!0),style:{paddingBlock:11.5},children:(0,i.jsxs)(c.kC,{align:"center",gap:"2",children:[(0,i.jsx)(a.pOD,{width:16,height:16,style:{color:p.K.blue[10]}}),(0,i.jsx)(c.xv,{...h.p.body1,children:"افزودن دسته بندی"})]})})}),null==g?void 0:g.map((e,t)=>(0,i.jsx)(k,{selected:n===e.id,onSelect:()=>x(e.id),currentIndex:t,...e},e.id))]}),(0,i.jsxs)(c.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,i.jsx)(d.Z,{title:"افزودن دسته بندی",handleClose:()=>t(!1)}),(0,i.jsx)(I,{data:g,setIsOpen:t})]})]}))}},32644:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var i=n(57437),r=n(2265),a=n(94963),s=n(93191),o=n(25524),l=n(89183),c=n(1365),d=n(28326),u=n(77855),p=n(31072),h=n(27533),x=n(1845),g=n(21949),j=n(39343),m=n(97622),y=n(49609),v=n(72549),f=n(84781),b=e=>{let{data:t,setIsOpen:n}=e,r=(0,j.cI)({defaultValues:{name:null==t?void 0:t.name,imagePath:null==t?void 0:t.banner,iconPath:null==t?void 0:t.icon,localImagePath:null,localIconPath:null,isBanner:null!=t&&!!t.banner,isIcon:null!=t&&!!t.icon}}),{control:a,watch:l}=r,u=(0,s.useQueryClient)(),{mutate:h}=(0,o.useMutation)({mutationFn:async e=>await (0,c.zv)(e)}),{mutate:x}=(0,o.useMutation)({mutationFn:async e=>await (0,c.rG)(e)}),{mutate:g,isPending:b}=(0,o.useMutation)({mutationFn:async()=>await (0,c.ht)(t.id,l("name")),onSuccess:e=>{if(!0===e.status){let e=l("localImagePath"),i=l("localIconPath");e&&h({categoryId:String(t.id),file:l("imagePath"),type:"CATEGORY"}),i&&x({categoryId:String(t.id),file:l("iconPath"),type:"CATEGORY"}),u.invalidateQueries({queryKey:["single-category"]}),(0,p.ToastSuccess)("دسته بندی مورد نظر با موفقیت ویرایش شد"),n({key:"edit-subCategory",isOpen:!1})}else(0,p.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.jsxs)(j.RV,{...r,children:[(0,i.jsxs)(d.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:[(0,i.jsx)(d.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:(0,i.jsxs)(d.kC,{gap:"3",children:[l("imagePath")?(0,i.jsx)(y.Z,{resetStore:"isBanner",type:"image",localPath:"".concat(l("localImagePath")),filePath:null==t?void 0:t.banner,isOrigin:l("isBanner")}):(0,i.jsx)(m.Z,{resetStore:"isBanner",name:"imagePath",localPath:"localImagePath",children:(0,i.jsx)(f.Z,{type:"pic"})}),l("iconPath")?(0,i.jsx)(y.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(l("localIconPath")),filePath:null==t?void 0:t.icon,isOrigin:l("isIcon")}):(0,i.jsx)(m.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(f.Z,{type:"icon"})})]})}),(0,i.jsx)(j.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"",style:{width:"50%",margin:"0 auto"}})}})]}),(0,i.jsx)(v.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>n({key:"edit-subCategory",isOpen:!1}),onSubmit:()=>g(),isLoading:b})]})},w=e=>{let{setIsOpen:t,data:n}=e,r=(0,j.cI)({defaultValues:{name:n.name,imagePath:null==n?void 0:n.banner,iconPath:null==n?void 0:n.icon,localImagePath:null,localIconPath:null,isBanner:null!=n&&!!n.banner,isIcon:null!=n&&!!n.icon}}),{control:a,watch:s}=r;return(0,i.jsxs)(j.RV,{...r,children:[(0,i.jsx)(d.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:(0,i.jsxs)(d.kC,{gap:"3",children:[s("imagePath")?(0,i.jsx)(y.Z,{resetStore:"isBanner",type:"image",localPath:"".concat(s("localImagePath")),filePath:null==n?void 0:n.banner,isOrigin:s("isBanner")}):(0,i.jsx)(m.Z,{resetStore:"isBanner",name:"imagePath",localPath:"localImagePath",children:(0,i.jsx)(f.Z,{type:"pic"})}),s("iconPath")?(0,i.jsx)(y.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(s("localIconPath")),filePath:null==n?void 0:n.icon,isOrigin:s("isIcon")}):(0,i.jsx)(m.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(f.Z,{type:"icon"})})]})}),(0,i.jsx)(j.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"",style:{width:"50%",margin:"0 auto"}})}}),(0,i.jsx)(v.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit-town",isOpen:!1})})]})},C=e=>{let{setIsOpen:t,data:n}=e,r=(0,j.cI)({defaultValues:{name:null==n?void 0:n.name,imagePath:null==n?void 0:n.banner,iconPath:null==n?void 0:n.icon,localImagePath:null,localIconPath:null,isBanner:null!=n&&!!n.banner,isIcon:null!=n&&!!n.icon}}),{control:a,watch:l}=r,u=(0,s.useQueryClient)(),{mutate:h}=(0,o.useMutation)({mutationFn:async e=>await (0,c.hu)(e)}),{mutate:x}=(0,o.useMutation)({mutationFn:async e=>await (0,c.x8)(e)}),{mutate:g,isPending:b}=(0,o.useMutation)({mutationFn:async()=>await (0,c.Ve)(n.id,l("name")),onSuccess:e=>{if(!0===e.status){let e=l("localImagePath"),i=l("localIconPath");e&&h({featureId:String(n.id),file:l("imagePath"),type:"FEATURE"}),i&&x({featureId:String(n.id),file:l("iconPath"),type:"FEATURE"}),u.invalidateQueries({queryKey:["feature-group"]}),(0,p.ToastSuccess)(" ویژگی مورد نظر با موفقیت ویرایش شد"),t({key:"edit-feature",isOpen:!1})}else(0,p.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.jsxs)(j.RV,{...r,children:[(0,i.jsxs)(d.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:[(0,i.jsxs)(d.kC,{gap:"3",children:[l("imagePath")?(0,i.jsx)(y.Z,{resetStore:"isBanner",type:"image",localPath:"".concat(l("localImagePath")),filePath:null==n?void 0:n.banner,isOrigin:l("isBanner")}):(0,i.jsx)(m.Z,{resetStore:"isBanner",name:"imagePath",localPath:"localImagePath",children:(0,i.jsx)(f.Z,{type:"pic"})}),l("iconPath")?(0,i.jsx)(y.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(l("localIconPath")),filePath:null==n?void 0:n.icon,isOrigin:l("isIcon")}):(0,i.jsx)(m.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(f.Z,{type:"icon"})})]}),(0,i.jsx)(j.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"",style:{width:"50%",margin:"0 auto"}})}})]}),(0,i.jsx)(v.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit-feature",isOpen:!1}),onSubmit:()=>g(),isLoading:b})]})},P=e=>{let{label:t,hasMedia:n,type:l,id:j,data:m}=e,[y,v]=(0,r.useState)({key:"edit-subCategory",isOpen:!1}),f=(0,s.useQueryClient)(),{mutate:P,isPending:I}=(0,o.useMutation)({mutationFn:async()=>(0,c.uu)(j),onSuccess:async e=>{!0===e.status?(f.invalidateQueries({queryKey:["single-category"]}),(0,p.ToastSuccess)("زیر دسته بندی مورد نظر با موفقیت حذف شد"),v({...y,isOpen:!1})):(0,p.ToastError)("لطفا دوباره تلاش نمایید")}}),{mutate:O,isPending:S}=(0,o.useMutation)({mutationFn:async()=>await (0,c.fQ)(j),onSuccess:e=>{!0===e.status?(f.invalidateQueries({queryKey:["feature-group"]}),(0,p.ToastSuccess)("آیتم مورد نظر با موفقیت حذف شد"),v({...y,isOpen:!1})):(0,p.ToastError)("لطفا دوباره تلاش نمایید")}}),T=e=>{switch(e){case"edit":"category"===l?v({isOpen:!0,key:"edit-subCategory"}):"feature"===l?v({isOpen:!0,key:"edit-feature"}):"town"===l&&v({isOpen:!0,key:"edit-town"});break;case"delete":"category"===l?v({isOpen:!0,key:"delete-subCategory"}):"feature"===l?v({isOpen:!0,key:"delete-feature"}):"town"===l&&v({isOpen:!0,key:"delete-town"})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.kC,{align:"center",gap:"3",p:"9.5px 16px",style:{backgroundColor:x.K.gray[3],borderRadius:16},children:[n&&(0,i.jsx)(h.eA,{width:14.13,height:14.13}),(0,i.jsx)(d.xv,{...g.p.body1,style:{color:x.K.gray[11]},children:t}),(0,i.jsx)(d.hU,{variant:"surface",size:"1",onClick:()=>T("edit"),children:(0,i.jsx)(h.z,{width:16,height:16})}),(0,i.jsx)(d.hU,{variant:"surface",size:"1",onClick:()=>T("delete"),children:(0,i.jsx)(k,{width:16,height:16})})]}),(0,i.jsxs)(d.u_,{isOpen:y.isOpen,onClose:()=>v({...y,isOpen:!1}),children:["edit-subCategory"===y.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:"ویرایش زیر دسته بندی",handleClose:()=>v({...y,isOpen:!1})}),(0,i.jsx)(b,{setIsOpen:()=>v({key:"edit-subCategory",isOpen:!1}),data:m})]}),"delete-subCategory"===y.key&&(0,i.jsxs)(d.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(d.xv,{children:["آیا از حذف زیر دسته بندی ",(0,i.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",t]})," اطمینان دارید؟"]}),(0,i.jsxs)(d.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(d.zx,{variant:"soft",size:"4",onClick:()=>P(),children:(0,i.jsx)(d.xv,{...g.p.body3,children:I?(0,i.jsx)(a.$j,{}):"بله"})}),(0,i.jsx)(d.zx,{type:"button",onClick:()=>v({...y,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(d.xv,{...g.p.body3,children:"خیر"})})]})]}),"edit-feature"===y.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:"ویرایش ویژگی",handleClose:()=>v({...y,isOpen:!1})}),(0,i.jsx)(C,{setIsOpen:()=>v({key:"edit-feature",isOpen:!1}),data:m})]}),"delete-feature"===y.key&&(0,i.jsxs)(d.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(d.xv,{children:["آیا از حذف ویژگی ",(0,i.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",t]})," اطمینان دارید؟"]}),(0,i.jsxs)(d.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(d.zx,{variant:"soft",size:"4",onClick:()=>O(),children:(0,i.jsx)(d.xv,{...g.p.body3,children:S?(0,i.jsx)(a.$j,{}):"بله"})}),(0,i.jsx)(d.zx,{type:"button",onClick:()=>v({...y,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(d.xv,{...g.p.body3,children:"خیر"})})]})]}),"edit-town"===y.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:"ویرایش شهر",handleClose:()=>v({...y,isOpen:!1})}),(0,i.jsx)(w,{setIsOpen:()=>v({key:"edit-town",isOpen:!1}),data:m})]}),"delete-town"===y.key&&(0,i.jsxs)(d.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(d.xv,{children:["آیا از حذف ویژگی ",(0,i.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",t]})," اطمینان دارید؟"]}),(0,i.jsxs)(d.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(d.zx,{variant:"soft",size:"4",children:(0,i.jsx)(d.xv,{...g.p.body3,children:"بله"})}),(0,i.jsx)(d.zx,{type:"button",onClick:()=>v({...y,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(d.xv,{...g.p.body3,children:"خیر"})})]})]})]})]})};let k=(0,l.ZP)(h.x8).withConfig({componentId:"sc-94d14e7a-0"})(["path{fill:",";}"],x.K.pink[11])},13800:function(e,t,n){"use strict";n.d(t,{default:function(){return T}});var i=n(57437),r=n(2265),a=n(16463),s=n(4867),o=n(94963),l=n(76351),c=n(1365),d=n(28326),u=n(77855),p=n(31072),h=n(1845),x=n(21949),g=n(39343),j=n(93191),m=n(25524),y=n(19780),v=n(72549),f=e=>{let{setIsOpen:t,data:n}=e,r=Number((0,a.useParams)().slug[2]),{control:s,watch:o,getValues:l,setValue:u}=(0,g.cI)({defaultValues:{name:"",provinceId:r,cityList:null==n?void 0:n.map(e=>e.name)}}),f=(0,j.useQueryClient)(),{mutate:b,isPending:w}=(0,m.useMutation)({mutationFn:async e=>await (0,c.V$)(e),onSuccess:e=>{!0===e.status?((0,p.ToastSuccess)("شهرستان مورد نظر با موفقیت ایجاد شد"),f.invalidateQueries({queryKey:["cities"]}),t(!1)):(0,p.ToastError)("لطفا دوباره تلاش نمایید")}}),C=()=>{let e=l("name").trim(),t=l("cityList");!e||(null==t?void 0:t.includes(e))?e&&(0,p.ToastError)("شهرستان تکراری است"):(u("cityList",[...t,e]),u("name",""))},P=()=>{let e=l("cityList"),t=n.map(e=>e.name),i=e.filter(e=>!t.includes(e)).map(e=>({name:e,provinceId:r}));i.length>0?b(i):(0,p.ToastError)("هیچ شهرستان جدیدی اضافه نشده است")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.kC,{direction:"column",p:"12px 16px",gap:"4",children:[(0,i.jsx)(d.xu,{width:"50%",children:(0,i.jsx)(g.Qr,{name:"name",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(y.Z,{...t,placeholder:"افزودن شهرستان",onClick:()=>C()})}})}),(0,i.jsx)(d.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:"1px solid ".concat(h.K.gray[7]),borderRadius:8},children:o("cityList").map((e,t)=>(0,i.jsx)(d.xu,{p:"9.5px 16px",style:{backgroundColor:h.K.gray[3],borderRadius:16},children:(0,i.jsx)(d.xv,{...x.p.body1,style:{color:h.K.gray[11]},children:e})},t))})]}),(0,i.jsx)(v.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onSubmit:()=>P(),onCloseButton:()=>t(!1),isLoading:w})]})},b=n(30884),w=n(32644),C=n(97622),P=n(49609),k=n(84781),I=e=>{let{setIsOpen:t,data:n}=e,a=(0,g.cI)({defaultValues:{name:n.name,imagePath:null==n?void 0:n.banner,iconPath:null==n?void 0:n.icon,localImagePath:null,localIconPath:null,isBanner:null!=n&&!!n.banner,isIcon:null!=n&&!!n.icon}}),{control:s,reset:o,watch:l}=a;return(0,r.useEffect)(()=>{o({name:n.name})},[n,o]),(0,i.jsxs)(g.RV,{...a,children:[(0,i.jsx)(d.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:(0,i.jsxs)(d.kC,{gap:"3",children:[l("imagePath")?(0,i.jsx)(P.Z,{resetStore:"isBanner",type:"image",localPath:"".concat(l("localImagePath")),filePath:null==n?void 0:n.banner,isOrigin:l("isBanner")}):(0,i.jsx)(C.Z,{resetStore:"isBanner",name:"imagePath",localPath:"localImagePath",children:(0,i.jsx)(k.Z,{type:"pic"})}),l("iconPath")?(0,i.jsx)(P.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(l("localIconPath")),filePath:null==n?void 0:n.icon,isOrigin:l("isIcon")}):(0,i.jsx)(C.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(k.Z,{type:"icon"})})]})}),(0,i.jsx)(g.Qr,{name:"name",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"",style:{width:"50%",margin:"0 auto"}})}}),(0,i.jsx)(v.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit",isOpen:!1})})]})};let O=(0,r.forwardRef)((e,t)=>{let{name:n,id:a,hasMedia:s,onSelect:v,selected:f}=e,[C,P]=(0,r.useState)({isOpen:!1,key:"edit"}),{control:k,watch:O,getValues:S,setValue:T}=(0,g.cI)({defaultValues:{name:""}}),K=(0,j.useQueryClient)(),{data:z,isLoading:Z,isFetching:F}=(0,l.useQuery)({queryKey:["single-city",f],queryFn:async()=>await (0,c.kv)(a),initialData:e,enabled:!0===f}),{mutate:D,isPending:Q}=(0,m.useMutation)({mutationFn:async()=>await (0,c.H1)({name:O("name"),citiesId:a}),onSuccess:e=>{!0===e.status?(K.invalidateQueries({queryKey:["single-city"]}),(0,p.ToastSuccess)("شهر مورد نظر با موفقیت اضافه شد"),T("name","")):(0,p.ToastError)("لطفا دوباره تلاش نمایید")}}),B=()=>{let e=S("name").trim();if(!e){(0,p.ToastError)("نام شهر نمی‌تواند خالی باشد");return}if(z.children.some(t=>t.name===e)){(0,p.ToastError)("این شهر از قبل وجود دارد");return}D()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.rj,{width:"100%",gapY:"5",ref:t,onClick:v,children:(0,i.jsx)(b.default,{hero:n,withEdit:!0,withDelete:!0,hasMedia:!0===s,isDisableDelete:!0,onEdit:e=>{e.stopPropagation(),P({key:"edit",isOpen:!0}),v()},onDelete:e=>{e.stopPropagation(),P({key:"delete",isOpen:!0})},children:(0,i.jsxs)(d.kC,{direction:"column",gap:"5",children:[Z||F?(0,i.jsx)(o.$j,{style:{margin:"0 auto",scale:1.2}}):(null==z?void 0:z.children.length)===0?(0,i.jsxs)(d.kC,{direction:"column",gap:"5",children:[(0,i.jsx)(d.xv,{...x.p.title1,style:{color:h.K.gray[11]},children:"هنوز شهری اضافه نشده است."}),(0,i.jsx)(d.xv,{...x.p.paragraph2,style:{color:h.K.gray[11]},children:"از فیلد زیر استفاده کنید و شهر را به لیست اضافه کنید."})]}):(0,i.jsx)(d.kC,{width:"100%",align:"center",gap:"5",wrap:"wrap",children:z.children.map(e=>(0,i.jsx)(w.Z,{type:"town",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))}),(0,i.jsx)(d.xu,{width:"40%",children:(0,i.jsx)(g.Qr,{name:"name",control:k,render:e=>{let{field:t}=e;return(0,i.jsx)(y.Z,{...t,placeholder:"افزودن شهر",onClick:()=>B(),isLoading:Q})}})})]})})}),(0,i.jsxs)(d.u_,{isOpen:C.isOpen,onClose:()=>P({...C,isOpen:!1}),children:["edit"===C.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:"ویرایش شهرستان",handleClose:()=>P({...C,isOpen:!1})}),(0,i.jsx)(I,{setIsOpen:()=>P({key:"edit",isOpen:!1}),data:z})]}),"delete"===C.key&&(0,i.jsxs)(d.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(d.xv,{...x.p.title1,style:{color:h.K.gray[11]},children:["آیا از حذف شهرستان ",(0,i.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:n})," اطمینان دارید؟"]}),(0,i.jsxs)(d.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(d.zx,{variant:"soft",size:"4",children:(0,i.jsx)(d.xv,{...x.p.body3,children:"بله"})}),(0,i.jsx)(d.zx,{type:"button",onClick:()=>P({...C,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(d.xv,{...x.p.body3,children:"خیر"})})]})]})]})]})});var S=r.memo(O),T=()=>{let[e,t]=(0,r.useState)(!1),[n,g]=(0,r.useState)(null),j=(0,a.useParams)().slug[2],{data:m,isLoading:y,isFetching:v,isError:b}=(0,l.useQuery)({queryKey:["cities"],queryFn:async()=>await (0,c.zZ)(Number(j))});return y||v?(0,i.jsx)(d.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,i.jsx)(o.$j,{style:{scale:3}})}):!m||b?(0,p.ToastError)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.kC,{width:"100%",direction:"column",gap:"5",children:[(0,i.jsx)(d.kC,{width:"100%",align:"center",justify:"between",children:(0,i.jsx)(d.zx,{size:"3",variant:"ghost",onClick:()=>t(!0),style:{paddingBlock:"11.5px"},children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(s.pOD,{width:16,height:16,style:{color:h.K.blue[10]}}),(0,i.jsx)(d.xv,{...x.p.body1,children:"افزودن شهرستان"})]})})}),null==m?void 0:m.children.map((e,t)=>(0,i.jsx)(S,{onSelect:()=>g(t),currentIndex:t,selected:n===t,...e},e.id))]}),(0,i.jsxs)(d.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,i.jsx)(u.Z,{title:"افزودن شهرستان",handleClose:()=>t(!1)}),(0,i.jsx)(f,{setIsOpen:t,data:m.children})]})]})}},43986:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var i=n(57437),r=n(2265),a=n(4867),s=n(94963),o=n(76351),l=n(1365),c=n(28326),d=n(77855),u=n(31072),p=n(1845),h=n(21949),x=n(39343),g=n(93191),j=n(25524),m=n(19780),y=n(30884),v=n(32644),f=n(97622),b=n(49609),w=n(72549),C=n(84781),P=e=>{let{setIsOpen:t,data:n}=e,r=(0,x.cI)({defaultValues:{name:null==n?void 0:n.name,imagePath:null==n?void 0:n.banner,iconPath:null==n?void 0:n.icon,localImagePath:null,localIconPath:null,isBanner:null!=n&&!!n.banner,isIcon:null!=n&&!!n.icon}}),{control:a,watch:s}=r,o=(0,g.useQueryClient)(),{mutate:d}=(0,j.useMutation)({mutationFn:async e=>await (0,l.hu)(e)}),{mutate:p}=(0,j.useMutation)({mutationFn:async e=>await (0,l.x8)(e)}),{mutate:h,isPending:m}=(0,j.useMutation)({mutationFn:async()=>await (0,l.PT)(n.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("localImagePath"),i=s("localIconPath");e&&d({featureId:String(n.id),file:s("imagePath"),type:"FEATURE"}),i&&p({featureId:String(n.id),file:s("iconPath"),type:"FEATURE"}),o.invalidateQueries({queryKey:["features"]}),(0,u.ToastSuccess)(" ویژگی مورد نظر با موفقیت ویرایش شد"),t({key:"edit",isOpen:!1})}else(0,u.ToastError)("لطفا دوباره تلاش نمایید")}});return(0,i.jsxs)(x.RV,{...r,children:[(0,i.jsxs)(c.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:[(0,i.jsxs)(c.kC,{gap:"3",children:[s("imagePath")?(0,i.jsx)(b.Z,{resetStore:"isBanner",type:"image",localPath:"".concat(s("localImagePath")),filePath:null==n?void 0:n.banner,isOrigin:s("isBanner")}):(0,i.jsx)(f.Z,{resetStore:"isBanner",name:"imagePath",localPath:"localImagePath",children:(0,i.jsx)(C.Z,{type:"pic"})}),s("iconPath")?(0,i.jsx)(b.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(s("localIconPath")),filePath:null==n?void 0:n.icon,isOrigin:s("isIcon")}):(0,i.jsx)(f.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(C.Z,{type:"icon"})})]}),(0,i.jsx)(x.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,i.jsx)(c.nv,{...t,placeholder:"",style:{width:"50%",margin:"0 auto"}})}})]}),(0,i.jsx)(w.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit",isOpen:!1}),onSubmit:()=>h(),isLoading:m})]})};let k=(0,r.forwardRef)((e,t)=>{var n;let{id:a,hasMedia:f,name:b,selected:w,onSelect:C}=e,[k,I]=(0,r.useState)({isOpen:!1,key:"edit"}),{control:O,watch:S,setValue:T,getValues:K}=(0,x.cI)({defaultValues:{name:""}}),z=(0,g.useQueryClient)();console.log("NAME",S());let{data:Z,isLoading:F,isFetching:D}=(0,o.useQuery)({queryKey:["feature-group",w],queryFn:async()=>await (0,l.HJ)(a),initialData:e,enabled:!0===w}),{mutate:Q,isPending:B}=(0,j.useMutation)({mutationFn:async()=>await (0,l.HV)({name:S("name"),featureGroupid:a}),onSuccess:e=>{!0===e.status?(z.invalidateQueries({queryKey:["feature-group"]}),(0,u.ToastSuccess)("ویژگی مورد نظر با موفقیت ایجاد شد"),T("name","")):(0,u.ToastError)("لطفا دوباره تلاش نمایید")}}),{mutate:R,isPending:E}=(0,j.useMutation)({mutationFn:async()=>await (0,l.aR)(a),onSuccess:e=>{!0===e.status?(z.invalidateQueries({queryKey:["features"]}),(0,u.ToastSuccess)("ویژگی مورد نظر با موفقیت حذف شد")):(0,u.ToastError)("لطفا دوباره تلاش نمایید")}}),L=()=>{let e=K("name").trim();if(!e){(0,u.ToastError)("نام ویژگی نمی‌تواند خالی باشد");return}if(Z.features.some(t=>t.name===e)){(0,u.ToastError)("این ویژگی از قبل وجود دارد");return}Q()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.rj,{width:"100%",gapY:"5",ref:t,onClick:C,children:(0,i.jsx)(y.default,{hero:b,withEdit:!0,withDelete:!0,hasMedia:!0===f,onEdit:e=>{e.stopPropagation(),T("name",Z.name),I({key:"edit",isOpen:!0})},onDelete:e=>{e.stopPropagation(),I({key:"delete",isOpen:!0})},children:(0,i.jsxs)(c.kC,{direction:"column",gap:"5",children:[(0,i.jsx)(c.kC,{width:"100%",gap:"5",align:"center",wrap:"wrap",children:F||D?(0,i.jsx)(s.$j,{style:{margin:"0 auto",scale:1.2}}):(null==Z?void 0:null===(n=Z.features)||void 0===n?void 0:n.length)===0?(0,i.jsxs)(c.kC,{direction:"column",gap:"5",children:[(0,i.jsx)(c.xv,{...h.p.title1,style:{color:p.K.gray[11]},children:"هنوز ویژگی اضافه نشده است."}),(0,i.jsx)(c.xv,{...h.p.paragraph2,style:{color:p.K.gray[11]},children:"از فیلد زیر استفاده کنید و ویژگی را به لیست اضافه کنید."})]}):(0,i.jsx)(i.Fragment,{children:null==Z?void 0:Z.features.map(e=>(0,i.jsx)(v.Z,{type:"feature",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))})}),(0,i.jsx)(c.xu,{width:"40%",children:(0,i.jsx)(x.Qr,{name:"name",control:O,render:e=>{let{field:t}=e;return(0,i.jsx)(m.Z,{...t,placeholder:"افزودن ویژگی",onClick:()=>L(),isLoading:B})}})})]})})}),(0,i.jsxs)(c.u_,{isOpen:k.isOpen,onClose:()=>I({...k,isOpen:!1}),children:["delete"!==k.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{title:"ویرایش دسته ویژگی",handleClose:()=>I({...k,isOpen:!1})}),(0,i.jsx)(P,{setIsOpen:()=>I({key:"edit",isOpen:!1}),data:e})]}),"delete"===k.key&&(0,i.jsxs)(c.rj,{gapY:"24px",p:"5",children:[(0,i.jsxs)(c.xv,{...h.p.title1,style:{color:p.K.gray[11]},children:["آیا از حذف دسته ویژگی ",(0,i.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:b})," اطمینان دارید؟"]}),(0,i.jsxs)(c.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(c.zx,{variant:"soft",size:"4",onClick:()=>R(),children:(0,i.jsx)(c.xv,{...h.p.body3,children:E?(0,i.jsx)(s.$j,{}):"بله"})}),(0,i.jsx)(c.zx,{type:"button",onClick:()=>I({...k,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(c.xv,{...h.p.body3,children:"خیر"})})]})]})]})]})});var I=r.memo(k),O=e=>{let{setIsOpen:t,data:n}=e,{control:r,watch:a,getValues:s,setValue:o}=(0,x.cI)({defaultValues:{name:"",featureGroupid:0,featureList:n.map(e=>e.name)}}),d=(0,g.useQueryClient)(),{mutate:y,isPending:v}=(0,j.useMutation)({mutationFn:async e=>await (0,l.Wo)(e),onSuccess:e=>{!0===e.status?((0,u.ToastSuccess)("ویژگی مورد نظر با موفقیت ایجاد شد"),d.invalidateQueries({queryKey:["features"]}),t(!1)):(0,u.ToastError)("لطفا دوباره تلاش نمایید")}}),f=()=>{let e=s("name").trim(),t=s("featureList");!e||(null==t?void 0:t.includes(e))?e&&(0,u.ToastError)("دسته ویژگی تکراری است"):(o("featureList",[...t,e]),o("name",""))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.kC,{direction:"column",p:"12px 16px",gap:"4",children:[(0,i.jsx)(c.xu,{width:"50%",children:(0,i.jsx)(x.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,i.jsx)(m.Z,{...t,placeholder:"افزودن دسته ویژگی",onClick:()=>f()})}})}),(0,i.jsx)(c.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:"1px solid ".concat(p.K.gray[7]),borderRadius:8},children:a("featureList").map((e,t)=>(0,i.jsx)(c.xu,{p:"9.5px 16px",style:{backgroundColor:p.K.gray[3],borderRadius:16},children:(0,i.jsx)(c.xv,{...h.p.body1,style:{color:p.K.gray[11]},children:e})},t))})]}),(0,i.jsx)(w.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onCloseButton:()=>t(!1),onSubmit:()=>{let e=s("featureList"),t=n.map(e=>e.name),i=e.filter(e=>!t.includes(e)).map(e=>({name:e,featureGroupid:0}));i.length>0?y(i):(0,u.ToastError)("هیچ ویژگی جدیدی اضافه نشده است")},isLoading:v})]})},S=()=>{let[e,t]=(0,r.useState)(!1),[n,x]=(0,r.useState)(null),{data:g,isLoading:j,isFetching:m,isError:y}=(0,o.useQuery)({queryKey:["features"],queryFn:async()=>await (0,l.N$)()});return(console.log("feature",g),j||m)?(0,i.jsx)(c.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,i.jsx)(s.$j,{style:{scale:3}})}):!g||y?(0,u.ToastError)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.kC,{width:"100%",direction:"column",gap:"5",children:[(0,i.jsx)(c.zx,{size:"4",variant:"ghost",style:{width:"fit-content",paddingBlock:11.5},onClick:()=>t(!0),children:(0,i.jsxs)(c.kC,{align:"center",gap:"2",children:[(0,i.jsx)(a.pOD,{width:16,height:16,style:{color:p.K.blue[10]}}),(0,i.jsx)(c.xv,{...h.p.body1,children:"افزودن دسته ویژگی"})]})}),null==g?void 0:g.map((e,t)=>(0,i.jsx)(I,{selected:n===t,onSelect:()=>x(t),currentIndex:t,...e},e.id))]}),(0,i.jsxs)(c.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,i.jsx)(d.Z,{title:"افزودن دسته ویژگی",handleClose:()=>t(!1)}),(0,i.jsx)(O,{data:g,setIsOpen:t})]})]})}},74906:function(e,t,n){"use strict";n.d(t,{default:function(){return g}});var i=n(57437);n(2265);var r=n(94963),a=n(76351),s=n(1365),o=n(16463),l=n(28326),c=n(10504),d=n(27533),u=n(1845),p=n(21949),h=e=>{let{name:t,citiesCount:n,hasMedia:r,lastUpdated:a,id:s}=e,{push:h}=(0,o.useRouter)();return(0,i.jsxs)(l.kC,{width:"100%",direction:"column",gap:"12px",p:"4",style:{backgroundColor:u.K.gray[2],border:"1px solid ".concat(u.K.gray[6]),borderRadius:8},children:[(0,i.jsxs)(l.kC,{width:"100%",align:"center",justify:"between",children:[(0,i.jsxs)(l.kC,{align:"center",gap:"2",children:[r&&(0,i.jsx)(d.eA,{width:14.13,height:14.13}),(0,i.jsx)(l.xv,{...p.p.body1,style:{color:u.K.gray[12]},children:t})]}),(0,i.jsxs)(l.kC,{align:"center",gap:"2",children:[(0,i.jsx)(l.hU,{size:"2",variant:"surface",onClick:()=>h("/additional-detail/province/data-management/".concat(s)),children:(0,i.jsx)(d.sv,{width:32,height:32})}),(0,i.jsx)(l.hU,{size:"2",variant:"surface",onClick:()=>h("/additional-detail/province/image-management/".concat(s)),children:(0,i.jsx)(d.XB,{width:16,height:16})})]})]}),(0,i.jsx)(x,{label:"تعداد شهرستان",value:n}),(0,i.jsxs)(l.kC,{width:"100%",align:"center",justify:"between",children:[(0,i.jsx)(x,{label:"آخرین ویرایش",value:a?(0,c.l)(a):0}),(0,i.jsx)(l.zx,{size:"2",onClick:()=>h("/additional-detail/province/cities/".concat(s)),children:(0,i.jsx)(l.xv,{...p.p.body3,children:"مدیریت شهرستان ها"})})]})]})};let x=e=>{let{label:t,value:n}=e;return(0,i.jsxs)(l.kC,{align:"center",gap:"2",children:[(0,i.jsx)(l.xv,{...p.p.description2,style:{color:u.K.gray[10]},children:t}),(0,i.jsx)(l.xv,{...p.p.description2,style:{color:u.K.gray[12]},children:n})]})};var g=()=>{let{data:e,isLoading:t,isFetching:n}=(0,a.useQuery)({queryKey:["provinces"],queryFn:async()=>await (0,s.lv)()});return t||n?(0,i.jsx)(l.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,i.jsx)(r.$j,{style:{scale:3}})}):(console.log("DATA",e),(0,i.jsx)(l.rj,{width:"100%",columns:"2",gap:"5",children:null==e?void 0:e.map(e=>(0,i.jsx)(h,{...e},e.id))}))}},35952:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var i=n(57437),r=n(2265),a=n(39343),s=n(16463),o=n(4867),l=n(94963),c=n(76351),d=n(25524),u=n(1365),p=n(28326),h=n(1845),x=n(21949),g=e=>{let{submitButtonText:t,closeButtonText:n,buttonsPosition:r,isLoading:a,disabled:s,onCloseButton:o,onSubmit:c}=e;return(0,i.jsxs)(p.kC,{width:"100%",align:"center",justify:r,gap:"5",p:"4",style:{border:"1px solid ".concat(h.K.gray[6]),borderRadius:8,backgroundColor:h.K.gray[2]},children:[(0,i.jsx)(p.zx,{size:"3",variant:"soft",disabled:s,style:{padding:"13.5px 48.5px"},onClick:c,children:a?(0,i.jsx)(l.$j,{}):(0,i.jsx)(p.xv,{...x.p.body1,children:t})}),(0,i.jsx)(p.zx,{size:"3",colorVariant:"PINK",style:{padding:"13.5px 48.5px"},onClick:o,children:(0,i.jsx)(p.xv,{...x.p.body1,children:n})})]})},j=n(77855),m=n(31072),y=n(6850),v=n(27533),f=n(93191),b=n(72549),w=e=>{let{setIsOpen:t}=e,n=Number((0,s.useParams)().slug[2]),{control:r,watch:o}=(0,a.cI)({defaultValues:{type:"PROVINCE",titleItem:"",descriptionItem:"",id:n}}),l=(0,f.useQueryClient)(),{mutate:c,isPending:h}=(0,d.useMutation)({mutationFn:async()=>await (0,u.Fw)(o()),onSuccess:e=>{!0===e.status?(l.invalidateQueries({queryKey:["province-area"]}),(0,m.ToastSuccess)("جاذبه‌ی مورد نظر با موفقیت افزوده شد"),t({key:"add",isOpen:!0})):(0,m.ToastError)("خطایی رخ داده است")}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.rj,{width:"100%",p:"4",mt:"12px",gapY:"14px",children:[(0,i.jsx)(a.Qr,{name:"titleItem",control:r,render:e=>{let{field:t}=e;return(0,i.jsx)(p.nv,{...t,placeholder:"عنوان جاذبه"})}}),(0,i.jsx)(a.Qr,{name:"descriptionItem",control:r,render:e=>{let{field:t}=e;return(0,i.jsx)(p.Kx,{...t,placeholder:"توضیح جاذبه",rows:5})}})]}),(0,i.jsx)(b.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({isOpen:!1,key:"add"}),onSubmit:()=>c(),isLoading:h,disabled:0===o("titleItem").length&&0===o("descriptionItem").length})]})},C=n(97622),P=n(49609),k=n(84781),I=e=>{let{setIsOpen:t,data:n}=e,r=(0,a.cI)({defaultValues:{iconPath:null==n?void 0:n.pathItem,localIconPath:null,isIcon:null!=n&&!!n.pathItem}}),{watch:s}=r,o=(0,f.useQueryClient)();console.log("DATA IN MODAL",n);let{mutate:l,isPending:c}=(0,d.useMutation)({mutationFn:async()=>await (0,u.vD)({aboutId:n.id,type:"AREA_DETAIL",file:s("iconPath")}),onSuccess:e=>{!0===e.status?(o.invalidateQueries({queryKey:["province-area"]}),(0,m.ToastSuccess)("آیکون مورد نظر با موفقیت آپلود شد"),t({key:"svg",isOpen:!1})):(0,m.ToastError)("مشکلی پیش آمده است . لطفا مجددا تلاش نمایید")}});return(0,i.jsxs)(a.RV,{...r,children:[(0,i.jsx)(p.kC,{width:"100%",py:"4",align:"center",justify:"center",children:s("iconPath")?(0,i.jsx)(P.Z,{resetStore:"isIcon",type:"svg",localPath:"".concat(s("localIconPath")),filePath:null==n?void 0:n.pathItem,isOrigin:s("isIcon")}):(0,i.jsx)(C.Z,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,i.jsx)(k.Z,{type:"icon"})})}),(0,i.jsx)(b.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"svg",isOpen:!1}),onSubmit:()=>l(),isLoading:c})]})},O=e=>{let{setIsOpen:t,currentItem:n}=e,{control:s,setValue:o}=(0,a.Gc)(),l=(0,a.qo)({name:"titleItem",defaultValue:""}),c=(0,a.qo)({name:"descriptionItem",defaultValue:""}),h=(0,f.useQueryClient)(),{mutate:x,isPending:g}=(0,d.useMutation)({mutationFn:async()=>await (0,u.fC)({titleItem:l,descriptionItem:c,id:(null==n?void 0:n.id)||0}),onSuccess:e=>{!0===e.status?(h.invalidateQueries({queryKey:["province-area"]}),(0,m.ToastSuccess)("جاذبه‌ی مورد نظر با موفقیت ویرایش شد"),t({key:"edit",isOpen:!0})):(0,m.ToastError)("خطایی رخ داده است")}});return(0,r.useEffect)(()=>{n&&(o("titleItem",n.titleItem),o("descriptionItem",n.descriptionItem))},[n,o]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.rj,{width:"100%",p:"4",mt:"12px",gapY:"14px",children:[(0,i.jsx)(a.Qr,{name:"titleItem",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(p.nv,{...t,placeholder:"عنوان جاذبه"})}}),(0,i.jsx)(a.Qr,{name:"descriptionItem",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(p.Kx,{...t,placeholder:"توضیح جاذبه",rows:5})}})]}),(0,i.jsx)(b.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({isOpen:!1,key:"edit"}),isLoading:g,onSubmit:()=>x(),disabled:0===l.trim().length||0===c.trim().length})]})},S=()=>{var e,t,n;let f=Number((0,s.useParams)().slug[2]),{data:b,isLoading:C,isFetching:P}=(0,c.useQuery)({queryKey:["province-area",f],queryFn:async()=>await (0,u.jM)(f),staleTime:0}),[k,S]=(0,r.useState)({isOpen:!1,key:"add"}),[T,K]=(0,r.useState)(),{back:z}=(0,s.useRouter)(),Z=(0,a.cI)({defaultValues:{id:f,type:"PROVINCE",titleOfDetail:(null==b?void 0:b.titleOfDetail)?null==b?void 0:b.titleOfDetail:"",famousPerson:(null==b?void 0:b.famousPerson)?null==b?void 0:b.famousPerson:"",infoDescription:(null==b?void 0:b.infoDescription)?null==b?void 0:b.infoDescription:"",areaDetails:(null==b?void 0:b.AreaDetails)?null==b?void 0:b.AreaDetails:[],titleItem:(null==T?void 0:T.titleItem)?null==T?void 0:T.titleItem:"",descriptionItem:(null==T?void 0:T.descriptionItem)?null==T?void 0:T.descriptionItem:""}}),{control:F,setValue:D,watch:Q}=Z;console.log("data",b);let{mutate:B,isPending:R}=(0,d.useMutation)({mutationFn:async e=>await (0,u.jx)(e),onSuccess:e=>{!0===e.status?((0,m.ToastSuccess)("اطلاعات استان با موفقیت بروزرسانی شد"),z()):(0,m.ToastError)("مشکلی پیش آمده است . لطفا مجددا تلاش نمایید")}});(0,r.useEffect)(()=>{b&&(D("titleOfDetail",b.titleOfDetail||""),D("famousPerson",b.famousPerson||""),D("infoDescription",b.infoDescription||""),D("areaDetails",b.AreaDetails||[]))},[b,D]),(0,r.useEffect)(()=>{T&&(D("titleItem",T.titleItem),D("descriptionItem",T.descriptionItem))},[T]);let E=()=>{B({id:f,type:"PROVINCE",titleOfDetail:Q("titleOfDetail"),famousPerson:Q("famousPerson"),infoDescription:Q("infoDescription")})};return(0,i.jsxs)(a.RV,{...Z,children:[(0,i.jsxs)(p.rj,{width:"100%",gapY:"5",children:[(0,i.jsx)(y.Z,{hero:"اطلاعات",type:"changeAble",children:(0,i.jsxs)(p.rj,{width:"100%",gapY:"14px",children:[(0,i.jsx)(a.Qr,{name:"titleOfDetail",control:F,render:e=>{let{field:t}=e;return(0,i.jsx)(p.nv,{...t,placeholder:"عنوان"})}}),(0,i.jsx)(a.Qr,{name:"famousPerson",control:F,render:e=>{let{field:t}=e;return(0,i.jsx)(p.nv,{...t,placeholder:"شخصیت برجسته"})}}),(0,i.jsx)(a.Qr,{name:"infoDescription",control:F,render:e=>{let{field:t}=e;return(0,i.jsx)(p.nv,{...t,placeholder:"متن صفحه استان"})}}),(0,i.jsx)(p.zx,{size:"4",variant:"ghost",style:{width:"fit-content"},onClick:()=>S({isOpen:!0,key:"add"}),disabled:(null==b?void 0:b.AreaDetails.length)===3,children:(0,i.jsxs)(p.kC,{align:"center",gap:"2",children:[(0,i.jsx)(o.pOD,{width:16,height:16,style:{color:h.K.blue[10]}}),(0,i.jsx)(p.xv,{...x.p.body1,children:" افزودن جاذبه"})]})}),C||P?(0,i.jsx)(l.$j,{style:{margin:"40px auto",scale:1.5}}):(null==b?void 0:b.AreaDetails.length)!==0&&(null==b?void 0:b.AreaDetails.map((e,t)=>(0,i.jsxs)(p.rj,{gapX:"5",gapY:"14px",style:{gridTemplateColumns:"1fr 1fr auto auto"},children:[(0,i.jsx)(a.Qr,{name:"areaDetails.".concat(t,".titleItem"),control:F,render:t=>{let{field:n}=t;return(0,i.jsx)(p.nv,{...n,placeholder:"عنوان جاذبه",defaultValue:e.titleItem,readOnly:!0})}}),(0,i.jsx)(a.Qr,{name:"areaDetails.".concat(t,".descriptionItem"),control:F,render:t=>{let{field:n}=t;return(0,i.jsx)(p.nv,{...n,placeholder:"توضیح جاذبه",defaultValue:e.descriptionItem,readOnly:!0})}}),(0,i.jsx)(p.hU,{size:"3",type:"button",onClick:()=>{K(e),S({key:"edit",isOpen:!0})},children:(0,i.jsx)(v.z,{width:16,height:16})}),(0,i.jsx)(p.hU,{size:"3",type:"button",onClick:()=>{K(e),S({key:"svg",isOpen:!0})},children:(0,i.jsx)(v.XB,{width:16,height:16})})]},e.id)))]})}),(0,i.jsx)(g,{buttonsPosition:"end",submitButtonText:"ثبت",closeButtonText:"لغو",onCloseButton:()=>z(),onSubmit:()=>E(),isLoading:R,disabled:(null===(e=Q("titleOfDetail"))||void 0===e?void 0:e.length)===0&&(null===(t=Q("famousPerson"))||void 0===t?void 0:t.length)===0&&(null===(n=Q("infoDescription"))||void 0===n?void 0:n.length)===0})]}),(0,i.jsxs)(p.u_,{isOpen:k.isOpen,onClose:()=>S({...k,isOpen:!1}),children:["add"===k.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Z,{title:"افزودن جاذبه",handleClose:()=>S({...k,isOpen:!1})}),(0,i.jsx)(w,{setIsOpen:()=>S({isOpen:!1,key:"add"})})]}),"edit"===k.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Z,{title:"ویرایش جاذبه",handleClose:()=>S({...k,isOpen:!1})}),(0,i.jsx)(O,{setIsOpen:()=>S({isOpen:!1,key:"edit"}),currentItem:T})]}),"svg"===k.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Z,{title:"ویرایش آیکون جاذبه",handleClose:()=>S({...k,isOpen:!1})}),(0,i.jsx)(I,{setIsOpen:()=>S({isOpen:!1,key:"svg"}),data:T})]})]})]})}},17076:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var i=n(57437),r=n(2265),a=n(16463),s=n(94963),o=n(76351),l=n(1365),c=n(36721),d=n(28326),u=n(31072),p=n(6850),h=n(38746),x=n(39343),g=n(66648),j=n(4867),m=n(72107),y=n(72549),v=n(77855),f=n(27533),b=n(1845),w=n(21949),C=e=>{var t;let{gallery:n,constantData:a}=e,[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),{control:u,watch:p,setValue:C}=(0,x.cI)({defaultValues:{pic:(null==l?void 0:l.path)?null==l?void 0:l.path:"",localPic:"",provinceId:"",cityID:"",town:"",alt:(null==l?void 0:l.alt)?null==l?void 0:l.alt:"",description:(null==l?void 0:l.description)?null==l?void 0:l.description:"",brief:"",isReset:null!=l&&!!l.path}}),P=null===(t=a.filter(e=>e.id===Number(p("provinceId")))[0])||void 0===t?void 0:t.Cities,k=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,m.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},I=async(e,t)=>{if(e&&e[0]){let n=e[0],i=await k(n);t(URL.createObjectURL(i)),C("localPic",URL.createObjectURL(i)),C("isReset",!1)}};return(0,r.useEffect)(()=>{l&&(C("pic",null==l?void 0:l.path),C("alt",null==l?void 0:l.alt),C("description",null==l?void 0:l.description),C("isReset",null!=l&&!!l.path))},[l]),(0,i.jsxs)(i.Fragment,{children:[0===n.length?(0,i.jsxs)(d.kC,{direction:"column",align:"center",gap:"6",p:"87.5px 12px",children:[(0,i.jsx)(d.X6,{as:"h3",size:"3",style:{color:b.K.gray[11]},children:"هنوز تصویری اضافه نشده است."}),(0,i.jsxs)(d.xv,{...w.p.paragraph1,style:{color:b.K.gray[11],textAlign:"center"},children:["تصاویری که در این قسمت قرار می دهید در برنامه های اخیر کاربران به صورت رندوم ",(0,i.jsx)("br",{})," نمایش داده می شوند."]}),(0,i.jsx)(d.zx,{size:"4",onClick:()=>o(!0),children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(j.pOD,{width:16,height:16,style:{color:b.K.blue[10]}}),(0,i.jsx)(d.xv,{...w.p.body1,children:" افزودن تصویر به گالری"})]})})]}):(0,i.jsxs)(d.rj,{width:"100%",gapY:"5",children:[(0,i.jsx)(d.zx,{variant:"ghost",size:"3",style:{width:"fit-content",paddingBlock:"11.5px"},onClick:()=>{c(null),o(!0)},children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(j.pOD,{width:16,height:16,style:{color:b.K.blue[10]}}),(0,i.jsx)(d.xv,{...w.p.body1,children:"افزودن تصویر"})]})}),n.map((e,t)=>(0,i.jsxs)(d.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(b.K.gray[6]),borderRadius:8},children:[(0,i.jsx)(d.xu,{width:"328px",height:"200px",position:"relative",children:(0,i.jsx)(g.default,{src:"".concat("https://uploader.darkube.app/").concat(e.path),alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,i.jsxs)(d.kC,{direction:"column",gap:"2",children:[(0,i.jsx)(d.xv,{...w.p.body1,style:{color:b.K.gray[11],marginTop:"10px"},children:e.path}),(0,i.jsxs)(d.kC,{direction:"column",mt:"12px",children:[(0,i.jsx)(x.Qr,{name:"alt",control:u,render:t=>{let{field:n}=t;return(0,i.jsx)(d.nv,{...n,readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}})}}),(0,i.jsx)(x.Qr,{name:"description",control:u,render:t=>{let{field:n}=t;return(0,i.jsx)(d.nv,{...n,value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})}})]})]}),(0,i.jsxs)(d.kC,{direction:"column",gap:"4",children:[(0,i.jsx)(d.hU,{size:"3",type:"button",onClick:()=>{c(e),o(!0)},children:(0,i.jsx)(f.z,{})}),(0,i.jsx)(d.hU,{size:"3",variant:"surface",colorVariant:"PINK",children:(0,i.jsx)(f.rF,{})})]})]},t))]}),(0,i.jsxs)(d.u_,{isOpen:s,onClose:()=>o(!1),children:[(0,i.jsx)(v.Z,{title:"تصویر گالری استان",handleClose:()=>o(!1)}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==l?void 0:l.path)&&!1==!!p("localPic")?(0,i.jsx)(x.Qr,{name:"pic",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(h.ZP,{onDrop:e=>{I(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...n()}),(0,i.jsx)(d.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(d.zx,{size:"3",style:{width:"fit-content"},children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(f.V1,{}),(0,i.jsx)(d.xv,{...w.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(b.K.gray[3])},children:[(0,i.jsx)(d.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:b.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(b.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,i.jsx)(x.Qr,{name:"pic",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(h.ZP,{onDrop:e=>{I(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...n()}),(0,i.jsx)(d.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(f.rF,{})})]})}})})}})}),(0,i.jsx)(g.default,{src:p("isReset")?"".concat("https://uploader.darkube.app/").concat(null==l?void 0:l.path):p("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,i.jsxs)(d.rj,{width:"100%",gap:"5",columns:"3",children:[(0,i.jsx)(x.Qr,{name:"provinceId",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.fp,{...t,value:p("provinceId"),onValueChange:e=>{t.onChange(e),C("cityID","")},placeholder:"استان",children:a.map(e=>(0,i.jsx)(d.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,i.jsx)(x.Qr,{name:"cityID",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.fp,{...t,disabled:!p("provinceId"),value:p("cityID"),onValueChange:e=>{t.onChange(e)},placeholder:"شهرستان",children:null==P?void 0:P.map(e=>(0,i.jsx)(d.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,i.jsx)(x.Qr,{name:"town",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"شهر"})}})]}),(0,i.jsx)(x.Qr,{name:"alt",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"متن جایگزین"})}}),(0,i.jsx)(x.Qr,{name:"description",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.Kx,{...t,placeholder:"توضیحات تصویر",rows:6})}}),(0,i.jsx)(x.Qr,{name:"brief",control:u,render:e=>{let{field:t}=e;return(0,i.jsx)(d.Kx,{...t,placeholder:"شزح مختصر",rows:6})}})]})}),(0,i.jsx)(y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>o(!1)})]})]})]})},P=e=>{let{image:t}=e,[n,a]=(0,r.useState)(!1),{control:s,watch:o,setValue:l}=(0,x.cI)({defaultValues:{pic:t||"",localPic:"",provinceId:"",cityID:"",town:"",alt:"",description:"",brief:"",isReset:!!t}}),c=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,m.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},u=async(e,t)=>{if(e&&e[0]){let n=e[0],i=await c(n);t(URL.createObjectURL(i)),l("localPic",URL.createObjectURL(i)),l("isReset",!1)}};return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(d.rj,{p:"10px",gapY:"10px",children:[(0,i.jsx)(d.kC,{width:"100%",align:"center",justify:"center",children:(0,i.jsx)(d.xu,{width:"179px",height:"288px",position:"relative",children:(0,i.jsx)(g.default,{src:t?"".concat("https://uploader.darkube.app/").concat(t):"",alt:"",fill:!0,objectFit:"cover"})})}),(0,i.jsxs)(d.kC,{align:"center",justify:"end",gap:"4",children:[(0,i.jsx)(d.hU,{size:"3",colorVariant:"PINK",variant:"surface",type:"button",children:(0,i.jsx)(f.rF,{width:16,height:16})}),(0,i.jsx)(d.hU,{size:"3",type:"button",onClick:()=>a(!0),children:(0,i.jsx)(f.z,{width:16,height:16})})]})]}):(0,i.jsxs)(d.kC,{direction:"column",align:"center",gap:"6",p:"87.5px 12px",children:[(0,i.jsx)(d.X6,{as:"h3",size:"3",style:{color:b.K.gray[11]},children:"هنوز تصویری اضافه نشده است."}),(0,i.jsxs)(d.xv,{...w.p.paragraph1,style:{color:b.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر استان در اسلایدر استان‌ها و هدر صفحه استان‌ها نمایش داده ",(0,i.jsx)("br",{})," می‌شود!"]}),(0,i.jsx)(d.zx,{size:"4",onClick:()=>a(!0),children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(j.pOD,{width:16,height:16,style:{color:b.K.blue[10]}}),(0,i.jsx)(d.xv,{...w.p.body1,children:" افزودن تصویر استان"})]})})]}),(0,i.jsxs)(d.u_,{isOpen:n,onClose:()=>a(!1),children:[(0,i.jsx)(v.Z,{title:" تصویر استان",handleClose:()=>a(!1)}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!t&&!1==!!o("localPic")?(0,i.jsx)(x.Qr,{name:"pic",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(h.ZP,{onDrop:e=>{u(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...n()}),(0,i.jsx)(d.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(d.zx,{size:"3",style:{width:"fit-content"},children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(f.V1,{}),(0,i.jsx)(d.xv,{...w.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(b.K.gray[3])},children:[(0,i.jsx)(d.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:b.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(b.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,i.jsx)(x.Qr,{name:"pic",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(h.ZP,{onDrop:e=>{u(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...n()}),(0,i.jsx)(d.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(f.rF,{})})]})}})})}})}),(0,i.jsx)(g.default,{src:o("isReset")?"".concat("https://uploader.darkube.app/").concat(t):o("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,i.jsxs)(d.rj,{width:"100%",gap:"5",columns:"3",children:[(0,i.jsx)(x.Qr,{name:"provinceId",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.fp,{...t,value:o("provinceId"),onValueChange:e=>{t.onChange(e),l("cityID","")},placeholder:"استان",disabled:!0})}}),(0,i.jsx)(x.Qr,{name:"cityID",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.fp,{...t,disabled:!o("provinceId"),value:o("cityID"),onValueChange:e=>{t.onChange(e)},placeholder:"شهرستان"})}}),(0,i.jsx)(x.Qr,{name:"town",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"شهر",disabled:!0,style:{marginTop:"5px"}})}})]}),(0,i.jsx)(x.Qr,{name:"alt",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"متن جایگزین",disabled:!0})}}),(0,i.jsx)(x.Qr,{name:"description",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.Kx,{...t,placeholder:"توضیحات تصویر",rows:6,disabled:!0})}}),(0,i.jsx)(x.Qr,{name:"brief",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(d.Kx,{...t,placeholder:"شزح مختصر",rows:6,disabled:!0})}})]})}),(0,i.jsx)(y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>a(!1)})]})]})]})},k=n(93191),I=n(25524),O=e=>{let{vector:t,id:n}=e,[a,o]=(0,r.useState)({isOpen:!1,key:"edit"}),c=(0,k.useQueryClient)(),{control:p,watch:C,setValue:P}=(0,x.cI)({defaultValues:{imageFile:null,pic:t||"",localPic:"",provinceId:"",cityID:"",town:"",alt:"",description:"",brief:"",isReset:!!t}}),{mutate:O,isPending:S}=(0,I.useMutation)({mutationFn:async()=>await (0,l.Mn)({id:n,type:"ICON"}),onSuccess:e=>{!0===e.status?(c.invalidateQueries({queryKey:[""]}),(0,u.ToastSuccess)("وکتور مورد نظر با موفقیت حذف شد")):(0,u.ToastError)("مشکلی پیش آمده است . مجددا تلاش کنید")}}),T=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,m.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},K=async(e,t)=>{if(e&&e[0]){let n=e[0],i=await T(n);t(URL.createObjectURL(i)),P("localPic",URL.createObjectURL(i)),P("isReset",!1)}};return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(d.rj,{p:"10px",gapY:"10px",children:[(0,i.jsx)(d.kC,{width:"100%",align:"center",justify:"center",children:(0,i.jsx)(d.xu,{width:"179px",height:"288px",position:"relative",children:(0,i.jsx)(g.default,{src:t?"".concat("https://uploader.darkube.app/").concat(t):"",alt:"",fill:!0,objectFit:"cover"})})}),(0,i.jsxs)(d.kC,{align:"center",justify:"end",gap:"4",children:[(0,i.jsx)(d.hU,{size:"3",colorVariant:"PINK",variant:"surface",type:"button",onClick:()=>o({isOpen:!0,key:"delete"}),children:(0,i.jsx)(f.rF,{width:16,height:16})}),(0,i.jsx)(d.hU,{size:"3",type:"button",onClick:()=>o({isOpen:!0,key:"edit"}),children:(0,i.jsx)(f.z,{width:16,height:16})})]})]}):(0,i.jsxs)(d.kC,{direction:"column",height:"100%",align:"center",gap:"6",p:"87.5px 12px",children:[(0,i.jsx)(d.X6,{as:"h3",size:"3",style:{color:b.K.gray[11]},children:"هنوز وکتوری اضافه نشده است."}),(0,i.jsx)(d.xv,{...w.p.paragraph1,style:{color:b.K.gray[11],textAlign:"center"},children:"دقت داشته باشید که تصویر وکتور استان در کارت برنامه های اخیر نمایش داده می شود!"}),(0,i.jsx)(d.zx,{size:"4",onClick:()=>o({isOpen:!0,key:"edit"}),children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(j.pOD,{width:16,height:16,style:{color:b.K.blue[10]}}),(0,i.jsx)(d.xv,{...w.p.body1,children:"افزودن وکتور استان"})]})})]}),(0,i.jsxs)(d.u_,{isOpen:a.isOpen,onClose:()=>o({...a,isOpen:!1}),children:["edit"===a.key&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z,{title:" وکتور استان",handleClose:()=>o({...a,isOpen:!1})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!t&&!1==!!C("localPic")?(0,i.jsx)(x.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(h.ZP,{onDrop:e=>{K(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...n()}),(0,i.jsx)(d.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(d.zx,{size:"3",style:{width:"fit-content"},children:(0,i.jsxs)(d.kC,{align:"center",gap:"2",children:[(0,i.jsx)(f.V1,{}),(0,i.jsx)(d.xv,{...w.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(b.K.gray[3])},children:[(0,i.jsx)(d.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:b.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(b.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,i.jsx)(x.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.kC,{width:"max-content",position:"relative",direction:"column",children:(0,i.jsx)(h.ZP,{onDrop:e=>{K(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:n}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...n()}),(0,i.jsx)(d.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,i.jsx)(f.rF,{})})]})}})})}})}),(0,i.jsx)(g.default,{src:C("isReset")?"".concat("https://uploader.darkube.app/").concat(t):C("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,i.jsxs)(d.rj,{width:"100%",gap:"5",columns:"3",children:[(0,i.jsx)(x.Qr,{name:"provinceId",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.fp,{...t,value:C("provinceId"),onValueChange:e=>{t.onChange(e),P("cityID","")},placeholder:"استان",disabled:!0})}}),(0,i.jsx)(x.Qr,{name:"cityID",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.fp,{...t,disabled:!C("provinceId"),value:C("cityID"),onValueChange:e=>{t.onChange(e)},placeholder:"شهرستان"})}}),(0,i.jsx)(x.Qr,{name:"town",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"شهر",disabled:!0,style:{marginTop:"5px"}})}})]}),(0,i.jsx)(x.Qr,{name:"alt",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.nv,{...t,placeholder:"متن جایگزین",disabled:!0})}}),(0,i.jsx)(x.Qr,{name:"description",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.Kx,{...t,placeholder:"توضیحات تصویر",rows:6,disabled:!0})}}),(0,i.jsx)(x.Qr,{name:"brief",control:p,render:e=>{let{field:t}=e;return(0,i.jsx)(d.Kx,{...t,placeholder:"شزح مختصر",rows:6,disabled:!0})}})]})}),(0,i.jsx)(y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>o({...a,isOpen:!1})})]})]}),"delete"===a.key&&(0,i.jsxs)(d.rj,{gapY:"24px",p:"5",children:[(0,i.jsx)(d.xv,{children:"آیا از حذف این نظر اظمینان دارید؟ "}),(0,i.jsxs)(d.rj,{gap:"10px",columns:"2",children:[(0,i.jsx)(d.zx,{onClick:()=>O(),variant:"soft",size:"4",children:(0,i.jsx)(d.xv,{...w.p.body3,children:S?(0,i.jsx)(s.$j,{}):"بله"})}),(0,i.jsx)(d.zx,{type:"button",onClick:()=>o({...a,isOpen:!1}),variant:"solid",size:"4",children:(0,i.jsx)(d.xv,{...w.p.body3,children:"خیر"})})]})]})]})]})},S=()=>{let e=Number((0,a.useParams)().slug[2]),{data:t,isLoading:n,isFetching:r,isError:h}=(0,o.useQuery)({queryKey:["province-images",e],queryFn:async()=>await (0,l._4)(e)}),{data:x}=(0,o.useQuery)({queryKey:["constant"],queryFn:async()=>(0,c.iV)()});return(console.log("DATA",t),n||r)?(0,i.jsx)(d.kC,{width:"100%",height:"85vh",align:"center",justify:"center",children:(0,i.jsx)(s.$j,{style:{scale:2}})}):!t||h?(0,u.ToastError)("مشکلی پیش آمده است"):(0,i.jsxs)(d.rj,{width:"100%",gapY:"5",children:[(0,i.jsxs)(d.rj,{width:"100%",columns:"2",gapX:"5",children:[(0,i.jsx)(p.Z,{hero:"وکتور استان",type:"changeAble",children:(0,i.jsx)(O,{vector:null==t?void 0:t.icon,id:t.id})}),(0,i.jsx)(p.Z,{hero:"تصویر استان",type:"changeAble",children:(0,i.jsx)(P,{image:null==t?void 0:t.pic})})]}),(0,i.jsx)(p.Z,{hero:"گالری تصاویر ",type:"changeAble",children:(0,i.jsx)(C,{gallery:null==t?void 0:t.gallery,constantData:(null==x?void 0:x.provinces)?x.provinces:[]})})]})}},29962:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(16463),a=n(89183),s=n(28326),o=n(27533),l=n(1845),c=n(21949);t.default=e=>{let{title:t,isNavigation:n}=e,a=(0,r.useRouter)();return(0,i.jsx)(d,{children:(0,i.jsxs)(u,{children:[(0,i.jsx)(s.xv,{...c.p.title1,style:{color:l.K.gray[11]},children:t}),n&&(0,i.jsx)(s.hU,{size:"3",variant:"surface",onClick:()=>a.back(),children:(0,i.jsx)(o.jb,{color:"#373737"})})]})})};let d=a.ZP.header.withConfig({componentId:"sc-132ec2d4-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],l.K.gray[6],l.K.gray[1],l.i.shadow1),u=(0,a.ZP)(s.kC).withConfig({componentId:"sc-132ec2d4-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},97622:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(38746),a=n(72107),s=n(39343),o=n(28326),l=n(86324);t.Z=e=>{let{name:t,children:n,errorText:c,style:d,localPath:u,resetStore:p}=e,{control:h,setValue:x}=(0,s.Gc)(),g=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,a.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},j=async(e,n)=>{if(e&&e[0]){let i=e[0],r=await g(i);n(URL.createObjectURL(r)),x(t,r),x(u,URL.createObjectURL(r)),x(p,!1)}};return(0,i.jsx)(s.Qr,{name:t,control:h,render:e=>{let{field:t}=e;return(0,i.jsxs)(o.kC,{width:"max-content",position:"relative",direction:"column",style:d,children:[(0,i.jsx)(r.ZP,{onDrop:e=>{j(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:r}=e;return(0,i.jsxs)("div",{...t(),children:[(0,i.jsx)("input",{type:"file",...r()}),(0,i.jsx)(o.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:n})]})}}),c&&(0,i.jsx)(l.Z,{text:c})]})}})}},72549:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(94963),a=n(1845),s=n(21949),o=n(28326);t.Z=e=>{let{isSubmit:t=!0,closeButtonText:n,submitButtonText:l,isLoading:c,onCloseButton:d,onSubmit:u,isFull:p,isDisableSubmitBtn:h=!1,disabled:x=!1}=e;return(0,i.jsx)(o.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:a.K.gray[2],marginBlockStart:"auto",borderTop:"1px solid ".concat(a.K.gray[3]),boxShadow:a.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,i.jsxs)(o.rj,{gap:"16px",columns:"2",width:p?"100%":"max-content",children:[(0,i.jsx)(o.zx,{disabled:h||x,onClick:u,type:t?"submit":"button",variant:"soft",size:"3",style:{width:p?"100%":"fit-content",padding:"9.5px 38px"},children:c?(0,i.jsx)(r.$j,{}):(0,i.jsx)(o.xv,{...s.p.body1,children:l})}),(0,i.jsx)(o.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:d,style:{width:p?"100%":"fit-content",padding:"9.5px 46px"},children:(0,i.jsx)(o.xv,{...s.p.body1,children:n})})]})})}},77855:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(89183),a=n(27533),s=n(1845),o=n(21949),l=n(28326);t.Z=e=>{let{handleClose:t,title:n}=e;return(0,i.jsxs)(c,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:s.K.blue[10],zIndex:"100"},align:"center",children:[(0,i.jsx)(l.xv,{...o.p.title2,style:{color:s.K.gray[1],fontWeight:700},children:n}),(0,i.jsx)(l.hU,{type:"button",onClick:t,variant:"soft",size:"2",style:{backgroundColor:s.K.blue[9],borderRadius:"12px"},children:(0,i.jsx)(a.x8,{})})]})};let c=(0,r.zo)(l.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},19780:function(e,t,n){"use strict";var i=n(57437),r=n(2265),a=n(4867),s=n(94963),o=n(89183),l=n(28326),c=n(1845);let d=(0,r.forwardRef)((e,t)=>{let{placeholder:n,defaultValue:r,fieldType:o,disabled:d,isLoading:h,onClick:x,onChange:g,...j}=e;return(0,i.jsxs)(u,{height:"fit-content",gap:"2",disabled:d,children:[(0,i.jsx)(p,{...j,ref:t,placeholder:n,disabled:d,type:o,onChange:g,variant:"surface",defaultValue:r}),h?(0,i.jsx)(s.$j,{style:{marginLeft:20}}):(0,i.jsx)(l.hU,{size:"1",type:"button",className:"icon-button",variant:"surface",disabled:d,onClick:x,children:(0,i.jsx)(a.pOD,{width:16,height:16,style:{color:c.K.pink[9]}})})]})});d.displayName="CustomAddItem",t.Z=d;let u=(0,o.ZP)(l.kC).withConfig({componentId:"sc-ed1428e7-0"})(["width:100%;max-width:380px;height:48px;align-items:center;border:1px solid ",";background-color:",";border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{margin-inline-end:8px;background-color:",";@media (hover:hover){background-color:transparent !important;}}"],c.K.gray[7],e=>{let{disabled:t}=e;return t?c.K.gray[5]:"transparent"},c.K.blue[2],c.i.shadow1,c.K.gray[3],e=>{let{disabled:t}=e;return t?c.K.gray[5]:"transparent"}),p=(0,o.ZP)(l.nv).withConfig({componentId:"sc-ed1428e7-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},49609:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(66648),a=n(28326),s=n(27533),o=n(1845),l=n(97622);t.Z=e=>{let{filePath:t,type:n,localPath:c,isOrigin:d,resetStore:u}=e;return(0,i.jsxs)(a.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(o.K.blue[8]),borderRadius:8},children:[(0,i.jsx)(r.default,{src:d?"".concat("https://uploader.darkube.app/").concat(t):c,alt:"item image or icon",fill:!0,style:{objectFit:"cover"}}),(0,i.jsx)(l.Z,{resetStore:u,localPath:"image"===n?"localImagePath":"localIconPath",name:"image"===n?"imagePath":"iconPath",style:{position:"absolute",bottom:0},children:(0,i.jsx)(a.hU,{children:(0,i.jsx)(s.BN,{})})})]})}},84781:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(28326),a=n(27533),s=n(1845),o=n(21949);t.Z=e=>{let{type:t}=e;return(0,i.jsxs)(r.kC,{width:"100%",maxWidth:"160px",minWidth:"160px",direction:"column",align:"center",gap:"2",p:"36.5px 12px",style:{border:"1px dashed ".concat(s.K.blue[8]),borderRadius:8,cursor:"pointer"},children:[(0,i.jsx)(r.xv,{...o.p.body1,style:{color:s.K.gray[11]},children:"pic"===t?"آپلود تصویر":"icon"===t&&"آپلود آیکون"}),"pic"===t&&(0,i.jsxs)(r.xv,{...o.p.description2,style:{color:s.K.gray[11],textAlign:"center"},children:["فایل تصویر را با فرمت png یا ",(0,i.jsx)("br",{})," jpeg وارد کنید"]}),"icon"===t&&(0,i.jsxs)(r.xv,{...o.p.description2,style:{color:s.K.gray[11],textAlign:"center"},children:["فایل آیکون را با فرمت svg ",(0,i.jsx)("br",{})," وارد کنید"]}),(0,i.jsx)(a.gq,{width:16,height:16})]})}},30884:function(e,t,n){"use strict";var i=n(57437),r=n(2265),a=n(58606),s=n(89183),o=n(28326),l=n(27533),c=n(1845),d=n(21949);let u={open:{opacity:1,height:"auto"},closed:{opacity:0,height:0}};t.default=e=>{let{hero:t,children:n,withEdit:s=!1,withButton:g=!1,withDelete:j=!1,isDisableDelete:m=!1,onEdit:y,onButtonSubmit:v,onDelete:f,hasMedia:b}=e,[w,C]=(0,r.useState)(!1);return(0,i.jsxs)(p,{isOpen:w,children:[(0,i.jsxs)(o.kC,{className:"style",width:"100%",justify:"between",align:"center",p:"8px 16px",onClick:()=>{C(!w)},children:[(0,i.jsxs)(o.kC,{gap:"2",align:"center",children:[b&&(0,i.jsx)(l.eA,{width:14.13,height:14.13}),(0,i.jsx)(o.xv,{style:{color:c.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"24px"},children:t}),g&&(0,i.jsx)(o.hU,{variant:"surface",size:"2",onClick:y,children:(0,i.jsx)(l.z,{width:16,height:16})})]}),(0,i.jsxs)(o.kC,{align:"center",gap:"4",children:[g&&(0,i.jsx)(o.zx,{size:"2",variant:"soft",onClick:v,children:(0,i.jsx)(o.xv,{...d.p.body1,children:"افزودن ویژگی"})}),s&&(0,i.jsx)(o.hU,{variant:"surface",size:"2",onClick:y,children:(0,i.jsx)(l.z,{width:16,height:16})}),j&&(0,i.jsx)(o.hU,{variant:"surface",size:"2",onClick:f,disabled:m,children:(0,i.jsx)(x,{width:16,height:16})}),(0,i.jsx)(a.E.div,{animate:{rotate:w?180:0},transition:{duration:.3},style:{width:32,height:32,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(h,{})})]})]}),(0,i.jsx)(a.E.div,{variants:u,initial:"closed",animate:w?"open":"closed",transition:{duration:.3},style:{overflow:"hidden"},layout:!0,children:(0,i.jsx)(o.rj,{gap:"16px",p:"24px 16px 16px 16px",children:n})})]})};let p=(0,s.ZP)(o.rj).withConfig({componentId:"sc-8b254d52-0"})(["border-radius:8px;border:1px solid ",";.style{border-radius:",";height:fit-content;background-color:",";cursor:pointer;}"],c.K.gray[6],e=>{let{isOpen:t}=e;return t?"8px 8px 0px 0px":"8px"},c.K.blue[4]),h=(0,s.ZP)(l.CH).withConfig({componentId:"sc-8b254d52-1"})(["path{fill:",";}"],c.K.blue[10]),x=(0,s.ZP)(l.rF).withConfig({componentId:"sc-8b254d52-2"})(["path{fill:",";}"],c.K.pink[9])},6850:function(e,t,n){"use strict";var i=n(57437);n(2265);var r=n(28326),a=n(1845);t.Z=e=>{let{hero:t,type:n,children:s}=e;return(0,i.jsxs)(r.rj,{width:"100%",style:{borderRadius:8,border:"1px solid ".concat(a.K.gray[6])},children:[(0,i.jsx)(r.kC,{width:"100%",justify:"between",align:"center",p:"8px 16px",style:{height:"fit-content",backgroundColor:"changeAble"===n?a.K.blue[4]:a.K.gray[3],borderRadius:"8px 8px 0px 0px"},children:(0,i.jsx)(r.X6,{as:"h6",style:{color:a.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"27px"},children:t})}),(0,i.jsx)(r.rj,{gap:"16px",p:"24px 16px 16px 16px",style:{backgroundColor:a.K.gray[2]},children:s})]})}},10504:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var i=n(64673),r=n.n(i);function a(e){return r()(e).locale("fa").format("jYYYY/jMM/jDD")}},31067:function(e,t,n){"use strict";n.d(t,{x:function(){return c},z:function(){return d}});var i=n(16463),r=n(38472),a=n(15263),s=n(86300).Buffer;let o="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),l=s.from(o).toString("base64"),c=r.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"up-auth":"Basic ".concat(l),"Content-Type":"application/json"}}),d=r.Z.create({baseURL:"https://uploader.darkube.app/admin/uploads/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(l)}});d.interceptors.request.use(e=>{let t=new a.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.request.use(e=>{let t=new a.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,i.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,i.redirect)("/error")):((0,i.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})}},function(e){e.O(0,[1553,3048,5452,8310,6990,1825,8702,6648,9269,5639,2107,8326,7533,2971,7023,1744],function(){return e(e.s=80690)}),_N_E=e.O()}]);