(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4291],{72431:function(){},29276:function(e,t,i){Promise.resolve().then(i.bind(i,11792))},11792:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return e2}});var n=i(57437),a=i(43767),r=i(36721),s=i(2265),l=i(4867),o=i(94963),c=i(31067),d=i(27918);let u=async()=>(await c.x.get("/category?sort=asc")).data.data,p=async e=>(await c.x.post("/category/array",{categories:e})).data,x=async e=>{let t=(0,d.v7)(e);return(await c.x.post("category/createSubcategories",t)).data},h=async(e,t)=>(await c.x.patch("/category/editCategory/".concat(e),{name:t})).data,g=async e=>(await c.x.delete("/category/delete/".concat(e))).data,j=async e=>(await c.x.get("/category/id/".concat(e))).data.data[0],y=async()=>(await c.x.get("/features")).data.data,m=async e=>(await c.x.get("/features/getFeatureGroup/".concat(e))).data.data,b=async e=>(await c.x.post("/features/array",{features:e})).data,v=async e=>(await c.x.post("/features/addFeature",e)).data,f=async(e,t)=>(await c.x.patch("/features/editFeatureGroup/".concat(e),{name:t})).data,w=async(e,t)=>(await c.x.patch("/features/editFeature/".concat(e),{name:t})).data,C=async e=>(await c.x.delete("/features/deleteFeature/".concat(e))).data,k=async e=>(await c.x.delete("/features/deleteFeatureGroup/".concat(e))).data,I=async e=>{let t=new FormData;return t.append("type","PROVINCE"),t.append("position",e.position.toString()),t.append("file",e.file),t.append("provinceId",e.provinceId.toString()),(await c.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},O=async()=>(await c.x.get("/provinces/sorted/")).data.data,R=async e=>(await c.x.get("/provinces/sorted/".concat(e))).data.data,F=async e=>(await c.x.get("/cities/id/".concat(e))).data.data,P=async e=>(await c.x.post("/cities/array",{cities:e})).data,D=async e=>(await c.x.post("/town/create",e)).data,z=async e=>(await c.x.get("/provinces/map/".concat(e))).data.data,K=async e=>(await c.x.delete("/provinces/map",{data:e})).data,L=async e=>(await c.x.get("/provinces/about/".concat(e))).data.data,S=async e=>(await c.x.post("/provinces/detail",e)).data,U=async e=>(await c.x.patch("/provinces/detail",e)).data,Z=async e=>(await c.x.post("/provinces/about",e)).data,Q=async(e,t)=>(await c.x.patch("/cities/update/".concat(e),{name:t})).data,W=async(e,t)=>(await c.x.patch("/town/update/".concat(e),{name:t})).data,B=async e=>(await c.x.delete("/cities/id/".concat(e))).data,N=async e=>(await c.x.delete("/town/".concat(e))).data,T=async e=>(await c.x.delete("/upload/",{data:e})).data,V=async e=>{let t=new FormData;return t.append("type",e.type),t.append("categoryId",e.categoryId.toString()),t.append("file",e.file),(await c.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},q=async e=>{let t=new FormData;return t.append("type",e.type),t.append("categoryId",e.categoryId.toString()),t.append("file",e.file),(await c.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},_=async e=>{let t=new FormData;return t.append("type",e.type),t.append("feature_groupId",e.feature_groupId.toString()),t.append("file",e.file),(await c.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},E=async e=>{let t=new FormData;return t.append("type",e.type),t.append("feature_groupId",e.feature_groupId.toString()),t.append("file",e.file),(await c.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},A=async e=>{let t=new FormData;return t.append("type",e.type),t.append("featureId",e.featureId.toString()),t.append("file",e.file),(await c.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},Y=async e=>{let t=new FormData;return t.append("type",e.type),t.append("featureId",e.featureId.toString()),t.append("file",e.file),(await c.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},M=async e=>{let t=new FormData;return t.append("type",e.type),t.append("aboutId",e.aboutId.toString()),t.append("file",e.file),(await c.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data},$=async e=>{let t=new FormData;return t.append("type",e.type),t.append("cityId",e.cityId.toString()),t.append("file",e.file),t.append("position",e.position),(await c.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},H=async e=>{let t=new FormData;return t.append("type",e.type),t.append("townId",e.townId.toString()),t.append("file",e.file),t.append("position",e.position),(await c.z.post("image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},G=async e=>{let t=new FormData;return t.append("type",e.type),t.append("townId",e.townId.toString()),t.append("file",e.file),t.append("position",e.position),(await c.z.post("svg",t,{headers:{"Content-Type":"multipart/form-data"}})).data};var X=i(7507),J=i(77855),ee=i(31072),et=i(1845),ei=i(21949),en=i(39343),ea=i(93191),er=i(25524),es=i(89183),el=i(82336),eo=i(38746),ec=i(66648),ed=i(72107),eu=i(72549),ep=e=>{let{type:t}=e;return(0,n.jsxs)(X.kC,{width:"100%",maxWidth:"160px",minWidth:"160px",direction:"column",align:"center",gap:"2",p:"36.5px 12px",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8,cursor:"pointer"},children:[(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[11]},children:"pic"===t?"آپلود تصویر":"icon"===t&&"آپلود آیکون"}),"pic"===t&&(0,n.jsxs)(X.xv,{...ei.p.description2,style:{color:et.K.gray[11],textAlign:"center"},children:["فایل تصویر را با فرمت png یا ",(0,n.jsx)("br",{})," jpeg وارد کنید"]}),"icon"===t&&(0,n.jsxs)(X.xv,{...ei.p.description2,style:{color:et.K.gray[11],textAlign:"center"},children:["فایل آیکون را با فرمت svg ",(0,n.jsx)("br",{})," وارد کنید"]}),(0,n.jsx)(el.gq,{width:16,height:16})]})},ex=e=>{let{data:t,setIsOpen:i}=e,a=(0,en.cI)({defaultValues:{imageFile:null,iconFile:null,pic:(null==t?void 0:t.banner)?t.banner:"",icon:(null==t?void 0:t.icon)?null==t?void 0:t.icon:"",localPic:(null==t?void 0:t.banner)?null==t?void 0:t.banner:"",localIcon:(null==t?void 0:t.icon)?null==t?void 0:t.icon:"",name:null==t?void 0:t.name,isResetPic:null==t||!t.banner,isResetIcon:null==t||!t.icon}}),{control:r,watch:s,setValue:l}=a,o=(0,ea.NL)();console.log(s(),"watch");let{mutate:c}=(0,er.D)({mutationFn:async e=>await V(e)}),{mutate:d}=(0,er.D)({mutationFn:async e=>await q(e)}),{mutate:u,isPending:p}=(0,er.D)({mutationFn:async()=>await h(t.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("imageFile"),n=s("iconFile");o.invalidateQueries({queryKey:["single-category"]}),o.invalidateQueries({queryKey:["categories"]}),e&&c({categoryId:String(t.id),file:e,type:"CATEGORY"}),n&&d({categoryId:String(t.id),file:n,type:"CATEGORY"}),o.invalidateQueries({queryKey:["single-category"]}),o.invalidateQueries({queryKey:["categories"]}),(0,ee.xO)("دسته بندی مورد نظر با موفقیت ویرایش شد"),i({key:"edit-subCategory",isOpen:!1})}else(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),x=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},g=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localPic",URL.createObjectURL(n)),l("imageFile",n)}},j=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localIcon",URL.createObjectURL(n)),l("iconFile",n)}};return(0,n.jsxs)(en.RV,{...a,children:[(0,n.jsxs)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"4",children:[(0,n.jsx)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:(0,n.jsxs)(X.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{src:!1===s("isResetPic")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("pic")):s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"pic"})]})}})}}),s("icon")?(0,n.jsxs)(X.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{width:64,height:64,src:!1===s("isResetIcon")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("icon")):s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>j(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>j(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"icon"})]})}})}})]})}),(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"نام زیر دسته بندی",placeholder:"نام زیر دسته بندی",selectedValue:!!t.value})}})})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>i({key:"edit-subCategory",isOpen:!1}),onSubmit:()=>u(),isLoading:p})]})},eh=i(16463),eg=e=>{let{setIsOpen:t,data:i,cityID:a}=e,r=(0,en.cI)({defaultValues:{imageFile:null,iconFile:null,pic:(null==i?void 0:i.banner)?i.banner:"",icon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",localPic:(null==i?void 0:i.banner)?null==i?void 0:i.banner:"",localIcon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",name:null==i?void 0:i.name,isResetPic:null==i||!i.banner,isResetIcon:null==i||!i.icon}}),{control:l,watch:o,setValue:c}=r,d=(0,ea.NL)(),u=(0,eh.useParams)();console.log(i,"datadatadata");let{mutate:p,isIdle:x}=(0,er.D)({mutationFn:async e=>await H(e)}),{mutate:h,isIdle:g}=(0,er.D)({mutationFn:async e=>await G(e)}),{mutate:j,isPending:y}=(0,er.D)({mutationFn:async()=>await W(i.id,o("name")),onSuccess:e=>{if(!0===e.status){let e=o("imageFile"),n=o("iconFile");e&&(p({townId:String(i.id),file:e,position:"picture",type:"TOWN"}),d.invalidateQueries({queryKey:["cities",u.slug[2]]}),d.invalidateQueries({queryKey:["single-city",a]})),n&&(h({townId:String(i.id),file:n,position:"vector",type:"TOWN"}),d.invalidateQueries({queryKey:["cities",u.slug[2]]}),d.invalidateQueries({queryKey:["single-city"]})),(0,ee.xO)("شهرستان مورد نظر با موفقیت ویرایش شد"),t({key:"edit-town",isOpen:!1})}else(0,ee.bW)("خطایی رخ داده است . لطفا دوباره تلاش نمایید")}}),m=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},b=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await m(i);t(URL.createObjectURL(n)),c("localPic",URL.createObjectURL(n)),c("imageFile",n)}},v=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await m(i);t(URL.createObjectURL(n)),c("localIcon",URL.createObjectURL(n)),c("iconFile",n)}};return(0,s.useEffect)(()=>{(x||g)&&console.log(x,g)},[x,g]),(0,n.jsxs)(en.RV,{...r,children:[(0,n.jsxs)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(X.kC,{gap:"3",children:[o("pic")?(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{src:!1===o("isResetPic")?"".concat("https://uploader.bezanimbiroon.ir/").concat(o("pic")):o("isResetPic")&&"NULL"!==o("localPic")&&o("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"pic",control:l,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>b(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{c("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"pic",control:l,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>b(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"pic"})]})}})}}),o("icon")?(0,n.jsxs)(X.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{width:64,height:64,src:!1===o("isResetIcon")?"".concat("https://uploader.bezanimbiroon.ir/").concat(o("icon")):o("isResetIcon")&&"NULL"!==o("localIcon")&&o("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"icon",control:l,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>v(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{c("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"icon",control:l,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>v(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"icon"})]})}})}})]}),(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:l,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"نام شهرستان",placeholder:"نام شهر",selectedValue:!!t.value})}})})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit-town",isOpen:!1}),onSubmit:()=>j(),isLoading:y})]})},ej=e=>{let{setIsOpen:t,data:i}=e,a=(0,en.cI)({defaultValues:{imageFile:null,iconFile:null,pic:(null==i?void 0:i.banner)?i.banner:"",icon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",localPic:(null==i?void 0:i.banner)?null==i?void 0:i.banner:"",localIcon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",name:null==i?void 0:i.name,isResetPic:null==i||!i.banner,isResetIcon:null==i||!i.icon}}),{control:r,watch:s,setValue:l}=a,o=(0,ea.NL)(),{mutate:c}=(0,er.D)({mutationFn:async e=>await A(e)}),{mutate:d}=(0,er.D)({mutationFn:async e=>await Y(e)}),{mutate:u,isPending:p}=(0,er.D)({mutationFn:async()=>await w(i.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("imageFile"),n=s("iconFile");o.invalidateQueries({queryKey:["feature-group"]}),o.invalidateQueries({queryKey:["features"]}),e&&c({featureId:String(i.id),file:e,type:"FEATURE"}),n&&d({featureId:String(i.id),file:n,type:"FEATURE"}),o.invalidateQueries({queryKey:["feature-group"]}),o.invalidateQueries({queryKey:["features"]}),(0,ee.xO)(" ویژگی مورد نظر با موفقیت ویرایش شد"),t({key:"edit-feature",isOpen:!1})}else(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),x=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localPic",URL.createObjectURL(n)),l("imageFile",n)}},g=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localIcon",URL.createObjectURL(n)),l("iconFile",n)}};return(0,n.jsxs)(en.RV,{...a,children:[(0,n.jsxs)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(X.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{src:!1===s("isResetPic")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("pic")):s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>h(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>h(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"pic"})]})}})}}),s("icon")?(0,n.jsxs)(X.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{width:64,height:64,src:!1===s("isResetIcon")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("icon")):s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"icon"})]})}})}})]}),(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"نام ویژگی",placeholder:"نام ویژگی",selectedValue:!!t.value})}})})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit-feature",isOpen:!1}),onSubmit:()=>u(),isLoading:p})]})},ey=e=>{let{label:t,hasMedia:i,type:a,id:r,data:l,cityID:c}=e,[d,u]=(0,s.useState)({key:"edit-subCategory",isOpen:!1}),p=(0,ea.NL)(),{mutate:x,isPending:h}=(0,er.D)({mutationFn:async()=>g(r),onSuccess:async e=>{!0===e.status?(p.invalidateQueries({queryKey:["single-category"]}),(0,ee.xO)("زیر دسته بندی مورد نظر با موفقیت حذف شد"),u({...d,isOpen:!1})):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:j,isPending:y}=(0,er.D)({mutationFn:async()=>await C(r),onSuccess:e=>{!0===e.status?(p.invalidateQueries({queryKey:["feature-group"]}),(0,ee.xO)("آیتم مورد نظر با موفقیت حذف شد"),u({...d,isOpen:!1})):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:m,isPending:b}=(0,er.D)({mutationFn:async()=>await N(r),onSuccess:e=>{!0===e.status?(p.invalidateQueries({queryKey:["single-city"]}),(0,ee.xO)("شهر مورد نظر با موفقیت حذف شد"),u({...d,isOpen:!1})):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),v=e=>{switch(e){case"edit":"category"===a?u({isOpen:!0,key:"edit-subCategory"}):"feature"===a?u({isOpen:!0,key:"edit-feature"}):"town"===a&&u({isOpen:!0,key:"edit-town"});break;case"delete":"category"===a?u({isOpen:!0,key:"delete-subCategory"}):"feature"===a?u({isOpen:!0,key:"delete-feature"}):"town"===a&&u({isOpen:!0,key:"delete-town"})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{align:"center",gap:"3",p:"9.5px 16px",style:{backgroundColor:et.K.gray[3],borderRadius:16},children:[i&&(0,n.jsx)(el.eA,{width:14.13,height:14.13}),(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[11]},children:t}),(0,n.jsx)(X.hU,{variant:"surface",size:"1",onClick:()=>v("edit"),children:(0,n.jsx)(el.z,{width:16,height:16})}),(0,n.jsx)(X.hU,{variant:"surface",size:"1",onClick:()=>v("delete"),children:(0,n.jsx)(em,{width:16,height:16})})]}),(0,n.jsxs)(X.u_,{isOpen:d.isOpen,onClose:()=>u({...d,isOpen:!1}),children:["edit-subCategory"===d.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش زیر دسته بندی",handleClose:()=>u({...d,isOpen:!1})}),(0,n.jsx)(ex,{setIsOpen:()=>u({key:"edit-subCategory",isOpen:!1}),data:l})]}),"delete-subCategory"===d.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(X.xv,{children:["آیا از حذف زیر دسته بندی ",(0,n.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",t]})," اطمینان دارید؟"]}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>x(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:h?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>u({...d,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]}),"edit-feature"===d.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش ویژگی",handleClose:()=>u({...d,isOpen:!1})}),(0,n.jsx)(ej,{setIsOpen:()=>u({key:"edit-feature",isOpen:!1}),data:l})]}),"delete-feature"===d.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(X.xv,{children:["آیا از حذف ویژگی ",(0,n.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",t]})," اطمینان دارید؟"]}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>j(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:y?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>u({...d,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]}),"edit-town"===d.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش شهر",handleClose:()=>u({...d,isOpen:!1})}),(0,n.jsx)(eg,{setIsOpen:()=>u({key:"edit-town",isOpen:!1}),data:l,cityID:c})]}),"delete-town"===d.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(X.xv,{children:["آیا از حذف ویژگی ",(0,n.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:[" ",t]})," اطمینان دارید؟"]}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>m(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:b?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>u({...d,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})]})]})};let em=(0,es.ZP)(el.x8).withConfig({componentId:"sc-3bb444be-0"})(["path{fill:",";}"],et.K.pink[11]);var eb=i(19780),ev=i(30884),ef=e=>{let{data:t,setIsOpen:i}=e,a=(0,en.cI)({defaultValues:{imageFile:null,iconFile:null,pic:(null==t?void 0:t.banner)?t.banner:"",icon:(null==t?void 0:t.icon)?null==t?void 0:t.icon:"",localPic:(null==t?void 0:t.banner)?null==t?void 0:t.banner:"",localIcon:(null==t?void 0:t.icon)?null==t?void 0:t.icon:"",name:null==t?void 0:t.name,isResetPic:!t.banner,isResetIcon:!t.icon}}),{control:r,watch:s,setValue:l}=a,o=(0,ea.NL)(),{mutate:c}=(0,er.D)({mutationFn:async e=>await V(e)}),{mutate:d}=(0,er.D)({mutationFn:async e=>await q(e)}),{mutate:u,isPending:p}=(0,er.D)({mutationFn:async()=>await h(t.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("imageFile"),n=s("iconFile");e&&c({categoryId:String(t.id),file:e,type:"CATEGORY"}),n&&d({categoryId:String(t.id),file:n,type:"CATEGORY"}),o.invalidateQueries({queryKey:["categories"]}),(0,ee.xO)("دسته بندی مورد نظر با موفقیت ویرایش شد"),i({key:"edit-category",isOpen:!1})}else(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),x=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},g=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localPic",URL.createObjectURL(n)),l("imageFile",n)}},j=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localIcon",URL.createObjectURL(n)),l("iconFile",n)}};return(0,n.jsxs)(en.RV,{...a,children:[(0,n.jsxs)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(X.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{src:!1===s("isResetPic")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("pic")):s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"pic"})]})}})}}),s("icon")?(0,n.jsxs)(X.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{width:64,height:64,src:!1===s("isResetIcon")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("icon")):s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>j(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>j(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"icon"})]})}})}})]}),(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"نام دسته بندی",placeholder:"نام دسته بندی",selectedValue:!!t.value})}})})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>i({key:"edit-category",isOpen:!1}),onSubmit:()=>u(),isLoading:p})]})};let ew=(0,s.forwardRef)((e,t)=>{let{name:i,id:r,isEditable:l,selected:c,onSelect:d}=e,[u,p]=(0,s.useState)({isOpen:!1,key:"edit-category"}),h=(0,ea.NL)(),{control:y,watch:m,setValue:b,getValues:v}=(0,en.cI)({defaultValues:{name:""}}),{data:f,isLoading:w,isFetching:C}=(0,a.a)({queryKey:["single-category",r],queryFn:async()=>j(r),initialData:e,enabled:c}),{mutate:k,isPending:I}=(0,er.D)({mutationFn:async()=>g(r),onSuccess:async e=>{!0===e.status?(h.invalidateQueries({queryKey:["categories"]}),(0,ee.xO)("دسته بندی مورد نظر با موفقیت حذف شد"),p({...u,isOpen:!1})):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:O,isPending:R}=(0,er.D)({mutationFn:async()=>x({name:m("name"),parent_id:r}),onSuccess:async e=>{!0===e.status?(h.invalidateQueries({queryKey:["single-category"]}),b("name",""),(0,ee.xO)("زیر دسته بندی مورد نظر با موفقیت ایجاد شد")):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),F=()=>{let e=v("name").trim();if(!e){(0,ee.bW)("نام زیر دسته بندی نمی‌تواند خالی باشد");return}if(f&&f.children.some(t=>t.name===e)){(0,ee.bW)("زیر دسته بندی تکراری است");return}O()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.rj,{width:"100%",gapY:"5",ref:t,onClick:()=>{d()},children:(0,n.jsx)(ev.default,{isOpen:!0,hero:i,withEdit:!0,withDelete:!0,hasMedia:!0===f.hasMedia,isDisableDelete:!1===l,onEdit:e=>{e.stopPropagation(),p({key:"edit-category",isOpen:!0}),d()},onDelete:e=>{e.stopPropagation(),p({key:"delete-category",isOpen:!0})},children:(0,n.jsxs)(X.kC,{direction:"column",gap:"5",children:[(0,n.jsx)(X.kC,{width:"100%",align:"center",gap:"5",wrap:"wrap",children:w||C?(0,n.jsx)(o.$j,{style:{margin:"0 auto",scale:1.2}}):(null==f?void 0:f.children.length)===0?(0,n.jsxs)(X.kC,{direction:"column",gap:"5",children:[(0,n.jsx)(X.xv,{...ei.p.title1,style:{color:et.K.gray[11]},children:"هنوز زیر دسته بندی اضافه نشده است."}),(0,n.jsx)(X.xv,{...ei.p.paragraph2,style:{color:et.K.gray[11]},children:"از فیلد زیر استفاده کنید و زیردسته بندی را به لیست اضافه کنید."})]}):(0,n.jsx)(n.Fragment,{children:null==f?void 0:f.children.map(e=>(0,n.jsx)(ey,{cityID:1,type:"category",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))})}),(0,n.jsx)(X.xu,{width:"40%",children:(0,n.jsx)(en.Qr,{name:"name",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(eb.Z,{...t,placeholder:"افزودن زیر دسته بندی",onClick:()=>F(),isLoading:R})}})})]})})}),(0,n.jsxs)(X.u_,{isOpen:u.isOpen,onClose:()=>p({...u,isOpen:!1}),children:["edit-category"===u.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش دسته بندی",handleClose:()=>p({...u,isOpen:!1})}),(0,n.jsx)(ef,{setIsOpen:()=>p({key:"edit-category",isOpen:!1}),data:null!=f?f:{name:"",id:null}})]}),"delete-category"===u.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(X.xv,{children:["آیا از حذف دسته بندی ",(0,n.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:i})," اطمینان دارید؟"," "]}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>k(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:I?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>p({...u,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})]})]})});var eC=e=>{let{data:t,setIsOpen:i}=e,{control:a,watch:r,setValue:s,getValues:l}=(0,en.cI)({defaultValues:{name:"",parent_id:0,categoryList:t.map(e=>e.name)}}),o=(0,ea.NL)(),{mutate:c,isPending:d}=(0,er.D)({mutationFn:async e=>await p(e),onSuccess:e=>{!0===e.status?((0,ee.xO)("دسته بندی مورد نظر با موفقیت ایجاد شد"),o.invalidateQueries({queryKey:["categories"]}),i(!1)):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),u=()=>{let e=l("name").trim(),t=l("categoryList");!e||(null==t?void 0:t.includes(e))?e?e&&(0,ee.bW)("دسته بندی تکراری است"):(0,ee.bW)("نام دسته بندی نمی‌تواند خالی باشد"):(s("categoryList",[...t,e]),s("name",""))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{direction:"column",p:"12px 16px",gap:"4",children:[(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,n.jsx)(eb.Z,{...t,placeholder:"افزودن دسته بندی",onClick:()=>u()})}})}),(0,n.jsx)(X.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:"1px solid ".concat(et.K.gray[7]),borderRadius:8},children:r("categoryList").map((e,t)=>(0,n.jsx)(X.xu,{p:"9.5px 16px",style:{backgroundColor:et.K.gray[3],borderRadius:16},children:(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[11]},children:e})},t))})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onSubmit:()=>{let e=l("categoryList"),i=t.map(e=>e.name),n=e.filter(e=>!i.includes(e)).map(e=>({name:e,parent_id:0}));n.length>0?c(n):(0,ee.bW)("هیچ دسته بندی جدیدی اضافه نشده است")},onCloseButton:()=>i(!1),isLoading:d})]})},ek=()=>{let[e,t]=(0,s.useState)(!1),[i,r]=(0,s.useState)(null),{data:c,isLoading:d,isFetching:p,isError:x}=(0,a.a)({queryKey:["categories"],queryFn:async()=>await u()});return d||p?(0,n.jsx)(X.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(o.$j,{style:{scale:3}})}):!c||x?(0,ee.bW)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{width:"100%",direction:"column",gap:"5",children:[(0,n.jsx)(X.kC,{width:"100%",align:"center",justify:"between",children:(0,n.jsx)(X.zx,{size:"3",variant:"ghost",onClick:()=>t(!0),style:{paddingBlock:11.5},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"افزودن دسته بندی"})]})})}),null==c?void 0:c.map((e,t)=>(0,n.jsx)(ew,{selected:i===e.id,onSelect:()=>r(e.id),currentIndex:t,...e},e.id))]}),(0,n.jsxs)(X.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,n.jsx)(J.Z,{title:"افزودن دسته بندی",handleClose:()=>t(!1)}),(0,n.jsx)(eC,{data:c,setIsOpen:t})]})]})},eI=e=>{let{setIsOpen:t,data:i}=e,a=Number((0,eh.useParams)().slug[2]),{control:r,watch:s,getValues:l,setValue:o}=(0,en.cI)({defaultValues:{name:"",provinceId:a,cityList:null==i?void 0:i.map(e=>e.name)}}),c=(0,ea.NL)(),{mutate:d,isPending:u}=(0,er.D)({mutationFn:async e=>await P(e),onSuccess:e=>{!0===e.status?((0,ee.xO)("شهرستان مورد نظر با موفقیت ایجاد شد"),c.invalidateQueries({queryKey:["cities"]}),t(!1)):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),p=()=>{let e=l("name").trim(),t=l("cityList");!e||(null==t?void 0:t.includes(e))?e?(0,ee.bW)("شهرستان تکراری است"):e||(0,ee.bW)("نام شهرستان نمی‌تواند خالی باشد"):(o("cityList",[...t,e]),o("name",""))},x=()=>{let e=l("cityList"),t=i.map(e=>e.name),n=e.filter(e=>!t.includes(e)).map(e=>({name:e,provinceId:a}));n.length>0?d(n):(0,ee.bW)("هیچ شهرستان جدیدی اضافه نشده است")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{direction:"column",p:"12px 16px",gap:"4",children:[(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eb.Z,{...t,placeholder:"افزودن شهرستان",onClick:()=>p()})}})}),(0,n.jsx)(X.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:"1px solid ".concat(et.K.gray[7]),borderRadius:8},children:s("cityList").map((e,t)=>(0,n.jsx)(X.xu,{p:"9.5px 16px",style:{backgroundColor:et.K.gray[3],borderRadius:16},children:(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[11]},children:e})},t))})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onSubmit:()=>x(),onCloseButton:()=>t(!1),isLoading:u})]})},eO=e=>{let{setIsOpen:t,data:i}=e,a=(0,en.cI)({defaultValues:{imageFile:null,iconFile:null,pic:(null==i?void 0:i.banner)?i.banner:"",icon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",localPic:(null==i?void 0:i.banner)?null==i?void 0:i.banner:"",localIcon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",name:null==i?void 0:i.name,isResetPic:!i.banner,isResetIcon:!i.icon}}),{control:r,watch:l,setValue:o}=a,c=(0,ea.NL)();console.log(i,"EditCityModalEditCityModalEditCityModal");let{mutate:d,isSuccess:u}=(0,er.D)({mutationFn:async e=>await $(e)}),{mutate:p,isPending:x}=(0,er.D)({mutationFn:async()=>await Q(i.id,l("name")),onSuccess:e=>{if(!0===e.status){let e=l("imageFile"),t=l("iconFile");e&&d({cityId:String(i.id),file:e,position:"picture",type:"CITY"}),t&&d({cityId:i.id,file:t,position:"vector",type:"CITY"}),(0,ee.xO)("شهر مورد نظر با موفقیت ویرایش شد")}else(0,ee.bW)("لطفا دوباره تلاش نمایید")}});(0,s.useEffect)(()=>{u&&(c.invalidateQueries({queryKey:["cities"]}),c.invalidateQueries({queryKey:["single-city"]}))},[u]);let h=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},g=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await h(i);t(URL.createObjectURL(n)),o("localPic",URL.createObjectURL(n)),o("imageFile",n)}},j=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await h(i);t(URL.createObjectURL(n)),o("localIcon",URL.createObjectURL(n)),o("iconFile",n)}};return(0,n.jsxs)(en.RV,{...a,children:[(0,n.jsxs)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(X.kC,{gap:"3",children:[l("pic")?(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{src:!1===l("isResetPic")?"".concat("https://uploader.bezanimbiroon.ir/").concat(l("pic")):l("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{o("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"pic"})]})}})}}),l("icon")?(0,n.jsxs)(X.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{width:64,height:64,src:!1===l("isResetIcon")?"".concat("https://uploader.bezanimbiroon.ir/").concat(l("icon")):l("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>j(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{o("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>j(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"icon"})]})}})}})]}),(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"نام شهرستان",placeholder:"نام شهرستان",selectedValue:!!t.value})}})})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit",isOpen:!1}),onSubmit:()=>p(),isLoading:x})]})};let eR=(0,s.forwardRef)((e,t)=>{let{name:i,id:r,hasMedia:l,onSelect:c,isOpen:d,selectedId:u}=e,[p,x]=(0,s.useState)({isOpen:!1,key:"edit"}),{control:h,watch:g,getValues:j,setValue:y}=(0,en.cI)({defaultValues:{name:""}}),m=(0,ea.NL)(),{data:b,isLoading:v,isFetching:f}=(0,a.a)({queryKey:["single-city",u],queryFn:async()=>F(u)}),{mutate:w,isPending:C}=(0,er.D)({mutationFn:async()=>await D({name:g("name"),citiesId:r}),onSuccess:e=>{!0===e.status?(m.invalidateQueries({queryKey:["single-city"]}),(0,ee.xO)("شهر مورد نظر با موفقیت اضافه شد"),y("name","")):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:k,isPending:I}=(0,er.D)({mutationFn:async()=>await B(r),onSuccess:e=>{!0===e.status?(m.invalidateQueries({queryKey:["cities"]}),(0,ee.xO)("شهر مورد نظر با موفقیت حذف شد")):(0,ee.bW)("مشکلی پیش آمده . لطفا مجددا تلاش کنید")}}),O=()=>{let e=j("name").trim();if(!e){(0,ee.bW)("نام شهر نمی‌تواند خالی باشد");return}if(null==b?void 0:b.children.some(t=>t.name===e)){(0,ee.bW)("این شهر از قبل وجود دارد");return}w()};return console.log(b,"cityDatacityDatacityData"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.rj,{width:"100%",gapY:"5",ref:t,onClick:c,children:(0,n.jsx)(ev.default,{isOpen:d,hero:i,withEdit:!0,withDelete:!0,hasMedia:!0===l,onEdit:e=>{e.stopPropagation(),x({key:"edit",isOpen:!0}),c()},onDelete:e=>{e.stopPropagation(),x({key:"delete",isOpen:!0})},children:(0,n.jsxs)(X.kC,{direction:"column",gap:"5",children:[v||f?(0,n.jsx)(o.$j,{style:{margin:"0 auto",scale:1.2}}):(null==b?void 0:b.children.length)===0?(0,n.jsxs)(X.kC,{direction:"column",gap:"5",children:[(0,n.jsx)(X.xv,{...ei.p.title1,style:{color:et.K.gray[11]},children:"هنوز شهری اضافه نشده است."}),(0,n.jsx)(X.xv,{...ei.p.paragraph2,style:{color:et.K.gray[11]},children:"از فیلد زیر استفاده کنید و شهر را به لیست اضافه کنید."})]}):(0,n.jsx)(X.kC,{width:"100%",align:"center",gap:"5",wrap:"wrap",children:null==b?void 0:b.children.map(e=>(0,n.jsx)(ey,{type:"town",label:e.name,cityID:u,hasMedia:e.hasMedia,id:e.id,data:e},e.id))}),(0,n.jsx)(X.xu,{width:"40%",children:(0,n.jsx)(en.Qr,{name:"name",control:h,render:e=>{let{field:t}=e;return(0,n.jsx)(eb.Z,{...t,placeholder:"افزودن شهر",onClick:()=>O(),isLoading:C})}})})]})})}),(0,n.jsxs)(X.u_,{isOpen:p.isOpen,onClose:()=>x({...p,isOpen:!1}),children:["edit"===p.key&&!!b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش شهرستان",handleClose:()=>x({...p,isOpen:!1})}),(0,n.jsx)(eO,{setIsOpen:()=>x({key:"edit",isOpen:!1}),data:b})]}),"delete"===p.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(X.xv,{...ei.p.title1,style:{color:et.K.gray[11]},children:["آیا از حذف شهرستان ",(0,n.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:i})," اطمینان دارید؟"]}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>k(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:I?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>x({...p,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})]})]})});var eF=s.memo(eR),eP=()=>{let[e,t]=(0,s.useState)(!1),[i,r]=(0,s.useState)(null),c=Number((0,eh.useParams)().slug[2]),{data:d,isLoading:u,isFetching:p,isError:x}=(0,a.a)({queryKey:["cities",c],queryFn:async()=>await R(c)});return u||p?(0,n.jsx)(X.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(o.$j,{style:{scale:3}})}):!d||x?(0,ee.bW)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{width:"100%",direction:"column",gap:"5",children:[(0,n.jsx)(X.kC,{width:"100%",align:"center",justify:"between",children:(0,n.jsx)(X.zx,{size:"3",variant:"ghost",onClick:()=>t(!0),style:{paddingBlock:"11.5px"},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"افزودن شهرستان"})]})})}),null==d?void 0:d.children.map((e,t)=>(0,n.jsx)(eF,{selectedId:Number(i),selected:i===e.id,isOpen:i===e.id,onSelect:()=>r(e.id),currentIndex:t,...e},e.id))]}),(0,n.jsxs)(X.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,n.jsx)(J.Z,{title:"افزودن شهرستان",handleClose:()=>t(!1)}),(0,n.jsx)(eI,{setIsOpen:t,data:d.children})]})]})},eD=e=>{let{setIsOpen:t,data:i}=e,a=(0,en.cI)({defaultValues:{imageFile:null,iconFile:null,pic:(null==i?void 0:i.banner)?i.banner:"",icon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",localPic:(null==i?void 0:i.banner)?null==i?void 0:i.banner:"",localIcon:(null==i?void 0:i.icon)?null==i?void 0:i.icon:"",name:null==i?void 0:i.name,isResetPic:!i.banner,isResetIcon:!i.icon}}),{control:r,watch:s,setValue:l}=a,o=(0,ea.NL)(),{mutate:c}=(0,er.D)({mutationFn:async e=>await _(e)}),{mutate:d}=(0,er.D)({mutationFn:async e=>await E(e)}),{mutate:u,isPending:p}=(0,er.D)({mutationFn:async()=>await f(i.id,s("name")),onSuccess:e=>{if(!0===e.status){let e=s("imageFile"),n=s("iconFile");o.invalidateQueries({queryKey:["features"]}),e&&c({feature_groupId:String(i.id),file:e,type:"FEATURE_GROUP"}),n&&d({feature_groupId:String(i.id),file:n,type:"FEATURE_GROUP"}),o.invalidateQueries({queryKey:["features"]}),(0,ee.xO)(" ویژگی مورد نظر با موفقیت ویرایش شد"),t({key:"edit",isOpen:!1})}else(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),x=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},h=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localPic",URL.createObjectURL(n)),l("imageFile",n)}},g=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await x(i);t(URL.createObjectURL(n)),l("localIcon",URL.createObjectURL(n)),l("iconFile",n)}};return(0,n.jsxs)(en.RV,{...a,children:[(0,n.jsxs)(X.kC,{direction:"column",align:"center",p:"12px 16px",gap:"18px",children:[(0,n.jsxs)(X.kC,{gap:"3",children:[s("pic")?(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{src:!1===s("isResetPic")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("pic")):s("localPic"),alt:"",fill:!0,style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>h(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetPic",!0)},style:{position:"absolute",bottom:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"pic",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>h(e,t.onChange),accept:{"image/*":[".jpeg",".png"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"pic"})]})}})}}),s("icon")?(0,n.jsxs)(X.kC,{width:"160px",height:"160px",justify:"center",align:"center",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(ec.default,{width:64,height:64,src:!1===s("isResetIcon")?"".concat("https://uploader.bezanimbiroon.ir/").concat(s("icon")):s("localIcon"),alt:"",style:{objectFit:"cover",borderRadius:8}}),(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.hU,{onClick:()=>{l("isResetIcon",!0)},style:{position:"absolute",bottom:0,right:0,borderRadius:8},children:(0,n.jsx)(el.BN,{})})]})}})}})]}):(0,n.jsx)(en.Qr,{name:"icon",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(eo.ZP,{onDrop:e=>g(e,t.onChange),accept:{"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(ep,{type:"icon"})]})}})}})]}),(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:r,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"نام دسته ویژگی",placeholder:"نام دسته ویژگی",selectedValue:!!t.value})}})})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"edit",isOpen:!1}),onSubmit:()=>u(),isLoading:p})]})};let ez=(0,s.forwardRef)((e,t)=>{var i;let{id:r,name:l,selected:c,onSelect:d}=e,[u,p]=(0,s.useState)({isOpen:!1,key:"edit"}),{control:x,watch:h,setValue:g,getValues:j}=(0,en.cI)({defaultValues:{name:""}}),y=(0,ea.NL)(),{data:b,isLoading:f,isFetching:w}=(0,a.a)({queryKey:["feature-group",c],queryFn:async()=>await m(r),initialData:e,enabled:c}),{mutate:C,isPending:I}=(0,er.D)({mutationFn:async()=>await v({name:h("name"),featureGroupid:r}),onSuccess:e=>{!0===e.status?(y.invalidateQueries({queryKey:["feature-group"]}),(0,ee.xO)("ویژگی مورد نظر با موفقیت ایجاد شد"),g("name","")):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),{mutate:O,isPending:R}=(0,er.D)({mutationFn:async()=>await k(r),onSuccess:e=>{!0===e.status?(y.invalidateQueries({queryKey:["features"]}),(0,ee.xO)("ویژگی مورد نظر با موفقیت حذف شد")):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),F=()=>{let e=j("name").trim();if(!e){(0,ee.bW)("نام ویژگی نمی‌تواند خالی باشد");return}if(b.features.some(t=>t.name===e)){(0,ee.bW)("این ویژگی از قبل وجود دارد");return}C()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.rj,{width:"100%",gapY:"5",ref:t,onClick:d,children:(0,n.jsx)(ev.default,{isOpen:!0,hero:l,withEdit:!0,withDelete:!0,hasMedia:!0===b.hasMedia,isDisableDelete:!0,onEdit:e=>{e.stopPropagation(),d(),p({key:"edit",isOpen:!0})},onDelete:e=>{e.stopPropagation(),p({key:"delete",isOpen:!0})},children:(0,n.jsxs)(X.kC,{direction:"column",gap:"5",children:[(0,n.jsx)(X.kC,{width:"100%",gap:"5",align:"center",wrap:"wrap",children:f||w?(0,n.jsx)(o.$j,{style:{margin:"0 auto",scale:1.2}}):(null==b?void 0:null===(i=b.features)||void 0===i?void 0:i.length)===0?(0,n.jsxs)(X.kC,{direction:"column",gap:"5",children:[(0,n.jsx)(X.xv,{...ei.p.title1,style:{color:et.K.gray[11]},children:"هنوز ویژگی اضافه نشده است."}),(0,n.jsx)(X.xv,{...ei.p.paragraph2,style:{color:et.K.gray[11]},children:"از فیلد زیر استفاده کنید و ویژگی را به لیست اضافه کنید."})]}):(0,n.jsx)(n.Fragment,{children:null==b?void 0:b.features.map(e=>(0,n.jsx)(ey,{cityID:1,type:"feature",label:e.name,hasMedia:e.hasMedia,id:e.id,data:e},e.id))})}),(0,n.jsx)(X.xu,{width:"40%",children:(0,n.jsx)(en.Qr,{name:"name",control:x,render:e=>{let{field:t}=e;return(0,n.jsx)(eb.Z,{...t,placeholder:"افزودن ویژگی",onClick:()=>F(),isLoading:I})}})})]})})}),(0,n.jsxs)(X.u_,{isOpen:u.isOpen,onClose:()=>p({...u,isOpen:!1}),children:["delete"!==u.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش دسته ویژگی",handleClose:()=>p({...u,isOpen:!1})}),(0,n.jsx)(eD,{setIsOpen:()=>p({key:"edit",isOpen:!1}),data:e})]}),"delete"===u.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsxs)(X.xv,{...ei.p.title1,style:{color:et.K.gray[11]},children:["آیا از حذف دسته ویژگی ",(0,n.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:l})," اطمینان دارید؟"]}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>O(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:R?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>p({...u,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})]})]})});var eK=s.memo(ez),eL=e=>{let{setIsOpen:t,data:i}=e,{control:a,watch:r,getValues:s,setValue:l}=(0,en.cI)({defaultValues:{name:"",featureGroupid:0,featureList:i.map(e=>e.name)}}),o=(0,ea.NL)(),{mutate:c,isPending:d}=(0,er.D)({mutationFn:async e=>await b(e),onSuccess:e=>{!0===e.status?((0,ee.xO)("ویژگی مورد نظر با موفقیت ایجاد شد"),o.invalidateQueries({queryKey:["features"]}),t(!1)):(0,ee.bW)("لطفا دوباره تلاش نمایید")}}),u=()=>{let e=s("name").trim(),t=s("featureList");!e||(null==t?void 0:t.includes(e))?e?(0,ee.bW)("دسته ویژگی تکراری است"):e||(0,ee.bW)("نام دسته ویژگی نمی‌تواند خالی باشد"):(l("featureList",[...t,e]),l("name",""))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{direction:"column",p:"12px 16px",gap:"4",children:[(0,n.jsx)(X.xu,{width:"50%",children:(0,n.jsx)(en.Qr,{name:"name",control:a,render:e=>{let{field:t}=e;return(0,n.jsx)(eb.Z,{...t,placeholder:"افزودن دسته ویژگی",onClick:()=>u()})}})}),(0,n.jsx)(X.kC,{width:"100%",align:"center",gap:"5",p:"4",wrap:"wrap",style:{border:"1px solid ".concat(et.K.gray[7]),borderRadius:8},children:r("featureList").map((e,t)=>(0,n.jsx)(X.xu,{p:"9.5px 16px",style:{backgroundColor:et.K.gray[3],borderRadius:16},children:(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[11]},children:e})},t))})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت",closeButtonText:"لغو",onCloseButton:()=>t(!1),onSubmit:()=>{let e=s("featureList"),t=i.map(e=>e.name),n=e.filter(e=>!t.includes(e)).map(e=>({name:e,featureGroupid:0}));n.length>0?c(n):(0,ee.bW)("هیچ ویژگی جدیدی اضافه نشده است")},isLoading:d})]})},eS=()=>{let[e,t]=(0,s.useState)(!1),[i,r]=(0,s.useState)(null),{data:c,isLoading:d,isFetching:u,isError:p}=(0,a.a)({queryKey:["features"],queryFn:async()=>await y()});return(console.log("feature",c),d||u)?(0,n.jsx)(X.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(o.$j,{style:{scale:3}})}):!c||p?(0,ee.bW)("مشکلی پیش آمده. لطفا مجددا تلاش نمایید"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.kC,{width:"100%",direction:"column",gap:"5",children:[(0,n.jsx)(X.zx,{size:"4",variant:"ghost",style:{width:"fit-content",paddingBlock:11.5},onClick:()=>t(!0),children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"افزودن دسته ویژگی"})]})}),null==c?void 0:c.map((e,t)=>(0,n.jsx)(eK,{selected:i===e.id,onSelect:()=>r(e.id),currentIndex:t,...e},e.id))]}),(0,n.jsxs)(X.u_,{isOpen:e,onClose:()=>t(!1),children:[(0,n.jsx)(J.Z,{title:"افزودن دسته ویژگی",handleClose:()=>t(!1)}),(0,n.jsx)(eL,{data:c,setIsOpen:t})]})]})},eU=i(43397),eZ=e=>{let{submitButtonText:t,closeButtonText:i,buttonsPosition:a,isLoading:r,disabled:s,onCloseButton:l,onSubmit:c}=e;return(0,n.jsxs)(X.kC,{width:"100%",align:"center",justify:a,gap:"5",p:"4",style:{border:"1px solid ".concat(et.K.gray[6]),borderRadius:8,backgroundColor:et.K.gray[2]},children:[(0,n.jsx)(X.zx,{size:"3",variant:"soft",disabled:s,style:{padding:"13.5px 48.5px"},onClick:c,children:r?(0,n.jsx)(o.$j,{}):(0,n.jsx)(X.xv,{...ei.p.body1,children:t})}),(0,n.jsx)(X.zx,{size:"3",colorVariant:"PINK",style:{padding:"13.5px 48.5px"},onClick:l,children:(0,n.jsx)(X.xv,{...ei.p.body1,children:i})})]})},eQ=i(6850),eW=e=>{let{setIsOpen:t}=e,i=Number((0,eh.useParams)().slug[2]),{control:a,watch:r}=(0,en.cI)({defaultValues:{type:"PROVINCE",titleItem:"",descriptionItem:"",id:i}}),s=(0,ea.NL)(),{mutate:l,isPending:o}=(0,er.D)({mutationFn:async()=>await S(r()),onSuccess:e=>{!0===e.status?(s.invalidateQueries({queryKey:["province-area"]}),(0,ee.xO)("جاذبه‌ی مورد نظر با موفقیت افزوده شد"),t({key:"add",isOpen:!0})):(0,ee.bW)("خطایی رخ داده است")}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.rj,{width:"100%",p:"4",mt:"12px",gapY:"14px",children:[(0,n.jsx)(en.Qr,{name:"titleItem",control:a,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"عنوان جاذبه",placeholder:"عنوان جاذبه",selectedValue:!!t.value})}}),(0,n.jsx)(en.Qr,{name:"descriptionItem",control:a,render:e=>{let{field:t}=e;return(0,n.jsx)(X.Kx,{...t,label:"توضیح جاذبه",placeholder:"توضیح جاذبه",selectedValue:!!t.value,rows:5})}})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({isOpen:!1,key:"add"}),onSubmit:()=>l(),isLoading:o,disabled:0===r("titleItem").length&&0===r("descriptionItem").length})]})},eB=i(86324),eN=e=>{let{name:t,children:i,errorText:a,style:r,localPath:s,resetStore:l}=e,{control:o,setValue:c}=(0,en.Gc)(),d=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},u=async(e,i)=>{if(e&&e[0]){let n=e[0],a=await d(n);i(URL.createObjectURL(a)),c(t,a),c(s,URL.createObjectURL(a)),c(l,!1)}};return(0,n.jsx)(en.Qr,{name:t,control:o,render:e=>{let{field:t}=e;return(0,n.jsxs)(X.kC,{width:"max-content",position:"relative",direction:"column",style:r,children:[(0,n.jsx)(eo.ZP,{onDrop:e=>{u(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:a}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...a()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:i})]})}}),a&&(0,n.jsx)(eB.Z,{text:a})]})}})},eT=e=>{let{filePath:t,type:i,localPath:a,isOrigin:r,resetStore:s}=e;return(0,n.jsxs)(X.xu,{width:"160px",height:"160px",position:"relative",style:{border:"1px dashed ".concat(et.K.blue[8]),borderRadius:8},children:[(0,n.jsx)(X.kC,{align:"center",justify:"center",height:"100%",children:(0,n.jsx)(ec.default,{src:r?"".concat("https://uploader.bezanimbiroon.ir/").concat(t):a,alt:"item image or icon",width:80,height:80})}),(0,n.jsx)(eN,{resetStore:s,localPath:"image"===i?"localImagePath":"localIconPath",name:"image"===i?"imagePath":"iconPath",style:{position:"absolute",bottom:0},children:(0,n.jsx)(X.hU,{children:(0,n.jsx)(el.BN,{})})})]})},eV=e=>{let{setIsOpen:t,data:i}=e,a=(0,en.cI)({defaultValues:{iconPath:null==i?void 0:i.pathItem,localIconPath:null,isIcon:null!=i&&!!i.pathItem}}),{watch:r}=a,s=(0,ea.NL)();console.log("DATA IN MODAL",i);let{mutate:l,isPending:o}=(0,er.D)({mutationFn:async()=>await M({aboutId:i.id,type:"AREA_DETAIL",file:r("iconPath")}),onSuccess:e=>{!0===e.status?(s.invalidateQueries({queryKey:["province-area"]}),(0,ee.xO)("آیکون مورد نظر با موفقیت آپلود شد"),t({key:"svg",isOpen:!1})):(0,ee.bW)("مشکلی پیش آمده است . لطفا مجددا تلاش نمایید")}});return console.log(i,"data"),console.log(r(),"dfsdafdf"),(0,n.jsxs)(en.RV,{...a,children:[(0,n.jsx)(X.kC,{width:"100%",py:"4",align:"center",justify:"center",children:r("iconPath")?(0,n.jsx)(eT,{resetStore:"isIcon",type:"svg",localPath:"".concat(r("localIconPath")),filePath:null==i?void 0:i.pathItem,isOrigin:r("isIcon")}):(0,n.jsx)(eN,{resetStore:"isIcon",name:"iconPath",localPath:"localIconPath",children:(0,n.jsx)(ep,{type:"icon"})})}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({key:"svg",isOpen:!1}),onSubmit:()=>l(),isLoading:o})]})},eq=e=>{let{setIsOpen:t,currentItem:i}=e,{control:a,setValue:r}=(0,en.Gc)(),l=(0,en.qo)({name:"titleItem",defaultValue:""}),o=(0,en.qo)({name:"descriptionItem",defaultValue:""}),c=(0,ea.NL)(),{mutate:d,isPending:u}=(0,er.D)({mutationFn:async()=>await U({titleItem:l,descriptionItem:o,id:(null==i?void 0:i.id)||0}),onSuccess:e=>{!0===e.status?(c.invalidateQueries({queryKey:["province-area"]}),(0,ee.xO)("جاذبه‌ی مورد نظر با موفقیت ویرایش شد"),t({key:"edit",isOpen:!0})):(0,ee.bW)("خطایی رخ داده است")}});return(0,s.useEffect)(()=>{i&&(r("titleItem",i.titleItem),r("descriptionItem",i.descriptionItem))},[i,r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.rj,{width:"100%",p:"4",mt:"12px",gapY:"14px",children:[(0,n.jsx)(en.Qr,{name:"titleItem",control:a,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"عنوان جاذبه",placeholder:"عنوان جاذبه",selectedValue:!!t.value})}}),(0,n.jsx)(en.Qr,{name:"descriptionItem",control:a,render:e=>{let{field:t}=e;return(0,n.jsx)(X.Kx,{...t,label:"توضیح جاذبه",placeholder:"توضیح جاذبه",selectedValue:!!t.value,rows:5})}})]}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت ",closeButtonText:"لغو",onCloseButton:()=>t({isOpen:!1,key:"edit"}),isLoading:u,onSubmit:()=>d(),disabled:0===l.trim().length||0===o.trim().length})]})},e_=()=>{var e,t,i;let r=Number((0,eh.useParams)().slug[2]),{data:c,isLoading:d,isFetching:u}=(0,a.a)({queryKey:["province-area",r],queryFn:async()=>await L(r),staleTime:0}),[p,x]=(0,s.useState)({isOpen:!1,key:"add"}),[h,g]=(0,s.useState)(),{back:j}=(0,eU.tv)(),y=(0,en.cI)({defaultValues:{id:r,type:"PROVINCE",titleOfDetail:(null==c?void 0:c.titleOfDetail)?null==c?void 0:c.titleOfDetail:"",famousPerson:(null==c?void 0:c.famousPerson)?null==c?void 0:c.famousPerson:"",infoDescription:(null==c?void 0:c.infoDescription)?null==c?void 0:c.infoDescription:"",areaDetails:(null==c?void 0:c.AreaDetails)?null==c?void 0:c.AreaDetails:[],titleItem:(null==h?void 0:h.titleItem)?null==h?void 0:h.titleItem:"",descriptionItem:(null==h?void 0:h.descriptionItem)?null==h?void 0:h.descriptionItem:""}}),{control:m,setValue:b,watch:v}=y;console.log("data",c);let{mutate:f,isPending:w}=(0,er.D)({mutationFn:async e=>await Z(e),onSuccess:e=>{!0===e.status?((0,ee.xO)("اطلاعات استان با موفقیت بروزرسانی شد"),j()):(0,ee.bW)("مشکلی پیش آمده است . لطفا مجددا تلاش نمایید")}});(0,s.useEffect)(()=>{c&&(b("titleOfDetail",c.titleOfDetail||""),b("famousPerson",c.famousPerson||""),b("infoDescription",c.infoDescription||""),b("areaDetails",c.AreaDetails||[]))},[c,b]),(0,s.useEffect)(()=>{h&&(b("titleItem",h.titleItem),b("descriptionItem",h.descriptionItem))},[h]);let C=()=>{f({id:r,type:"PROVINCE",titleOfDetail:v("titleOfDetail"),famousPerson:v("famousPerson"),infoDescription:v("infoDescription")})};return(0,n.jsxs)(en.RV,{...y,children:[(0,n.jsxs)(X.rj,{width:"100%",gapY:"5",children:[(0,n.jsx)(eQ.Z,{hero:"اطلاعات",type:"changeAble",children:(0,n.jsxs)(X.rj,{width:"100%",gapY:"14px",children:[(0,n.jsx)(en.Qr,{name:"titleOfDetail",control:m,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"عنوان",placeholder:"عنوان",selectedValue:!!t.value})}}),(0,n.jsx)(en.Qr,{name:"famousPerson",control:m,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"شخصیت برجسته",placeholder:"شخصیت برجسته",selectedValue:!!t.value})}}),(0,n.jsx)(en.Qr,{name:"infoDescription",control:m,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"متن صفحه استان",placeholder:"متن صفحه استان",selectedValue:!!t.value})}}),(0,n.jsx)(X.zx,{size:"4",variant:"ghost",style:{width:"fit-content",marginBlockEnd:10},onClick:()=>x({isOpen:!0,key:"add"}),disabled:(null==c?void 0:c.AreaDetails.length)===3,children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:" افزودن جاذبه"})]})}),d||u?(0,n.jsx)(o.$j,{style:{margin:"40px auto",scale:1.5}}):(null==c?void 0:c.AreaDetails.length)!==0&&(null==c?void 0:c.AreaDetails.map((e,t)=>(0,n.jsxs)(X.rj,{gapX:"5",gapY:"14px",style:{gridTemplateColumns:"1fr 1fr auto auto"},children:[(0,n.jsx)(en.Qr,{name:"areaDetails.".concat(t,".titleItem"),control:m,render:t=>{let{field:i}=t;return(0,n.jsx)(X.nv,{...i,label:"عنوان جاذبه",placeholder:"عنوان جاذبه",defaultValue:e.titleItem,selectedValue:!!i.value,readOnly:!0})}}),(0,n.jsx)(en.Qr,{name:"areaDetails.".concat(t,".descriptionItem"),control:m,render:t=>{let{field:i}=t;return(0,n.jsx)(X.nv,{...i,label:"توضیح جاذبه",placeholder:"توضیح جاذبه",selectedValue:!!i.value,defaultValue:e.descriptionItem,readOnly:!0})}}),(0,n.jsx)(X.hU,{size:"3",type:"button",onClick:()=>{g(e),x({key:"edit",isOpen:!0})},children:(0,n.jsx)(el.z,{width:16,height:16})}),(0,n.jsx)(X.hU,{size:"3",type:"button",onClick:()=>{g(e),x({key:"svg",isOpen:!0})},children:(0,n.jsx)(el.XB,{width:16,height:16})})]},e.id)))]})}),(0,n.jsx)(eZ,{buttonsPosition:"end",submitButtonText:"ثبت",closeButtonText:"لغو",onCloseButton:()=>j(),onSubmit:()=>C(),isLoading:w,disabled:(null===(e=v("titleOfDetail"))||void 0===e?void 0:e.length)===0&&(null===(t=v("famousPerson"))||void 0===t?void 0:t.length)===0&&(null===(i=v("infoDescription"))||void 0===i?void 0:i.length)===0})]}),(0,n.jsxs)(X.u_,{isOpen:p.isOpen,onClose:()=>x({...p,isOpen:!1}),children:["add"===p.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"افزودن جاذبه",handleClose:()=>x({...p,isOpen:!1})}),(0,n.jsx)(eW,{setIsOpen:()=>x({isOpen:!1,key:"add"})})]}),"edit"===p.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش جاذبه",handleClose:()=>x({...p,isOpen:!1})}),(0,n.jsx)(eq,{setIsOpen:()=>x({isOpen:!1,key:"edit"}),currentItem:h})]}),"svg"===p.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"ویرایش آیکون جاذبه",handleClose:()=>x({...p,isOpen:!1})}),(0,n.jsx)(eV,{setIsOpen:()=>x({isOpen:!1,key:"svg"}),data:h})]})]})]})},eE=i(37969),eA=e=>{var t;let{gallery:i,constantData:a,ProvinceId:r}=e,[c,d]=(0,s.useState)([]),[u,p]=(0,s.useState)("create"),[x,h]=(0,s.useState)(!1),[g,j]=(0,s.useState)(null),{control:y,watch:m,setValue:b}=(0,en.cI)({defaultValues:{pic:(null==g?void 0:g.path)?null==g?void 0:g.path:"",localPic:(null==g?void 0:g.path)?null==g?void 0:g.path:"",provinceId:(null==g?void 0:g.provinceId)?g.provinceId:"",cityId:(null==g?void 0:g.cityId)?g.cityId:"",townId:(null==g?void 0:g.townId)?g.townId:"",alt:(null==g?void 0:g.alt)?null==g?void 0:g.alt:"",description:(null==g?void 0:g.description)?null==g?void 0:g.description:"",summery:(null==g?void 0:g.summery)?g.summery:"null",isReset:null!=g&&!!g.path,imageFile:null}}),v=null===(t=a.filter(e=>e.id===Number(m("provinceId")))[0])||void 0===t?void 0:t.Cities,f=(0,ea.NL)(),{mutate:w,isPending:C}=(0,er.D)({mutationFn:async e=>(0,eE.b)(e),onSuccess:async e=>{200===e.statusCode?(f.invalidateQueries({queryKey:["province-images"]}),(0,ee.xO)("مشخصات تصویر با موفقیت به روز شد"),h(!1)):(0,ee.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:k,isPending:O}=(0,er.D)({mutationFn:async e=>I(e),onSuccess:async e=>{201===e.statusCode?(f.invalidateQueries({queryKey:["province-images"]}),(0,ee.xO)("تصویر ارسالی با موفقیت اپلود شد"),h(!1)):(0,ee.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:R,isPending:F}=(0,er.D)({mutationFn:async()=>await T({type:"PROVINCE",id:g.id}),onSuccess:e=>{!0===e.status?((0,ee.xO)("تصویر مورد نظر با موفقیت حذف شد"),f.invalidateQueries({queryKey:["province-images"]}),h(!1)):(0,ee.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),P=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},D=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await P(i);t(URL.createObjectURL(n)),b("localPic",URL.createObjectURL(n)),b("isReset",!1),b("imageFile",n)}};return(0,s.useEffect)(()=>{g&&(b("pic",null==g?void 0:g.path),b("alt",null==g?void 0:g.alt),b("description",null==g?void 0:g.description),b("isReset",null!=g&&!!g.path))},[g]),(0,s.useEffect)(()=>{let e=m("cityId"),t=m("provinceId");if(e&&t){let r=a.find(e=>e.id===Number(t));if(r){var i,n;let t=null===(i=r.Cities)||void 0===i?void 0:i.find(t=>t.id===Number(e));t&&d(null!==(n=t.Town)&&void 0!==n?n:[])}}},[m("cityId"),m("provinceId")]),(0,s.useEffect)(()=>{b("summery",null==g?void 0:g.summery),b("provinceId",null==g?void 0:g.provincesId),b("cityId",null==g?void 0:g.cityId),b("townId",null==g?void 0:g.townId),b("description",null==g?void 0:g.description),b("alt",null==g?void 0:g.alt)},[g]),(0,n.jsxs)(n.Fragment,{children:[0===i.length?(0,n.jsxs)(X.kC,{direction:"column",align:"center",gap:"6",p:"87.5px 12px",children:[(0,n.jsx)(X.X6,{as:"h3",size:"3",style:{color:et.K.gray[11]},children:"هنوز تصویری اضافه نشده است."}),(0,n.jsxs)(X.xv,{...ei.p.paragraph1,style:{color:et.K.gray[11],textAlign:"center"},children:["تصاویری که در این قسمت قرار می دهید در برنامه های اخیر کاربران به صورت رندوم ",(0,n.jsx)("br",{})," نمایش داده می شوند."]}),(0,n.jsx)(X.zx,{size:"4",onClick:()=>{p("create"),h(!0)},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:" افزودن تصویر به گالری"})]})})]}):(0,n.jsxs)(X.rj,{width:"100%",gapY:"5",children:[(0,n.jsx)(X.zx,{variant:"ghost",size:"3",style:{width:"fit-content",paddingBlock:"11.5px"},onClick:()=>{p("create"),j(null),h(!0)},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"افزودن تصویر"})]})}),i.map((e,t)=>(0,n.jsxs)(X.rj,{width:"100%",gapX:"10px",p:"12px",style:{gridTemplateColumns:"auto 2fr auto",border:"1px solid ".concat(et.K.gray[6]),borderRadius:8},children:[(0,n.jsx)(X.xu,{width:"328px",height:"200px",position:"relative",children:(0,n.jsx)(ec.default,{src:"".concat("https://uploader.bezanimbiroon.ir/").concat(e.path),alt:"تصویر نقطه",fill:!0,style:{borderRadius:8}})}),(0,n.jsxs)(X.kC,{direction:"column",gap:"2",children:[(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[11],marginTop:"10px"},children:e.path}),(0,n.jsxs)(X.kC,{direction:"column",mt:"12px",children:[(0,n.jsx)(X.nv,{readOnly:!0,value:e.alt,placeholder:"Alt Text",style:{borderRadius:12}}),(0,n.jsx)(X.nv,{value:e.description,placeholder:"توضیحات تصویر",readOnly:!0,style:{borderRadius:12}})]})]}),(0,n.jsxs)(X.kC,{direction:"column",gap:"4",children:[(0,n.jsx)(X.hU,{size:"3",type:"button",onClick:()=>{p("edit"),j(e),h(!0)},children:(0,n.jsx)(el.z,{})}),(0,n.jsx)(X.hU,{size:"3",variant:"surface",colorVariant:"PINK",onClick:()=>{p("delete"),j(e),h(!0)},children:(0,n.jsx)(el.rF,{})})]})]},t))]}),(0,n.jsxs)(X.u_,{isOpen:x,onClose:()=>h(!1),children:["delete"!==u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:"تصویر گالری استان",handleClose:()=>h(!1)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==g?void 0:g.path)&&!1==!!m("localPic")?(0,n.jsx)(en.Qr,{name:"pic",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.kC,{width:"max-content",position:"relative",direction:"column",children:(0,n.jsx)(eo.ZP,{onDrop:e=>{D(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,n.jsx)(X.zx,{size:"3",style:{width:"fit-content"},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(el.V1,{}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(et.K.gray[3])},children:["create"===u&&(0,n.jsx)(X.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:et.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(et.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,n.jsx)(en.Qr,{name:"pic",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.kC,{width:"max-content",position:"relative",direction:"column",children:(0,n.jsx)(eo.ZP,{onDrop:e=>{D(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,n.jsx)(el.rF,{})})]})}})})}})}),(0,n.jsx)(ec.default,{src:m("isReset")?"".concat("https://uploader.bezanimbiroon.ir/").concat(null==g?void 0:g.path):m("localPic"),alt:"",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),"edit"===u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.rj,{width:"100%",gap:"5",columns:"3",children:[(0,n.jsx)(en.Qr,{name:"provinceId",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.fp,{...t,label:"استان",placeholder:"استان",selectedValue:!!t.value,value:String(m("provinceId")),onValueChange:e=>{t.onChange(e),b("cityId",""),b("townId","")},children:a.map(e=>(0,n.jsx)(X.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,n.jsx)(en.Qr,{name:"cityId",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.fp,{...t,label:"شهرستان",placeholder:"شهرستان",selectedValue:!!t.value,disabled:!m("provinceId"),value:String(m("cityId")),onValueChange:e=>{t.onChange(e),b("townId","")},children:null==v?void 0:v.map(e=>(0,n.jsx)(X.Ql,{value:String(e.id),children:e.name},e.id))})}}),(0,n.jsx)(en.Qr,{name:"townId",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.fp,{...t,label:"شهر",placeholder:"شهر",selectedValue:!!t.value,disabled:!m("provinceId")||!m("cityId"),value:String(m("townId")),onValueChange:e=>{t.onChange(e)},children:null==c?void 0:c.map(e=>(0,n.jsx)(X.Ql,{value:String(e.id),children:e.name},e.id))})}})]}),(0,n.jsx)(en.Qr,{name:"alt",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.nv,{...t,label:"متن جایگزین",placeholder:"متن جایگزین",selectedValue:!!t.value})}}),(0,n.jsx)(en.Qr,{name:"description",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.Kx,{...t,label:"توضیحات تصویر",placeholder:"توضیحات تصویر",selectedValue:!!t.value,rows:6})}}),(0,n.jsx)(en.Qr,{name:"summery",control:y,render:e=>{let{field:t}=e;return(0,n.jsx)(X.Kx,{...t,label:"شرح مختصر",placeholder:"شرح مختصر",selectedValue:!!t.value,rows:6})}})]})]})}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>h(!1),onSubmit:()=>{"create"===u?k({file:m("imageFile"),position:"gallery",provinceId:r}):w({alt:m("alt"),description:m("description"),id:g.id,summery:m("summery"),townId:Number(m("townId")),type:"PROVINCE"})},isLoading:O||C})]})]}),"delete"===u&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsx)(X.xv,{children:"آیا از حذف این تصویر اطمینان دارید؟"}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{variant:"soft",size:"4",onClick:()=>R(),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:F?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>h(!1),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})]})]})},eY=e=>{let{image:t,id:i}=e,[a,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),u=(0,ea.NL)(),{control:p,watch:x,setValue:h}=(0,en.cI)({defaultValues:{pic:t||"",imageFile:null,localPic:"",provinceId:"",cityID:"",town:"",alt:"",description:"",brief:"",isReset:!!t}}),{mutate:g,isPending:j}=(0,er.D)({mutationFn:async e=>I(e),onSuccess:async e=>{201===e.statusCode?(u.invalidateQueries({queryKey:["province-images"]}),(0,ee.xO)("تصویر ارسالی با موفقیت اپلود شد"),d(!1)):(0,ee.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),{mutate:y,isPending:m}=(0,er.D)({mutationFn:async()=>await K({id:i,type:"PIC"}),onSuccess:e=>{!0===e.status?(u.invalidateQueries({queryKey:["province-images"]}),(0,ee.xO)("نصویر مورد نظر با موفقیت حذف شد")):(0,ee.bW)("مشکلی پیش آمده است . مجددا تلاش کنید")}}),b=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},v=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await b(i);t(URL.createObjectURL(n)),h("localPic",URL.createObjectURL(n)),h("isReset",!1),h("imageFile",n)}};return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsxs)(X.rj,{p:"10px",gapY:"10px",children:[(0,n.jsx)(X.kC,{width:"100%",align:"center",justify:"center",children:(0,n.jsx)(X.xu,{width:"100%",height:"288px",position:"relative",children:(0,n.jsx)(ec.default,{src:t?"".concat("https://uploader.bezanimbiroon.ir/").concat(t):"",alt:"",fill:!0,style:{borderRadius:"8px"}})})}),(0,n.jsxs)(X.kC,{align:"center",justify:"end",gap:"4",children:[(0,n.jsx)(X.hU,{size:"3",colorVariant:"PINK",variant:"surface",type:"button",onClick:()=>r(!0),children:(0,n.jsx)(el.rF,{width:16,height:16})}),(0,n.jsx)(X.hU,{size:"3",type:"button",onClick:()=>d(!0),children:(0,n.jsx)(el.z,{width:16,height:16})})]})]}):(0,n.jsxs)(X.kC,{direction:"column",align:"center",gap:"6",p:"87.5px 12px",children:[(0,n.jsx)(X.X6,{as:"h3",size:"3",style:{color:et.K.gray[11]},children:"هنوز تصویری اضافه نشده است."}),(0,n.jsxs)(X.xv,{...ei.p.paragraph1,style:{color:et.K.gray[11],textAlign:"center"},children:["دقت داشته باشید که تصویر استان در اسلایدر استان‌ها و هدر صفحه استان‌ها نمایش داده ",(0,n.jsx)("br",{})," می‌شود!"]}),(0,n.jsx)(X.zx,{size:"4",onClick:()=>d(!0),children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:" افزودن تصویر استان"})]})})]}),(0,n.jsxs)(X.u_,{isOpen:c,onClose:()=>d(!1),children:[(0,n.jsx)(J.Z,{title:" تصویر استان",handleClose:()=>d(!1)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!t&&!1==!!x("localPic")?(0,n.jsx)(en.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,n.jsx)(X.kC,{width:"max-content",position:"relative",direction:"column",children:(0,n.jsx)(eo.ZP,{onDrop:e=>{v(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,n.jsx)(X.zx,{size:"3",style:{width:"fit-content"},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(el.V1,{}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(X.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(et.K.gray[3])},children:[(0,n.jsx)(X.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:et.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(et.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,n.jsx)(en.Qr,{name:"pic",control:p,render:e=>{let{field:t}=e;return(0,n.jsx)(X.kC,{width:"max-content",position:"relative",direction:"column",children:(0,n.jsx)(eo.ZP,{onDrop:e=>{v(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,n.jsx)(el.rF,{})})]})}})})}})}),(0,n.jsx)(ec.default,{src:x("isReset")?"".concat("https://uploader.bezanimbiroon.ir/").concat(t):x("localPic"),alt:"",fill:!0,style:{borderRadius:8}})]})})}),(0,n.jsx)(eu.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>d(!1),onSubmit:()=>{g({file:x("imageFile"),position:"picture",provinceId:i})},isLoading:j})]})]}),(0,n.jsx)(X.u_,{isOpen:a,onClose:()=>r(!1),children:(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsx)(X.xv,{children:"آیا از حذف این تصویر اظمینان دارید؟ "}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{onClick:()=>y(),variant:"soft",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:m?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>r(!1),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})})]})},eM=e=>{let{vector:t,id:i}=e,[a,r]=(0,s.useState)({isOpen:!1,key:"edit"}),c=(0,ea.NL)(),{control:d,watch:u,setValue:p}=(0,en.cI)({defaultValues:{imageFile:null,pic:t||"",localPic:"",provinceId:"",cityID:"",town:"",alt:"",description:"",brief:"",isReset:!!t}}),{mutate:x,isPending:h}=(0,er.D)({mutationFn:async()=>await K({id:i,type:"ICON"}),onSuccess:e=>{!0===e.status?(c.invalidateQueries({queryKey:["province-images"]}),(0,ee.xO)("وکتور مورد نظر با موفقیت حذف شد")):(0,ee.bW)("مشکلی پیش آمده است . مجددا تلاش کنید")}}),{mutate:g,isPending:j}=(0,er.D)({mutationFn:async e=>I(e),onSuccess:async e=>{201===e.statusCode?(c.invalidateQueries({queryKey:["province-images"]}),(0,ee.xO)("تصویر ارسالی با موفقیت اپلود شد"),r({...a,isOpen:!1})):(0,ee.bW)("خطایی رخ داده دوباره تلاش نمایید")}}),y=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,ed.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},m=async(e,t)=>{if(e&&e[0]){let i=e[0],n=await y(i);t(URL.createObjectURL(n)),p("localPic",URL.createObjectURL(n)),p("isReset",!1),p("imageFile",n)}};return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsxs)(X.rj,{p:"10px",gapY:"10px",children:[(0,n.jsx)(X.kC,{width:"100%",align:"center",justify:"center",children:(0,n.jsx)(X.xu,{width:"179px",height:"288px",position:"relative",children:(0,n.jsx)(ec.default,{src:t?"".concat("https://uploader.bezanimbiroon.ir/").concat(t):"",alt:"",fill:!0})})}),(0,n.jsxs)(X.kC,{align:"center",justify:"end",gap:"4",children:[(0,n.jsx)(X.hU,{size:"3",colorVariant:"PINK",variant:"surface",type:"button",onClick:()=>r({isOpen:!0,key:"delete"}),children:(0,n.jsx)(el.rF,{width:16,height:16})}),(0,n.jsx)(X.hU,{size:"3",type:"button",onClick:()=>r({isOpen:!0,key:"edit"}),children:(0,n.jsx)(el.z,{width:16,height:16})})]})]}):(0,n.jsxs)(X.kC,{direction:"column",height:"100%",align:"center",gap:"6",p:"87.5px 12px",children:[(0,n.jsx)(X.X6,{as:"h3",size:"3",style:{color:et.K.gray[11]},children:"هنوز وکتوری اضافه نشده است."}),(0,n.jsx)(X.xv,{...ei.p.paragraph1,style:{color:et.K.gray[11],textAlign:"center"},children:"دقت داشته باشید که تصویر وکتور استان در کارت برنامه های اخیر نمایش داده می شود!"}),(0,n.jsx)(X.zx,{size:"4",onClick:()=>r({isOpen:!0,key:"edit"}),children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(l.pOD,{width:16,height:16,style:{color:et.K.blue[10]}}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"افزودن وکتور استان"})]})})]}),(0,n.jsxs)(X.u_,{isOpen:a.isOpen,onClose:()=>r({...a,isOpen:!1}),children:["edit"===a.key&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Z,{title:" وکتور استان",handleClose:()=>r({...a,isOpen:!1})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!t&&!1==!!u("localPic")?(0,n.jsx)(en.Qr,{name:"pic",control:d,render:e=>{let{field:t}=e;return(0,n.jsx)(X.kC,{width:"max-content",position:"relative",direction:"column",children:(0,n.jsx)(eo.ZP,{onDrop:e=>{m(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,n.jsx)(X.zx,{size:"3",style:{width:"fit-content"},children:(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(el.V1,{}),(0,n.jsx)(X.xv,{...ei.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(X.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(et.K.gray[3])},children:[(0,n.jsx)(X.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:et.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(et.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,n.jsx)(en.Qr,{name:"pic",control:d,render:e=>{let{field:t}=e;return(0,n.jsx)(X.kC,{width:"max-content",position:"relative",direction:"column",children:(0,n.jsx)(eo.ZP,{onDrop:e=>{m(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,n.jsxs)("div",{...t(),children:[(0,n.jsx)("input",{type:"file",...i()}),(0,n.jsx)(X.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,n.jsx)(el.rF,{})})]})}})})}})}),(0,n.jsx)(ec.default,{src:u("isReset")?"".concat("https://uploader.bezanimbiroon.ir/").concat(t):u("localPic"),alt:"",fill:!0,style:{borderRadius:8}})]})})}),(0,n.jsx)(eu.Z,{onSubmit:()=>{g({file:u("imageFile"),position:"vector",provinceId:i})},isLoading:j,submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>r({...a,isOpen:!1})})]})]}),"delete"===a.key&&(0,n.jsxs)(X.rj,{gapY:"24px",p:"5",children:[(0,n.jsx)(X.xv,{children:"آیا از حذف این وکتور اطمینان دارید؟ "}),(0,n.jsxs)(X.rj,{gap:"10px",columns:"2",children:[(0,n.jsx)(X.zx,{onClick:()=>x(),variant:"soft",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:h?(0,n.jsx)(o.$j,{}):"بله"})}),(0,n.jsx)(X.zx,{type:"button",onClick:()=>r({...a,isOpen:!1}),variant:"solid",size:"4",children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"خیر"})})]})]})]})]})},e$=()=>{let e=Number((0,eh.useParams)().slug[2]),{data:t,isLoading:i,isFetching:s,isError:l}=(0,a.a)({queryKey:["province-images",e],queryFn:async()=>await z(e)}),{data:c}=(0,a.a)({queryKey:["constant"],queryFn:async()=>(0,r.iV)()});return i||s?(0,n.jsx)(X.kC,{width:"100%",height:"85vh",align:"center",justify:"center",children:(0,n.jsx)(o.$j,{style:{scale:2}})}):!t||l?(0,ee.bW)("مشکلی پیش آمده است"):(console.log("provinceImagesData",t),(0,n.jsxs)(X.rj,{width:"100%",gapY:"5",children:[(0,n.jsxs)(X.rj,{width:"100%",columns:"2",gapX:"5",children:[(0,n.jsx)(eQ.Z,{hero:"وکتور استان",type:"changeAble",children:(0,n.jsx)(eM,{vector:null==t?void 0:t.icon,id:t.id})}),(0,n.jsx)(eQ.Z,{hero:"تصویر استان",type:"changeAble",children:(0,n.jsx)(eY,{image:null==t?void 0:t.pic,id:t.id})})]}),(0,n.jsx)(eQ.Z,{hero:"گالری تصاویر ",type:"changeAble",children:(0,n.jsx)(eA,{gallery:null==t?void 0:t.gallery,ProvinceId:e,constantData:(null==c?void 0:c.provinces)?c.provinces:[]})})]}))},eH=i(10504),eG=e=>{let{name:t,citiesCount:i,hasMedia:a,lastUpdated:r,id:s}=e,{push:l}=(0,eU.tv)();return(0,n.jsxs)(X.kC,{width:"100%",direction:"column",gap:"12px",p:"4",style:{backgroundColor:et.K.gray[2],border:"1px solid ".concat(et.K.gray[6]),borderRadius:8},children:[(0,n.jsxs)(X.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[a&&(0,n.jsx)(el.eA,{width:14.13,height:14.13}),(0,n.jsx)(X.xv,{...ei.p.body1,style:{color:et.K.gray[12]},children:t})]}),(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(X.hU,{size:"2",variant:"surface",onClick:()=>l("/additional-detail/province/data-management/".concat(s)),children:(0,n.jsx)(el.sv,{width:32,height:32})}),(0,n.jsx)(X.hU,{size:"2",variant:"surface",onClick:()=>l("/additional-detail/province/image-management/".concat(s)),children:(0,n.jsx)(el.XB,{width:16,height:16})})]})]}),(0,n.jsx)(eX,{label:"تعداد شهرستان",value:i}),(0,n.jsxs)(X.kC,{width:"100%",align:"center",justify:"between",children:[(0,n.jsx)(eX,{label:"آخرین ویرایش",value:r?(0,eH.l)(r):0}),(0,n.jsx)(X.zx,{size:"2",onClick:()=>l("/additional-detail/province/cities/".concat(s)),children:(0,n.jsx)(X.xv,{...ei.p.body3,children:"مدیریت شهرستان ها"})})]})]})};let eX=e=>{let{label:t,value:i}=e;return(0,n.jsxs)(X.kC,{align:"center",gap:"2",children:[(0,n.jsx)(X.xv,{...ei.p.description2,style:{color:et.K.gray[10]},children:t}),(0,n.jsx)(X.xv,{...ei.p.description2,style:{color:et.K.gray[12]},children:i})]})};var eJ=()=>{let{data:e,isLoading:t,isFetching:i}=(0,a.a)({queryKey:["provinces"],queryFn:async()=>await O()});return t||i?(0,n.jsx)(X.kC,{width:"100%",height:"90vh",justify:"center",align:"center",children:(0,n.jsx)(o.$j,{style:{scale:3}})}):(0,n.jsx)(X.rj,{width:"100%",columns:"2",gap:"5",children:null==e?void 0:e.map(e=>(0,n.jsx)(eG,{...e},e.id))})},e0=i(29962),e1=i(28232);function e2(e){var t;let{params:i}=e,{data:s}=(0,a.a)({queryKey:["constant"],queryFn:async()=>await (0,r.iV)()}),l=(0,e1.L)(Number(i.slug[2]),null!==(t=null==s?void 0:s.provinces)&&void 0!==t?t:[]);return(0,n.jsxs)(X.kC,{direction:"column",children:[(0,n.jsx)(e0.Z,{title:"categories"===i.slug[0]?"لیست دسته بندی ها":"features"===i.slug[0]?"لیست ویژگی ها":"province"===i.slug[0]?"cities"===i.slug[1]?"لیست شهرستان ها - استان ".concat(l):"data-management"===i.slug[1]?"اطلاعات استان ".concat(l):"image-management"===i.slug[1]?"تصاویر استان ".concat(l):"لیست استان ها":"",isNavigation:!0}),(0,n.jsx)(X.xu,{p:"24px 110px 40px 40px ",children:(0,n.jsx)(X.rj,{width:"100%",maxWidth:"1920px",mx:"auto",children:(()=>{switch(i.slug[0]){case"categories":return(0,n.jsx)(ek,{});case"features":return(0,n.jsx)(eS,{});case"province":switch(i.slug[1]){case"cities":return(0,n.jsx)(eP,{});case"data-management":return(0,n.jsx)(e_,{});case"image-management":return(0,n.jsx)(e$,{});default:return(0,n.jsx)(eJ,{})}default:return null}})()})})]})}},37969:function(e,t,i){"use strict";i.d(t,{CM:function(){return m},OD:function(){return h},RJ:function(){return b},Vq:function(){return y},Vr:function(){return g},XZ:function(){return c},X_:function(){return l},b:function(){return j},h4:function(){return o},nJ:function(){return s},o$:function(){return d},rI:function(){return u},tu:function(){return x},v7:function(){return r}});var n=i(10008),a=i(31067);let r=(e,t)=>{let i={};if(!e||"object"!=typeof e)return i;let n=e=>null!=e&&"null"!==e&&0!==e&&"none"!==e&&!(Array.isArray(e)&&0===e.length);return Object.keys(e).forEach(a=>{let r=e[a];(!1===t?n(r):n(r)&&""!==r)&&(i[a]=r)}),i},s=async(e,t,i)=>(await a.x.get("comment/placeComments/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data;function l(e){return Object.entries(e).map(e=>{let[t,i]=e;return Array.isArray(i)?"".concat(encodeURIComponent(t),"=").concat(i.map(encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i))}).join("&")}let o=async e=>{let t=l(r(e,!0));return(await a.x.get("places/allPlacesWithFilter?".concat(t))).data.data},c=async(e,t,i)=>(await a.x.get("places/placeImproveContent/".concat(e,"?page=").concat(t,"&limit=4"),{})).data.data,d=async(e,t,i)=>(await a.x.get("/places/getPlaceUserUploads/".concat(e,"?page=").concat(t,"&limit=6"),{headers:{limit:i}})).data.data,u=async e=>{let t=l(r(e,!0));return(await a.x.get("article/filter?".concat(t))).data.data};function p(e,t){return void 0!==e&&Array.isArray(t)&&0!==t.length?[{placeId:e,placeRelationType:"MAIN"},...t.map(e=>({placeId:e,placeRelationType:"RELATION"}))]:[]}let x=async e=>{console.log(e,"paramsparamsparamsparamsparams");let t=r({parentCategoryId:Number(e.parentCategoryId),categoryId:Number(e.categoryId),provincesId:Number(e.provincesId),citiesId:Number(e.citiesId),is_published:"true"===e.is_published||!0===e.is_published||"false"!==e.is_published&&!1!==e.is_published&&String(e.is_published),status:"true"===e.status||!0===e.status||"false"!==e.status&&!1!==e.status&&String(e.status),title:e.title,writer:e.writer,tableOfContent:e.articleDetail.length>0?e.articleDetail[0].descriptions:"",content:e.articleDetail.length>0?e.articleDetail[1].descriptions:"",on_titile:e.on_titile,source:e.source,summery:e.summery,brief:e.brief,slug:e.slug,inMain:e.inMain,inTop:e.inTop,tags:String(e.metakeywords).split(","),keywords:String(e.keywords).split(","),meta_title:e.meta_title,meta_description:e.meta_description,source_link:e.source_link,isSlider:e.isSlider,type:e.type,places:p(Number(e.mainPoint),e.placeRelationType)});return(await a.x.post("/article",t)).data},h=async(e,t)=>{let i=r({parentCategoryId:Number(t.parentCategoryId),categoryId:Number(t.categoryId),provincesId:Number(t.provincesId),citiesId:Number(t.citiesId),is_published:"true"===t.is_published||!0===t.is_published||"false"!==t.is_published&&!1!==t.is_published&&String(t.is_published),status:"true"===t.status||!0===t.status||"false"!==t.status&&!1!==t.status&&String(t.status),title:t.title,writer:t.writer,isSlider:t.isSlider,on_titile:t.on_titile,source:t.source,summery:t.summery,brief:t.brief,slug:t.slug,tableOfContent:t.articleDetail[0].descriptions,content:t.articleDetail[1].descriptions,inMain:t.inMain,inTop:t.inTop,tags:String(t.metakeywords).split(","),keywords:String(t.keywords).split(","),meta_title:t.meta_title,meta_description:t.meta_description,source_link:t.source_link,type:t.type,places:p(Number(t.mainPoint),t.placeRelationType)},!1);return(await a.x.patch("/article/id/".concat(e),i)).data},g=async e=>(await a.x.get("/article/id/".concat(e))).data,j=async e=>(await n.j9.patch("upload/edit",e)).data,y=async e=>{let t=new FormData;return t.append("type",e.type),t.append("articleImageType",e.articleImageType),t.append("articleId",e.articleId.toString()),t.append("file",e.file),t.append("summery",e.summery),t.append("slug",e.slug),t.append("alt",e.alt),t.append("description",e.description),t.append("townId",e.townId.toString()),await n.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})},m=async e=>(await n.j9.delete("upload",{data:{id:e,type:"ARTICLE"}})).data,b=async e=>(await a.x.delete("article/id/".concat(e))).data},27918:function(e,t,i){"use strict";i.d(t,{AW:function(){return s},bG:function(){return c},mP:function(){return l},uz:function(){return o},v7:function(){return r}});var n=i(31067),a=i(37969);let r=e=>{let t={};return Object.keys(e).forEach(i=>{let n=e[i];null===n||""===n||Array.isArray(n)&&0===n.length||0===n||"null"===n||(t[i]=n)}),t},s=async e=>{let t=r(e),i=(0,a.X_)(t);return(await n.x.get("user?limit=10&".concat(i))).data.data},l=async(e,t)=>{let i=r(e);delete i.sort;let s=(0,a.X_)(i);return(await n.x.get("user/trips?userId=".concat(t,"&limit=10&").concat(s))).data.data},o=async(e,t)=>{let i=r({...t,mobile:null,pic:null});return(await n.x.patch("user/profile/partiallyEditUser/".concat(e),i)).data},c=async e=>(await n.x.get("user/userInfoForUserTrips/".concat(e))).data.data},29962:function(e,t,i){"use strict";var n=i(57437);i(2265);var a=i(43397),r=i(89183),s=i(7507),l=i(82336),o=i(1845),c=i(21949);t.Z=e=>{let{title:t,isNavigation:i}=e,r=(0,a.tv)();return(0,n.jsx)(d,{children:(0,n.jsxs)(u,{children:[(0,n.jsx)(s.xv,{...c.p.title1,style:{color:o.K.gray[11]},children:t}),i&&(0,n.jsx)(s.hU,{size:"3",variant:"surface",onClick:()=>r.back(),children:(0,n.jsx)(l.jb,{color:"#373737"})})]})})};let d=r.ZP.header.withConfig({componentId:"sc-90fceb38-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],o.K.gray[6],o.K.gray[1],o.i.shadow1),u=(0,r.ZP)(s.kC).withConfig({componentId:"sc-90fceb38-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},28232:function(e,t,i){"use strict";i.d(t,{L:function(){return a}});var n=i(2265);function a(e,t){return(0,n.useMemo)(()=>{if(!e||!(null==t?void 0:t.length))return"";let i=t.find(t=>t.id===e);return i?i.name:""},[e,t])}},72549:function(e,t,i){"use strict";var n=i(57437);i(2265);var a=i(94963),r=i(1845),s=i(21949),l=i(7507);t.Z=e=>{let{isSubmit:t=!0,closeButtonText:i,submitButtonText:o,isLoading:c,onCloseButton:d,onSubmit:u,isDisableSubmitBtn:p=!1,disabled:x=!1}=e;return(0,n.jsx)(l.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:r.K.gray[2],marginBlockStart:"auto",borderTop:"1px solid ".concat(r.K.gray[3]),boxShadow:r.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,n.jsxs)(l.rj,{gap:"16px",columns:"2",children:[(0,n.jsx)(l.zx,{disabled:p||x,onClick:u,type:t?"submit":"button",variant:"soft",size:"3",style:{width:"fit-content",padding:"9.5px 38px"},children:c?(0,n.jsx)(a.$j,{}):(0,n.jsx)(l.xv,{...s.p.body1,children:o})}),(0,n.jsx)(l.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:d,style:{width:"fit-content",padding:"9.5px 38px"},children:(0,n.jsx)(l.xv,{...s.p.body1,children:i})})]})})}},77855:function(e,t,i){"use strict";var n=i(57437);i(2265);var a=i(89183),r=i(82336),s=i(1845),l=i(21949),o=i(7507);t.Z=e=>{let{handleClose:t,title:i}=e;return(0,n.jsxs)(c,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:s.K.blue[10],zIndex:"100"},align:"center",children:[(0,n.jsx)(o.xv,{...l.p.title2,style:{color:s.K.gray[1],fontWeight:700},children:i}),(0,n.jsx)(o.hU,{type:"button",onClick:t,variant:"soft",size:"2",style:{backgroundColor:s.K.blue[9],borderRadius:"12px"},children:(0,n.jsx)(r.x8,{})})]})};let c=(0,a.zo)(o.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},19780:function(e,t,i){"use strict";var n=i(57437),a=i(2265),r=i(4867),s=i(94963),l=i(89183),o=i(7507),c=i(1845);let d=(0,a.forwardRef)((e,t)=>{let{placeholder:i,defaultValue:a,fieldType:l,disabled:d,isLoading:x,onClick:h,onChange:g,...j}=e;return(0,n.jsxs)(u,{height:"fit-content",gap:"2",disabled:d,children:[(0,n.jsx)(p,{...j,ref:t,placeholder:i,disabled:d,type:l,onChange:g,variant:"surface",defaultValue:a}),x?(0,n.jsx)(s.$j,{style:{marginLeft:20}}):(0,n.jsx)(o.hU,{size:"1",type:"button",className:"icon-button",variant:"surface",disabled:d,onClick:h,children:(0,n.jsx)(r.pOD,{width:16,height:16,style:{color:c.K.pink[9]}})})]})});d.displayName="CustomAddItem",t.Z=d;let u=(0,l.ZP)(o.kC).withConfig({componentId:"sc-ed1428e7-0"})(["width:100%;max-width:380px;height:48px;align-items:center;border:1px solid ",";background-color:",";border-radius:12px;padding:6px;&:focus-within{background-color:",";box-shadow:",";border:1px solid ",";}.icon-button{margin-inline-end:8px;background-color:",";@media (hover:hover){background-color:transparent !important;}}"],c.K.gray[7],e=>{let{disabled:t}=e;return t?c.K.gray[5]:"transparent"},c.K.blue[2],c.i.shadow1,c.K.gray[3],e=>{let{disabled:t}=e;return t?c.K.gray[5]:"transparent"}),p=(0,l.ZP)(o.nv).withConfig({componentId:"sc-ed1428e7-1"})(["&.rt-TextFieldRoot:where(.rt-variant-surface){border:none;outline:none;box-shadow:none;margin-block-end:-10px;}&:focus-within{outline:none !important;border:none !important;background-color:transparent !important;box-shadow:none !important;}@media (hover:hover){background-color:transparent !important;}"])},30884:function(e,t,i){"use strict";var n=i(57437);i(2265);var a=i(58606),r=i(89183),s=i(7507),l=i(82336),o=i(1845),c=i(21949);let d={open:{opacity:1,height:"auto"},closed:{opacity:0,height:0}};t.default=e=>{let{hero:t,children:i,withEdit:r=!1,withButton:h=!1,withDelete:g=!1,isDisableDelete:j=!1,onEdit:y,onButtonSubmit:m,onDelete:b,hasMedia:v,isOpen:f}=e;return(0,n.jsxs)(u,{isOpen:f,children:[(0,n.jsxs)(s.kC,{className:"style",width:"100%",justify:"between",align:"center",p:"8px 16px",children:[(0,n.jsxs)(s.kC,{gap:"2",align:"center",children:[v&&(0,n.jsx)(l.eA,{width:14.13,height:14.13}),(0,n.jsx)(s.xv,{style:{color:o.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"24px"},children:t}),h&&(0,n.jsx)(s.hU,{variant:"surface",size:"2",onClick:y,children:(0,n.jsx)(l.z,{width:16,height:16})})]}),(0,n.jsxs)(s.kC,{align:"center",gap:"4",children:[h&&(0,n.jsx)(s.zx,{size:"2",variant:"soft",onClick:m,children:(0,n.jsx)(s.xv,{...c.p.body1,children:"افزودن ویژگی"})}),r&&(0,n.jsx)(s.hU,{variant:"surface",size:"2",onClick:y,children:(0,n.jsx)(l.z,{width:16,height:16})}),g&&(0,n.jsx)(s.hU,{variant:"surface",size:"2",onClick:b,disabled:j,children:(0,n.jsx)(x,{width:16,height:16})}),(0,n.jsx)(a.E.div,{animate:{rotate:f?180:0},transition:{duration:.3},style:{width:32,height:32,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(p,{})})]})]}),(0,n.jsx)(a.E.div,{variants:d,initial:"closed",animate:f?"open":"closed",transition:{duration:.3},style:{overflow:"hidden"},layout:!0,children:(0,n.jsx)(s.rj,{gap:"16px",p:"24px 16px 16px 16px",children:i})})]})};let u=(0,r.ZP)(s.rj).withConfig({componentId:"sc-bbbac1eb-0"})(["border-radius:8px;border:1px solid ",";.style{border-radius:",";height:fit-content;background-color:",";cursor:pointer;}"],o.K.gray[6],e=>{let{isOpen:t}=e;return t?"8px 8px 0px 0px":"8px"},o.K.blue[4]),p=(0,r.ZP)(l.CH).withConfig({componentId:"sc-bbbac1eb-1"})(["path{fill:",";}"],o.K.blue[10]),x=(0,r.ZP)(l.rF).withConfig({componentId:"sc-bbbac1eb-2"})(["path{fill:",";}"],o.K.pink[9])},6850:function(e,t,i){"use strict";var n=i(57437);i(2265);var a=i(7507),r=i(1845);t.Z=e=>{let{hero:t,type:i,children:s}=e;return(0,n.jsxs)(a.rj,{width:"100%",style:{borderRadius:8,border:"1px solid ".concat(r.K.gray[6])},children:[(0,n.jsx)(a.kC,{width:"100%",justify:"between",align:"center",p:"8px 16px",style:{height:"fit-content",backgroundColor:"changeAble"===i?r.K.blue[4]:r.K.gray[3],borderRadius:"8px 8px 0px 0px"},children:(0,n.jsx)(a.X6,{as:"h6",style:{color:r.K.gray[11],fontWeight:700,fontSize:"16px",lineHeight:"27px"},children:t})}),(0,n.jsx)(a.rj,{gap:"16px",p:"24px 16px 16px 16px",style:{backgroundColor:r.K.gray[2]},children:s})]})}},10504:function(e,t,i){"use strict";i.d(t,{l:function(){return r}});var n=i(64673),a=i.n(n);function r(e){return a()(e).locale("fa").format("jYYYY/jMM/jDD")}},31067:function(e,t,i){"use strict";i.d(t,{x:function(){return c},z:function(){return d}});var n=i(16463),a=i(38472),r=i(15263),s=i(86300).Buffer;let l="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),o=s.from(l).toString("base64"),c=a.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"up-auth":"Basic ".concat(o)}}),d=a.Z.create({baseURL:"https://uploader.bezanimbiroon.ir/admin/uploads/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(o)}});d.interceptors.request.use(e=>{let t=new r.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.request.use(e=>{let t=new r.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,n.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,n.redirect)("/error")):((0,n.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})}},function(e){e.O(0,[1553,3048,5452,8310,6990,1825,8702,3397,9269,6648,783,2107,7507,2336,2971,7023,1744],function(){return e(e.s=29276)}),_N_E=e.O()}]);