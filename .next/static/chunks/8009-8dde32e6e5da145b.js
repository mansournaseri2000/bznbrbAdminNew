"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8009],{89216:function(e,t,i){i.d(t,{Di:function(){return d},LP:function(){return c},Vl:function(){return o},_5:function(){return a},mV:function(){return p},nj:function(){return s},qo:function(){return l}});var r=i(10008),n=i(31067);let s=async()=>(await n.x.get("/ads/page")).data.data,a=async(e,t,i)=>(await n.x.get("/ads/holder?holder=".concat(e,"&id=").concat(t,"&type=").concat(i))).data.data,o=async e=>{let t=new FormData;return t.append("type",e.type),t.append("description",e.description),t.append("page",e.page),t.append("holder",e.holder),t.append("alt",e.alt),t.append("slug",e.slug),t.append("summery",e.summery),t.append("file",e.file),t.append("website",e.website),t.append("socialMedia",e.socialMedia),t.append("sponsor",e.sponsor),t.append("provinceId",e.provinceId?e.provinceId.toString():""),t.append("cityId",e.cityId?e.cityId.toString():""),t.append("townId",e.townId?e.townId.toString():""),t.append("categoryId",e.categoryId?e.categoryId.toString():""),(await r.pN.post("admin/uploads/image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},l=async e=>(await n.x.patch("/upload/edit",e)).data,d=async e=>(await n.x.delete("/upload/",{data:e})).data,c=async e=>(await n.x.get("/ads/page?pageKey=".concat(e))).data.data,p=async e=>(await n.x.get("/ads/page?pageKey=province&id=".concat(e))).data.data},85977:function(e,t,i){var r=i(57437),n=i(2265),s=i(38746),a=i(39343),o=i(66648),l=i(4867),d=i(94963),c=i(93191),p=i(25524),u=i(72107),x=i(89216),h=i(7507),y=i(72549),g=i(77855),j=i(31072),m=i(82336),b=i(1845),k=i(21949);t.Z=e=>{var t,i;let{data:v}=e,[f,w]=(0,n.useState)({isOpen:!1,key:"create"}),C=(0,c.NL)(),{control:z,watch:I,setValue:K}=(0,a.cI)({defaultValues:{imageFile:"edit"===f.key?v.path:null,localPic:"",description:"edit"===f.key?v.description:"",alt:"edit"===f.key?v.alt:"",slug:"edit"===f.key?v.slug:"",summery:"edit"===f.key?v.summery:"",website:"edit"===f.key?v.website:"",socialMedia:"edit"===f.key?v.socialMedia:"",sponsor:"edit"===f.key?v.sponsor:"",isReset:!0}});console.log("AdsDetailCardAdsDetailCardAdsDetailCardAdsDetailCard",v),(0,n.useEffect)(()=>{K("imageFile","edit"===f.key?v.path:null),K("description","edit"===f.key?v.description:""),K("alt","edit"===f.key?v.alt:""),K("slug","edit"===f.key?v.slug:""),K("summery","edit"===f.key?v.summery:""),K("website","edit"===f.key?v.website:""),K("socialMedia","edit"===f.key?v.socialMedia:""),K("sponsor","edit"===f.key?v.sponsor:""),K("isReset",!0)},[f.key]),console.log("watch",I());let{mutate:R,isPending:S}=(0,p.D)({mutationFn:async e=>await (0,x.qo)(e),onSuccess:e=>{e.status?(C.invalidateQueries({queryKey:["ads-page-type"]}),(0,j.xO)("آگهی مورد نظر با موفقیت ویرایش شد"),w({...f,isOpen:!1})):(0,j.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:O,isPending:P}=(0,p.D)({mutationFn:async e=>await (0,x.Vl)(e),onSuccess:e=>{e.status?(C.invalidateQueries({queryKey:["ads-page-type"]}),(0,j.xO)("آگهی مورد نظر با موفقیت ایجاد شد"),w({...f,isOpen:!1})):(0,j.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),{mutate:D,isPending:F}=(0,p.D)({mutationFn:async()=>await (0,x.Di)({id:v.id,type:"ADS"}),onSuccess:e=>{e.status?(C.invalidateQueries({queryKey:["ads-page-type"]}),(0,j.xO)("آگهی مورد نظر با موفقیت حذف شد"),w({...f,isOpen:!1})):(0,j.bW)("مشکلی پیش آمده است. لطفا مجددا تلاش کنید")}}),Z=async e=>{if("image/svg+xml"===e.type)return e;try{return await (0,u.Z)(e,{maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0})}catch(t){return console.error("Image compression error:",t),e}},B=async(e,t)=>{if(e&&e[0]){let i=e[0],r=await Z(i);t(URL.createObjectURL(r)),K("localPic",URL.createObjectURL(r)),K("isReset",!1),K("imageFile",r)}};return(0,r.jsxs)(r.Fragment,{children:[!(null==v?void 0:v.path)&&(0,r.jsxs)(h.kC,{align:"center",position:"relative",minHeight:"200px",p:"16px",justify:"center",style:{borderRadius:"8px",border:"1px dashed ".concat(b.K.blue[9])},children:[(0,r.jsx)(h.xv,{style:{position:"absolute",color:b.K.gray[8],right:"20px",fontSize:"90px"},children:null==v?void 0:v.position}),(0,r.jsxs)(h.kC,{gap:"4px",align:"center",onClick:()=>w({isOpen:!0,key:"create"}),style:{cursor:"pointer"},children:[(0,r.jsx)(l.pOD,{stroke:b.K.blue[7]}),(0,r.jsx)(h.xv,{...k.p.body1,style:{color:b.K.blue[11]},children:"افزودن آگهی"})]})]}),!!(null==v?void 0:v.path)&&(0,r.jsxs)(h.rj,{p:"16px",style:{borderRadius:"8px",border:"1px solid ".concat(b.K.gray[6])},children:[(0,r.jsxs)(h.kC,{width:"100%",align:"center",justify:"between",children:[(0,r.jsx)(h.X6,{style:{color:b.K.gray[11],fontSize:"32px",fontWeight:500,lineHeight:"37.5px"},children:v.position}),(0,r.jsxs)(h.kC,{align:"center",gap:"4",children:[(0,r.jsx)(h.hU,{size:"3",onClick:()=>w({isOpen:!0,key:"edit"}),children:(0,r.jsx)(m.z,{})}),(0,r.jsx)(h.hU,{size:"3",variant:"surface",onClick:()=>w({isOpen:!0,key:"delete"}),children:(0,r.jsx)(m.rF,{})})]})]}),(0,r.jsxs)(h.kC,{width:"100%",gap:"10px",children:[(0,r.jsx)(h.xu,{width:"400px",height:"200px",position:"relative",children:(0,r.jsx)(o.default,{src:"".concat("https://uploader.bezanimbiroon.ir/").concat(v.path),alt:String(null==v?void 0:v.alt),fill:!0,style:{borderRadius:8,objectFit:"cover",objectPosition:"center"}})}),(0,r.jsxs)(h.kC,{width:"77.5%",direction:"column",mt:"2",style:{justifyContent:"space-between"},children:[(0,r.jsxs)(h.kC,{direction:"column",gap:"3",children:[(0,r.jsx)(h.nv,{placeholder:"متن چایگزین",readOnly:!0,value:null!==(t=v.alt)&&void 0!==t?t:"",style:{borderRadius:12}}),(0,r.jsx)(h.Kx,{placeholder:"توضیحات تصویر",readOnly:!0,value:null!==(i=v.description)&&void 0!==i?i:"",style:{borderRadius:12}})]}),v.path&&(0,r.jsxs)(h.kC,{p:"12px 16px",gap:"2",align:"center",children:[(0,r.jsx)(h.hU,{variant:"surface",size:"1",children:(0,r.jsx)(l.TIy,{style:{color:b.K.blue[10]}})}),(0,r.jsx)(h.xv,{...k.p.body3,style:{color:b.K.blue[11]},children:v.path})]})]})]})]}),(0,r.jsxs)(h.u_,{isOpen:f.isOpen,onClose:()=>w({...f,isOpen:!1}),children:["delete"!==f.key&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{title:"create"===f.key?"افزودن آگهی":"ویرایش آگهی",handleClose:()=>w({...f,isOpen:!1})}),(0,r.jsx)(h.rj,{minHeight:"286px",p:"4",gapY:"5",children:!1==!!(null==v?void 0:v.path)&&!1==!!I("localPic")?(0,r.jsx)(a.Qr,{name:"imageFile",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(s.ZP,{onDrop:e=>{B(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...i()}),(0,r.jsx)(h.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(h.zx,{size:"3",type:"button",style:{width:"fit-content"},children:(0,r.jsxs)(h.kC,{align:"center",gap:"2",children:[(0,r.jsx)(m.V1,{}),(0,r.jsx)(h.xv,{...k.p.body1,children:"ارسال تصویر"})]})})})]})}})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.xu,{width:"538px",height:"350px",position:"relative",style:{borderRadius:8,border:"1px solid ".concat(b.K.gray[3])},children:["create"===f.key&&(0,r.jsx)(h.kC,{width:"30px",height:"30px",justify:"center",align:"center",style:{cursor:"pointer",position:"absolute",backgroundColor:b.K.gray[3],borderRadius:"4px",border:"1px solid ".concat(b.K.pink[9]),zIndex:"10"},left:"0",top:"0",children:(0,r.jsx)(a.Qr,{name:"pic",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.kC,{width:"max-content",position:"relative",direction:"column",children:(0,r.jsx)(s.ZP,{onDrop:e=>{B(e,t.onChange)},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/svg+xml":[".svg"]},children:e=>{let{getRootProps:t,getInputProps:i}=e;return(0,r.jsxs)("div",{...t(),children:[(0,r.jsx)("input",{type:"file",...i()}),(0,r.jsx)(h.kC,{gap:"2",justify:"center",direction:"column",align:"center",children:(0,r.jsx)(m.rF,{})})]})}})})}})}),(0,r.jsx)(o.default,{src:I("isReset")?"".concat("https://uploader.bezanimbiroon.ir/").concat(null==v?void 0:v.path):I("localPic"),alt:"ugliglhglk",fill:!0,style:{borderRadius:8,objectFit:"fill"}})]}),(0,r.jsxs)(h.rj,{width:"100%",gap:"5",columns:"3",children:[(0,r.jsx)(a.Qr,{name:"sponsor",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.nv,{...t,label:"نام اسپانسر",placeholder:"نام اسپانسر",selectedValue:!!t.value})}}),(0,r.jsx)(a.Qr,{name:"website",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.nv,{...t,label:"سایت",placeholder:"سایت",selectedValue:!!t.value})}}),(0,r.jsx)(a.Qr,{name:"socialMedia",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.nv,{...t,label:"شبکه اجتماعی",placeholder:"شبکه اجتماعی",selectedValue:!!t.value})}})]}),(0,r.jsx)(a.Qr,{name:"alt",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.nv,{...t,label:"متن جایگزین",placeholder:"متن جایگزین",selectedValue:!!t.value})}}),(0,r.jsx)(a.Qr,{name:"description",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.Kx,{...t,label:"توضیحات تصویر",placeholder:"توضیحات تصویر",selectedValue:!!t.value,rows:6})}}),(0,r.jsx)(a.Qr,{name:"summery",control:z,render:e=>{let{field:t}=e;return(0,r.jsx)(h.Kx,{...t,label:"شرح مختصر",placeholder:"شزح مختصر",selectedValue:!!t.value,rows:6})}})]})}),(0,r.jsx)(y.Z,{submitButtonText:"ثبت و ارسال",closeButtonText:"لفو و بازگشت",onCloseButton:()=>w({...f,isOpen:!1}),isDisableSubmitBtn:!1,onSubmit:()=>{"edit"===f.key?R({id:v.id,type:"ADS",alt:I("alt"),description:I("description"),summery:I("summery"),townId:v.townId,socialMedia:I("socialMedia"),sponsor:I("sponsor"),website:I("website")}):"create"===f.key&&O({type:"ADS",description:I("description"),page:v.page,holder:v.position,alt:I("alt"),slug:I("slug"),summery:I("summery"),file:I("imageFile"),socialMedia:I("socialMedia"),sponsor:I("sponsor"),website:I("website"),townId:v.townId,provinceId:v.provincesId,cityId:v.cityId,categoryId:v.categoryId})},isLoading:"edit"===f.key?S:"create"===f.key&&P,isSubmit:!1})]}),"delete"===f.key&&(0,r.jsxs)(h.rj,{gapY:"24px",p:"5",children:[(0,r.jsxs)(h.xv,{children:["آیا از حذف آگهی ",(0,r.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:v.position})," اطمینان دارید؟"]}),(0,r.jsxs)(h.rj,{gap:"10px",columns:"2",children:[(0,r.jsx)(h.zx,{variant:"soft",size:"4",onClick:()=>D(),children:(0,r.jsx)(h.xv,{...k.p.body3,children:F?(0,r.jsx)(d.$j,{}):"بله"})}),(0,r.jsx)(h.zx,{type:"button",onClick:()=>w({...f,isOpen:!1}),variant:"solid",size:"4",children:(0,r.jsx)(h.xv,{...k.p.body3,children:"خیر"})})]})]})]})]})}},29962:function(e,t,i){var r=i(57437);i(2265);var n=i(16463),s=i(89183),a=i(7507),o=i(82336),l=i(1845),d=i(21949);t.Z=e=>{let{title:t,isNavigation:i}=e,s=(0,n.useRouter)();return(0,r.jsx)(c,{children:(0,r.jsxs)(p,{children:[(0,r.jsx)(a.xv,{...d.p.title1,style:{color:l.K.gray[11]},children:t}),i&&(0,r.jsx)(a.hU,{size:"3",variant:"surface",onClick:()=>s.back(),children:(0,r.jsx)(o.jb,{color:"#373737"})})]})})};let c=s.ZP.header.withConfig({componentId:"sc-132ec2d4-0"})(["padding:14.5px 100px 14.5px 24px;position:sticky;left:0;right:0;top:0;border-bottom:1px solid ",";background-color:",";box-shadow:",";z-index:10;"],l.K.gray[6],l.K.gray[1],l.i.shadow1),p=(0,s.ZP)(a.kC).withConfig({componentId:"sc-132ec2d4-1"})(["max-width:1920px;width:100%;display:flex;align-items:center;justify-content:space-between;margin:auto;"])},72549:function(e,t,i){var r=i(57437);i(2265);var n=i(94963),s=i(1845),a=i(21949),o=i(7507);t.Z=e=>{let{isSubmit:t=!0,closeButtonText:i,submitButtonText:l,isLoading:d,onCloseButton:c,onSubmit:p,isDisableSubmitBtn:u=!1,disabled:x=!1}=e;return(0,r.jsx)(o.kC,{height:"max-content",gap:"16px",left:"0",p:"16px",right:"0",style:{backgroundColor:s.K.gray[2],marginBlockStart:"auto",borderTop:"1px solid ".concat(s.K.gray[3]),boxShadow:s.i.shadow1,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},position:"sticky",bottom:"0px",children:(0,r.jsxs)(o.rj,{gap:"16px",columns:"2",children:[(0,r.jsx)(o.zx,{disabled:u||x,onClick:p,type:t?"submit":"button",variant:"soft",size:"3",style:{width:"fit-content",padding:"9.5px 38px"},children:d?(0,r.jsx)(n.$j,{}):(0,r.jsx)(o.xv,{...a.p.body1,children:l})}),(0,r.jsx)(o.zx,{type:"button",colorVariant:"PINK",size:"3",onClick:c,style:{width:"fit-content",padding:"9.5px 38px"},children:(0,r.jsx)(o.xv,{...a.p.body1,children:i})})]})})}},77855:function(e,t,i){var r=i(57437);i(2265);var n=i(89183),s=i(82336),a=i(1845),o=i(21949),l=i(7507);t.Z=e=>{let{handleClose:t,title:i}=e;return(0,r.jsxs)(d,{position:"sticky",top:"0",p:"8px 16px",justify:"between",style:{backgroundColor:a.K.blue[10],zIndex:"100"},align:"center",children:[(0,r.jsx)(l.xv,{...o.p.title2,style:{color:a.K.gray[1],fontWeight:700},children:i}),(0,r.jsx)(l.hU,{type:"button",onClick:t,variant:"soft",size:"2",style:{backgroundColor:a.K.blue[9],borderRadius:"12px"},children:(0,r.jsx)(s.x8,{})})]})};let d=(0,n.zo)(l.kC).withConfig({componentId:"sc-38bd6e22-0"})(["border-top-right-radius:8px;border-top-left-radius:8px;"])},31067:function(e,t,i){i.d(t,{x:function(){return d},z:function(){return c}});var r=i(16463),n=i(38472),s=i(15263),a=i(86300).Buffer;let o="".concat("bznpanelapi",":").concat("VX+kPbS#@sdD5$"),l=a.from(o).toString("base64"),d=n.Z.create({baseURL:"https://api-admin-dev.darkube.app/v1/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(l)}}),c=n.Z.create({baseURL:"https://uploader.bezanimbiroon.ir/admin/uploads/",headers:{"Content-Type":"application/json","up-auth":"Basic ".concat(l)}});c.interceptors.request.use(e=>{let t=new s.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),d.interceptors.request.use(e=>{let t=new s.Z().get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,e=>{if(e.response){let t=e.response.status;401===t?console.error("Unauthorized access - perhaps the token has expired"):403===t?console.error("Forbidden - You do not have permission to access this resource."):t>=500?(console.error("Server error - Please try again later."),(0,r.redirect)("/error")):console.error("Error: ".concat(e.response.statusText))}else e.request?(console.error("Network error - the request was made but no response was received"),(0,r.redirect)("/error")):((0,r.redirect)("/error"),console.error("Error:",e.message));return Promise.reject(e)})}}]);