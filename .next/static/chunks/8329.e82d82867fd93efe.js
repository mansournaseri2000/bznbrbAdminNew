(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8329],{88329:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return y}});var r=e(57437),o=e(70707),i=e(26761),l=e(13473),u=e(10670),c=e(77691),a=e.n(c);let s=(0,i.Au)(function({positions:n,...t},e){let r=new c.Polyline(n,t);return(0,l.O)(r,(0,u.sj)(e,{overlayContainer:r}))},function(n,t,e){t.positions!==e.positions&&n.setLatLngs(t.positions)});var f=e(55393),p=e(16429),d=e(48977),g=e(94963);e(60966);var m=e(89183),h=e(2265),v=n=>{let{locations:t}=n,e=(0,u.mE)().map;return(0,h.useEffect)(()=>{if(1===t.length){let n=t[0],r=parseFloat(String(n.lat)),o=parseFloat(String(n.lng));isNaN(r)||isNaN(o)?console.error("Invalid LatLng for single location:",{lat:r,lng:o}):e.setView([r,o],15,{animate:!0})}else if(t.length>1){let n=t.map(n=>{let t=parseFloat(String(n.lat)),e=parseFloat(String(n.lng));return isNaN(t)||isNaN(e)?(console.error("Invalid LatLng for location:",{lat:t,lng:e}),null):[t,e]}).filter(n=>null!==n);if(n.length>0)try{let t=a().latLngBounds(n);t.isValid()?e.flyToBounds(t,{animate:!0,duration:1}):console.error("Invalid bounds detected, skipping flyToBounds")}catch(n){console.error("Error calculating bounds:",n)}else console.error("No valid locations to create bounds.")}},[t,e]),null},x=e(23876),b=e(1845);delete a().Icon.Default.prototype._getIconUrl,a().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});var y=n=>{let{locations:t,center:e,isEmpty:i}=n,l=i?[]:t.map(n=>[n.lat,n.lng]);return(0,r.jsx)(r.Fragment,{children:!0===i?(0,r.jsx)(w,{center:t,zoom:15,minZoom:1,maxZoom:50,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1,style:{height:"100%",width:"100%",borderRadius:"8px",zIndex:1},children:(0,r.jsx)(o.I,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"})}):(0,r.jsxs)(w,{center:e,zoom:15,minZoom:1,maxZoom:50,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1,style:{height:"100%",width:"100%",borderRadius:"8px",zIndex:1},children:[(0,r.jsx)(o.I,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),(0,r.jsx)(s,{positions:l,color:"#0DAFFC",weight:3,opacity:.6}),t.map((n,t)=>{var e;return(0,r.jsx)(f.J,{position:[n.lat,n.lng],icon:a().divIcon({html:'\n              <div style="position: relative; display: inline-block;">\n                <img src="https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png" \n                     style="display: block;" />\n                <div style="position: absolute; top: -25px; left: 48%; transform: translateX(-50%);\n                            background-color: white; border-radius: 50%; width: 20px; height: 20px;\n                            display: flex; justify-content: center; align-items: center;\n                            font-size: 12px; font-weight: bold; color: black; border: 1px solid black;">\n                  '.concat(t+1,"\n                </div>\n              </div>"),className:"",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),children:(0,r.jsx)(p.G,{children:(0,r.jsx)(g.Q2,{style:{direction:"rtl"},children:(0,r.jsx)(x.Z,{description:null==n?void 0:n.description,imageUrl:null==n?void 0:null===(e=n.pic[0])||void 0===e?void 0:e.path,lat:null==n?void 0:n.lat,lng:null==n?void 0:n.lng,title:null==n?void 0:n.title,id:null==n?void 0:n.point_id},t)})})},t)}),(0,r.jsx)(v,{locations:t})]})})};let w=(0,m.ZP)(d.h).withConfig({componentId:"sc-7f0aedac-0"})(["position:absolute;inset:0;height:100%;box-shadow:",";border:1px solid ",";& .leaflet-popup-close-button{display:none;}& .leaflet-popup-content-wrapper{width:max-content;}"],b.i.shadow1,b.K.gray[4])},23876:function(n,t,e){"use strict";var r=e(57437),o=e(66648),i=e(16463),l=e(89183),u=e(96396),c=e(83882),a=e(1845),s=e(21949);t.Z=n=>{let{description:t,imageUrl:e,lat:l,lng:c,title:p,id:d}=n,{push:g}=(0,i.useRouter)(),m=(n,t)=>{let e="https://www.google.com/maps?q=".concat(n,",").concat(t);window.open(e,"_blank")},h=n=>{g("/place/".concat(n,"?view=common"))};return(0,r.jsxs)(u.rj,{gap:"16px",children:[(0,r.jsxs)(u.kC,{gap:"8px",align:"center",children:[(0,r.jsx)(o.default,{style:{borderRadius:"10px"},alt:"map-image",width:60,height:60,priority:!0,src:"".concat("https://uploader.darkube.app/").concat(e)}),(0,r.jsx)(u.xv,{...s.p.title2,style:{color:a.K.gray[11]},children:p})]}),(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:"".concat(t.substring(0,100),"...")},style:{color:a.K.gray[11],margin:0,direction:"rtl",textAlign:"right"}}),(0,r.jsxs)(u.kC,{align:"center",gap:"16px",children:[(0,r.jsx)(u.hU,{onClick:()=>m(l,c),style:{backgroundColor:a.K.blue[9],borderRadius:"12px",cursor:"pointer"},variant:"solid",size:"3",children:(0,r.jsx)(f,{})}),(0,r.jsx)(u.kC,{style:{flex:1},children:(0,r.jsx)(u.zx,{type:"button",onClick:()=>h(d),style:{width:"100%"},size:"3",variant:"solid",children:(0,r.jsx)(u.xv,{...s.p.body3,style:{color:a.K.blue[11]},children:"اطلاعات بیشتر"})})})]})]})};let f=(0,l.ZP)(c.W_).withConfig({componentId:"sc-749f072e-0"})(["path{fill:",";stroke:#fff;stroke-width:1.7px;scale:0.7;}"],a.K.blue[11])},60966:function(){},10670:function(n,t,e){"use strict";e.d(t,{Hb:function(){return o},UO:function(){return u},mE:function(){return c},sj:function(){return i}});var r=e(2265);function o(n){return Object.freeze({__version:1,map:n})}function i(n,t){return Object.freeze({...n,...t})}let l=(0,r.createContext)(null),u=l.Provider;function c(){let n=(0,r.useContext)(l);if(null==n)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}},13473:function(n,t,e){"use strict";e.d(t,{I:function(){return i},O:function(){return o}});var r=e(2265);function o(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function i(n,t){return null==t?function(t,e){let o=(0,r.useRef)();return o.current||(o.current=n(t,e)),o}:function(e,o){let i=(0,r.useRef)();i.current||(i.current=n(e,o));let l=(0,r.useRef)(e),{instance:u}=i.current;return(0,r.useEffect)(function(){l.current!==e&&(t(u,e,l.current),l.current=e)},[u,e,o]),i}}},26761:function(n,t,e){"use strict";e.d(t,{dW:function(){return d},SO:function(){return g},Au:function(){return m},Lf:function(){return h}});var r=e(2265),o=e(54887),i=e(10670);function l(n){return(0,r.forwardRef)(function(t,e){let{instance:o,context:l}=n(t).current;return(0,r.useImperativeHandle)(e,()=>o),null==t.children?null:r.createElement(i.UO,{value:l},t.children)})}var u=e(13473);function c(n,t){let e=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==e.current&&null!=n.attributionControl&&(null!=e.current&&n.attributionControl.removeAttribution(e.current),null!=t&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}function a(n,t){let e=(0,r.useRef)();(0,r.useEffect)(function(){return null!=t&&n.instance.on(t),e.current=t,function(){null!=e.current&&n.instance.off(e.current),e.current=null}},[n,t])}var s=e(37129);function f(n,t){(0,r.useEffect)(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){t.layerContainer?.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function p(n){return function(t){let e=(0,i.mE)(),r=n((0,s.q)(t,e),e);return c(e.map,t.attribution),a(r.current,t.eventHandlers),f(r.current,e),r}}function d(n,t){return l(p((0,u.I)(n,t)))}function g(n,t){var e,l;return e=(0,u.I)(n),l=function(n,r){let o=(0,i.mE)(),l=e((0,s.q)(n,o),o);return c(o.map,n.attribution),a(l.current,n.eventHandlers),t(l.current,o,n,r),l},(0,r.forwardRef)(function(n,t){let[e,i]=(0,r.useState)(!1),{instance:u}=l(n,i).current;(0,r.useImperativeHandle)(t,()=>u),(0,r.useEffect)(function(){e&&u.update()},[u,e,n.children]);let c=u._contentNode;return c?(0,o.createPortal)(n.children,c):null})}function m(n,t){var e;return l((e=(0,u.I)(n,t),function(n){let t=(0,i.mE)(),o=e((0,s.q)(n,t),t);return a(o.current,n.eventHandlers),f(o.current,t),function(n,t){let e=(0,r.useRef)();(0,r.useEffect)(function(){if(t.pathOptions!==e.current){let r=t.pathOptions??{};n.instance.setStyle(r),e.current=r}},[n,t])}(o.current,n),o}))}function h(n,t){var e;return e=p((0,u.I)(n,t)),(0,r.forwardRef)(function(n,t){let{instance:o}=e(n).current;return(0,r.useImperativeHandle)(t,()=>o),null})}},37129:function(n,t,e){"use strict";function r(n,t){let e=n.pane??t.pane;return e?{...n,pane:e}:n}e.d(t,{q:function(){return r}})},48977:function(n,t,e){"use strict";e.d(t,{h:function(){return u}});var r=e(10670),o=e(77691),i=e(2265);function l(){return(l=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}let u=(0,i.forwardRef)(function({bounds:n,boundsOptions:t,center:e,children:u,className:c,id:a,placeholder:s,style:f,whenReady:p,zoom:d,...g},m){let[h]=(0,i.useState)({className:c,id:a,style:f}),[v,x]=(0,i.useState)(null);(0,i.useImperativeHandle)(m,()=>v?.map??null,[v]);let b=(0,i.useCallback)(i=>{if(null!==i&&null===v){let l=new o.Map(i,g);null!=e&&null!=d?l.setView(e,d):null!=n&&l.fitBounds(n,t),null!=p&&l.whenReady(p),x((0,r.Hb)(l))}},[]);(0,i.useEffect)(()=>()=>{v?.map.remove()},[v]);let y=v?i.createElement(r.UO,{value:v},u):s??null;return i.createElement("div",l({},h,{ref:b}),y)})},55393:function(n,t,e){"use strict";e.d(t,{J:function(){return u}});var r=e(26761),o=e(13473),i=e(10670),l=e(77691);let u=(0,r.dW)(function({position:n,...t},e){let r=new l.Marker(n,t);return(0,o.O)(r,(0,i.sj)(e,{overlayContainer:r}))},function(n,t,e){t.position!==e.position&&n.setLatLng(t.position),null!=t.icon&&t.icon!==e.icon&&n.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==e.zIndexOffset&&n.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==e.opacity&&n.setOpacity(t.opacity),null!=n.dragging&&t.draggable!==e.draggable&&(!0===t.draggable?n.dragging.enable():n.dragging.disable())})},16429:function(n,t,e){"use strict";e.d(t,{G:function(){return u}});var r=e(26761),o=e(13473),i=e(77691),l=e(2265);let u=(0,r.SO)(function(n,t){let e=new i.Popup(n,t.overlayContainer);return(0,o.O)(e,t)},function(n,t,{position:e},r){(0,l.useEffect)(function(){let{instance:o}=n;function i(n){n.popup===o&&(o.update(),r(!0))}function l(n){n.popup===o&&r(!1)}return t.map.on({popupopen:i,popupclose:l}),null==t.overlayContainer?(null!=e&&o.setLatLng(e),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:i,popupclose:l}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[n,t,r,e])})},70707:function(n,t,e){"use strict";e.d(t,{I:function(){return u}});var r=e(26761),o=e(37129),i=e(13473),l=e(77691);let u=(0,r.Lf)(function({url:n,...t},e){let r=new l.TileLayer(n,(0,o.q)(t,e));return(0,i.O)(r,e)},function(n,t,e){!function(n,t,e){let{opacity:r,zIndex:o}=t;null!=r&&r!==e.opacity&&n.setOpacity(r),null!=o&&o!==e.zIndex&&n.setZIndex(o)}(n,t,e);let{url:r}=t;null!=r&&r!==e.url&&n.setUrl(r)})}}]);